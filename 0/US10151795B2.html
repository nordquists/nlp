
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US10151795B2 - Double data rate circuitry coupled to test access mechanisms, controller 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="docdb" mxw-id="PA279175988" source="national office">
<div class="abstract">A device test architecture and a reduced device test interface are provided to enable efficient testing of embedded cores and other circuits within devices. The reduced device test interface is achieved using a double data rate (DDR) signaling technique between the tester and the device. The DDR test interface allows the tester to interface to test circuits within the device, such as IEEE 1500 and/or IEEE 1149.1 test circuits, to provide high test data bandwidth to the test circuits using a minimum of test interface signals. The test architecture includes compare circuits that allow for comparison of test response data to be performed within the device. The test architecture further includes a memory for storing the results of the test response comparisons. The test architecture includes a programmable test controller to allow for various test control operations by simply inputting an instruction to the programmable test controller from the external tester. Additional features and embodiments of the device test architecture and reduced test interface are also disclosed.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES178702185">
<div class="description-paragraph" id="p-0002" num="0001">This application is a divisional of prior application Ser. No. 14/944,936, filed Nov. 18, 2015, now U.S. Pat. No. 9,678,155, issued Jun. 13, 2017;</div>
<div class="description-paragraph" id="p-0003" num="0002">Which was a divisional of prior application Ser. No. 14/612,786, filed Feb. 2, 2015, now U.S. Pat. No. 9,222,975, granted Dec. 29, 2015;</div>
<div class="description-paragraph" id="p-0004" num="0003">Which was a divisional of prior application Ser. No. 13/889,004, filed May 7, 2013, now U.S. Pat. No. 8,977,920, granted Mar. 10, 2015;</div>
<div class="description-paragraph" id="p-0005" num="0004">Which was a divisional of prior application Ser. No. 13/678,899, filed Nov. 16, 2012, now U.S. Pat. No. 8,473,795, granted Jun. 25, 2013;</div>
<div class="description-paragraph" id="p-0006" num="0005">Which was a divisional of prior application Ser. No. 13/449,772, filed Apr. 18, 2012, now abandoned;</div>
<div class="description-paragraph" id="p-0007" num="0006">Which was a divisional of prior application Ser. No. 13/042,900, filed Mar. 8, 2011, now abandoned;</div>
<div class="description-paragraph" id="p-0008" num="0007">which was a divisional of prior application Ser. No. 12/821,366, filed Jun. 23, 2010, now U.S. Pat. No. 7,925,946, granted Apr. 12, 2011;</div>
<div class="description-paragraph" id="p-0009" num="0008">which was a divisional of prior application Ser. No. 12/410,584, filed Mar. 25, 2009, now U.S. Pat. No. 7,770,083, granted on Oct. 14, 2010;</div>
<div class="description-paragraph" id="p-0010" num="0009">which was a divisional of prior application Ser. No. 11/774,269, filed Jul. 6, 2007, now U.S. Pat. No. 7,529,996, granted on May 5, 2009;</div>
<div class="description-paragraph" id="p-0011" num="0010">which claims priority from Provisional Application No. 60/821,315, filed Aug. 3, 2006.</div>
<heading id="h-0001">FIELD OF THE INVENTION</heading>
<heading id="h-0002">Description of Related Art</heading>
<div class="description-paragraph" id="p-0012" num="0011"> <figref idrefs="DRAWINGS">FIG. 1</figref> illustrates the test wrapper architecture <b>102</b> defined in IEEE standard 1500. The wrapper architecture is used to perform internal testing of a core circuit <b>104</b> embedded within and integrated circuit. The wrapper architecture is also used to perform external testing of the interconnects to other embedded core circuits connected to the embedded core circuit <b>104</b>. The wrapper architecture is very similar to the boundary scan test architecture defined in IEEE 1149.1, in that it includes: (1) a wrapper instruction register (WIR) <b>106</b> for storing test instructions, (2) a wrapper bypass register (WBY) <b>108</b> for providing an abbreviated scan path through the wrapper, and a wrapper boundary register (WBR) <b>110</b> for controlling the core outputs, controlling the core inputs, observing the core outputs, and observing the core inputs. When the core is in normal mode, the external core inputs <b>116</b> are coupled to the internal core inputs <b>118</b> via the WBR, and the internal core outputs <b>122</b> are coupled to the external core outputs <b>120</b> via the WBR. When the core is in external test mode, the external core inputs <b>116</b> can be observed by the WBR and external core outputs <b>120</b> can be controlled by the WBR. When the core is in internal test mode, the internal core inputs <b>118</b> can be controlled by the WBR and the internal core outputs <b>122</b> can be observed by the WBR.</div>
<div class="description-paragraph" id="p-0013" num="0012">The wrapper architecture has a wrapper serial input (WSI) <b>126</b> and a wrapper serial output (WSO) <b>128</b>. WSI and WSO are similar to the TDI and TDO signals of the 1149.1 test architecture and are used to input instruction and data to the architecture. The wrapper architecture has control signals <b>124</b> consisting of: a wrapper clock (WRCK) for timing instruction and data scan operations, a capture wrapper signal (CaptureWR) for capturing data into the WIR, WBR, WBY, or data register scan paths <b>112</b> of the core circuit, a shift wrapper signal (ShiftWR) for controlling the shifting of the WIR, WBR, WBY, or data register scan paths, an update wrapper signal (UpdateWR) for updating data from the WIR, WBR, or data register scan paths, an optional transfer data register signal (TransferDR) for performing at speed tests using the WBR, a select wrapper instruction register signal (SelectWIR) for selecting either the WIR, or the WBR, WBY, or a selected data register scan path for serial access via WSI and WSO, and a wrapper reset signal (WRST) to reset the WIR and other circuits in the wrapper. These control signals <b>124</b> are input to a wrapper control interface <b>114</b>. In response to these control signals, the wrapper control interface outputs instruction register (IR) control to operate the instruction register or data register (DR) control to operate the WBR and/or data register scan paths. The IEEE standard 1500 test wrapper architecture of <figref idrefs="DRAWINGS">FIG. 1</figref> is well known.</div>
<div class="description-paragraph" id="p-0014" num="0013"> <figref idrefs="DRAWINGS">FIG. 2</figref> illustrates one example implementation of a wrapper control interface <b>114</b> for receiving the control signals <b>124</b>. As seen the WRCK, ShiftWR, CaptureWR, UpdateWR, and SelectWIR control signals are input to a selector circuit <b>202</b> which is controlled by the SelectWIR signal. When the SelectWIR signal input to selector circuit <b>202</b> is low, the WRCK drives ClockDR, ShiftWR drives ShiftDR, CaptureWR drives CaptureDR, and UpdateWR drives UpdateDR. The ClockDR, ShiftDR, CaptureDR, and UpdateDR signals form the DR control bus that controls the WBR <b>110</b> and/or data register scan paths <b>112</b> of <figref idrefs="DRAWINGS">FIG. 1</figref>. When the SelectWIR signal input to selector circuit <b>202</b> is high, the WRCK drives ClockIR, ShiftWR drives ShiftIR, CaptureWR drives CaptureIR, and UpdateWR drives UpdateIR. The ClockIR, ShiftIR, CaptureIR, and UpdateIR signals form the IR control bus that controls the WIR <b>106</b> of <figref idrefs="DRAWINGS">FIG. 1</figref>. The WRST control signal drives a Reset signal that is used to initialize the WIR and other circuits within the test architecture. The optional TransferDR control signal, if used, passes through the wrapper control interface to the WBR.</div>
<div class="description-paragraph" id="p-0015" num="0014"> <figref idrefs="DRAWINGS">FIG. 3</figref> illustrates a simplified view of the test wrapper architecture <b>102</b> of <figref idrefs="DRAWINGS">FIG. 1</figref> that includes only the core data register scan paths <b>112</b> and wrapper control interface <b>114</b>. This wrapper test mode is enabled by loading the WIR with a core test instruction. As seen, and as described in the IEEE 1500 standard, the serial input of each data register scan path <b>112</b> may be coupled to a wrapper parallel input (WPI) signal <b>302</b> and the serial data output of each data register scan path <b>112</b> may be coupled to a wrapper parallel output (WPO) signal <b>304</b>. In this arrangement, parallel scan testing is achieved by inputting stimulus to each data register scan path via a WPI input and outputting response data from each data register scan path via a WPO output. The control inputs <b>124</b> to the wrapper control interface <b>114</b> control the capture and shift operations of the parallel data register scan paths <b>112</b>. This type of parallel scan testing is used to test combinational logic and is well known.</div>
<div class="description-paragraph" id="p-0016" num="0015"> <figref idrefs="DRAWINGS">FIG. 4</figref> illustrates a simplified view of the test wrapper architecture <b>102</b> of <figref idrefs="DRAWINGS">FIG. 1</figref> that includes only the core data register scan paths <b>112</b>, WBR input sections <b>402</b>, WBR output sections <b>404</b>, and wrapper control interface <b>114</b>. This wrapper test mode is enabled by loading the WIR with a core test instruction. As seen in <figref idrefs="DRAWINGS">FIG. 4</figref>, and as described in the IEEE 1500 standard, the WBR <b>110</b> of <figref idrefs="DRAWINGS">FIG. 1</figref> may be partitioned into smaller length WBR sections <b>402</b> and <b>404</b>. The WBR sections can be placed in series with a core data register <b>112</b> to form a scan path <b>406</b> that includes both WBR scan cells and core data register scan cells. As with the data register scan paths of <figref idrefs="DRAWINGS">FIG. 3</figref>, the serial input of each scan path <b>406</b> may be coupled to a WPI signal <b>302</b> and the serial data output of each scan path <b>406</b> may be coupled to a WPO signal <b>304</b>. In this arrangement, parallel scan testing is achieved by inputting stimulus to each scan path <b>406</b> via a WPI input and outputting response data from each scan path <b>406</b> via a WPO output. The control inputs <b>124</b> to the wrapper control interface <b>114</b> control the capture and shift operations of the parallel scan paths <b>406</b>. During the parallel scan test, external inputs <b>116</b> and internal outputs <b>122</b> to the WBR sections are observable and internal inputs <b>118</b> and external outputs <b>120</b> from the WBR sections are controllable. Being able to control and observe the core boundary input and output signals during parallel scan testing of the core improves the ability to fully test the core. This type of parallel scan testing is similar to the one described in <figref idrefs="DRAWINGS">FIG. 3</figref> with the exception that WBR sections are included in series with the data register scan paths <b>112</b>.</div>
<div class="description-paragraph" id="p-0017" num="0016"> <figref idrefs="DRAWINGS">FIG. 5</figref> illustrates a device under test (DUT) <b>502</b>, such as a packaged integrated circuit, a die singulated from a wafer, or die on a wafer, coupled to a tester <b>504</b> for testing. The DUT contains a number of embedded cores <b>1</b>-N, each including the IEEE 1500 wrapper architecture of <figref idrefs="DRAWINGS">FIG. 1</figref>. As seen, the tester has output circuitry <b>506</b> to drive stimulus data to the WPIs <b>510</b> of each core wrapper, input circuitry <b>508</b> to receive response data from the WPOs <b>512</b> of each core wrapper, control outputs <b>514</b> to drive the control signal inputs <b>124</b> of each core wrapper, an output <b>516</b> to drive the WSI input <b>126</b> of the DUT, and an input <b>518</b> to receive WSO output <b>128</b> from the DUT. As seen, the core wrappers are daisychained between the DUT's WSI input <b>126</b> and WSO output <b>128</b>. While not shown, the DUT will also have a test enable input from the tester that is used to switch the DUT from its functional architectural configuration into the test architectural configuration shown in <figref idrefs="DRAWINGS">FIG. 5</figref>. The tester starts the test by outputting control to control bus <b>124</b> to scan a test instruction into the WIRs of each core wrapper via WSI and WSO. The test instructions, in this example, configure each core wrapper for parallel scan testing via WPI and WPO as described in <figref idrefs="DRAWINGS">FIG. 3 or 4</figref>. During the test, the tester outputs control to control bus <b>124</b> to cause the core wrappers to perform parallel scan testing by inputting WPI stimulus data from output circuits <b>506</b> and outputting WPO response data to input circuits <b>508</b>, according to conventional capture and shift scan operations. As seen, testing all cores at the same time requires the tester to have an output circuit <b>506</b> and an input circuit <b>508</b> for each core wrapper. Each tester output circuit <b>506</b> typically includes a stimulus data memory to drive stimulus data to the WPI of each core wrapper. Each tester input circuit <b>508</b> typically includes a mask data memory, an expected data memory, and a compare circuit to compare unmasked expected data with the response data from WPO. With conventional testers, it is possible to use a single output circuit <b>506</b> to simultaneously broadcast WPI stimulus data to all cores within a DUT. However, conventional testers will require a separate input circuit <b>508</b> to receive the response data from each core to enable detection of core specific fail response data. Testers, like tester <b>504</b>, that include a sufficient number of output <b>506</b> and input <b>508</b> circuits for testing large numbers of embedded cores as described above are very costly. The tester cost problem worsens significantly when multiple DUTs <b>502</b> need to be tested simultaneously, such as at wafer level testing where multiple die (DUTs) need to be contacted and simultaneously tested to reduce semiconductor manufacturing cost.</div>
<div class="description-paragraph" id="p-0018" num="0017"> <figref idrefs="DRAWINGS">FIG. 6</figref> illustrates a DUT <b>602</b> coupled to a tester <b>604</b> for testing. The DUT contains a number of embedded cores <b>1</b>-N, each including the IEEE 1500 wrapper architecture of <figref idrefs="DRAWINGS">FIG. 1</figref>. The DUT of <figref idrefs="DRAWINGS">FIG. 6</figref> differs from the DUT of <figref idrefs="DRAWINGS">FIG. 5</figref> in that it includes a user defined test access mechanism (TAM). User defined TAMs are mentioned in IEEE standard 1500, but the standard does not provide standardization of such circuits. As the name implies the user defines the operation and function of TAM circuits. In this example, a user defined TAM is shown that provides an interface between a selected core wrapper's WPI and WPO buses and the tester's output circuit <b>506</b> and input circuit <b>508</b> respectively. This type of TAM is known in the art. Once an interface is made between the tester and a first core wrapper via the TAM, the first core is tested using the parallel scan approach described in <figref idrefs="DRAWINGS">FIG. 5</figref>. When the first core has been tested, the TAM interfaces to a second core wrapper to similarly test the second core. This core wrapper selection and core test process repeats until all the embedded cores have been tested. As seen, since only one core is tested at a time, the tester only requires one output circuit <b>506</b> and one input circuit <b>508</b>. Thus the tester cost is reduced, but the test time of the DUT increases over that of <figref idrefs="DRAWINGS">FIG. 5</figref> since the cores are tested one at a time. As with the tester <b>504</b> of <figref idrefs="DRAWINGS">FIG. 5</figref>, the tester <b>604</b> cost increases when multiple DUTs <b>602</b> need to be tested simultaneously (i.e. simultaneous testing of multiple die on wafer, singulated die in fixture, or packaged die in fixture) since the tester would need to have additional output <b>506</b> and input <b>508</b> circuits for each DUT being contacted and simultaneously tested. As mentioned in regard to <figref idrefs="DRAWINGS">FIG. 5</figref>, conventional testers may use a single output circuit <b>506</b> for each DUT, but they will require a separate input circuit <b>508</b> for each DUT.</div>
<heading id="h-0003">SUMMARY OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0019" num="0018">The present invention provides a device test architecture, interface, and method for enabling efficient testing of large numbers of devices simultaneously. The device test architecture internally evaluates the test response using a compare circuit within the device, which eliminates the need to output the device test response to the tester. The inventions ability to evaluate test response inside the devices simplifies testers to only having to input test data and control to the device. The device test architecture includes a programmable test controller that can be programmed by an instruction to perform any number of test operations without having to increase the number of signals on the test interface.</div>
<description-of-drawings>
<heading id="h-0004">DESCRIPTION OF THE VIEWS OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0020" num="0019"> <figref idrefs="DRAWINGS">FIG. 1</figref> illustrates the prior art architecture of the IEEE 1500 Core Wrapper standard.</div>
<div class="description-paragraph" id="p-0021" num="0020"> <figref idrefs="DRAWINGS">FIG. 2</figref> illustrates an example of the control interface to the IEEE 1500 standard.</div>
<div class="description-paragraph" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIG. 3</figref> illustrates a first parallel scan path arrangement using the IEEE 1500 standard.</div>
<div class="description-paragraph" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 4</figref> illustrates second parallel scan path arrangement using the IEEE 1500 standard.</div>
<div class="description-paragraph" id="p-0024" num="0023"> <figref idrefs="DRAWINGS">FIG. 5</figref> illustrates a tester connected to a device containing cores with IEEE 1500 wrappers.</div>
<div class="description-paragraph" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIG. 6</figref> illustrates a tester connected to a user defined test access mechanism (TAM) that provides access to cores with IEEE 1500 wrappers.</div>
<div class="description-paragraph" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIG. 7</figref> illustrates a tester connected to a device that contain the architecture of the present invention.</div>
<div class="description-paragraph" id="p-0027" num="0026"> <figref idrefs="DRAWINGS">FIGS. 8A and 8B</figref> illustrate example implementations of the TAM selector of the present invention.</div>
<div class="description-paragraph" id="p-0028" num="0027"> <figref idrefs="DRAWINGS">FIG. 9</figref> illustrates an example implementation of the Scan Router of the present invention.</div>
<div class="description-paragraph" id="p-0029" num="0028"> <figref idrefs="DRAWINGS">FIG. 10</figref> illustrates a TAM of the present invention interfaced to a TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0030" num="0029"> <figref idrefs="DRAWINGS">FIG. 11</figref> illustrates the interface between a core wrapper and the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0031" num="0030"> <figref idrefs="DRAWINGS">FIG. 12</figref> illustrates a compare circuit of the present invention interfaced to a TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0032" num="0031"> <figref idrefs="DRAWINGS">FIG. 13</figref> illustrates a first example implementation of the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0033" num="0032"> <figref idrefs="DRAWINGS">FIGS. 14A-14F</figref> illustrate the operation of the first TAM controller in response to TAM controller instructions according to the present invention.</div>
<div class="description-paragraph" id="p-0034" num="0033"> <figref idrefs="DRAWINGS">FIG. 15</figref> illustrates a second example implementation of the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0035" num="0034"> <figref idrefs="DRAWINGS">FIGS. 16A-16F</figref> illustrate the operation of the second TAM controller in response to TAM controller instructions according to the present invention.</div>
<div class="description-paragraph" id="p-0036" num="0035"> <figref idrefs="DRAWINGS">FIG. 17</figref> illustrates the timing of selecting a TAM controller, instructing a TAM controller, and executing a wrapper instruction scan operation using the TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0037" num="0036"> <figref idrefs="DRAWINGS">FIG. 18</figref> illustrates an alternate timing of selecting a TAM controller, instructing a TAM controller, and executing a wrapper instruction scan operation using the TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0038" num="0037"> <figref idrefs="DRAWINGS">FIG. 19</figref> illustrates detail timing of performing a wrapper instruction scan operation using the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0039" num="0038"> <figref idrefs="DRAWINGS">FIG. 20</figref> illustrates detail timing of performing a wrapper boundary register scan operation using the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0040" num="0039"> <figref idrefs="DRAWINGS">FIG. 21</figref> illustrates detail timing of scanning fail data out of a TAM using the TAM according to the present invention</div>
<div class="description-paragraph" id="p-0041" num="0040"> <figref idrefs="DRAWINGS">FIG. 21A</figref> illustrates using No-Op Mode patterns during shift operations.</div>
<div class="description-paragraph" id="p-0042" num="0041"> <figref idrefs="DRAWINGS">FIG. 22</figref> illustrates detail timing of performing a first parallel scan test operation using a TAM and TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0043" num="0042"> <figref idrefs="DRAWINGS">FIG. 23</figref> illustrates detail timing of performing a second parallel scan test operation using a TAM and TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0044" num="0043"> <figref idrefs="DRAWINGS">FIG. 24</figref> illustrates an alternate TAM of the present invention interfaced to an alternate TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0045" num="0044"> <figref idrefs="DRAWINGS">FIG. 25</figref> illustrates detail timing of performing a first parallel scan test operation using the alternate TAM and TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0046" num="0045"> <figref idrefs="DRAWINGS">FIG. 26</figref> illustrates detail timing of performing a second parallel scan test operation using the alternate TAM and TAM controller according to the present invention.</div>
<div class="description-paragraph" id="p-0047" num="0046"> <figref idrefs="DRAWINGS">FIG. 27</figref> illustrates a third example implementation of the TAM controller of the present invention.</div>
<div class="description-paragraph" id="p-0048" num="0047"> <figref idrefs="DRAWINGS">FIG. 28</figref> illustrates a TAP circuit interfaced to the TAM controller of <figref idrefs="DRAWINGS">FIG. 27</figref> according to the present invention.</div>
<div class="description-paragraph" id="p-0049" num="0048"> <figref idrefs="DRAWINGS">FIG. 29</figref> illustrates a device containing the architecture of the present invention interfaced to a controller for test, debug, trace, and emulation operations.</div>
<div class="description-paragraph" id="p-0050" num="0049"> <figref idrefs="DRAWINGS">FIG. 30</figref> illustrates a device containing a single TAM controller architecture of the present invention interfaced to a tester.</div>
<div class="description-paragraph" id="p-0051" num="0050"> <figref idrefs="DRAWINGS">FIG. 31</figref> illustrates an example implementation of the TAM controller of <figref idrefs="DRAWINGS">FIG. 30</figref>.</div>
<div class="description-paragraph" id="p-0052" num="0051"> <figref idrefs="DRAWINGS">FIG. 32</figref> illustrate a device containing an alternate single TAM controller architecture of the present invention interfaced to a tester.</div>
<div class="description-paragraph" id="p-0053" num="0052"> <figref idrefs="DRAWINGS">FIG. 33</figref> illustrates an example implementation of the TAM controller of <figref idrefs="DRAWINGS">FIG. 32</figref>.</div>
<div class="description-paragraph" id="p-0054" num="0053"> <figref idrefs="DRAWINGS">FIG. 34</figref> illustrates the interface between the TAM controller, TAM, and core of <figref idrefs="DRAWINGS">FIG. 32</figref> according to the present invention.</div>
<div class="description-paragraph" id="p-0055" num="0054"> <figref idrefs="DRAWINGS">FIG. 35</figref> illustrates a test arrangement between a tester and a plurality of devices.</div>
<div class="description-paragraph" id="p-0056" num="0055"> <figref idrefs="DRAWINGS">FIG. 36</figref> illustrates a test arrangement between a tester and a plurality of strings of devices.</div>
<div class="description-paragraph" id="p-0057" num="0056"> <figref idrefs="DRAWINGS">FIG. 37</figref> illustrates a TAM and TAM controller of the present invention interfaced to a serial input bus from a tester.</div>
<div class="description-paragraph" id="p-0058" num="0057"> <figref idrefs="DRAWINGS">FIG. 38</figref> illustrates the TAM's SDM, EDM, MDM, the TAM controller's TIR, and the TAM Selector's data register interfaced to a single serial input bus according to the present invention.</div>
<div class="description-paragraph" id="p-0059" num="0058"> <figref idrefs="DRAWINGS">FIG. 39</figref> illustrates the TAM's SDM, EDM, MDM, the TAM controller's TIR, and the TAM Selector's data register interfaced to three separate serial input buses according to the present invention.</div>
<div class="description-paragraph" id="p-0060" num="0059"> <figref idrefs="DRAWINGS">FIG. 40</figref> illustrates a TAM and system TAM controller of the present invention interfaced to a serial input bus from a tester.</div>
<div class="description-paragraph" id="p-0061" num="0060"> <figref idrefs="DRAWINGS">FIG. 41</figref> illustrates a TAM and TAM controller of the present invention selectively interfaced to either a serial or parallel input bus from a tester.</div>
<div class="description-paragraph" id="p-0062" num="0061"> <figref idrefs="DRAWINGS">FIG. 42</figref> illustrates an example design for a selectable serial or parallel input SDM, EDM, or MDM circuit.</div>
<div class="description-paragraph" id="p-0063" num="0062"> <figref idrefs="DRAWINGS">FIG. 43</figref> illustrates an example design for a selectable serial or parallel input TIR circuit.</div>
<div class="description-paragraph" id="p-0064" num="0063"> <figref idrefs="DRAWINGS">FIG. 44</figref> illustrates an example design for a selectable serial or parallel input TAM Selector data register circuit.</div>
<div class="description-paragraph" id="p-0065" num="0064"> <figref idrefs="DRAWINGS">FIG. 45</figref> illustrates a TAM and system TAM controller of the present invention selectively interfaced to either a serial or parallel input bus from a tester.</div>
<div class="description-paragraph" id="p-0066" num="0065"> <figref idrefs="DRAWINGS">FIG. 46</figref> illustrates TAMS and system TAM controller of the present invention interfaced to a tester using a double data rate (DDR) input circuit.</div>
<div class="description-paragraph" id="p-0067" num="0066"> <figref idrefs="DRAWINGS">FIG. 47</figref> illustrates an example design for the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 46</figref>.</div>
<div class="description-paragraph" id="p-0068" num="0067"> <figref idrefs="DRAWINGS">FIG. 48</figref> illustrates a TAM Selector, TAM controllers and TAMS of the present invention interfaced to a tester using a double data rate (DDR) input circuit.</div>
<div class="description-paragraph" id="p-0069" num="0068"> <figref idrefs="DRAWINGS">FIG. 49</figref> illustrates an example design for the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 48</figref> </div>
<div class="description-paragraph" id="p-0070" num="0069"> <figref idrefs="DRAWINGS">FIG. 50</figref> illustrates a test arrangement between a tester and a plurality of devices using a double data rate (DDR) test interface.</div>
<div class="description-paragraph" id="p-0071" num="0070"> <figref idrefs="DRAWINGS">FIG. 51</figref> illustrates a test arrangement between a tester and a plurality of strings of devices using a double data rate (DDR) test interface.</div>
</description-of-drawings>
<heading id="h-0005">DETAILED DESCRIPTION</heading>
<div class="description-paragraph" id="p-0072" num="0071"> <figref idrefs="DRAWINGS">FIG. 7</figref> illustrates a preferred embodiment of the testing method, testing apparatus, and testing system as disclosed in the present invention. The embodiment includes a DUT <b>702</b> test architecture, a DUT tester <b>712</b>, and a DUT to tester interface <b>714</b> including an input bus <b>720</b>, a control bus <b>722</b>, a scan input <b>724</b> and a scan output <b>726</b>. While not shown and as mentioned previously in regard to <figref idrefs="DRAWINGS">FIG. 5</figref>, the DUT will also have a test enable input from the tester that is used to switch the DUT from its functional architectural configuration into the test architectural configuration shown in <figref idrefs="DRAWINGS">FIG. 7</figref>. The DUT test architecture includes a TAM <b>704</b> for each embedded core <b>708</b>, a TAM controller <b>706</b> for each embedded core <b>708</b>, a TAM selector <b>710</b> for selecting an embedded core's TAM <b>704</b> and TAM controller <b>706</b>, and a scan router <b>744</b> for routing the flow of serial data between tester <b>712</b> and various TAM controllers <b>706</b>. Each embedded core <b>708</b> includes an IEEE 1500 wrapper architecture <b>102</b> and interface as shown in <figref idrefs="DRAWINGS">FIG. 1</figref>. The embedded cores <b>708</b> could be the same or different cores types. Core <b>708</b> types may include but are not limited to digital signal processing cores, microprocessor cores, and mixed signal cores. The input bus <b>720</b> from the tester is input to the TAMs <b>704</b>, the TAM controllers <b>706</b>, and the TAM selector <b>710</b>. The control bus <b>722</b> from the tester is input to the TAM controllers <b>706</b> and the TAM selector <b>710</b>. The scan input <b>724</b> from the tester is input to the scan router <b>744</b> and the scan output <b>726</b> from the scan router is input to the tester. The TAMs <b>704</b> input WPI signals to the cores <b>708</b> and receive WPO signals from the cores <b>708</b>. The TAM controllers <b>706</b> are coupled to the TAMs <b>704</b> via bus <b>730</b>, to the core wrappers via bus <b>728</b>, and to the scan router <b>744</b> via scan out (<b>50</b>) <b>732</b> and scan in (SI) <b>734</b> signals. The TAM selector is coupled to each TAM controller via select signals <b>736</b>, to the scan router via control bus <b>738</b>, and to any other required circuits via bus <b>740</b>.</div>
<div class="description-paragraph" id="p-0073" num="0072">As seen, the only output from the DUT to the tester is the scan output <b>726</b>, all other tester interface signals <b>720</b>, <b>722</b>, and <b>724</b> are inputs to the DUT. Each TAM <b>704</b> includes a stimulus data memory <b>742</b> for inputting WPI stimulus data to each core wrapper. Each TAM <b>704</b> includes a compare circuit <b>716</b> that includes a mask data memory <b>746</b>, an expected data memory <b>748</b>, and a circuit <b>750</b> for comparing WPO response data from each wrapper to unmasked expected data. Since each TAM includes compare circuit <b>716</b>, the core wrapper's WPO response data does not have to be sent to the tester, rather the WPO response data is compared within the TAMS using compare circuit <b>716</b>. The tester has an input circuit <b>718</b> that drives the input bus <b>720</b> to the DUT. The input circuit <b>718</b> is used to input mask and expected data to the mask <b>746</b> and expected <b>748</b> data memories of compare circuit <b>716</b>, stimulus data to stimulus data memory <b>742</b>, and TAM selection data to TAM selector <b>710</b>. The tester also has circuitry for outputting control on bus <b>722</b>, circuitry for outputting serial data on scan in <b>724</b>, and circuitry for inputting serial data from scan out <b>726</b>.</div>
<div class="description-paragraph" id="p-0074" num="0073"> <figref idrefs="DRAWINGS">FIG. 8A</figref> illustrates a first example implementation of the TAM selector <b>710</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. The TAM selector <b>710</b> includes a data register <b>806</b> containing a number of bit positions. The data register has data inputs coupled to input bus <b>720</b>, a SelectTAM signal <b>802</b> from control bus <b>722</b>, a clock signal <b>804</b> from control bus <b>722</b>, and data outputs for outputting the select signals <b>736</b>, the scan router control bus <b>738</b>, and the other control bus <b>740</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. If the SelectTAM signal <b>802</b> is active, data on the input bus <b>720</b> is written into the data register <b>806</b> by the clock signal <b>804</b>. If the SelectTAM signal is inactive, data on the input bus <b>720</b> is not written into the data register. The data written into the data register is output on the select signals <b>736</b> to select one or more of the TAM controllers <b>706</b>, output on the scan router control bus <b>738</b> to select how serial data is routed through the scan router <b>744</b>, and output on the other control bus <b>740</b> to control any other circuits that may be present in the DUT architecture of <figref idrefs="DRAWINGS">FIG. 7</figref> and need to be controlled by the TAM selector <b>710</b>.</div>
<div class="description-paragraph" id="p-0075" num="0074"> <figref idrefs="DRAWINGS">FIG. 8B</figref> illustrates a second example implementation of the TAM selector <b>710</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. The TAM selector <b>710</b> includes a data register <b>808</b> containing a number of bit positions. The data register has data inputs coupled to input bus <b>720</b>, a SelectTAM signal <b>802</b> from control bus <b>722</b>, a clock signal <b>804</b> from control bus <b>722</b>, and data outputs coupled to a decode circuit <b>810</b>. The decode circuit <b>810</b> has data inputs from the data register and data outputs for outputting the select signals <b>736</b>, the scan router control bus <b>738</b>, and the other control bus <b>740</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. If the SelectTAM signal <b>802</b> is active, data on the input bus <b>720</b> is written into the data register <b>806</b> by the clock signal <b>804</b>. If the SelectTAM signal is inactive, data on the input bus <b>720</b> is not written into the data register. The data written into the data register is output to the decode circuit <b>810</b> where it is decoded and output on the select signals <b>736</b> to select one or more of the TAM controllers <b>706</b>, output on the scan router control bus <b>738</b> to select how serial data is routed through the scan router <b>744</b>, and output on the other control bus <b>740</b> to control any other circuits that may be present in the DUT architecture of <figref idrefs="DRAWINGS">FIG. 7</figref> and need to be controlled by the TAM selector <b>710</b>. Since the TAM selector of <figref idrefs="DRAWINGS">FIG. 8B</figref> uses a decode circuit <b>810</b>, the data register <b>808</b> may be shorter in bit width than the data register <b>806</b> of <figref idrefs="DRAWINGS">FIG. 8A</figref>. The use of the TAM selector of <figref idrefs="DRAWINGS">FIG. 8B</figref> may be necessary instead of the TAM selector of <figref idrefs="DRAWINGS">FIG. 8A</figref> if the number of bits required to control the select signals <b>736</b>, the scan router control bus signals <b>738</b>, and the other control bus signals <b>740</b> exceed the bit width of the input bus <b>720</b>. For example, using the decode circuit <b>810</b>, an <b>8</b> bit wide input bus <b>720</b> to the TAM selector of <figref idrefs="DRAWINGS">FIG. 8B</figref> could be used to control a <b>16</b> bit wide select and control bus output from the TAM selector.</div>
<div class="description-paragraph" id="p-0076" num="0075"> <figref idrefs="DRAWINGS">FIG. 9</figref> illustrates an example implementation of the scan router <b>744</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. As mentioned, the scan router is a circuit that routes the flow of serial data between the tester <b>712</b> and TAM controllers <b>706</b>. The scan router has inputs for receiving the TAM selector's control bus <b>738</b>, the tester's scan in signal <b>724</b>, and the TAM controllers scan out signals <b>732</b>. The scan router has outputs for outputting to the testers scan out signal <b>726</b> and the TAM controllers scan in signals <b>734</b>. As seen in one detailed example of a scan router circuit <b>900</b>, the control bus <b>738</b> is used to control multiplexers <b>902</b> and <b>904</b>. In a first multiplexer control setting, the scan input signal <b>724</b> from the tester can be input to the scan input signal <b>734</b> of TAM controller <b>1</b> and the scan output signal <b>732</b> of TAM controller <b>1</b> can be output to the tester scan out signal <b>726</b> via multiplexer <b>904</b>. This first control setting is used to allow the tester to serially access TAM controller <b>1</b>. In a second multiplexer control setting, the scan input signal <b>724</b> from the tester can be input to the scan input signal <b>734</b> of TAM controller N via multiplexer <b>902</b> and the scan output signal <b>732</b> of TAM controller N can be output to the tester scan out signal <b>726</b> via multiplexer <b>904</b>. This second control setting is used to allow the tester to serially access TAM controller N. In a third multiplexer control setting, the scan input signal <b>724</b> from the tester can be input to the scan input signal <b>734</b> of TAM controller <b>1</b>, the scan output signal <b>732</b> of TAM controller <b>1</b> can be input to the scan input signal <b>734</b> of TAM controller N via multiplexer <b>902</b>, and the scan output signal <b>732</b> of TAM controller N can be input to the tester scan out signal <b>726</b> via multiplexer <b>904</b>. This third control setting is used to allow the tester to serially access both TAM controller <b>1</b> and TAM controller N. During a test that involves only one core, the tester will typically only select the TAM controller of that core for serial access to abbreviate the length of the serial scan path. An example of this type of testing is when one core is being tested via the WPI and WPO buses between the core <b>708</b> and the TAM <b>705</b>. During a test that involves multiple cores, the tester will typically select all the TAM controllers of the cores involved with the test. An example of this type of testing is when the functional interconnects between multiple cores are being tested using an external test instruction that uses the wrapper boundary scan register (WBR) <b>110</b> as described in the IEEE 1500 standard. While the scan router example <b>900</b> only shows connections to two TAM controllers <b>706</b>, any number of TAM controllers may be connected to the scan router to be accessed individually or in any desired combination.</div>
<div class="description-paragraph" id="p-0077" num="0076"> <figref idrefs="DRAWINGS">FIG. 10</figref> illustrates a more detailed view of the TAM <b>704</b> and the interconnects between the TAM <b>704</b> and the TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. As mentioned in regard to <figref idrefs="DRAWINGS">FIG. 7</figref>, the TAM includes a stimulus data memory (SDM) <b>742</b>, an expected data memory (EDM) <b>748</b>, a mask data memory (MDM) <b>146</b>, and a compare circuit <b>750</b>, referred to in <figref idrefs="DRAWINGS">FIG. 10</figref> as “Comparator &amp; Fail Buffer”, for comparing WPO response data against unmasked expected data from EDM <b>748</b>. The SDM <b>742</b>, EDM <b>748</b>, and MDM <b>746</b> are each coupled to the input bus <b>720</b> from the tester for inputting data. The SDM receives a stimulus data clock (SDC) <b>1002</b> from the TAM controller, the EDM receives an expected data clock (EDC) <b>1004</b> from the TAM controller, and the MDM <b>746</b> receives a mask data clock (MDC) <b>1006</b> from the TAM controller. The SDM inputs stimulus data to the wrapper WPI inputs, the EDM inputs expected data to compare circuit <b>750</b>, and the MDM inputs mask data to the compare circuit <b>750</b>. The compare circuit <b>750</b> inputs response data from the wrapper WPO outputs. The core wrapper's WSI input <b>126</b> is driven by a WSI signal output from the TAM controller, the core wrapper's control bus <b>124</b> is driven by a control bus output from the TAM controller, and the core wrapper's WSO output <b>128</b> is driven into to a WSO signal input to the TAM controller. The core wrapper interface signals <b>126</b>, <b>124</b>, and <b>128</b> form bus <b>728</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. <figref idrefs="DRAWINGS">FIG. 11</figref> shows the IEEE 1500 control signals of bus <b>124</b> between the core wrapper and TAM controller in more detail. The compare circuit <b>750</b> includes a fail buffer which stores failing comparison data. To allow the tester to read failing comparison data from the fail buffer, the compare circuit <b>750</b> includes a serial interface to the TAM controller including a serial input (SO) <b>1008</b>, a control (CTL) bus <b>1010</b>, and a serial output (SO) <b>1012</b>. The SI <b>1008</b> is coupled to a comparator scan input (CSI) signal from the TAM controller, the SO <b>1012</b> is coupled to a comparator scan output (CSO) signal to the TAM controller, and the CTL bus <b>1010</b> is coupled to a control (CTL) bus output from the TAM controller. The TAM interface signals <b>1002</b>, <b>1004</b>, <b>1006</b>, <b>1008</b>, <b>1010</b>, and <b>1012</b> form bus <b>730</b> of <figref idrefs="DRAWINGS">FIG. 7</figref>. The TAM controller <b>706</b> has Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, a clock input <b>804</b>, and a SelectTAM input <b>802</b> input from the tester <b>712</b> via control bus <b>722</b>. The TAM controller <b>706</b> has a scan input <b>734</b> and a scan out <b>732</b> coupled to scan router <b>744</b>. The TAM controller <b>706</b> has a Select input <b>736</b> coupled to TAM selector <b>710</b>.</div>
<div class="description-paragraph" id="p-0078" num="0077"> <figref idrefs="DRAWINGS">FIG. 12</figref> illustrates a more detailed view of the compare circuit <b>750</b> and the interconnects between the compare circuit <b>750</b> and the TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The compare circuit <b>750</b> includes a comparator <b>1202</b>, OR gate <b>1204</b>, fail data FIFO <b>1206</b>, scan cycle count FIFO <b>1208</b>, scan cycle counter <b>1210</b>, and shift registers <b>1212</b> and <b>1214</b>.</div>
<div class="description-paragraph" id="p-0079" num="0078">The comparator <b>1202</b> inputs the expected data from EDM <b>748</b>, mask data from the MDM <b>746</b>, and response data from the wrapper WPO outputs. Each bit from the expected data (ED) bus, the mask data (MD) bus, and the response data (RD) bus is input to a maskable compare circuit <b>1216</b> inside comparator <b>1202</b>. The maskable compare circuit <b>1216</b> has an exclusive OR gate that inputs the ED and RD bit inputs and an And gate that inputs the output of the exclusive OR gate and the MD bit input. If the MD bit is low (non-mask level), the maskable compare circuit <b>1216</b> will output a zero on the compare output (CO) if the ED and RD inputs are at the same logic level, and a one on the CO output if the ED and RD are at opposite logic levels. If the MD bit is high (mask level), the maskable compare circuit <b>1216</b> will output a low regardless of the logic levels on the ED and RD bit inputs. For an 8-bit wide ED, RD, and MD bus the comparator <b>1202</b> will output an 8-bit wide compare output bus, i.e. one CO bit output from each of 8 maskable compare circuits <b>1216</b>. Each CO bit of the compare output bus is input to the fail data FIFO <b>1206</b> and to OR gate <b>1204</b>. If any one or more of the CO bit outputs on the compare output bus go high (indicating one or more compare fails), the OR gate <b>1204</b> will output a high on its fail indicator output.</div>
<div class="description-paragraph" id="p-0080" num="0079">The scan cycle counter <b>1210</b> is a counter with a reset input connected to a Count Reset signal <b>1228</b> from the TAM controller <b>706</b> and clock input connected to a Count Clock <b>1230</b> signal from the TAM controller <b>706</b>. The counter <b>1210</b> is designed to reset to a count of zero in response to a reset input and to count up in response to a clock input. The count output from the counter <b>1210</b> is input to the scan cycle count FIFO <b>1208</b>.</div>
<div class="description-paragraph" id="p-0081" num="0080">The fail data FIFO <b>1206</b> has an input port and an output port. The input port has an input bus for receiving fail data from the compare out bus of comparator <b>1202</b>, an input for receiving the fail indicator output from OR gate <b>1204</b>, and an input for receiving a compare clock input <b>1218</b> from TAM controller <b>706</b>. The output port has an output bus for outputting stored fail data, an input for receiving a load/shift input <b>1222</b> from TAM controller <b>706</b>, and an input for receiving a shift clock input <b>1224</b> from TAM controller <b>706</b>. FIFO <b>1206</b> has a reset input connected to the count reset output <b>1228</b> from TAM controller <b>706</b>. In response to a reset input the FIFO data is cleared.</div>
<div class="description-paragraph" id="p-0082" num="0081">The scan cycle count FIFO <b>1208</b> has an input port and an output port. The input port has an input bus for receiving a scan cycle count from counter <b>1210</b>, an input for receiving the fail indicator output from OR gate <b>1204</b>, and an input for receiving the compare clock input <b>1218</b> from TAM controller <b>706</b>. The output port has an output bus for outputting stored scan cycle count patterns, an input for receiving a load/shift input <b>1222</b> from TAM controller <b>706</b>, and an input for receiving a shift clock input <b>1224</b> from TAM controller <b>706</b>. FIFO <b>1208</b> has a reset input connected to the count reset output <b>1228</b> from TAM controller <b>706</b>. In response to a reset input the FIFO data is cleared.</div>
<div class="description-paragraph" id="p-0083" num="0082">Shift register <b>1212</b> has an input bus for receiving the fail data bus output from FIFO <b>1206</b>, an input for receiving a comparator scan in (C SI) output from TAM controller <b>706</b>, inputs for receiving the load/shift <b>1222</b> and shift clock <b>1224</b> signals from TAM controller <b>706</b>, and a serial output. Shift register <b>1214</b> has an input bus for receiving the scan cycle count data bus from FIFO <b>1208</b>, an input for receiving the serial output from shift register <b>1212</b>, inputs for receiving the load/shift <b>1222</b> and shift clock <b>1224</b> signals from TAM controller <b>706</b>, and a serial output that is input to a comparator scan out (CSO) <b>1226</b> input to TAM controller <b>706</b>.</div>
<div class="description-paragraph" id="p-0084" num="0083">At the beginning of a test operation the scan cycle counter <b>1210</b> will be reset to a scan cycle count of zero. Each time scan cycle is completed the counter <b>1210</b> counts up. A scan cycle is defined as a capture operation that captures response data into parallel scan paths, such as the parallel scan paths <b>112</b> of <figref idrefs="DRAWINGS">FIG. 3 or 406</figref> of <figref idrefs="DRAWINGS">FIG. 4</figref>, followed by a series of shift operations that input stimulus data into the parallel scan paths from WPI and output captured response data from the parallel scan paths to WPO. The comparator <b>1202</b> compares the output WPO response data against unmasked expected data and outputs the compare results on the compare out bus. During each compare operation, the TAM controller <b>706</b> outputs a compare clock <b>1218</b> to the FIFOs <b>1206</b> and <b>1208</b>. If the fail indicator from OR gate <b>1204</b> is low (no compare failure) when the compare clock occurs, the FIFOs will not input data on their data bus inputs. If the fail indicator from OR gate <b>1204</b> is high (a compare failure) when the compare clock occurs, the fail data FIFO <b>1206</b> will input the failing data on the compare out bus and the scan cycle count FIFO will input the scan cycle count output from counter <b>1210</b>. This test process of comparing response data from WPO to unmasked expected data during each shift of a scan cycle is repeated until the test is complete. At the end of test, the fail data FIFO <b>1206</b> will contain any failing compare data that occurred during the test and the scan cycle count FIFO will contain the scan cycle in which failing compare data occurred. For example, if three failing compares occurred during scan cycle <b>1</b>, FIFO <b>1206</b> will contain the three failing compare data patterns in three sequential FIFO locations and FIFO <b>1208</b> will contain a scan cycle count of 1 in the same three sequential FIFO locations to indicate that the three failing compare data patterns occurred during scan cycle <b>1</b>. When the tester scans out the contents of the FIFOs, it can be determined that the three failures occurred during scan cycle <b>1</b> by observing the contents of the same sequential locations in the FIFOs.</div>
<div class="description-paragraph" id="p-0085" num="0084">Following a test, the TAM controller operates its load/shift <b>1222</b> (high=load, low=shift) and shift clock <b>1224</b> outputs to cause the shift registers <b>1212</b> and <b>1214</b> to load a location of data from the FIFO <b>1206</b> and <b>1208</b> and shift loaded data out to the tester. This load and shift operation is repeated until the contents of the FIFOs have been output to the tester. During the load and shift operations the TAM controller <b>706</b> couples scan in <b>734</b> to CSI <b>1220</b> and scan in <b>732</b> to CSO <b>1226</b>. The TAM controller's scan in <b>734</b> and scan out <b>732</b> are routed to the DUT's scan in <b>724</b> and scan out <b>726</b> via the scan router <b>744</b>.</div>
<div class="description-paragraph" id="p-0086" num="0085"> <figref idrefs="DRAWINGS">FIG. 13</figref> illustrates an example implementation of the TAM controller <b>706</b>. The TAM controller consists of an TAM instruction register (TIR) <b>1302</b>, an instruction load enable NOR gate <b>1304</b>, a multiplexer <b>1306</b>, an instruction decode circuit <b>1308</b>, clock gating AND gates <b>1310</b>, and reset gating NAND gates <b>1312</b>. The TIR <b>1302</b> has an instruction input bus coupled to input bus <b>720</b>, an instruction output bus coupled to an input bus of instruction decode circuit <b>1308</b>, a clock input coupled to the clock signal <b>804</b> of control bus <b>722</b>, and a load enable input coupled to the output of NOR gate <b>1304</b>. NOR gate <b>1304</b> has inputs coupled to the Mode <b>0</b>-<b>2</b> signals <b>1014</b> of control bus <b>722</b> and to the SelectTAM signal <b>802</b>. The output of the NOR gate is coupled to the load enable input of TIR <b>1302</b>. If the Mode <b>0</b>-<b>2</b> and SelectTAM signals are low, the output of gate <b>1304</b> is high to allow an instruction to be clocked into the TIR <b>1302</b> from input bus <b>720</b>. While the “all low” Mode <b>0</b>-<b>2</b> input pattern has been used in this example to enable the TIR for an instruction load operation, any one of Mode <b>0</b>-<b>2</b> input patterns could have been used as well. Multiplexer <b>1306</b> has a data input coupled to a WSO <b>128</b> of an associated core wrapper <b>102</b>, a data input coupled to a CSO <b>1226</b> of an associated TAM <b>704</b>, a multiplexer control input coupled to an output from instruction decode circuit <b>1308</b>, and a data output coupled to scan out signal <b>732</b>. As seen, the scan in <b>734</b> signal passes through the TAM controller to the WSI <b>126</b> and CSI <b>1220</b> signals.</div>
<div class="description-paragraph" id="p-0087" num="0086">The WRCK gate <b>1310</b> inputs the clock <b>804</b> and a WRCK enable from decode circuit <b>1308</b>, and outputs a gated WRCK to an associated core wrapper <b>102</b>. The count clock gate <b>1310</b> inputs the clock <b>804</b> and a count clock enable from decode circuit <b>1308</b>, and outputs a gated count clock to an associated TAM <b>704</b>. The compare clock gate <b>1310</b> inputs the clock <b>804</b> and a compare clock enable from decode circuit <b>1308</b>, and outputs a gated compare clock to an associated TAM <b>704</b>. The shift clock gate <b>1310</b> inputs the clock <b>804</b> and a shift clock enable from decode circuit <b>1308</b>, and outputs a gated shift clock to an associated TAM <b>704</b>. The SDC gate <b>1310</b> inputs the clock <b>804</b> and a SDC enable from decode circuit <b>1308</b>, and outputs a gated SDC to an associated TAM <b>704</b>. The EDC gate <b>1310</b> inputs the clock <b>804</b> and a EDC enable from decode circuit <b>1308</b>, and outputs a gated EDC to an associated TAM <b>704</b>. The MDC gate <b>1310</b> inputs the clock <b>804</b> and a MDC enable from decode circuit <b>1308</b>, and outputs a gated MDC to an associated TAM <b>704</b>. The WRST gate <b>1312</b> inputs the clock <b>804</b> and a WRST enable from decode circuit <b>1308</b>, and outputs a gated WRST to an associated core wrapper <b>102</b>. The Count Reset gate <b>1312</b> inputs the clock <b>804</b> and a Count Reset enable from decode circuit <b>1308</b>, and outputs a gated Count Reset to an associated TAM <b>704</b>.</div>
<div class="description-paragraph" id="p-0088" num="0087">Instruction decode circuit <b>1308</b> has an input bus for inputting the instruction from TIR <b>1302</b>, inputs for inputting Mode <b>0</b>-<b>2</b> signals <b>1014</b> from control bus <b>722</b>, an input for inputting the SelectTAM signal <b>802</b> from control bus <b>722</b>, and an input for inputting the Select signal <b>736</b> from TAM selector <b>710</b>. Instruction decode circuit <b>1308</b> has outputs for controlling the SelectWIR, ShiftWR, CaptureWR, UpdateWR, TransferDR, and WRST signals <b>124</b> to an associated core wrapper <b>102</b>, outputs for controlling the load/shift <b>1222</b> and count reset <b>1228</b> signals to an associated TAM <b>704</b>, an output for controlling scan out multiplexer <b>1306</b>, and the above mentioned outputs for enabling the clock <b>804</b> to be gated through one of more selected AND gates <b>1310</b> and NAND gates <b>1312</b>.</div>
<div class="description-paragraph" id="p-0089" num="0088">The instruction input from TIR <b>1302</b> programs how the instruction decode circuit <b>1308</b> controls its outputs in response to the Mode <b>0</b>-<b>2</b> inputs <b>1014</b>. The Select input <b>736</b> from TAM selector <b>710</b> is used to enable or disable the instruction decode circuit <b>1308</b>. If the Select input is low, the instruction decode circuit is disabled from responding to the Mode <b>0</b>-<b>2</b> inputs and all its outputs are set to an inactive state, especially outputs that control clock gates <b>1310</b> and reset gates <b>1312</b>. If the Select input is high, the instruction decode circuit <b>1308</b> is enabled to respond to the Mode <b>0</b>-<b>2</b> inputs to control its outputs according to how it is programmed by the current instruction loaded into TIR <b>1302</b>. The SelectTAM input <b>802</b> from control bus <b>722</b> is also used to enable or disable the instruction decode circuit <b>1308</b>. If the SelectTAM input is low, the instruction decode circuit is enabled to respond to the Mode <b>0</b>-<b>2</b> inputs to control its outputs according to the how it is programmed by the current instruction loaded into TIR <b>1302</b>. If the SelectTAM input is high, the instruction decode circuit is disabled from responding to the Mode <b>0</b>-<b>2</b> inputs and all its outputs are set to an inactive state, especially the outputs that control clock gates <b>1310</b> and reset gates <b>1312</b>. As mentioned in regard to <figref idrefs="DRAWINGS">FIGS. 8A and 8B</figref>, when SelectTAM is high the data register of TAM selector <b>710</b> loads data from the input bus <b>720</b> during a clock input on clock signal <b>804</b>. So the reason to disable the instruction decode circuit <b>1308</b> while SelectTAM is high is to prevent the clock <b>804</b> that loads the TAM selector data register from producing an undesired output from any of the outputs of TAM controller <b>706</b>. Further, while SelectTAM is high, the TIR is disabled, by the output from gate <b>1304</b>, from inputting data from the input bus <b>720</b>, since the data is for the TAM selector <b>710</b> and not for the TAM controller <b>706</b>.</div>
<div class="description-paragraph" id="p-0090" num="0089"> <figref idrefs="DRAWINGS">FIG. 14A</figref> illustrates in general the operation of the TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 13</figref> in response to the Mode <b>0</b>-<b>2</b> inputs <b>1014</b>. As seen, when the Mode <b>0</b>-<b>2</b> signals are low (and SelectTAM is low) the TIR <b>1302</b> is loaded with a TAM instruction. The loaded instruction is decoded by the instruction decode circuit <b>1308</b> to produce instruction defined operations on the TAM controller outputs in response to the other binary input patterns on the Mode <b>0</b>-<b>2</b> signals. As seen, the all zero Mode <b>0</b>-<b>2</b> pattern is reserved for loading an instruction into the TIR <b>1308</b> and the other Mode <b>0</b>-<b>2</b> patterns are defined by the instruction to control the TAM controller outputs.</div>
<div class="description-paragraph" id="p-0091" num="0090">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load TAM Instruction
</div> <ul> <li id="ul0001-0001" num="0091">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Instruction Defined Operation</li> <li id="ul0001-0002" num="0092">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Instruction Defined Operation</li> <li id="ul0001-0003" num="0093">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Instruction Defined Operation</li> <li id="ul0001-0004" num="0094">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Instruction Defined Operation</li> <li id="ul0001-0005" num="0095">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Instruction Defined Operation</li> <li id="ul0001-0006" num="0096">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—Instruction Defined Operation</li> <li id="ul0001-0007" num="0097">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—Instruction Defined Operation</li> </ul>
<div class="description-paragraph" id="p-0092" num="0098"> <figref idrefs="DRAWINGS">FIG. 14B</figref> illustrates the loading of a WIR Scan instruction into the TIR to enable the WIR <b>106</b> of a wrapper <b>102</b> connected to the TAM controller <b>706</b> to be scanned. Scanning the WIR allows loading test instructions to configure the wrapper into test modes as described in IEEE standard 1500, especially the parallel scan test modes described in regard to <figref idrefs="DRAWINGS">FIGS. 3 and 4</figref>. During this instruction, the SelectWIR output <b>124</b> from the instruction decode circuit <b>1308</b> is set high to select the WIR for scanning. In response to this instruction, the Mode <b>0</b>-<b>2</b> input patterns are programmed to produce the following output operations from the TAM controller <b>706</b>. Mode <b>0</b>-<b>2</b> input patterns that are not programmed by this instruction are defined as no-operation (No-Op) patterns. No-Op patterns do not produce outputs from the TAM controller.</div>
<div class="description-paragraph" id="p-0093" num="0099">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load WIR Scan Instruction
</div> <ul> <li id="ul0002-0001" num="0100">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Capture WIR</li> <li id="ul0002-0002" num="0101">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Shift WIR</li> <li id="ul0002-0003" num="0102">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Update WIR</li> <li id="ul0002-0004" num="0103">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Reset Wrapper</li> <li id="ul0002-0005" num="0104">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0002-0006" num="0105">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0002-0007" num="0106">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0094" num="0107">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1, a Capture WIR operation occurs which sets the CaptureWR output <b>124</b> high and produces a gated clock output on WRCK <b>124</b>. This operation is used to capture data into the WIR prior shifting the WIR.</div>
<div class="description-paragraph" id="p-0095" num="0108">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0, a Shift WIR operation occurs which sets the ShiftWR output <b>124</b> high and produces gated clock outputs on WRCK <b>124</b>. This operation is used to shift an instruction into the WIR via the wrappers WSI and WSO. During this operation, the TAM controller's multiplexer <b>1306</b> is controlled to couple the WSO <b>128</b> wrapper output to the TAM controller's Scan Out <b>732</b> output.</div>
<div class="description-paragraph" id="p-0096" num="0109">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1, an Update WIR operation occurs which sets the UpdateWR output <b>124</b> high and produces a gated clock output on WRCK <b>124</b>. This operation is used to update the instruction to the WIR' s parallel outputs.</div>
<div class="description-paragraph" id="p-0097" num="0110">When Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0, a Reset Wrapper operation occurs which produces a gated reset output on WRST <b>124</b>. This operation is used to reset the wrapper's WIR and other wrapper circuits that need to be reset before and/or after a test.</div>
<div class="description-paragraph" id="p-0098" num="0111"> <figref idrefs="DRAWINGS">FIG. 14C</figref> illustrates the loading of a WBR Scan instruction into the TIR to enable the WBR <b>110</b> of a wrapper <b>102</b> connected to the TAM controller <b>706</b> to be scanned. Scanning the WBR enables testing a wrapped core or testing the interconnects between wrapped cores. During this instruction, the SelectWIR output <b>124</b> from the instruction decode circuit <b>1308</b> is set low to select the WBR for scanning. In response to this instruction, the Mode <b>0</b>-<b>2</b> input patterns are programmed to produce the following output operations from the TAM controller <b>706</b>. Mode <b>0</b>-<b>2</b> input patterns that are not programmed by this instruction are defined as no-operation (No-Op) patterns. No-Op patterns do not produce outputs from the TAM controller.</div>
<div class="description-paragraph" id="p-0099" num="0112">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load WBR Scan Instruction
</div> <ul> <li id="ul0003-0001" num="0113">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Capture WBR</li> <li id="ul0003-0002" num="0114">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Shift WBR</li> <li id="ul0003-0003" num="0115">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Update WBR</li> <li id="ul0003-0004" num="0116">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Reset Wrapper</li> <li id="ul0003-0005" num="0117">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0003-0006" num="0118">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0003-0007" num="0119">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0100" num="0120">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1, a Capture WBR operation occurs which sets the CaptureWR output <b>124</b> high and produces a gated clock output on WRCK <b>124</b>. This operation is used to capture data into the WBR prior shifting the WBR.</div>
<div class="description-paragraph" id="p-0101" num="0121">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0, a Shift WBR operation occurs which sets the ShiftWR output <b>124</b> high and produces gated clock outputs on WRCK <b>124</b>. This operation is used to shift data into and out of the WBR via the wrappers WSI and WSO. During this operation, the TAM controller's multiplexer <b>1306</b> is controlled to couple the WSO <b>128</b> wrapper output to the TAM controller's Scan Out <b>732</b> output.</div>
<div class="description-paragraph" id="p-0102" num="0122">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1, an Update WBR operation occurs which sets the UpdateWR output <b>124</b> high and produces a gated clock output on WRCK <b>124</b>. This operation is used to update scanned in data to the WBR's parallel outputs.</div>
<div class="description-paragraph" id="p-0103" num="0123">When Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0, a Reset Wrapper operation occurs which produces a gated reset output on WRST <b>124</b>. This operation is used to reset the wrapper's WIR and other wrapper circuits that need to be reset before and/or after a test.</div>
<div class="description-paragraph" id="p-0104" num="0124"> <figref idrefs="DRAWINGS">FIG. 14D</figref> illustrates the loading of a Parallel Scan Test instruction into the TIR to enable parallel scan paths (<b>112</b> of <figref idrefs="DRAWINGS">FIG. 3 or 406</figref> of <figref idrefs="DRAWINGS">FIG. 4</figref>) of a wrapper <b>102</b> connected to the TAM controller <b>706</b> and TAM <b>704</b> to be accessed for scan testing. During this instruction, the SelectWIR output <b>124</b> from the instruction decode circuit <b>1308</b> is set low to select the wrappers parallel scan paths for scanning. In response to this instruction the Mode <b>0</b>-<b>2</b> input patterns are programmed to produce the following outputs from the TAM controller <b>706</b>. Mode <b>0</b>-<b>2</b> input patterns that are not programmed by this instruction are defined as no-operation (No-Op) patterns. No-Op patterns do not produce outputs from the TAM controller.</div>
<div class="description-paragraph" id="p-0105" num="0125">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load Parallel Scan Test Instruction
</div> <ul> <li id="ul0004-0001" num="0126">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Load Stimulus Data</li> <li id="ul0004-0002" num="0127">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Load Expected Data</li> <li id="ul0004-0003" num="0128">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Load Mask Data</li> <li id="ul0004-0004" num="0129">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Shift Scan Paths &amp; Compare Response</li> <li id="ul0004-0005" num="0130">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Capture Response into Scan Paths</li> <li id="ul0004-0006" num="0131">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—Reset Scan Cycle Counter &amp; FIFOs</li> <li id="ul0004-0007" num="0132">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0106" num="0133">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1, a Load Stimulus Data operation occurs which produces a gated clock output on SDC <b>1002</b> to load stimulus data into SDM <b>742</b> from input bus <b>720</b>. This operation is used to load stimulus data that will be shifted into the scan paths on the WPI inputs.</div>
<div class="description-paragraph" id="p-0107" num="0134">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0, a Load Expected Data operation occurs which produces a gated clock output on EDC <b>1004</b> to load expected data into EDM <b>748</b> from input bus <b>720</b>. This operation is used to load expected data that will be compared against the scan path response data output on the WPO outputs.</div>
<div class="description-paragraph" id="p-0108" num="0135">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1, a Load Mask Data operation occurs which produces a gated clock output on MDC <b>1006</b> to load mask data into MDM <b>746</b> from input bus <b>720</b>. This operation is used to load mask data that can be used to mask off certain ones of the response and expected data compare operations.</div>
<div class="description-paragraph" id="p-0109" num="0136">When Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0, a Shift Scan Paths &amp; Compare Response operation occurs which sets the ShiftWR output <b>124</b> high, produces a gated clock on WRCK <b>124</b> to shift the scan paths, and a gated clock on Compare Clock <b>124</b> to compare the scan path response outputs against unmasked expected data. This operation is used to shift stimulus data into the scan paths from SDM <b>742</b> and compare the scan path response data using the comparator circuit <b>750</b>.</div>
<div class="description-paragraph" id="p-0110" num="0137">When Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1, a Capture Response into Scan Paths operation occurs which sets the CaptureWR output <b>124</b> high, produces a gated WRCK <b>124</b> to capture data from combinational logic into the scan paths, and produces a gated Count Clock <b>1230</b> to increment the scan cycle counter <b>1210</b> of compare circuit <b>750</b>. This operation is used to load the parallel scan paths with response data at the beginning of a new scan cycle shift operation and to count each new scan cycle.</div>
<div class="description-paragraph" id="p-0111" num="0138">When Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0, a Reset Scan Cycle &amp; FIFOs operation occurs which produces a gated reset output on Count Reset <b>1228</b>. This operation is used to reset the TAM's scan cycle counter <b>1210</b> and FIFOs <b>1206</b>-<b>1208</b> before and/or after a test.</div>
<div class="description-paragraph" id="p-0112" num="0139"> <figref idrefs="DRAWINGS">FIG. 14E</figref> illustrates the loading of a Fail Data Scan instruction into the TIR to enable fail data in the FIFOs <b>1206</b>-<b>1208</b> of the compare circuit <b>750</b> to be scanned out to a tester. In response to this instruction, the Mode <b>0</b>-<b>2</b> input patterns are programmed to produce the following output operations from the TAM controller <b>706</b>. Mode <b>0</b>-<b>2</b> input patterns that are not programmed by this instruction are defined as no-operation (No-Op) patterns. No-Op patterns do not produce outputs from the TAM controller.</div>
<div class="description-paragraph" id="p-0113" num="0140">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load Fail Data Scan Instruction
</div> <ul> <li id="ul0005-0001" num="0141">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Capture Fail Data</li> <li id="ul0005-0002" num="0142">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Shift Fail Data</li> <li id="ul0005-0003" num="0143">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—No-Op</li> <li id="ul0005-0004" num="0144">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—No-Op</li> <li id="ul0005-0005" num="0145">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0005-0006" num="0146">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0005-0007" num="0147">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0114" num="0148">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1, a Capture Fail Data operation occurs which sets the Load/Shift output <b>1222</b> high and produces a gated clock output on Shift Clock <b>1224</b>. This operation is used to capture fail data from the FIFOs <b>1206</b>-<b>1208</b> into the shift registers <b>1212</b>-<b>1214</b> prior shifting the shift register.</div>
<div class="description-paragraph" id="p-0115" num="0149">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0, a Shift Fail Data operation occurs which sets the Load/Shift output <b>1222</b> low and produces gated clock outputs on Shift Clock <b>1224</b>. This operation is used to shift the captured fail data from the shift register <b>1212</b>-<b>1214</b> to a tester via the compare circuit's CSI and CSO. During this operation, the TAM controller's multiplexer <b>1306</b> is controlled to couple the CSO <b>1226</b> compare circuit <b>750</b> output to the TAM controller's Scan Out <b>732</b> output.</div>
<div class="description-paragraph" id="p-0116" num="0150"> <figref idrefs="DRAWINGS">FIG. 14F</figref> is provided to illustrate that a single instruction can be defined that performs both the WIR scan operations of <figref idrefs="DRAWINGS">FIG. 14B</figref> and the WBR scan operations of <figref idrefs="DRAWINGS">FIG. 14C</figref>. During this instruction, the ShiftWIR <b>124</b> output would be high during Capture WIR, Shift WIR, and Update WIR Mode input patterns to enable scanning the WIR, and low during Capture WBR, Shift WBR, and Update WBR Mode input patterns to enable scanning the WBR.</div>
<div class="description-paragraph" id="p-0117" num="0151">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load WIR &amp; WBR Scan Instruction
</div> <ul> <li id="ul0006-0001" num="0152">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Capture WIR</li> <li id="ul0006-0002" num="0153">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Shift WIR</li> <li id="ul0006-0003" num="0154">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Update WIR</li> <li id="ul0006-0004" num="0155">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Capture WBR</li> <li id="ul0006-0005" num="0156">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Shift WBR</li> <li id="ul0006-0006" num="0157">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—Update WBR</li> <li id="ul0006-0007" num="0158">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—Reset Wrapper</li> </ul>
<div class="description-paragraph" id="p-0118" num="0159">As seen from the above descriptions of <figref idrefs="DRAWINGS">FIGS. 14A-14F</figref>, the TAM controller <b>706</b> may be programmed to perform any desired output operation in response to the Mode <b>0</b>-<b>2</b> inputs, by loading an instruction into the TIR <b>1302</b>. While the TAM controller is shown having a particular group of outputs and a particular number of Mode <b>0</b>-<b>2</b> inputs, it is not limited to only these outputs and inputs. Indeed, as the need may arise, the number of TAM controller outputs and/or Mode inputs may increase to allow the TAM controller to control additional circuits within a TAM or other circuits within the DUT. These additional circuits may be test circuits, debug circuits, trace circuits, and/or emulation circuits.</div>
<div class="description-paragraph" id="p-0119" num="0160"> <figref idrefs="DRAWINGS">FIG. 15</figref> illustrates an alternative TAM controller <b>1502</b>. TAM controller <b>1502</b> is identical to TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 13</figref> with the following exceptions. The NOR gate <b>1304</b> of <figref idrefs="DRAWINGS">FIG. 13</figref> has been removed and the load enable input to TIR <b>1302</b> is connected to a LoadTIR signal <b>1504</b>, which is a signal added to control bus <b>722</b>. Like the SelectTAM signal, the LoadTIR signal is input to the instruction decode to disable the instruction decode circuit from responding to Mode <b>0</b>-<b>2</b> inputs during an instruction load. A tester sets the LoadTIR signal high when an instruction is to be written to TIR <b>1302</b> from input bus <b>720</b>. Using the LoadTIR signal to enable the loading of an instruction into the TIR eliminates having to use the all zero Mode <b>0</b>-<b>2</b> input pattern as a load enable for the TIR, as was described in <figref idrefs="DRAWINGS">FIG. 13</figref>.</div>
<div class="description-paragraph" id="p-0120" num="0161"> <figref idrefs="DRAWINGS">FIGS. 16A-16F</figref> illustrate the Mode <b>0</b>-<b>2</b> signals being programmed to control the TAM controller <b>1502</b> output when the LoadTIR signal <b>1504</b> is used to load the TIR <b>1302</b>. <figref idrefs="DRAWINGS">FIG. 16A</figref> relates to <figref idrefs="DRAWINGS">FIG. 14A</figref>, <figref idrefs="DRAWINGS">FIG. 16B</figref> relates to <figref idrefs="DRAWINGS">FIG. 14B</figref>, <figref idrefs="DRAWINGS">FIG. 16C</figref> relates to FIG. <b>14</b>C, <figref idrefs="DRAWINGS">FIG. 16D</figref> relates to <figref idrefs="DRAWINGS">FIG. 14D</figref>, <figref idrefs="DRAWINGS">FIG. 16E</figref> relates to <figref idrefs="DRAWINGS">FIG. 14E</figref>, and <figref idrefs="DRAWINGS">FIG. 16F</figref> relates to <figref idrefs="DRAWINGS">FIG. 14F</figref>. As seen in the <figref idrefs="DRAWINGS">FIGS. 16A-16F</figref>, the all zero Mode input pattern is not required to be dedicated for loading the TIR as it was in <figref idrefs="DRAWINGS">FIGS. 14A-14F</figref>. Thus the instruction loaded into the TIR can use all the Mode <b>0</b>-<b>2</b> input patterns to control the TAM controller <b>1502</b> outputs to perform test or other operations.</div>
<div class="description-paragraph" id="p-0121" num="0162"> <b>16</b>A
</div> <ul> <li id="ul0007-0001" num="0163">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Instruction Defined Operation</li> <li id="ul0007-0002" num="0164">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Instruction Defined Operation</li> <li id="ul0007-0003" num="0165">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Instruction Defined Operation</li> <li id="ul0007-0004" num="0166">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Instruction Defined Operation</li> <li id="ul0007-0005" num="0167">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Instruction Defined Operation</li> <li id="ul0007-0006" num="0168">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Instruction Defined Operation</li> <li id="ul0007-0007" num="0169">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—Instruction Defined Operation</li> <li id="ul0007-0008" num="0170">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—Instruction Defined Operation</li> </ul>
<div class="description-paragraph" id="p-0122" num="0171"> <b>16</b>B
</div> <ul> <li id="ul0008-0001" num="0172">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Capture WIR</li> <li id="ul0008-0002" num="0173">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Shift WIR</li> <li id="ul0008-0003" num="0174">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Update WIR</li> <li id="ul0008-0004" num="0175">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Reset Wrapper</li> <li id="ul0008-0005" num="0176">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—No-Op</li> <li id="ul0008-0006" num="0177">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0008-0007" num="0178">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0008-0008" num="0179">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0123" num="0180"> <b>16</b>C
</div> <ul> <li id="ul0009-0001" num="0181">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Capture WBR</li> <li id="ul0009-0002" num="0182">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Shift WBR</li> <li id="ul0009-0003" num="0183">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Update WBR</li> <li id="ul0009-0004" num="0184">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Reset Wrapper</li> <li id="ul0009-0005" num="0185">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—No-Op</li> <li id="ul0009-0006" num="0186">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0009-0007" num="0187">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0009-0008" num="0188">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0124" num="0189"> <b>16</b>D
</div> <ul> <li id="ul0010-0001" num="0190">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Load Stimulus Data</li> <li id="ul0010-0002" num="0191">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Load Expected Data</li> <li id="ul0010-0003" num="0192">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Load Mask Data</li> <li id="ul0010-0004" num="0193">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Shift Scan Paths &amp; Compare Response</li> <li id="ul0010-0005" num="0194">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Capture Response into Scan Paths</li> <li id="ul0010-0006" num="0195">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Reset Scan Cycle Counter &amp; FIFOs</li> <li id="ul0010-0007" num="0196">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0010-0008" num="0197">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0125" num="0198"> <b>16</b>E
</div> <ul> <li id="ul0011-0001" num="0199">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Capture Fail Data</li> <li id="ul0011-0002" num="0200">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Shift Fail Data</li> <li id="ul0011-0003" num="0201">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—No-Op</li> <li id="ul0011-0004" num="0202">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—No-Op</li> <li id="ul0011-0005" num="0203">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—No-Op</li> <li id="ul0011-0006" num="0204">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—No-Op</li> <li id="ul0011-0007" num="0205">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—No-Op</li> <li id="ul0011-0008" num="0206">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0126" num="0207"> <b>16</b>F
</div> <ul> <li id="ul0012-0001" num="0208">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:0—Capture WIR</li> <li id="ul0012-0002" num="0209">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1—Shift WIR</li> <li id="ul0012-0003" num="0210">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0—Update WIR</li> <li id="ul0012-0004" num="0211">Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1—Capture WBR</li> <li id="ul0012-0005" num="0212">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:0—Shift WBR</li> <li id="ul0012-0006" num="0213">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:0:1—Update WBR</li> <li id="ul0012-0007" num="0214">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:0—Reset Wrapper</li> <li id="ul0012-0008" num="0215">Mode <b>2</b>:<b>1</b>:<b>0</b>=1:1:1—No-Op</li> </ul>
<div class="description-paragraph" id="p-0127" num="0216"> <figref idrefs="DRAWINGS">FIG. 17</figref> illustrates a timing diagram of the process of selecting a TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 13</figref>, loading an instruction into the selected TAM controller <b>706</b> using the all zero Mode input pattern, then operating the TAM controller <b>706</b> to perform a WIR scan operation to load a test instruction into the WIR of an associated core wrapper <b>102</b>. As seen, the TAM controller <b>706</b> is selected by setting the SelectTAM input <b>802</b> high to load a select TAM instruction <b>1720</b> from input bus <b>720</b> into the TAM selector <b>1710</b> during clock <b>1702</b>. Once the TAM controller <b>706</b> is selected, a TAM instruction <b>1722</b> is loaded into the TIR <b>1302</b> of the selected TAM controller by inputting an all zero Mode input pattern <b>1712</b> from Mode <b>0</b>-<b>2</b> <b>1014</b> and applying a clock <b>1704</b>. As mentioned, in this example the TAM instruction loaded into the TIR <b>1302</b> programs the TAM controller <b>706</b> to perform a WIR scan instruction as described above in regard to <figref idrefs="DRAWINGS">FIG. 14B</figref>. The WIR scan operation consists of: (1) inputting a Capture WIR <b>1714</b> Mode input pattern along with a clock <b>1706</b> to cause the wrapper's WIR to capture data, (2) inputting a series of Shift WIR <b>1716</b> Mode input patterns along with clocks <b>1708</b> to cause the wrapper's WIR to scan data in <b>1724</b> from Scan In <b>734</b> and scan data out <b>1726</b> on Scan Out <b>732</b>, then (3) inputting an Update WIR <b>1718</b> Mode input pattern along with a clock <b>1710</b> to update data to the parallel outputs of the WIR. The steps in the above described process will typically be performed each time a TAM controller is selected, since a TAM instruction will typically be required to program the TAM controller and a WIR instruction will be typically required to configure the associated wrapper for testing.</div>
<div class="description-paragraph" id="p-0128" num="0217"> <figref idrefs="DRAWINGS">FIG. 18</figref> illustrates a timing diagram of the process of selecting a TAM controller <b>1502</b> of <figref idrefs="DRAWINGS">FIG. 15</figref>, loading an instruction into the selected TAM controller <b>1502</b> using the LoadTIR signal <b>1504</b>, then operating the TAM controller <b>1502</b> perform a WIR scan operation to load a test instruction into the WIR of an associated core wrapper <b>102</b>. This process is the same as described in <figref idrefs="DRAWINGS">FIG. 17</figref> with the exception that the LoadTIR signal <b>1504</b> is used, at <b>1802</b>, instead of the all zero Mode input pattern at <b>1712</b>, to load the TAM instruction during clock <b>1704</b>.</div>
<div class="description-paragraph" id="p-0129" num="0218"> <figref idrefs="DRAWINGS">FIG. 19</figref> illustrates a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the WIR <b>106</b> scan instruction operation of <figref idrefs="DRAWINGS">FIGS. 14B and 16B</figref> consisting of capture, shift, and update steps. When programmed for a WIR scan operation, the TAM controller will set the SelectWIR output high <b>1938</b> to enable the wrapper's WIR for scanning. The capture step is achieved by inputting a Capture WIR Mode input pattern <b>1912</b> which sets the CaptureWR output <b>1922</b> high, followed by inputting a clock <b>1902</b> which produces a WRCK output <b>1926</b>. The shift steps are achieved by inputting Shift WIR Mode input patterns <b>1914</b>-<b>1918</b> which set the ShiftWR output <b>1924</b> high, and inputting clocks <b>1904</b>-<b>1908</b> which produce WRCKs <b>1928</b>-<b>1932</b> The update step is achieved by inputting an Update WIR Mode input pattern <b>1920</b> followed by inputting a clock <b>1910</b> which produces a WRCK output <b>1934</b>. The timing produced by the TAM controller on the SelectWIR, CaptureWR, ShiftWR, WRCK, and UpdateWR signals <b>124</b> performs a WIR scan operation as defined in IEEE 1500. However, unlike the IEEE 1500 standard the timing on the ShiftWIR, CaptureWR, ShiftWR, WRCK, and UpdateWR signals <b>124</b> are not provided externally by a tester, but rather are provided internally by the TAM controller in response to the external clock <b>804</b> and Mode inputs <b>1014</b> from a tester. Thus the present invention provides a way to produce standard IEEE 1500 wrapper WIR scan control signals from an internal circuit (i.e. the TAM controller) rather than having to input the wrapper WIR scan control signals from an external tester.</div>
<div class="description-paragraph" id="p-0130" num="0219"> <figref idrefs="DRAWINGS">FIG. 20</figref> illustrates a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the WBR <b>110</b> scan instruction operation of <figref idrefs="DRAWINGS">FIGS. 14C and 16C</figref> consisting of capture, shift, and update steps. When programmed for a WBR scan operation, the TAM controller will set the SelectWIR output low <b>2038</b> to enable the wrapper's WBR for scanning. The capture step is achieved by inputting a Capture WBR Mode input pattern <b>2012</b> which sets the CaptureWR output <b>2022</b> high, followed by inputting a clock <b>2002</b> which produces a WRCK output <b>2026</b>. The shift steps are achieved by inputting Shift WBR Mode input patterns <b>2014</b>-<b>2018</b> which set the ShiftWR output <b>2024</b> high, and inputting clocks <b>2004</b>-<b>2008</b> which produce WRCKs <b>2028</b>-<b>2032</b> The update step is achieved by inputting an Update WBR Mode input pattern <b>2020</b> followed by inputting a clock <b>2010</b> which produces a WRCK output <b>2034</b>. The timing produced by the TAM controller on the SelectWIR, CaptureWR, ShiftWR, WRCK, and UpdateWR signals <b>124</b> performs a WBR scan operation as defined in IEEE 1500. However, unlike the IEEE 1500 standard the timing on the ShiftWIR, CaptureWR, ShiftWR, WRCK, and UpdateWR signals <b>124</b> are not provided externally by a tester, but rather are provided internally by the TAM controller in response to the external clock <b>804</b> and Mode inputs <b>1014</b> from a tester. Thus the present invention provides a way to produce standard IEEE 1500 wrapper WBR scan control signals from an internal circuit (i.e. the TAM controller) rather than having to input the wrapper WBR scan control signals from an external tester.</div>
<div class="description-paragraph" id="p-0131" num="0220"> <figref idrefs="DRAWINGS">FIG. 21</figref> illustrates a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the Fail Data Scan instruction operation of <figref idrefs="DRAWINGS">FIGS. 14E and 16E</figref> consisting of capture and shift steps. The capture step is achieved by inputting a Capture Fail Data Mode input pattern <b>2112</b> which sets the Load/Shift output <b>1222</b> high, followed by inputting a clock <b>2102</b> which produces a Shift Clock output <b>2124</b>. The shift steps are achieved by inputting Shift Fail Data Mode input patterns <b>2114</b>-<b>2120</b> which set the Load/Shift output <b>1222</b> low, and inputting clocks <b>2104</b>-<b>2110</b> which produce Shift Clocks <b>2126</b>-<b>2132</b>. As seen, the Fail Data Scan timing on the Load/Shift <b>1222</b> and Shift Clock <b>1224</b> outputs are not provided externally by a tester, but rather are provided internally by the TAM controller in response to the external clock <b>804</b> and Mode inputs <b>1014</b> from a tester. Thus the present invention provides a way to produce Fail Data Scan control signals from an internal circuit (i.e. the TAM controller) rather than having to input the Fail Data Scan signals from an external tester.</div>
<div class="description-paragraph" id="p-0132" num="0221"> <figref idrefs="DRAWINGS">FIG. 21A</figref> is provided to illustrate that any of the scan operations, WIR scan of <figref idrefs="DRAWINGS">FIG. 19</figref>, WBR scan of <figref idrefs="DRAWINGS">FIG. 20</figref>, and Fail Buffer scan of <figref idrefs="DRAWINGS">FIG. 21</figref>, can use the previously mentioned No-Op Mode patterns to reduce the shift rate of the WIR, WBR, or Fail Buffer scan paths. As seen in <figref idrefs="DRAWINGS">FIG. 21A</figref>, one or more No-Op Mode patterns <b>2040</b> may be inserted between Shift Mode patterns <b>2042</b> to reduce the shift rate of WIR, WBR, or Fail Buffer scan paths. Reducing the shift rate using No-Op Mode patterns may be required if the Clock <b>804</b> input frequency from the tester is high to guarantee that shift operations between daisychained TAMs, cores, or Fail Buffers operate properly. Also if the Scan Out <b>732</b> signal from a device has a long return path to the tester and the Clock <b>804</b> frequency is high, No-Op Mode patterns can be used to reduce the shift rate to guarantee that shift operations between the device and tester operates properly. No-Op Mode patterns may be similarly used in any other test or scan operation shown or implied in this disclosure to reduce testing or shifting rates as required.</div>
<div class="description-paragraph" id="p-0133" num="0222"> <figref idrefs="DRAWINGS">FIG. 22</figref> illustrates a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the Parallel Scan Test instruction operation of <figref idrefs="DRAWINGS">FIGS. 14D and 16D</figref> consisting of capture response data, load stimulus data, load expected data, load mask data, and shift &amp; compare steps. When programmed for a Parallel Scan Test operation, the TAM controller will set the SelectWIR output <b>124</b> low to enable scan access to the wrapper's parallel scan paths of <figref idrefs="DRAWINGS">FIGS. 3 and 4</figref>. The capture response step is achieved by inputting a Capture Response Mode input pattern <b>2212</b> which sets the CaptureWR output <b>124</b> high, followed by inputting a clock <b>2202</b> which produces a WRCK output <b>2228</b> that captures response data into the parallel scan paths. The load stimulus data step is achieved by inputting a Load Stimulus Data Mode input pattern <b>2214</b> and Stimulus Data <b>2222</b> on input bus <b>720</b>, followed by a clock <b>2204</b> which produces a SDC clock output <b>2230</b> that writes the stimulus data into the SDM <b>742</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The load expected data step is achieved by inputting a Load Expected Data Mode input pattern <b>2216</b> and Expected Data <b>2224</b> on input bus <b>720</b>, followed by a clock <b>2206</b> which produces a EDC clock output <b>2232</b> that writes the expected data into the EDM <b>748</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The load mask data step is achieved by inputting a Load Mask Data Mode input pattern <b>2218</b> and Mask Data <b>2226</b> on input bus <b>720</b>, followed by a clock <b>2208</b> which produces a MDC clock output <b>2234</b> that writes the mask data into the MDM <b>746</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The shift &amp; compare step is achieved by inputting a Shift &amp; Compare Mode input pattern <b>2220</b> which sets the ShiftWR output <b>124</b> high, followed by inputting a clock <b>2210</b> which produces a WRCK <b>2236</b> to shift the parallel scan paths one time to load stimulus data from the SDM and a Compare Clock <b>2238</b> that compares the response data output from the parallel scan paths to unmasked expected data, as described in regard to <figref idrefs="DRAWINGS">FIG. 12</figref>.</div>
<div class="description-paragraph" id="p-0134" num="0223">As seen, the Load Stimulus Data, Load Expected Data, Load Mask Data, and Shift &amp; Compare steps are repeated in an inner loop <b>2240</b> that defines the shift portion of a scan cycle. The shift portion of a scan cycle is used to fill the parallel scan paths with stimulus data and empty the parallel scan paths of the response data. When the parallel scan path filling and emptying process is complete, a new scan cycle is started by the shown outer loop <b>2242</b> which repeats the capture response step by inputting a Capture Response Mode input pattern <b>2212</b> and a clock <b>2202</b> that producing a WRCK <b>228</b> to capture response data into the parallel scan paths. The inner and outer loops continue as described until all the scan cycles required for the test have been executed.</div>
<div class="description-paragraph" id="p-0135" num="0224">As seen, the Parallel Scan Test timing on the CaptureWR <b>124</b>, WRCK <b>124</b>, SDC <b>1002</b>, EDC <b>1004</b>, MDC <b>1006</b>, Compare Clock <b>1218</b>, and SelectWIR <b>124</b> outputs are not provided externally by a tester, but rather are provided internally by the TAM controller in response to the external clock <b>804</b> and Mode inputs <b>1014</b> from a tester. Thus the present invention provides a way to produce Parallel Scan Test control signals from an internal circuit (i.e. the TAM controller) rather than having to input the Parallel Scan Test control signals from an external tester. In should be understood that the shown sequences of loading stimulus data first, expected data second, and mask data last are not required to be in that particular order.</div>
<div class="description-paragraph" id="p-0136" num="0225"> <figref idrefs="DRAWINGS">FIG. 23</figref> is provided to illustrate the timing of back to back response capture operations during the Parallel Scan Test operation. Back to back capture operations are used to improve the ability to do transition and timing tests using scan paths. As seen the only difference between the Parallel Scan Test timing of <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref> is that a second Capture Response Mode input pattern <b>2302</b> is input following the first Capture Response Mode input pattern <b>2212</b>, along with a second clock input <b>2304</b> that produces a second WRCK output <b>2306</b> to cause a second parallel scan path capture operation.</div>
<div class="description-paragraph" id="p-0137" num="0226">As mentioned in regard to <figref idrefs="DRAWINGS">FIGS. 10 and 11</figref>, mask data is required to mask off unknown scan path response data from being compared to expected data during the Compare Clock <b>1218</b> from the TAM controller <b>706</b> or <b>1502</b>. However, it is possible to design circuits for scan testing that do not produce unknown response data, i.e. all the response data from the scan paths will be known. In this case the need for mask data input to the TAM <b>704</b> and circuits in the TAM <b>704</b> for storing and using the mask data can be eliminated.</div>
<div class="description-paragraph" id="p-0138" num="0227"> <figref idrefs="DRAWINGS">FIG. 24</figref> is provided to illustrate a TAM <b>2402</b> coupled to a core wrapper <b>2404</b> whose WPOs do not produce unknown response data outputs to compare circuit <b>2406</b>. The compare circuit <b>2406</b> could simply be compare circuit <b>750</b> of <figref idrefs="DRAWINGS">FIG. 12</figref> with the mask data (MD) bit inputs to each of the maskable comparators <b>1216</b> tied or set low so that the expected data (ED) bits and response data (RD) bits are always compared. As seen in <figref idrefs="DRAWINGS">FIG. 24</figref>, the TAM <b>2402</b> does not require a MDM <b>746</b> as shown in the TAM of <figref idrefs="DRAWINGS">FIG. 12</figref>, and therefore does not require the MDC <b>1006</b> input from TAM controller <b>706</b> to load mask data from input bus <b>720</b>. However, the TAM <b>2402</b> could be TAM <b>704</b> where the MDM <b>746</b> is present but used only once at the beginning of a test to be loaded with a mask data pattern (all lows) that forces a compare between expected data (ED) and response data (RD) bit inputs to maskable compare circuit <b>1216</b>.</div>
<div class="description-paragraph" id="p-0139" num="0228"> <figref idrefs="DRAWINGS">FIG. 25</figref> is provided to illustrate a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the Parallel Scan Test instruction operation using the TAM <b>2402</b> of <figref idrefs="DRAWINGS">FIG. 24</figref>. The timing is identical to that of <figref idrefs="DRAWINGS">FIG. 22</figref> with the exception that it does not include the step of loading mask data, since mask data is not required in the parallel scan test since the core wrapper does not output unknown response data on WPO. As mentioned, if TAM <b>2402</b> is TAM <b>704</b>, the tester can load the MDM of TAM <b>704</b> at the beginning of the test with a mask pattern that enables all compare operations performed during the test. After this one time MDM load, the parallel scan test instruction would proceed with the previously described scan cycle inner loop <b>2240</b> and outer loop <b>2242</b> timing shown in <figref idrefs="DRAWINGS">FIG. 22</figref> until all required scan cycles have been performed.</div>
<div class="description-paragraph" id="p-0140" num="0229"> <figref idrefs="DRAWINGS">FIG. 26</figref> is provided to illustrate a detail timing diagram of the TAM controller <b>706</b> or <b>1502</b> programmed to perform the Parallel Scan Test instruction operation using the TAM <b>2402</b> of <figref idrefs="DRAWINGS">FIG. 24</figref>. The timing is identical to that of <figref idrefs="DRAWINGS">FIG. 23</figref> (i.e. scan testing using back to back response captures) with the exception that it does not include the step of loading mask data, since mask data is not required in the back to back capture parallel scan test since the core wrapper does not output unknown response data on WPO. As mentioned, if TAM <b>2402</b> is TAM <b>704</b>, the tester can load the MDM of TAM <b>704</b> at the beginning of the test with a mask pattern that enables all compare operations performed during the test. After this one time MDM load, the back to back capture parallel scan test instruction would proceed with the previously described scan cycle inner loop <b>2240</b> and outer loop <b>2242</b> timing shown in <figref idrefs="DRAWINGS">FIG. 22</figref> until all required scan cycles have been performed.</div>
<div class="description-paragraph" id="p-0141" num="0230">As can be seen by comparing the timing of <figref idrefs="DRAWINGS">FIG. 25</figref> to <figref idrefs="DRAWINGS">FIG. 22</figref> and <figref idrefs="DRAWINGS">FIG. 26</figref> to <figref idrefs="DRAWINGS">FIG. 23</figref>, the removal of the mask data load step improves the shift efficiency of the shift portion of each scan cycle. In <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref> three load steps (stimulus, expected, and mask) are required prior to performing the shift &amp; compare step. In <figref idrefs="DRAWINGS">FIGS. 25 and 26</figref>, only two load steps are required (stimulus and expected) prior to performing the shift &amp; compare step. Since the shifting &amp; comparing steps occur at a more rapid rate in <figref idrefs="DRAWINGS">FIGS. 25 and 26</figref> than in <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref> the time required to complete all the scan cycles required for the test is reduced.</div>
<div class="description-paragraph" id="p-0142" num="0231">As mentioned earlier in regard to <figref idrefs="DRAWINGS">FIGS. 14A-14F</figref>, the TAM controller <b>706</b> or <b>1502</b> may be programmed to perform any desired output operation in response to the Mode inputs, by loading an instruction into the TIR <b>1302</b>. Also a mentioned, the TAM controller may include additional outputs and/or additional Mode inputs to allow for controlling other circuits within a TAM or other circuits within the DUT. These other circuits may be test circuits, debug circuits, trace circuits, and/or emulation circuits. The following examples illustrate a TAM controller <b>2700</b> with additional signals added for interfacing to an IEEE 1149.1 standard TAP circuit within a core or other circuit within a DUT.</div>
<div class="description-paragraph" id="p-0143" num="0232"> <figref idrefs="DRAWINGS">FIG. 27</figref> illustrates a TAM controller <b>2700</b> that includes additional control outputs (TRST, TMS, TCK), an additional data input (TDO), and an additional data output (TDI) for interfacing with an IEEE 1149.1 TAP circuit. The IEEE 1149.1 TRST (test reset), TMS (test mode select), TCK (test clock), TDI (test data input), and TDO (test data output) signals are well known. TAM controller <b>2700</b> is identical to TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 13</figref> with the exception of these additional output and input signals. The instruction decode circuit <b>2712</b> of TAM controller <b>2700</b> is identical to the instruction decode circuit <b>1308</b> of TAM controller <b>706</b> with the exception that it is designed to additionally decode the Mode inputs <b>1014</b> to operate these signals in response to an instruction loaded in the TIR <b>1302</b>. The multiplexer <b>2714</b> of TAM controller <b>2700</b> is identical to multiplexer <b>1306</b> with the exception that multiplexer <b>2714</b> has an additional input for coupling the TDO signal <b>2710</b> to the Scan Out <b>732</b> signal. As seen, the Scan In signal <b>734</b> is additionally coupled to the TDI signal <b>2708</b>. The TRST, TMS, and TCK signals are for controlling the operation of TAP circuit. The TDI signal is for inputting data to a TAP circuit. The TDO signal is for inputting data from a TAP circuit. It should be understood that the TAM controller <b>1502</b> of <figref idrefs="DRAWINGS">FIG. 15</figref> could be equally modified as described above if desired.</div>
<div class="description-paragraph" id="p-0144" num="0233"> <figref idrefs="DRAWINGS">FIG. 28</figref> illustrates the TAM controller <b>2700</b> interfaced to a TAP circuit <b>2802</b>. The TAP circuit <b>2802</b> can be a circuit used for performing a test operation, a debug operation, a trace operation, an emulation operation, and/or an in-circuit programming operation. The TAP circuit <b>2802</b> may be a circuit within a core of a DUT, a circuit within a circuit not considered to be a core of a DUT, or a circuit separate from cores and other circuits within a DUT that is required to perform one of the above or other functions required within the DUT. The TAP circuit <b>2802</b> contains a finite state machine, an instruction register, and a plurality of data registers. The TMS and TCK signals regulate the operation of the finite state machine to control the access to the instruction register or the plurality of data registers. The TRST signal is for resetting the TAP circuit. The TDI and TDO signals are for communicating data to instruction register or plurality of data registers.</div>
<div class="description-paragraph" id="p-0145" num="0234">Mode input pattern definition <b>2804</b> is like that previously shown in <figref idrefs="DRAWINGS">FIGS. 14A-14F</figref> in that it illustrates the loading of a TAP Scan instruction into the TIR <b>1302</b> of the TAM controller <b>2700</b> using the all zero input pattern. In response to this instruction, the Mode <b>0</b>-<b>2</b> input patterns are programmed in the instruction decode circuit <b>2712</b> to produce the following output operations from the TAM controller <b>2700</b>. Mode <b>0</b>-<b>2</b> input patterns that are not programmed by this instruction are defined as no-operation (No-Op) patterns. No-Op patterns do not produce outputs from the TAM controller.</div>
<div class="description-paragraph" id="p-0146" num="0235">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:0:1, a Set TMS High &amp; Do TCK operation occurs which sets the TMS <b>2704</b> signal high and produces a gated clock output on TCK <b>2706</b>. This operation is used to move the finite state machine within the TAP circuit <b>2802</b> through states.</div>
<div class="description-paragraph" id="p-0147" num="0236">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:0, a Set TMS Low &amp; Do TCK operation occurs which sets the TMS <b>2704</b> signal low and produces a gated clock output on TCK <b>2706</b>. This operation is used to move the finite state machine within the TAP circuit <b>2802</b> through states.</div>
<div class="description-paragraph" id="p-0148" num="0237">When Mode <b>2</b>:<b>1</b>:<b>0</b>=0:1:1, a Reset TAP operation occurs which produces a gated reset output on TRST <b>2702</b>. This operation is used to reset circuitry within the TAP circuit.</div>
<div class="description-paragraph" id="p-0149" num="0238">The finite state machine within the TAP circuit responds to TMS and TCK to transition through a standard set of 16 states. The logic level present on TMS when a TCK occurs determines the state transitions. These state transitions are used to perform Instruction Scan, Data Scan, Run/Test Idle, and Test Reset functions. The instruction scan state transitions include among other states, a state for capturing data into the instruction register of the TAP circuit, a state for shifting data into the instruction register via TDI and from the instruction register via TDO, and a state for updating data from the instruction register. The data scan state transitions include among other states, a state for capturing data into a selected data register within the TAP circuit, a state for shifting data into the selected data register via TDI and from the select data register via TDO, and a state for updating data from the selected data register. Run/Test Idle is a state where the TAP circuit transitions to when it is idle or running a test. Test Reset is a state where the TAP circuit transition to when it is to be held in a reset condition. The operation of the finite state machine of TAP circuits in response to the TMS and TCK inputs is well known.</div>
<div class="description-paragraph" id="p-0150" num="0239">When the TAP circuit is performing an instruction or data scan operation, the TDI input to the TAP circuit will be driven by an external tester via Scan In signal <b>734</b> of the TAM controller and the TDO output signal from the TAP circuit received by an external tester via the Scan Out <b>732</b> of the TAM controller. During the TAP scan instruction, the decode circuit <b>2712</b> of the TAM controller will output control to multiplexer <b>2714</b> to couple TDO <b>2710</b> to Scan Out <b>732</b>.</div>
<div class="description-paragraph" id="p-0151" num="0240"> <figref idrefs="DRAWINGS">FIG. 29</figref> illustrates DUT <b>2902</b> interfaced to an external controller <b>2924</b> for test, debug, trace, and/or emulation operations using the above described 1149.1 TAP interface of TAM controller <b>2700</b>. For simplification, the scan router <b>744</b> and TAM selector <b>710</b> circuits are not shown in the DUT. The DUT has a TAM <b>2908</b> which can be either a TAM <b>704</b> or <b>2402</b>, a core <b>2904</b> including a 1500 wrapper <b>102</b> and a 1149.1 TAP circuit <b>2802</b>, another circuit <b>2906</b> having a 1149.1 TAP circuit <b>2802</b>, and a TAM controller <b>2700</b>. The TAM is interfaced to the core wrapper's WPI and WPO buses via bus <b>2910</b>, to the input bus <b>720</b> from external controller <b>2924</b>, and to the TAM controller <b>2700</b> via bus <b>2912</b>, which includes CSI <b>1008</b>, CSO <b>1012</b>, compare circuit control signals <b>1010</b>, SDC <b>1002</b>, EDC <b>1004</b>, and MDC <b>1006</b>. The core's 1500 wrapper <b>102</b> is interfaced to the TAM controller <b>2700</b> via bus <b>2914</b> which includes WSI <b>126</b>, WSO <b>128</b>, and wrapper control signals <b>124</b>. The core's 1149.1 TAP circuit <b>2802</b> is interfaced to TAM controller <b>2700</b> via bus <b>2916</b>, which includes TDI <b>2708</b>, TDO <b>2710</b>, TCK <b>2706</b>, TMS <b>2704</b>, and TRST <b>2702</b>. The other circuit's <b>2906</b> TAP circuit <b>2802</b> is interfaced to TAM controller <b>2700</b> via bus <b>2918</b>, which includes another set of TDI <b>2708</b>, TDO <b>2710</b>, TCK <b>2706</b>, TMS <b>2704</b>, and TRST <b>2702</b> signals. The other circuit <b>2906</b> may be interfaced to the core <b>2904</b> via bus <b>2920</b> to participate in a test, debug, trace, and/or emulation operation along with core <b>2904</b>. The TAM controller <b>2700</b> is interfaced to the external controller <b>2924</b> for controlling test, debug, trace, and/or emulation operations via bus <b>2922</b>, which includes input bus <b>720</b>, Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, clock input <b>804</b>, SelectTAM input <b>802</b>, Scan In <b>734</b>, Scan Out <b>732</b>, and if used LoadTIR signal <b>1504</b>. The external controller can perform parallel scan testing of the core circuit <b>2904</b> as previously described using TAM <b>2908</b> and core wrapper <b>102</b>. The external controller can additionally perform test, debug, trace, and/or emulation of the core using the TAM controller's 1149.1 interface to the core circuit's <b>2904</b> TAP circuit <b>2802</b> and/or to the other circuit's <b>2902</b> TAP circuit <b>2802</b>. The TAP circuit <b>2802</b> of the other circuit <b>2906</b> may perform other operations as well, such as DUT fuse programming, DUT security programming, and DUT memory repair.</div>
<div class="description-paragraph" id="p-0152" num="0241">While the present invention up to now has described a TAM controller being associated with each TAM and wrapper in a DUT (see <figref idrefs="DRAWINGS">FIG. 7</figref>), a single system level TAM controller may be used to control multiple TAMs and wrappers as well. The following <figref idrefs="DRAWINGS">FIGS. 30-34</figref> illustrate the present invention using a single system TAM controller to control multiple TAMs, multiple wrappers, and multiple TAP circuits within a DUT.</div>
<div class="description-paragraph" id="p-0153" num="0242"> <figref idrefs="DRAWINGS">FIG. 30</figref> illustrates a DUT test architecture <b>3002</b> consisting of cores <b>3004</b> <b>1</b>-N each having a wrapper <b>102</b>, an embedded TAP circuit <b>2802</b>, and an associated TAM <b>3006</b> <b>1</b>-N. The associated TAMs may be a TAM <b>704</b> of <figref idrefs="DRAWINGS">FIG. 10</figref> or a TAM <b>2402</b> of <figref idrefs="DRAWINGS">FIG. 24</figref>. The wrappers, TAP circuits, and TAMs are separately interfaced to a system TAM controller <b>3008</b> via buses <b>3010</b> and <b>3012</b>. Buses <b>3010</b> and <b>3012</b> consist of core wrapper interface signals WSI <b>126</b>, WSO <b>128</b>, and wrapper control signals <b>124</b>, TAP circuit interface signals TDI <b>2708</b>, TDO <b>2710</b>, TMS <b>2704</b>, TCK <b>2806</b>, and TRST <b>2702</b>, TAM interface signals SDC <b>1002</b>, EDC <b>1004</b>, MDC <b>1006</b>, CSI <b>1008</b>, CSO <b>1012</b>, and compare circuit control signals <b>1010</b>. Each TAM <b>3006</b> also receives the input bus <b>720</b> from an external tester/controller <b>3014</b>. The system TAM controller <b>3008</b> is interfaced to the external tester/controller <b>3014</b> via input bus <b>720</b>, Mode signals <b>1014</b>, clock signal <b>804</b>, LoadTIR signal <b>1504</b>, Scan In signal <b>734</b>, and Scan Out signal <b>732</b>. In this and other examples in <figref idrefs="DRAWINGS">FIGS. 31-34</figref>, the previously described LoadTIR <b>1504</b> signal of <figref idrefs="DRAWINGS">FIG. 15</figref> will be used to load instructions into the TIR <b>1302</b> of system TAM controller <b>3014</b> instead of using a Mode input pattern as described in <figref idrefs="DRAWINGS">FIG. 13</figref>. It should be clear however that a Mode input pattern could have been used to load the TIR as well. In comparing the DUT test architecture of <figref idrefs="DRAWINGS">FIG. 30</figref> to the DUT test architecture of <figref idrefs="DRAWINGS">FIG. 13</figref> it is seen that the TAM selector <b>710</b> and Scan Router <b>744</b> circuits of <figref idrefs="DRAWINGS">FIG. 13</figref> are missing in the architecture of <figref idrefs="DRAWINGS">FIG. 30</figref>. The TAM selector <b>710</b> is not required, nor the SelectTAM signal <b>802</b>, because only one system TAM controller <b>3008</b> exists in the architecture and it is always selected to interface to the external tester/controller <b>3014</b> when the DUT is in test mode. The Scan Router <b>744</b> is not shown because the scan routing function has been moved into the system TAM controller <b>3008</b>, as will be described in <figref idrefs="DRAWINGS">FIG. 31</figref>.</div>
<div class="description-paragraph" id="p-0154" num="0243"> <figref idrefs="DRAWINGS">FIG. 31</figref> illustrates system TAM controller <b>3008</b> in more detail. System TAM controller <b>3008</b> consists of a TIR <b>1302</b>, an instruction decode circuit <b>3102</b>, and a Scan Router <b>3104</b>. Loading of the TIR occurs as described in <figref idrefs="DRAWINGS">FIG. 15</figref> using the LoadTIR signal <b>1504</b>. The instruction loaded into the TIR programs how the instruction decode circuit <b>3102</b> responds to Mode input patterns <b>1014</b> to control its outputs, also as described in <figref idrefs="DRAWINGS">FIG. 15</figref>. As seen, the instruction decode circuit <b>3102</b> has outputs that are input to circuit boxes <b>3106</b> and <b>3108</b>, and outputs that control the scan routing function of Scan Router <b>3104</b>. Circuit box <b>3106</b> outputs signals on bus <b>3010</b> that in this example are the output signals shown in <figref idrefs="DRAWINGS">FIG. 27</figref>, including WRCK, Count Clock Compare Clock, Shift Clock, SDC, EDC, MDC, SelectWIR, ShiftWR, CaptureWR, UpdateWR, TransferDR, WRST, Load/Shift, Count Reset, TRST, TMS, and TCK outputs. In addition, bus <b>3110</b> also includes the TDI-<b>1</b>, WSI-<b>1</b>, CSI-<b>1</b>, TDO-<b>1</b>, WSO-<b>1</b>, and CSO-<b>1</b> signals interfaced to the Scan Router <b>3104</b>. Circuit box <b>3108</b> outputs signals on bus <b>3012</b> that in this example are also the outputs shown in <figref idrefs="DRAWINGS">FIG. 27</figref>, including WRCK, Count Clock Compare Clock, Shift Clock, SDC, EDC, MDC, SelectWIR, ShiftWR, CaptureWR, UpdateWR, TransferDR, WRST, Load/Shift, Count Reset, TRST, TMS, and TCK outputs. In addition, bus <b>3112</b> also includes the TDI-N, WSI-N, CSI-N, TDO-N, WSO-N, and CSO-N signals interfaced to the Scan Router <b>3104</b>. Circuit boxes <b>3106</b> and <b>3108</b> simply illustrate the clock gating, reset gating, and wiring shown in <figref idrefs="DRAWINGS">FIG. 27</figref> between the instruction decode circuit's outputs and the output buses <b>3010</b> and <b>3012</b> of system TAM controller <b>3008</b>. In response to an instruction loaded into the TIR, the system TAM controller <b>3008</b> responds to Mode input patterns <b>1014</b> to output control signals on bus <b>3010</b> or bus <b>3012</b>, output data on selected data signals of bus <b>3010</b> or <b>3012</b>, and input data from selected data signals of bus <b>3010</b> or <b>3012</b>.</div>
<div class="description-paragraph" id="p-0155" num="0244">If the instruction is for scanning a TAP circuit <b>2802</b> within core <b>1</b>, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to TDI-<b>1</b> and Scan Out <b>732</b> to TDO-<b>1</b>, followed by outputting control on bus <b>3010</b> to control the TAP circuit <b>2802</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 28</figref>. If the instruction is for scanning the wrapper <b>102</b> of core <b>1</b>, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to WSI-<b>1</b> and Scan Out <b>732</b> to WSO-<b>1</b>, followed by outputting control on bus <b>3010</b> to control the wrapper <b>102</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIGS. 19 and 20</figref>. If the instruction is for scanning the compare circuit <b>750</b> of TAM <b>1</b> of core <b>1</b>, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to CSI-<b>1</b> and Scan Out <b>732</b> to CSO-<b>1</b>, followed by outputting control on bus <b>3010</b> to control the compare circuit <b>750</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 21</figref>. If the instruction is for operating TAM <b>1</b> and the wrapper of core <b>1</b> to perform a parallel scan test, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control on bus <b>3010</b> to perform the response capture, data (stimulus, expected, mask) input, and shift &amp; compare steps as described in regard to <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref>.</div>
<div class="description-paragraph" id="p-0156" num="0245">If the instruction is for scanning a TAP circuit <b>2802</b> within core N the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to TDI-N and Scan Out <b>732</b> to TDO-N, followed by outputting control on bus <b>3012</b> to control the TAP circuit <b>2802</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 28</figref>. If the instruction is for scanning the wrapper <b>102</b> of core N, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to WSI-N and Scan Out <b>732</b> to WSO-N, followed by outputting control on bus <b>3012</b> to control the wrapper <b>102</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIGS. 19 and 20</figref>. If the instruction is for scanning the compare circuit <b>750</b> of TAM N of core N, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to CSI-N and Scan Out <b>732</b> to CSO-N, followed by outputting control on bus <b>3012</b> to control the compare circuit <b>750</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 21</figref>. If the instruction is for operating TAM N and the wrapper of core N to perform a parallel scan test, the instruction decode circuit <b>3102</b> of the TAM controller <b>3008</b> will output control on bus <b>3012</b> to perform the response capture, data (stimulus, expected, mask) input, and shift &amp; compare steps as described in regard to <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref>.</div>
<div class="description-paragraph" id="p-0157" num="0246">Instructions can be input to the system TAM controller <b>3008</b> to cause the Scan Router <b>3104</b> to place multiple wrappers in series between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning instructions or data through multiple wrappers. Instructions can also be input to the system TAM controller <b>3008</b> to cause the Scan Router <b>3104</b> to place multiple TAP circuits in series between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning instructions or data through multiple TAP circuits. Instructions can also be input to the system TAM controller <b>3008</b> to cause the Scan Router <b>3104</b> to place multiple TAM compare circuits <b>750</b> in series between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning fail data from multiple compare circuits.</div>
<div class="description-paragraph" id="p-0158" num="0247"> <figref idrefs="DRAWINGS">FIG. 32</figref> illustrates a DUT test architecture <b>3202</b> consisting of cores <b>3204</b> <b>1</b>-N each having a wrapper <b>102</b>, an embedded TAP circuit <b>2802</b>, and an associated TAM <b>3206</b> <b>1</b>-N. The wrappers, TAP circuits, and TAMs are commonly interfaced to a system TAM controller <b>3208</b> via a bus <b>3210</b>. The system TAM controller outputs an Enable-<b>1</b> signal <b>3212</b> to core l's wrapper, TAP circuit, and TAM <b>1</b>, and an Enable-N signal <b>3214</b> to core N's wrapper, TAP circuit, and TAM N. The Enable <b>1</b> signal enables core <b>1</b>'s wrapper, TAP circuit, and TAM <b>1</b> to operate using bus <b>3210</b> from system TAM controller <b>3208</b>. The Enable N signal enables core N's wrapper, TAP circuit, an TAM N to operate using bus <b>3210</b> from system TAM controller <b>3208</b>. Except for the use of a common bus <b>3210</b> and Enable signals <b>1</b>-N from system TAM controller <b>3208</b>, the architecture is similar to that described in <figref idrefs="DRAWINGS">FIG. 30</figref>.</div>
<div class="description-paragraph" id="p-0159" num="0248"> <figref idrefs="DRAWINGS">FIG. 33</figref> illustrates system TAM controller <b>3208</b> in more detail. System TAM controller <b>3208</b> consists of a TIR <b>1302</b>, an instruction decode circuit <b>3302</b>, and a Scan Router <b>3104</b>. Loading of the TIR occurs as described in <figref idrefs="DRAWINGS">FIG. 15</figref> using the LoadTIR signal <b>1504</b>. The Scan Router <b>3104</b> is similar to the previously described Scan Router <b>744</b> in that it allows coupling the Scan In <b>734</b> and Scan Out <b>732</b> of the system TAM controller to one or more serially accessible circuits (i.e. TAM circuit, TAP circuit, Wrapper circuit). The instruction loaded into the TIR programs how the instruction decode circuit <b>3302</b> responds to Mode input patterns <b>1014</b> to control its outputs, also as described in <figref idrefs="DRAWINGS">FIG. 15</figref>. As seen, the instruction decode circuit <b>3302</b> has outputs that are input to circuit box <b>3106</b>, outputs for Enable <b>1</b> <b>3212</b> and Enable N <b>3214</b>, and outputs that control the scan routing function of Scan Router <b>3104</b>. Circuit box <b>3106</b> outputs signals on bus <b>3210</b> that in this example are the outputs shown in <figref idrefs="DRAWINGS">FIG. 27</figref>, including WRCK, Count Clock Compare Clock, Shift Clock, SDC, EDC, MDC, SelectWIR, ShiftWR, CaptureWR, UpdateWR, TransferDR, WRST, Load/Shift, Count Reset, TRST, TMS, and TCK outputs. In addition, bus <b>3210</b> also includes the TDI-<b>1</b>, TDI-N, WSI-<b>1</b>, WSI-N, CSI-<b>1</b>, CSI-N, TDO-<b>1</b>, TDO-N, WSO-<b>1</b>, WSO-N, CSO-<b>1</b>, and CSO-N signals interfaced to the Scan Router <b>3104</b>. Circuit box <b>3106</b> simply illustrates the clock gating, reset gating, and wiring shown in <figref idrefs="DRAWINGS">FIG. 27</figref> between the instruction decode circuit's outputs and the output bus <b>3210</b> of system TAM controller <b>3208</b>. In response to an instruction loaded into the TIR, the system TAM controller <b>3208</b> responds to Mode input patterns <b>1014</b> to output control signals on bus <b>3210</b>, output data on selected data signals of bus <b>3210</b>, and input data from selected data signals of bus <b>3210</b>.</div>
<div class="description-paragraph" id="p-0160" num="0249">If the instruction is for scanning a TAP circuit <b>2802</b> within core <b>1</b>, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-<b>1</b> output <b>3212</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to TDI-<b>1</b> and Scan Out <b>732</b> to TDO-<b>1</b>, followed by outputting control on bus <b>3210</b> to control the TAP circuit <b>2802</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 28</figref>. If the instruction is for scanning the wrapper <b>102</b> of core <b>1</b>, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-<b>1</b> output <b>3212</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to WSI-<b>1</b> and Scan Out <b>732</b> to WSO-<b>1</b>, followed by outputting control on bus <b>3210</b> to control the wrapper <b>102</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIGS. 19 and 20</figref>. If the instruction is for scanning the compare circuit <b>750</b> of TAM <b>1</b> of core <b>1</b>, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-<b>1</b> output <b>3212</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to CSI-<b>1</b> and Scan Out <b>732</b> to CSO-<b>1</b>, followed by outputting control on bus <b>3210</b> to control the compare circuit <b>750</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 21</figref>. If the instruction is for operating TAM <b>1</b> and the wrapper of core <b>1</b> to perform a parallel scan test, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-<b>1</b> output <b>3212</b> high, output control on bus <b>3210</b> to perform the response capture, data (stimulus, expected, mask) input, and shift &amp; compare steps as described in regard to <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref>.</div>
<div class="description-paragraph" id="p-0161" num="0250">If the instruction is for scanning a TAP circuit <b>2802</b> within core N the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-N output <b>3214</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to TDI-N and Scan Out <b>732</b> to TDO-N, followed by outputting control on bus <b>3210</b> to control the TAP circuit <b>2802</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 28</figref>. If the instruction is for scanning the wrapper <b>102</b> of core N, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-N output <b>3214</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to WSI-N and Scan Out <b>732</b> to WSO-N, followed by outputting control on bus <b>3210</b> to control the wrapper <b>102</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIGS. 19 and 20</figref>. If the instruction is for scanning the compare circuit <b>750</b> of TAM N of core N, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-N output <b>3214</b> high, output control to the Scan Router <b>3104</b> to couple Scan In <b>734</b> to CSI-N and Scan Out <b>732</b> to CSO-N, followed by outputting control on bus <b>3210</b> to control the compare circuit <b>750</b> to scan data as described in regard to <figref idrefs="DRAWINGS">FIG. 21</figref>. If the instruction is for operating TAM N and the wrapper of core N to perform a parallel scan test, the instruction decode circuit <b>3302</b> of the TAM controller <b>3208</b> will set the Enable-N output <b>3214</b> high, output control on bus <b>3210</b> to perform the response capture, data (stimulus, expected, mask) input, and shift &amp; compare steps as described in regard to <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref>.</div>
<div class="description-paragraph" id="p-0162" num="0251">Instructions can be input to the system TAM controller <b>3208</b> to cause the Scan Router <b>3104</b> to place multiple wrappers in series, via their WSIs and WSOs, between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning instructions or data through multiple wrappers. Instructions can also be input to the system TAM controller <b>3208</b> to cause the Scan Router <b>3104</b> to place multiple TAP circuits in series, via their TDIs and TDOs, between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning instructions or data through multiple TAP circuits. Instructions can also be input to the system TAM controller <b>3208</b> to cause the Scan Router <b>3104</b> to place multiple TAM compare circuits <b>750</b> in series, via their CSIs and CSOs, between Scan In <b>734</b> and Scan Out <b>732</b> to facilitate scanning fail data from multiple TAM compare circuits.</div>
<div class="description-paragraph" id="p-0163" num="0252"> <figref idrefs="DRAWINGS">FIG. 34</figref> illustrates the core <b>1</b> <b>3204</b> and TAM <b>1</b> <b>3206</b> circuits of <figref idrefs="DRAWINGS">FIG. 32</figref> in more detail. The TAM circuit <b>3206</b> is the same as the TAM circuit <b>704</b> of <figref idrefs="DRAWINGS">FIG. 10</figref> with the exception that the SDM <b>742</b>, compare circuit <b>750</b>, EDM <b>748</b>, and MDM <b>746</b> include an input for receiving the Enable-<b>1</b> signal <b>3212</b> from system TAM controller <b>3208</b>. The Enable-<b>1</b> signal is used to enable or disable the SDM, compare circuit, EDM, and MDM. The core <b>1</b> circuit is the same as the core circuit <b>708</b> of <figref idrefs="DRAWINGS">FIG. 10</figref> with the exceptions that; (1) the core <b>1</b> circuit <b>3204</b> includes an 1149.1 TAP circuit <b>2802</b> and interface, and (2) the core <b>1</b> circuit <b>3204</b> has an input for receiving the Enable-<b>1</b> signal <b>3212</b>. The Enable-<b>1</b> signal is used to enable or disable the 1500 wrapper and 1149.1 TAP circuits and interfaces of core <b>1</b>.</div>
<div class="description-paragraph" id="p-0164" num="0253">If core <b>1</b> <b>3204</b> and TAM <b>1</b> <b>3206</b> are to be accessed for a test, debug, trace, and/or emulation operation, the system TAM controller <b>3014</b> will set the Enable-<b>1</b> signal to a value that enables core <b>1</b>'s 1500 and 1149.1 circuits, and the circuits within TAM <b>3206</b>. While enabled, the TAM <b>1</b> and 1500 and 1149.1 circuits in core <b>1</b> respond to the control &amp; data bus <b>3210</b> from the system TAM controller to perform the desired operation. If the Enable-<b>1</b> signal <b>3212</b> is not set to a value that enables the core <b>1</b> wrapper, TAP, and TAM circuits, the circuits do not respond to the control &amp; data bus <b>3210</b> from the system TAM controller. Circuit <b>3402</b> shows one example way of how the control inputs to the wrapper, TAP, and TAM circuits of <figref idrefs="DRAWINGS">FIG. 34</figref> can be enabled or disabled using an And gate <b>3404</b> by the Enable-<b>1</b> signal. Control In of circuit <b>3402</b> can be any of the control inputs from control &amp; data bus <b>3210</b> (i.e. SDC <b>1002</b>, EDC <b>1004</b>, MDC <b>1006</b>, compare circuit <b>750</b> control signals <b>1010</b> (except for Count Reset <b>1228</b>), TAP circuit <b>2802</b> control signals <b>3404</b> (except for TRST <b>2702</b>), or wrapper circuit <b>102</b> control signals <b>124</b> (except for WRST <b>124</b>). If Enable-<b>1</b> is low, the Control Out signal of circuit <b>3402</b> is gated off low. If Enable-<b>1</b> is high, the Control Out signal of circuit <b>3402</b> is gated on to be driven by the Control In signal of circuit <b>3402</b>. The Count Reset, TRST, and WRST signals are preferably not gated on and off using And gate <b>3404</b>, as this would force a reset condition on the TAM compare circuit <b>750</b>, TAP circuit <b>2802</b>, and wrapper circuit <b>102</b> when the TAM and core <b>1</b> circuits are disabled from responding to the control &amp; data bus <b>3210</b>. The reason for this is that it may be required to enable and set up a test, debug, trace, and/or emulation operation in a plurality of cores and TAMs by enabling and setting up each core and TAM in a sequence. If circuits within the cores and TAMs were reset when they are disabled, the set up conditions loaded in the cores and TAM (especially the instruction registers of the wrapper and/or TAP circuits) would be cleared out. Due to this, it is preferred to not gate the reset inputs to core and TAM circuits when a plurality of cores and TAM are required to be set up to participate in a test, debug, trace, and/or emulation operation. However, if test, debug, trace, and/or emulation operations are only performed on one core and TAM at a time, it would be acceptable to gate the reset inputs to core and TAM circuits since the access to these circuits would be completed when they are disabled. While not shown in <figref idrefs="DRAWINGS">FIG. 34</figref>, the Core N <b>3204</b> and TAM N <b>3206</b> of <figref idrefs="DRAWINGS">FIG. 32</figref> can be similarly enabled or disabled by the Enable-N signal from the system TAM controller <b>3208</b> to respond or not respond the control &amp; data bus <b>3210</b>.</div>
<div class="description-paragraph" id="p-0165" num="0254">While the cores of <figref idrefs="DRAWINGS">FIGS. 30 and 32</figref> were shown to include TAP circuits <b>2802</b> and the system TAM controllers of <figref idrefs="DRAWINGS">FIGS. 30 and 32</figref> were shown to include interfaces for the TAP circuits <b>2802</b>, it should be understood that <figref idrefs="DRAWINGS">FIGS. 30 and 32</figref> could represent cores without TAP circuits and system TAM controllers without TAP circuit interfaces as well. Without TAP circuits, the cores would only have a wrapper <b>102</b> interface and the system TAM controllers would only have an interface for communicating with the core wrapper and TAM circuits.</div>
<div class="description-paragraph" id="p-0166" num="0255">In summarizing the architectures of the present invention, it is seen that the architecture of <figref idrefs="DRAWINGS">FIG. 7</figref> uses a TAM controller <b>706</b> for each TAM <b>704</b> and Core <b>708</b> combination, the architecture of <figref idrefs="DRAWINGS">FIG. 30</figref> uses one system TAM controller <b>3008</b> for all TAM <b>3006</b> and Core <b>3004</b> combinations, and the architecture of <figref idrefs="DRAWINGS">FIG. 32</figref> uses one system TAM controller <b>3208</b> for all TAM <b>3206</b> and Core <b>3204</b> combinations. The architectures of <figref idrefs="DRAWINGS">FIGS. 30 and 32</figref> differ in that the system TAM controller <b>3008</b> of <figref idrefs="DRAWINGS">FIG. 300</figref> accesses each Core and TAM combination using a separate bus <b>3010</b>-<b>3012</b>, whereas the system TAM controller <b>3208</b> of <figref idrefs="DRAWINGS">FIG. 32</figref> accesses each Core and TAM combination using a common bus <b>3212</b> through the use of Enable signals <b>3212</b>-<b>3214</b>.</div>
<div class="description-paragraph" id="p-0167" num="0256"> <figref idrefs="DRAWINGS">FIG. 35</figref> illustrates a testing arrangement of the present invention whereby a tester <b>3502</b> is interfaced to a plurality of DUTs <b>1</b>-N <b>3504</b>. The DUTs include one of the test architectures described in regard to <figref idrefs="DRAWINGS">FIGS. 7, 30, and 32</figref>. The tester has an interface to each DUT's test architecture consisting of an input bus <b>720</b>, a control bus <b>3506</b>, Scan In <b>724</b> or <b>734</b>, and Scan Out <b>726</b> or <b>732</b>. If the DUT architecture is the architecture of <figref idrefs="DRAWINGS">FIG. 7</figref>, the control bus <b>3506</b> will consist of Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, Clock <b>804</b>, and SelectTAM <b>802</b> signals. If the LoadTIR signal of <figref idrefs="DRAWINGS">FIG. 15</figref> is used to load the TIR <b>1302</b> instead of a Mode input pattern, the control bus <b>3506</b> will additionally include the LoadTIR signal <b>1504</b>. If the DUT architecture is the architecture of <figref idrefs="DRAWINGS">FIG. 30 or 32</figref>, the control bus <b>3506</b> will consist of Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, Clock <b>804</b>, and LoadTIR <b>1504</b> signals. If a Mode input <b>1014</b> pattern is used to load the TIR <b>1302</b>, the LoadTIR <b>1504</b> signal can be deleted from control bus <b>3506</b>. Since the tester has an interface to each DUT, all DUTs can be tested simultaneously by the tester operating all the DUT interfaces in parallel. At the end of test, the tester can operate the DUT interfaces to scan out the fail data from the DUT compare circuits <b>750</b>.</div>
<div class="description-paragraph" id="p-0168" num="0257"> <figref idrefs="DRAWINGS">FIG. 36</figref> illustrates an alternate testing arrangement of the present invention whereby a tester <b>3502</b> is interfaced to a plurality of strings <b>3602</b> of DUTs <b>3504</b>. As with <figref idrefs="DRAWINGS">FIG. 35</figref>, the DUTs <b>3504</b> include one of the test architectures described in regard to <figref idrefs="DRAWINGS">FIGS. 7, 30, and 32</figref>. The tester has an interface to each DUT string <b>3602</b> consisting of an input bus <b>720</b>, a control bus <b>3506</b>, Scan In <b>724</b> or <b>734</b>, and Scan Out <b>726</b> or <b>732</b>. As with <figref idrefs="DRAWINGS">FIG. 35</figref>, if the DUTs in the strings <b>3602</b> use the architecture of <figref idrefs="DRAWINGS">FIG. 7</figref>, the control bus <b>3506</b> to the strings will consist of Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, Clock <b>804</b>, and SelectTAM <b>802</b> signals. If the LoadTIR signal of <figref idrefs="DRAWINGS">FIG. 15</figref> is used to load the TIR <b>1302</b> instead of a Mode input pattern, the control bus <b>3506</b> to the strings will additionally include the LoadTIR signal <b>1504</b>. If the DUTs in the strings <b>3602</b> use the architecture of <figref idrefs="DRAWINGS">FIG. 30 or 32</figref>, the control bus <b>3506</b> to the strings will consist of Mode <b>0</b>-<b>2</b> inputs <b>1014</b>, Clock <b>804</b>, and LoadTIR <b>1504</b> signals. If a Mode input <b>1014</b> pattern is used to load the TIR <b>1302</b>, the LoadTIR <b>1504</b> signal can be deleted from control bus <b>3506</b> to the strings. Since the tester has an interface to each DUT string <b>3602</b>, all DUT strings can be tested simultaneously by the tester operating all the DUT string interfaces in parallel. At the end of test, the tester can operate the DUT string interfaces to scan out the fail data from the compare circuits <b>750</b> of each DUT in each DUT string.</div>
<div class="description-paragraph" id="p-0169" num="0258">In the testing arrangement of <figref idrefs="DRAWINGS">FIG. 35</figref> it is seen that if the tester <b>3502</b> has M number of DUT interfaces, each interface including input bus <b>720</b>, control bus <b>3506</b>, Scan In <b>724</b> or <b>734</b>, and Scan Out <b>726</b> or <b>732</b>, M DUTs may be simultaneously tested. However, in the DUT string testing arrangement of <figref idrefs="DRAWINGS">FIG. 36</figref> it is seen that the same tester <b>3502</b> with M interfaces can simultaneously test M DUT strings <b>3602</b>. If each of the M strings <b>3602</b> contains N DUTs, the number of DUTs that can be simultaneously tested using the same tester <b>3502</b> is M times N. Thus the testing arrangement of <figref idrefs="DRAWINGS">FIG. 36</figref> is advantageous over that of <figref idrefs="DRAWINGS">FIG. 35</figref> in that it allows for simultaneously testing a larger number of DUTs by placing the DUTs in a string that is interfaced to the tester via one of the tester's M interfaces. While the test architectures and interfaces of the present invention have been designed to allow either the testing arrangement of <figref idrefs="DRAWINGS">FIG. 35</figref> or testing arrangement of <figref idrefs="DRAWINGS">FIG. 36</figref>, the testing arrangement of <figref idrefs="DRAWINGS">FIG. 36</figref> may in some cases be preferred since it decreases DUT test time and cost by allowing for more DUTs to be tested simultaneously. The DUTs <b>3504</b> of <figref idrefs="DRAWINGS">FIGS. 35 and 36</figref> may be die on wafer, singulated die, or packaged integrated circuits.</div>
<div class="description-paragraph" id="p-0170" num="0259">As seen in <figref idrefs="DRAWINGS">FIGS. 35 and 36</figref> a parallel input bus <b>720</b> requires N parallel signal connections between the tester and DUTs. In some test arrangements it may be desired to utilize a serial input bus rather than a parallel input bus <b>720</b> to decrease the number of signal connections between the tester and DUTs. The following <figref idrefs="DRAWINGS">FIGS. 37-45</figref> illustrate how the present invention can use a serial bus instead of a parallel input bus <b>720</b> to reduce the number of DUT connections to a tester.</div>
<div class="description-paragraph" id="p-0171" num="0260"> <figref idrefs="DRAWINGS">FIG. 37</figref> illustrates a DUT test architecture having TAMS <b>3706</b>, TAM controllers <b>3710</b>, TAM Selector <b>3712</b>, and Scan Router <b>744</b>. The DUT test architecture is interfaced to a Tester <b>3704</b>. The DUT test architecture and interface to the tester is similar to that shown in <figref idrefs="DRAWINGS">FIG. 10</figref> with the following exceptions. A serial input bus <b>3714</b> is used to input data to the TAMS, <b>3706</b> TAM controllers <b>3710</b>, and TAM Selector <b>3712</b> instead of the parallel input bus <b>720</b>. The data register (<b>3810</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>) within the TAM selector <b>3712</b> is a serial input data register (i.e. a shift register) instead of the parallel input data register <b>806</b>/<b>808</b> of the TAM Selector of <figref idrefs="DRAWINGS">FIGS. 8A and 8B</figref>. The TIRs (<b>3808</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>) within the TAM controllers <b>3710</b> are serial input TIRs (i.e. shift registers) instead of the parallel input TIR <b>1302</b> shown in TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 13</figref>. The SDMs (<b>3802</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>) of TAMS <b>3706</b> are serial input SDMs (i.e. shift registers) instead of the parallel input SDM <b>742</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The EDMs (<b>3804</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>) of TAMS <b>3706</b> are serial input EDMs instead of the parallel input EDM <b>748</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>. The MDMs (<b>3806</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>) of TAMS <b>3706</b> are serial input MDMs instead of the parallel input MDM <b>746</b> of <figref idrefs="DRAWINGS">FIG. 10</figref>.</div>
<div class="description-paragraph" id="p-0172" num="0261">In <figref idrefs="DRAWINGS">FIG. 38</figref> a first example serial input bus <b>3714</b> is shown comprising a single serial data input signal. As seen, the serial data input signal of bus <b>3714</b> is coupled to the serial inputs of the SDM <b>3802</b>, EDM <b>3804</b>, MDM <b>3806</b>, TIR <b>3808</b>, and data register <b>3810</b>. To load a TAM select data pattern into data register <b>3810</b>, the SelectTAM signal <b>802</b> is set high and a number of clock inputs <b>804</b> are applied to clock the serial data pattern from the input bus <b>3714</b> into the serial input of the data register, as per the timing diagram <b>3812</b>. To load an instruction into the TIR <b>3808</b>, the LoadTIR signal <b>1504</b> is set high and a number of clock inputs <b>804</b> are applied to clock the serial instruction data from the input bus <b>3714</b> into the serial input of the TIR, as per timing diagram <b>3814</b>. To load stimulus data into the SDM <b>3802</b>, a number of Mode input patterns <b>1014</b> (like the single Load Stimulus Data Mode input pattern <b>2214</b> of <figref idrefs="DRAWINGS">FIG. 22</figref>) are input to the TAM controller <b>3710</b> to produce the number of SDC outputs <b>1002</b> required to clock serial stimulus data from input bus <b>3714</b> into the serial input of the SDM, as per timing diagram <b>3816</b>. To load expected data into the EDM <b>3804</b>, a number of Mode input patterns <b>1014</b> (like the single Load Expected Data Mode input pattern <b>2216</b> of <figref idrefs="DRAWINGS">FIG. 22</figref>) are input to the TAM controller <b>3710</b> to produce the number of EDC outputs <b>1004</b> required to clock serial expected data from input bus <b>3714</b> into the serial input of the EDM, as per timing diagram <b>3818</b>. To load mask data into the MDM <b>3806</b>, a number of Mode input patterns <b>1014</b> (like the single Load Mask Data Mode input pattern <b>2218</b> of <figref idrefs="DRAWINGS">FIG. 22</figref>) are input to the TAM controller <b>3710</b> to produce the number of MDC outputs <b>1006</b> required to clock serial mask data from input bus <b>3714</b> into the serial input of the MDM, as per timing diagram <b>3820</b>. Note that each serial operation, i.e. the timing diagrams <b>3812</b>-<b>3820</b>, occurs at different times since the single input on bus <b>3714</b> can only input to one of the shift registers (SDM <b>3802</b>, EDM <b>3804</b>, MDM <b>3806</b>, TIR <b>3808</b>, and data register <b>3810</b>) at a time.</div>
<div class="description-paragraph" id="p-0173" num="0262">The parallel scan test timing of the TAMs <b>3706</b> and TAM controllers <b>3710</b> of <figref idrefs="DRAWINGS">FIG. 37</figref> are similar to that previously described in <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref> with the exception that multiple Load Stimulus Data Mode patterns <b>2214</b>, multiple Expected Data patterns <b>2216</b>, and multiple Load Mask Data Mode patterns <b>2218</b> are required to be executed in the TAMs and TAM controllers of <figref idrefs="DRAWINGS">FIG. 37</figref> since the stimulus, expected, and mask data is loaded serially instead of in parallel as in the TAM and TAM controller of <figref idrefs="DRAWINGS">FIGS. 10</figref>.</div>
<div class="description-paragraph" id="p-0174" num="0263">In <figref idrefs="DRAWINGS">FIG. 39</figref> a second example serial input bus <b>3714</b> is shown comprising three serial data input signals <b>3902</b>-<b>3906</b>. As seen, the serial data input <b>3902</b> of bus <b>3714</b> is coupled to the serial input of the SDM <b>3802</b>, the serial data input <b>3904</b> of bus <b>3714</b> is coupled to EDM <b>3804</b>, and the serial data input <b>3906</b> is coupled to the serial inputs of the MDM <b>3806</b>, TIR <b>3808</b>, and data register <b>3810</b>. To load a TAM select data pattern into data register <b>3810</b>, the SelectTAM signal <b>802</b> is set high and a number of clock inputs <b>804</b> are applied to clock the serial data pattern from serial data input <b>3906</b> of bus <b>3714</b> into the serial input of the data register, as per the timing diagram <b>3908</b>. To load an instruction into the TIR <b>3808</b>, the LoadTIR signal <b>1504</b> is set high and a number of clock inputs <b>804</b> are applied to clock the serial instruction data from serial input <b>3906</b> of bus <b>3714</b> into the serial input of the TIR, as per timing diagram <b>3910</b>. To simultaneously load stimulus data into the SDM <b>3802</b>, expected data into EDM <b>3804</b>, and mask data into MDM <b>3806</b>, a number of Mode input patterns <b>1014</b> are input to the TAM controller <b>3710</b> to produce the number of SDC <b>1002</b>, EDC <b>1004</b>, and MDC <b>1006</b> outputs required to clock serial stimulus, expected, and mask data from serial data inputs <b>3902</b>-<b>3906</b> of bus <b>3714</b> into the serial input of the SDM, EDM, and MDM, as per timing diagram <b>3912</b>. Note that the serial stimulus, expected, and mask data load operations of timing diagram <b>3912</b> can occur at the same time since the SDM, EDM, and MDM are each coupled to separate serial data inputs <b>3902</b>-<b>3906</b> of bus <b>3714</b>. An instruction is defined and loaded into to the TIR of TAM controller <b>3706</b> to allow the instruction decode circuit <b>1308</b> to be programmed to respond to a Mode input pattern to simultaneously output the SDC <b>1002</b>, EDC <b>1004</b>, and MDC <b>1006</b> signals to SDM, EDM, and MDM as shown in timing diagram <b>3912</b>. As can be understood, the SDM, EDM, and MDM of <figref idrefs="DRAWINGS">FIG. 39</figref> can be loaded in one third the time it takes to load them using the single serial data input bus <b>3714</b> of <figref idrefs="DRAWINGS">FIG. 38</figref>. While the serial inputs to TIR <b>3808</b> and data register <b>3810</b> are shown coupled to serial data input <b>3906</b>, any of the serial data inputs <b>3902</b>-<b>3906</b> of bus <b>3714</b> could be used to load the TIR and data register.</div>
<div class="description-paragraph" id="p-0175" num="0264">The parallel scan test timing of the TAM <b>3706</b> and TAM controller <b>3710</b> of <figref idrefs="DRAWINGS">FIG. 37</figref> is similar to that previously described for the TAM <b>704</b> and TAM controller <b>706</b> of <figref idrefs="DRAWINGS">FIG. 7</figref> in <figref idrefs="DRAWINGS">FIGS. 22 and 23</figref> with the exception that the stimulus, expected, and mask data are loaded into the SDM, EDM, and MDM of TAM <b>3706</b> serially using the single serial data input of bus <b>3714</b> of <figref idrefs="DRAWINGS">FIG. 38</figref> or the three serial data inputs of bus <b>3714</b> instead of in parallel using bus <b>720</b>. Parallel scan testing using the three serial data input bus <b>3714</b> of <figref idrefs="DRAWINGS">FIG. 39</figref> occurs faster than parallel scan testing using the single serial data input bus <b>3714</b> of <figref idrefs="DRAWINGS">FIG. 38</figref> since the SDM, EDM, and MDM can all be loaded simultaneously.</div>
<div class="description-paragraph" id="p-0176" num="0265">While not shown, the TAM and system TAM controller of <figref idrefs="DRAWINGS">FIG. 34</figref> can be modified to use SDM <b>3802</b>, EDM <b>3804</b>, and TIR <b>3808</b> to operate using a one or two serial data input bus <b>3714</b>. Using a one serial input data bus <b>3714</b> allows sequentially loading the SDM <b>3802</b> and EDM <b>3804</b> as was shown in <figref idrefs="DRAWINGS">FIG. 38</figref>. Using a two serial data input bus <b>3714</b> allows simultaneously loading the SDM <b>3802</b> and EDM <b>3804</b> as shown in <figref idrefs="DRAWINGS">FIG. 39</figref>.</div>
<div class="description-paragraph" id="p-0177" num="0266"> <figref idrefs="DRAWINGS">FIG. 40</figref> is provided to illustrate how the TAM and system TAM controller within DUT <b>3202</b> of <figref idrefs="DRAWINGS">FIG. 32</figref> could be modified by the use of SDM <b>3802</b>, EDM <b>3804</b>, MDM <b>3806</b>, and TIR <b>3808</b> to operate using a one or three serial data input <b>3714</b> instead of the parallel input bus <b>720</b>. With a one serial input bus <b>3714</b>, the SDM <b>3802</b>, EDM <b>3804</b>, and MDM <b>3806</b> of TAM <b>3706</b>, and the TIR <b>3808</b> of system TAM controller <b>4006</b> are loaded as described in regard to <figref idrefs="DRAWINGS">FIG. 38</figref>. With a three serial input bus <b>3714</b>, the SDM <b>3802</b>, EDM <b>3804</b>, and MDM <b>3806</b> of TAM <b>3707</b>, and the TIR <b>3808</b> of system TAM <b>4006</b> are loaded as described in regard to <figref idrefs="DRAWINGS">FIG. 39</figref>. While not shown, the TAM and system TAM controller of <figref idrefs="DRAWINGS">FIG. 30</figref> can be similarly modified to use SDM <b>3802</b>, EDM <b>3804</b>, MDM <b>3806</b>, and TIR <b>3808</b> to operate using a one or three serial data input bus <b>3714</b>.</div>
<div class="description-paragraph" id="p-0178" num="0267">There may be times when it is advantageous to be able to test a DUT using either a parallel input bus <b>720</b> or a one, two, or three serial input bus. On one hand, if it is desired to reduce test times of the DUT, an N wide parallel input bus <b>720</b> can be used to increase the test data bandwidth between the tester and the DUT, according to the present invention. On the other hand, if it is desired to reduce the number of connections between the tester and the DUT, a one, two, or three serial input bus can be used, again according to the present invention. One example of using a one, two, or three serial input bus to test DUTs would be at wafer level testing where a large number of die need to be contacted and tested. Since a large number of die are contacted and tested in parallel, the test can run at a slower rate, due to input data serialization. One example of using the parallel input bus to test DUTs would be at final test where a smaller number of packaged devices need to be contacted and tested. Since a smaller number of devices are contacted and tested, the tester can allocate more of its interface for the parallel bus of each device to allow the test to run at a faster rate, due to input data parallelization.</div>
<div class="description-paragraph" id="p-0179" num="0268"> <figref idrefs="DRAWINGS">FIG. 41</figref> illustrates a DUT test architecture <b>4102</b> having TAMs <b>4106</b>, TAM controllers <b>4110</b>. TAM Selector <b>4112</b>, and Scan Router <b>744</b>. The DUT test architecture is interfaced to a Tester <b>4104</b>. The DUT test architecture and interface to the tester is similar to that shown in <figref idrefs="DRAWINGS">FIG. 37</figref> with the following exceptions. An input bus <b>4114</b> is used to selectively input serial or parallel data to the TAMs <b>4106</b>, TAM controllers <b>4110</b>, and TAM Selector <b>4112</b>. The data register (<b>4402</b> of <figref idrefs="DRAWINGS">FIG. 44</figref>) within the TAM selector <b>4112</b> is designed to operate as either a serial input register or a parallel input register. The TIRs (<b>4302</b> of <figref idrefs="DRAWINGS">FIG. 43</figref>) within the TAM controllers <b>4110</b> are designed to operate as either a serial input register or a parallel input register. The SDMs, EDMs, and MDMs (<b>4202</b> of <figref idrefs="DRAWINGS">FIG. 42</figref>) of TAMs <b>4106</b> are designed to operate as either a serial input register or a parallel input register. A Serial/Parallel select signal <b>4116</b> is added to the DUT test interface to allow a tester to control whether the SDMs, EDMs, MDMs <b>4202</b>, TIRs <b>4302</b>, and data register <b>4402</b> input data serially or in parallel from input bus <b>4114</b>.</div>
<div class="description-paragraph" id="p-0180" num="0269"> <figref idrefs="DRAWINGS">FIG. 42</figref> illustrates an example circuit design for the TAM's SDM, EDM and MDM circuits <b>4202</b> of <figref idrefs="DRAWINGS">FIG. 41</figref>. Circuit <b>4202</b> has a serial input <b>4204</b>, N parallel inputs <b>4206</b>-<b>4214</b>, N parallel outputs <b>4218</b>-<b>4226</b>, Serial/Parallel input <b>4116</b>, and a clock input <b>4216</b>. If circuit <b>4202</b> is a SDM the clock input <b>4216</b> is coupled to SDC <b>1002</b>. If circuit <b>4202</b> is an EDM the clock input <b>4216</b> is coupled to EDC <b>1004</b>. If the circuit <b>4202</b> is a MDM the clock input <b>4216</b> is coupled to MDC <b>1006</b>. Within circuit <b>4202</b> there are N multiplexer <b>4228</b> and flip flop <b>4230</b> pairs that form an N bit register. When the Serial/Parallel input <b>4116</b> is high, the multiplexers <b>4228</b> are set to allow data from the serial input <b>4204</b> to be shifted through the flip flops <b>4230</b> to serially load the register. When the Serial/Parallel input is low, the multiplexers <b>4228</b> are set to allow data from the parallel inputs <b>4206</b>-<b>4414</b> to load the flips flops <b>4230</b> of the register in parallel. When using a parallel input bus <b>4114</b>, N inputs will be connected to the parallel inputs <b>4206</b>-<b>4214</b> of an SDM, EDM, and MDM circuit <b>4202</b> to sequentially load the SDM, EDM, and MDM circuits in parallel as described in <figref idrefs="DRAWINGS">FIG. 10</figref>. When using a one serial input bus <b>4114</b>, a single serial input from bus <b>4114</b> will be connected to serial inputs <b>4204</b> of an SDM, EDM, and MDM circuit <b>4202</b> to sequentially load the SDM, EDM, and MDM circuits serially as described in <figref idrefs="DRAWINGS">FIG. 38</figref>. When using a three serial input bus <b>4114</b>, a first serial input from input bus <b>4114</b> will be connected to the serial input <b>4204</b> of an SDM <b>4202</b>, a second serial input from input bus <b>4114</b> will be connected to the serial input <b>4204</b> of an EDM <b>4202</b>, and a third serial input from input bus <b>4114</b> will be connected to the serial input <b>4204</b> of an MDM <b>4202</b> to simultaneously load the SDM, EDM, and MDM circuits serially as described in <figref idrefs="DRAWINGS">FIG. 39</figref>.</div>
<div class="description-paragraph" id="p-0181" num="0270"> <figref idrefs="DRAWINGS">FIG. 43</figref> illustrates an example circuit design <b>4302</b> for the TAM controller's TIR of <figref idrefs="DRAWINGS">FIG. 41</figref>. The circuit has a serial input <b>4304</b>, N parallel inputs <b>4306</b>-<b>4314</b>, N parallel outputs <b>4318</b>-<b>4326</b>, Serial/Parallel input <b>4116</b>, LoadTIR input <b>1504</b> of <figref idrefs="DRAWINGS">FIG. 15</figref>, and the clock input <b>804</b>. Within the circuit there are N multiplexer <b>4328</b> and flip flop <b>4330</b> pairs that form an N bit register. When LoadTIR is high, gate <b>4332</b> allows the clock input <b>804</b> to clock the flip flops <b>4330</b>. When the Serial/Parallel input is high, the multiplexers <b>4328</b> are set to allow data from the serial input <b>4304</b> to be shifted through the flip flops <b>4330</b> to serially load the register. When the Serial/Parallel input is low, the multiplexers <b>4328</b> are set to allow data from the parallel inputs <b>4306</b>-<b>4314</b> to load the flips flops <b>4330</b> of the register in parallel. When using a serial input bus, a serial input from bus <b>4114</b> of <figref idrefs="DRAWINGS">FIG. 41</figref> will be connected to serial input <b>4304</b> of the TIR to serially load the TIR as described in <figref idrefs="DRAWINGS">FIGS. 38 and 39</figref>. When using a parallel input bus, N inputs from bus <b>4114</b> of <figref idrefs="DRAWINGS">FIG. 41</figref> will be connected to the parallel inputs <b>4306</b>-<b>4314</b> of the TIR to parallel load the TIR as described in <figref idrefs="DRAWINGS">FIG. 15</figref>.</div>
<div class="description-paragraph" id="p-0182" num="0271"> <figref idrefs="DRAWINGS">FIG. 44</figref> illustrates an example circuit design <b>4402</b> for the TAM Selector's data register of <figref idrefs="DRAWINGS">FIG. 41</figref>. The circuit has a serial input <b>4404</b>, N parallel inputs <b>4406</b>-<b>4414</b>, N parallel outputs <b>4418</b>-<b>4426</b>, Serial/Parallel input <b>4116</b>, SelectTAM input <b>802</b> of <figref idrefs="DRAWINGS">FIGS. 13 and 15</figref>, and the clock input <b>804</b>. Within the circuit there are N multiplexer <b>4428</b> and flip flop <b>4430</b> pairs that form an N bit register. When SelectTAM is high, gate <b>4432</b> allows the clock input <b>804</b> to clock the flip flops <b>4430</b>. When the Serial/Parallel input is high, the multiplexers <b>4428</b> are set to allow data from the serial input <b>4404</b> to be shifted through the flip flops <b>4430</b> to serially load the register. When the Serial/Parallel input is low, the multiplexers <b>4428</b> are set to allow data from the parallel inputs <b>4406</b>-<b>4414</b> to load the flips flops <b>4430</b> of the register in parallel. When using a serial input bus, a serial input from bus <b>4114</b> of <figref idrefs="DRAWINGS">FIG. 41</figref> will be connected to serial input <b>4404</b> of the data register to serially load the data register as described in <figref idrefs="DRAWINGS">FIGS. 38 and 39</figref>. When using a parallel input bus, N inputs from bus <b>4114</b> of <figref idrefs="DRAWINGS">FIG. 41</figref> will be connected to the parallel inputs <b>4406</b>-<b>4414</b> of the data register to parallel load the data register as described in <figref idrefs="DRAWINGS">FIGS. 8A and 8B</figref>.</div>
<div class="description-paragraph" id="p-0183" num="0272"> <figref idrefs="DRAWINGS">FIG. 45</figref> is provided to illustrate how the TAMs <b>3706</b> and system TAM controller <b>4006</b> within DUT <b>4002</b> of <figref idrefs="DRAWINGS">FIG. 40</figref> could be modified to use either a serial or parallel input bus <b>4508</b>. The modifications include; (1) using SDM, EDM, and MDM circuits <b>4202</b> of <figref idrefs="DRAWINGS">FIG. 42</figref> in TAMs <b>4506</b>, using TIR circuit <b>4302</b> of <figref idrefs="DRAWINGS">FIG. 43</figref> in system TAM controller <b>4510</b>, and (3) providing the Serial/Parallel input <b>4116</b> for selectively operating the SDM, EDM, MDM, and TIR circuits using either a serial data input bus <b>4508</b> or a parallel data input bus <b>4508</b>. With a one serial input bus <b>4508</b>, the SDM, EDM, and MDM circuits <b>4202</b> of TAM <b>4506</b>, and the TIR circuit <b>4302</b> of system TAM controller <b>4510</b> are serially loaded as described in regard to <figref idrefs="DRAWINGS">FIG. 38</figref>. With a three serial input bus <b>4508</b>, the SDM, EDM, and MDM circuits <b>4202</b> of TAM <b>4506</b>, and the TIR circuit <b>4302</b> of system TAM <b>4510</b> are serially loaded as described in regard to <figref idrefs="DRAWINGS">FIG. 39</figref>. With a parallel bus <b>4508</b>, the SDM, EDM, MDM circuits <b>4202</b> of TAM <b>4506</b>, and the TIR circuit <b>4302</b> of system TAM <b>4510</b> are parallel loaded as described in regard to <figref idrefs="DRAWINGS">FIGS. 10 and 15</figref>. While not shown, the TAM <b>3006</b> and system TAM controller <b>3008</b> of <figref idrefs="DRAWINGS">FIG. 30</figref> can be similarly modified to use either a serial or parallel data input on bus <b>4508</b>.</div>
<div class="description-paragraph" id="p-0184" num="0273">As seen in <figref idrefs="DRAWINGS">FIGS. 7, 30, 32, 35, and 36</figref>, when a parallel input bus is used between a DUT and a Tester the total number of signals in the test interface is the sum of the parallel input bus signals plus the control and scan in and scan out signals. For example, if an 8-bit parallel input bus is used in the test interface of <figref idrefs="DRAWINGS">FIG. 32</figref>, the total number of signals in the test interface will be 15 signals, i.e. 8 signals for the input bus <b>720</b> plus 7 signals for the Mode <b>0</b>-<b>2</b> <b>1014</b>, Clock <b>804</b>, LoadTIR <b>1504</b>, Scan In <b>734</b>, and Scan Out <b>732</b> signals. While this is not an extreme number of test interface signals, it is beneficial to reduce the number of test interface signals if the reduction does not increase the DUT test time. The following description describes a way to reduce the number of test interface signals between a DUT and tester using a double data rate (DDR) interfacing technique which does not increase test time.</div>
<div class="description-paragraph" id="p-0185" num="0274"> <figref idrefs="DRAWINGS">FIG. 46</figref> illustrates the test architecture of <figref idrefs="DRAWINGS">FIG. 32</figref> modified to include a double data rate (DDR) input circuit <b>4604</b>. As seen, the DDR input circuit has outputs (8-bit Input But <b>720</b>, Mode <b>0</b>-<b>2</b> <b>1014</b>, LoadTIR <b>1504</b>, and Clock <b>804</b>) that interface to the TAMs <b>3206</b> and system TAM controller <b>3208</b> and inputs (6-bit DDR Data <b>4606</b> and DDR Clock <b>4608</b>) that interface to the tester <b>4610</b>. The operation of the TAMs <b>3206</b> and system TAM controller in response to the outputs from the DDR input circuit is the same as previously described in <figref idrefs="DRAWINGS">FIG. 32</figref>. The only differences between the test architecture of <figref idrefs="DRAWINGS">FIG. 32</figref> and the one in <figref idrefs="DRAWINGS">FIG. 46</figref> are; (1) the DDR input circuit is used to interface the tester to the TAMs and system TAM controller, and (2) the tester is designed to output a 6-bit DDR data bus <b>4606</b> and a DDR clock <b>4608</b> instead of the input bus <b>720</b>, Mode <b>0</b>-<b>3</b> <b>1014</b>, LoadTIR <b>1504</b>, and Clock <b>804</b> signals of <figref idrefs="DRAWINGS">FIG. 32</figref>. As can be seen, using the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 46</figref> the interface between the tester and DUT is reduced to only 9 signals (6-bit DDR data <b>4606</b>, DDR clock <b>4608</b>, Scan In <b>734</b> and Scan Out <b>732</b>), as opposed to the above mentioned 15 signals for an 8-bit input bus <b>720</b> of <figref idrefs="DRAWINGS">FIG. 32</figref>.</div>
<div class="description-paragraph" id="p-0186" num="0275"> <figref idrefs="DRAWINGS">FIG. 47</figref> illustrates an example implementation of the DDR input circuit <b>4604</b> of <figref idrefs="DRAWINGS">FIG. 46</figref>. The DDR input circuit inputs the DDR data bus <b>4606</b> and DDR clock <b>4608</b>, and outputs the 8-bit input bus signals (Input <b>0</b>-<b>7</b>) <b>720</b>, Mode <b>0</b>-<b>2</b> signals <b>1014</b>, and the LoadTIR signal <b>1504</b>. The DDR data bus is input to 6-bit registers <b>4702</b> and <b>4704</b>. The outputs of the 6-bit registers <b>4702</b> and <b>4704</b> are input to 6-bit registers <b>4706</b> and <b>4708</b>, respectively. The outputs of the 6-bit registers <b>4706</b> and <b>4708</b> provide the 8-bit input bus signals <b>720</b>, the Modes <b>0</b>-<b>2</b> signals <b>1014</b>, and the LoadTIR signal <b>1504</b> shown in <figref idrefs="DRAWINGS">FIG. 46</figref>. The DDR clock <b>4608</b> is input to the non-inverting clock inputs of 6-bit registers <b>4702</b>, <b>4706</b>, and <b>4708</b> and to the inverting clock input of 6-bit register <b>4704</b>. The DDR clock is also input to an inverted input of And gate <b>4710</b> and to a delay circuit <b>4712</b>. The output of the delay circuit <b>4712</b> is input to a non-inverting input of And gate <b>4710</b>. The output of the And gate <b>4710</b> provides the Clock signal <b>804</b> shown in <figref idrefs="DRAWINGS">FIG. 46</figref>.</div>
<div class="description-paragraph" id="p-0187" num="0276">The operation of the DDR input circuit is best described using the timing diagram of <figref idrefs="DRAWINGS">FIG. 47</figref>. The timing diagram shows the DDR clock and DDR data bus inputs from the tester <b>4610</b> and the input bus signals <b>720</b>, Mode <b>0</b>-<b>2</b> signals <b>1014</b>, and LoadTIR signal <b>1504</b>, indicated as the “Input &amp; Control Pattern”, and Clock <b>804</b> outputs from the DDR input circuit. As seen in the timing diagram, on the rising edge of DDR clock <b>4732</b> the 6-bit data output <b>4714</b> from tester <b>4610</b> is clocked into register <b>4702</b>, and on the falling edge of DDR clock <b>4732</b> the 6-bit data output <b>4716</b> from tester <b>4610</b> is clocked into register <b>4704</b>. The 6-bit data in registers <b>4702</b> and <b>4704</b> is clocked into registers <b>4706</b> and <b>4708</b> on the rising edge of DDR clock <b>4734</b> and output as “Input and Control Pattern” <b>4718</b>. Subsequently, the 6-bit data <b>4720</b> and <b>4722</b> clocked into registers <b>4702</b> and <b>4704</b> on rising and falling edges of DDR clock <b>4734</b> is clocked into registers <b>4706</b> and <b>4708</b> on the rising edge of DDR clock <b>4736</b>. This process of inputting 6-bit data from the tester to registers <b>4702</b> and <b>4704</b> on the rising and falling edges of a DDR clock, respectively, followed by transferring the data in registers <b>4702</b> and <b>4704</b> to registers <b>4706</b> and <b>4708</b> on the next rising edge of a DDR clock continues for the duration of the test operation.</div>
<div class="description-paragraph" id="p-0188" num="0277">As seen in the timing diagram, a Clock <b>804</b> output is produced for each “Input &amp; Control Pattern” output from the DDR input circuit <b>4604</b>. This Clock output is produced by a clock generation circuit which, in this example, comprises an And gate <b>4710</b> and a delay circuit <b>4712</b>. The clock generation circuit produces a Clock <b>804</b> output on each falling edge of the DDR clock <b>4608</b>. The duration of the Clock <b>804</b> output can be adjusted by the length of time it takes for the DDR clock <b>4608</b> to propagate through the delay circuit <b>4712</b> of the clock generation circuit. Producing the Clock <b>804</b> on the falling edge of DDR clock <b>4608</b> mimics the clock timing of the input bus <b>720</b>, Mode <b>0</b>-<b>2</b> signals <b>1014</b>, and LoadTIR signal of the timing diagrams in <figref idrefs="DRAWINGS">FIGS. 17, 18, 19, 20, 21, 22, 23, 25 and 26</figref>, i.e. the Clock <b>804</b> occurs when the input bus <b>720</b>, Mode <b>0</b>-<b>2</b> signals <b>1014</b>, and LoadTIR signal <b>1504</b> are in a stable state.</div>
<div class="description-paragraph" id="p-0189" num="0278">As mentioned the use of the DDR input circuit <b>4604</b> to reduce the number of test interface signals between the tester and DUT does not increase the test time of the DUT. For example, if the Clock <b>804</b> signal of <figref idrefs="DRAWINGS">FIG. 32</figref> and the DDR clock <b>4608</b> of <figref idrefs="DRAWINGS">FIG. 46</figref> both operate at 200 MHz, the TAMs <b>3206</b> and system TAM controller <b>3208</b> of <figref idrefs="DRAWINGS">FIGS. 32 and 46</figref> will receive input bus <b>720</b> and Mode <b>0</b>-<b>2</b> and LoadTIR <b>1504</b> signal patterns at the same clock rate, i.e. 200 MHz. The reason the TAM and system TAM controller input bus and control pattern rate of <figref idrefs="DRAWINGS">FIG. 46</figref> is the same as the TAM and system TAM controller input bus and control pattern rate of <figref idrefs="DRAWINGS">FIG. 46</figref> when the frequency of the Clock <b>804</b> of <figref idrefs="DRAWINGS">FIG. 32</figref> and DDR clock <b>4608</b> are the same is because the DDR input circuit <b>4604</b> of <figref idrefs="DRAWINGS">FIG. 46</figref> inputs data from the DDR data bus <b>4606</b> on both the rising and falling edges of each DDR clock <b>4608</b>. Inputting data from the DDR data bus on both edges of the DDR clock doubles the amount of data to the DDR circuit, which allows the “Input &amp; Control Pattern” output rate from the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 46</figref> to match the input bus and control pattern rate from the tester of <figref idrefs="DRAWINGS">FIG. 32</figref>.</div>
<div class="description-paragraph" id="p-0190" num="0279"> <figref idrefs="DRAWINGS">FIG. 48</figref> is provided to illustrate that the DDR input circuit <b>4604</b> can also be used with the test architecture of <figref idrefs="DRAWINGS">FIG. 7</figref>. As seen the DDR input circuit <b>4604</b> inputs DDR data <b>4606</b> and DDR clock <b>4608</b> signals from tester <b>4610</b> and outputs an 8-bit input bus <b>722</b> and control bus <b>722</b> to the TAM Selector <b>710</b>, TAM controllers <b>706</b>, and TAMs <b>704</b>. The TAM selector, TAM controllers, and TAMs respond to the input bus <b>722</b> and control bus <b>722</b> as described in regard to <figref idrefs="DRAWINGS">FIG. 7</figref> and other related figures. As seen in <figref idrefs="DRAWINGS">FIG. 49</figref>, the only difference in the DDR input circuit <b>4604</b> of <figref idrefs="DRAWINGS">FIG. 48</figref> and the DDR input circuit <b>4604</b> of <figref idrefs="DRAWINGS">FIG. 46</figref> is that the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 49</figref> outputs the SelectTAM <b>802</b> signal, as described in regard to <figref idrefs="DRAWINGS">FIG. 10</figref>, instead of the LoadTIR <b>1504</b> signal of <figref idrefs="DRAWINGS">FIG. 47</figref>.</div>
<div class="description-paragraph" id="p-0191" num="0280">While the <figref idrefs="DRAWINGS">FIGS. 46, 47, 48, and 49</figref> examples of using DDR input circuits have used 8-bit input busses <b>720</b>, input buses of any width may be used. For example, a 16-bit wide input bus <b>720</b> may be used or a 4-bit input bus <b>720</b> may be used. If a 16-bit wide input bus <b>720</b> is used, the DDR data bus width from the tester would increase to 10-bits to allow providing a 20-bit wide “Input &amp; Control Pattern” bus output from the DDR input circuit, i.e. <b>16</b> input bus signals plus the Mode <b>0</b>-<b>2</b> and LoadTIR <b>1504</b> or SelectTAM <b>802</b> signals. If a 4-bit wide input bus 720 is used, the DDR data bus width from the tester would decrease to 4-bits to allow providing an 8-bit wide “Input &amp; Control Pattern” bus output from the DDR input circuit, i.e. 4 input bus signals plus the Mode <b>0</b>-<b>2</b> and LoadTIR <b>1504</b> or SelectTAM <b>802</b> signals.</div>
<div class="description-paragraph" id="p-0192" num="0281">While the test architectures of <figref idrefs="DRAWINGS">FIGS. 7 and 32</figref> have been shown modified to use the DDR input circuit, as per <figref idrefs="DRAWINGS">FIGS. 46 and 48</figref> respectively, the other test architectures shown and described herein can be similarly modified to use the DDR input circuit. Also if a Mode <b>0</b>-<b>2</b> pattern is used to provide the Load enable signal to TIR <b>1302</b> instead of using the LoadTIR signal <b>1504</b>, as shown and described in <figref idrefs="DRAWINGS">FIG. 13</figref>, the LoadTIR signal <b>1504</b> can be removed from the “Input &amp; Control Pattern” output of the DDR input circuit of <figref idrefs="DRAWINGS">FIG. 47</figref>.</div>
<div class="description-paragraph" id="p-0193" num="0282"> <figref idrefs="DRAWINGS">FIG. 50</figref> is provided to illustrate a tester <b>5002</b> interfacing to multiple DUTs <b>5004</b> using the reduced test interface of <figref idrefs="DRAWINGS">FIGS. 46-49</figref>, each DUT test interface consisting of 6-bit DDR data bus signals <b>4606</b>, a DDR clock signal <b>4608</b>, a Scan In signal <b>724</b> or <b>734</b> and a Scan Out signal <b>726</b> or <b>732</b> signal. The operation of the tester and DUTs of <figref idrefs="DRAWINGS">FIG. 50</figref> is the same as described in <figref idrefs="DRAWINGS">FIG. 35</figref> with the exception that the tester interfaces with the DUTs using the reduced tests interface signals described in <figref idrefs="DRAWINGS">FIGS. 46-49</figref>.</div>
<div class="description-paragraph" id="p-0194" num="0283"> <figref idrefs="DRAWINGS">FIG. 51</figref> is provided to illustrate a tester <b>5002</b> interfacing to multiple DUT strings <b>5102</b> using the reduced test interface of <figref idrefs="DRAWINGS">FIGS. 46-49</figref>, each DUT string test interface consisting of 6-bit DDR data bus signals <b>4606</b>, a DDR clock signal <b>4608</b>, a Scan In signal <b>724</b> or <b>734</b> and a Scan Out signal <b>726</b> or <b>732</b> signal. The operation of the tester and DUT strings of <figref idrefs="DRAWINGS">FIG. 51</figref> is the same as described in <figref idrefs="DRAWINGS">FIG. 36</figref> with the exception that the tester interfaces with the DUT strings using the reduced tests interface signals described in <figref idrefs="DRAWINGS">FIGS. 46-49</figref>.</div>
<div class="description-paragraph" id="p-0195" num="0284">Although exemplary embodiments of the present invention are described above, this description does not limit the scope of the invention, which can be practiced in a variety of embodiments.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">4</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM172564649">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. An integrated circuit test architecture comprising:
<div class="claim-text">(a) functional core circuits;</div>
<div class="claim-text">(b) a separate test access mechanism associated with each core circuit, each test access mechanism having an enable input, an interface bus input, and a parallel data bus input;</div>
<div class="claim-text">(c) a system test access mechanism controller associated with each test access mechanism, the system test access mechanism controller having an enable output for each test access mechanism, an interface bus output coupled to the interface bus inputs of all of the test access mechanisms, and a parallel data bus input; and</div>
<div class="claim-text">(d) double data rate circuitry, the double data rate circuitry having a double data rate parallel data bus input, a double data rate clock input, a clock output connected to the controller, a load instruction register output connected to the controller, mode outputs connected to the controller, and parallel data bus outputs connected to the controller and to the separate test access mechanisms.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which the interface buses include a wrapper clock lead, a select wrapper instruction register lead, a shift wrapper lead, a capture wrapper lead, an update wrapper lead, a transfer wrapper lead, a wrapper reset lead, a wrapper serial input lead, and a wrapper serial output lead.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> including an externally accessible scan input and scan output both selectively coupled to the test access mechanism controller.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which each test access mechanism includes:
<div class="claim-text">(a) a wrapper control interface having a wrapper clock input, a select wrapper instruction register input, a shift wrapper input, a capture wrapper input, an update wrapper input, a transfer wrapper input, a wrapper reset input, and control outputs;</div>
<div class="claim-text">(b) a wrapper serial input and a wrapper serial output;</div>
<div class="claim-text">(c) a wrapper instruction register connected to the wrapper serial input, selectively coupled to the wrapper serial output, and connected to the control outputs;</div>
<div class="claim-text">(d) a wrapper bypass register connected to the wrapper serial input, selectively coupled to the wrapper serial output, and connected to the control outputs;</div>
<div class="claim-text">(e) wrapper boundary registers connected to inputs and outputs of the functional circuits, connected to the wrapper serial input, selectively coupled to the wrapper serial output, and connected to the control outputs; and</div>
<div class="claim-text">(f) data register scan paths connected to the functional circuits, connected to the wrapper serial input, selectively coupled to the wrapper serial output, and connected to the control outputs.</div>
</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    