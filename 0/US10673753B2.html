
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US10673753B2 - Using border gateway protocol to expose maximum segment identifier depth to an external application 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="docdb" mxw-id="PA398923898" source="national office">
<div class="abstract">A method implemented by a network device acting as a border gateway protocol (BGP) speaker, of exposing a maximum segment identifier depth (MSD) value of the network device is described. The method comprises encoding the MSD value into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes a type, a length and a MSD value. The type indicates the type of the MSD value, the length indicates the length of the MSD value and the MSD value indicates a lowest MSD value supported by the network device for enabling segment routing. The method continues with transmitting the BGP-LS extension message including the type, the length, and the MSD value to a network controller, where the network controller is to use the MSD value to compute a segment routing path including the network device.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES265936481">
<heading id="h-0001">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<div class="description-paragraph" id="p-0002" num="0001">This application is a continuation of U.S. application Ser. No. 14/846,342, filed Sep. 4, 2015, which claims the benefit of U.S. Provisional Application No. 62/188,402, filed on Jul. 2, 2015, which are hereby incorporated by reference.</div>
<heading id="h-0002">TECHNICAL FIELD</heading>
<div class="description-paragraph" id="p-0003" num="0002">Embodiments of the invention relate to the field of packet networks, and more specifically, to segment routing.</div>
<heading id="h-0003">BACKGROUND ART</heading>
<div class="description-paragraph" id="p-0004" num="0003">Segment Routing (SR) is a packet forwarding technology based on source routing. A variety of use-cases for SR have been described in the Internet Engineering Task Force (IETF) draft “draft.filsfils-rtgwg-segment-routing-use-cases,” which is hereby incorporated by reference. An abstract routing model for SR is described in an IETF draft “draft.filsfils-rtgwg-segment-routing,” which is hereby incorporated by reference. The IETF draft “draft.filsfils-rtgwg-segment-routing” describes the instantiation of SR using Internet Protocol version 6 (IPv6) or Multiprotocol Label Switching (MPLS).</div>
<heading id="h-0004">SUMMARY</heading>
<div class="description-paragraph" id="p-0005" num="0004">A method implemented by a network device acting as a border gateway protocol (BGP) speaker, of exposing a maximum segment identifier depth (MSD) value of the network device is described. The method comprises encoding the MSD value into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes a type, a length and a MSD value. The type indicates the type of the MSD value, the length indicates the length of the MSD value and the MSD value indicates a lowest MSD value supported by the network device for enabling segment routing. The method continues with transmitting the BGP-LS extension message including the type, the length, and the MSD value to a network controller, where the network controller is to use the MSD value to compute a segment routing path including the network device.</div>
<div class="description-paragraph" id="p-0006" num="0005">A network device acting as a border gateway protocol (BGP) speaker is disclosed. The network device is to be coupled to a network controller. The network device comprises a processor and a memory, said memory containing instructions executable by the processor. The network device is operative to encode a maximum segment identifier depth (MSD) value of the network device into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes a type, a length and a MSD value. The type indicates the type of the MSD value, the length indicates the length of the MSD value and the MSD value indicates a lowest MSD value supported by the network device for enabling segment routing. The network device is further operative to transmit the BGP-LS extension message including the type, the length, and the MSD value to the network controller, wherein the network controller is to use the MSD value to compute a segment routing path including the network device.</div>
<div class="description-paragraph" id="p-0007" num="0006">A non-transitory machine-readable storage medium is disclosed. The non-transitory machine-readable storage medium provides instructions that, if executed by a processor of a network device acting as a border gateway protocol (BGP) speaker and coupled with a network controller, will cause said processor to perform operations. The operations comprise encoding a maximum segment identifier depth (MSD) value of the network device into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes a type, a length and a MSD value. The type indicates the type of the MSD value, the length indicates the length of the MSD value and the MSD value indicates a lowest MSD value supported by the network device for enabling segment routing. The operations further comprise transmitting the BGP-LS extension message including the type, the length, and the MSD value to the network controller, wherein the network controller is to use the MSD value to compute a segment routing path including the network device.</div>
<div class="description-paragraph" id="p-0008" num="0007">A method in a network controller is disclosed. The method comprises receiving from a network device acting as a border gateway protocol (BGP) speaker, a BGP Link State (BGP-LS) extension message. The method continues with decoding the BGP-LS extension message, to extract a maximum segment identifier depth (MSD) value of the network device. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and the MSD value which indicates a lowest MSD value supported by the network device for enabling segment routing. The method further includes computing, using the MSD value, a segment routing (SR) path including the network device, where the SR path has a label stack depth that is lower than or equal to the MSD value.</div>
<div class="description-paragraph" id="p-0009" num="0008">A network controller is disclosed. The network controller comprises a processor and a memory, said memory containing instructions executable by the processor. The network controller is operative to receive from a network device acting as a border gateway protocol (BGP) speaker, a BGP Link State (BGP-LS) extension message. The network controller is further operative to the BGP-LS extension message, to extract a maximum segment identifier depth (MSD) value of the network device. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and the MSD value which indicates a lowest MSD value supported by the network device for enabling segment routing. The network controller is further operative to compute, using the MSD value, a segment routing (SR) path including the network device, wherein the SR path has a label stack depth that is lower than or equal to the MSD value.</div>
<div class="description-paragraph" id="p-0010" num="0009">A non-transitory machine-readable storage medium is disclosed. The non-transitory machine-readable storage medium provides instructions that, if executed by a processor of a network controller, will cause said processor to perform operations. The operations comprise receiving from a network device acting as a border gateway protocol (BGP) speaker, a BGP Link State (BGP-LS) extension message. The operations further comprise decoding the BGP-LS extension message, to extract a maximum segment identifier depth (MSD) value of the network device. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and the MSD value which indicates a lowest MSD value supported by the network device for enabling segment routing. The operations further comprise computing, using the MSD value, a segment routing (SR) path including the network device, wherein the SR path has a label stack depth that is lower than or equal to the MSD value.</div>
<description-of-drawings>
<heading id="h-0005">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0011" num="0010">The invention may best be understood by referring to the following description and accompanying drawings that are used to illustrate embodiments of the invention. In the drawings:</div>
<div class="description-paragraph" id="p-0012" num="0011"> <figref idrefs="DRAWINGS">FIG. 1</figref> is a block diagram illustrating SR network enabling transmission of maximum segment identifier (SID) depth (MSD) to external applications according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0013" num="0012"> <figref idrefs="DRAWINGS">FIG. 2</figref> illustrates a flow diagram of operations performed in a network device for exposing an MSD value in accordance with some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0014" num="0013"> <figref idrefs="DRAWINGS">FIG. 3</figref> illustrates a flow diagram of operations performed in a network controller in accordance with some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0015" num="0014"> <figref idrefs="DRAWINGS">FIG. 4A</figref> illustrates an exemplary opaque node attribute Type-Length-Value (TLV) including a node MSD value of a network device in accordance with some embodiments.</div>
<div class="description-paragraph" id="p-0016" num="0015"> <figref idrefs="DRAWINGS">FIG. 4B</figref> illustrates an exemplary opaque link attribute TLV including a link MSD value of a network device in accordance with some embodiments.</div>
<div class="description-paragraph" id="p-0017" num="0016"> <figref idrefs="DRAWINGS">FIG. 5A</figref> illustrates connectivity between network devices (NDs) within an exemplary network, as well as three exemplary implementations of the NDs, according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0018" num="0017"> <figref idrefs="DRAWINGS">FIG. 5B</figref> illustrates an exemplary way to implement a special-purpose network device according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0019" num="0018"> <figref idrefs="DRAWINGS">FIG. 5C</figref> illustrates various exemplary ways in which virtual network elements (VNEs) may be coupled according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0020" num="0019"> <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates a network with a single network element (NE) on each of the NDs, and within this straight forward approach contrasts a traditional distributed approach (commonly used by traditional routers) with a centralized approach for maintaining reachability and forwarding information (also called network control), according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0021" num="0020"> <figref idrefs="DRAWINGS">FIG. 5E</figref> illustrates the simple case of where each of the NDs implements a single NE, but a centralized control plane has abstracted multiple of the NEs in different NDs into (to represent) a single NE in one of the virtual network(s), according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIG. 5F</figref> illustrates a case where multiple VNEs are implemented on different NDs and are coupled to each other, and where a centralized control plane has abstracted these multiple VNEs such that they appear as a single VNE within one of the virtual networks, according to some embodiments of the invention.</div>
<div class="description-paragraph" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 6</figref> illustrates a general purpose control plane device with centralized control plane (CCP) software <b>650</b>), according to some embodiments of the invention.</div>
</description-of-drawings>
<heading id="h-0006">DETAILED DESCRIPTION</heading>
<div class="description-paragraph" id="p-0024" num="0023">The following description describes methods and apparatus for exposing a maximum segment identifier depth (MSD) value associated with a network device. In the following description, numerous specific details such as logic implementations, opcodes, means to specify operands, resource partitioning/sharing/duplication implementations, types and interrelationships of system components, and logic partitioning/integration choices are set forth in order to provide a more thorough understanding of the present invention. It will be appreciated, however, by one skilled in the art that the invention may be practiced without such specific details. In other instances, control structures, gate level circuits and full software instruction sequences have not been shown in detail in order not to obscure the invention. Those of ordinary skill in the art, with the included descriptions, will be able to implement appropriate functionality without undue experimentation.</div>
<div class="description-paragraph" id="p-0025" num="0024">References in the specification to “one embodiment,” “an embodiment,” “an example embodiment,” etc., indicate that the embodiment described may include a particular feature, structure, or characteristic, but every embodiment may not necessarily include the particular feature, structure, or characteristic. Moreover, such phrases are not necessarily referring to the same embodiment. Further, when a particular feature, structure, or characteristic is described in connection with an embodiment, it is submitted that it is within the knowledge of one skilled in the art to affect such feature, structure, or characteristic in connection with other embodiments whether or not explicitly described.</div>
<div class="description-paragraph" id="p-0026" num="0025">Bracketed text and blocks with dashed borders (e.g., large dashes, small dashes, dot-dash, and dots) may be used herein to illustrate optional operations that add additional features to embodiments of the invention. However, such notation should not be taken to mean that these are the only options or optional operations, and/or that blocks with solid borders are not optional in certain embodiments of the invention.</div>
<div class="description-paragraph" id="p-0027" num="0026">In the following description and claims, the terms “coupled” and “connected,” along with their derivatives, may be used. It should be understood that these terms are not intended as synonyms for each other. “Coupled” is used to indicate that two or more elements, which may or may not be in direct physical or electrical contact with each other, co-operate or interact with each other. “Connected” is used to indicate the establishment of communication between two or more elements that are coupled with each other.</div>
<div class="description-paragraph" id="p-0028" num="0027">An electronic device or a computing device (e.g., an end station, a network device) stores and transmits (internally and/or with other electronic devices over a network) code (composed of software instructions) and data using machine-readable media, such as non-transitory machine-readable media (e.g., machine-readable storage media such as magnetic disks; optical disks; read only memory; flash memory devices; phase change memory) and transitory machine-readable transmission media (e.g., electrical, optical, acoustical or other form of propagated signals—such as carrier waves, infrared signals). In addition, such electronic devices include hardware, such as a set of one or more processors coupled to one or more other components—e.g., one or more non-transitory machine-readable storage media (to store code and/or data) and network connections (to transmit code and/or data using propagating signals), as well as user input/output devices (e.g., a keyboard, a touchscreen, and/or a display) in some cases. The coupling of the set of processors and other components is typically through one or more interconnects within the electronic devices (e.g., busses and possibly bridges). Thus, a non-transitory machine-readable medium of a given electronic device typically stores instructions for execution on one or more processors of that electronic device. One or more parts of an embodiment of the invention may be implemented using different combinations of software, firmware, and/or hardware.</div>
<div class="description-paragraph" id="p-0029" num="0028">As used herein, a network device (e.g., a router, switch, bridge) is a piece of networking equipment, including hardware and software, which communicatively interconnects other equipment on the network (e.g., other network devices, end stations). Some network devices are “multiple services network devices” that provide support for multiple networking functions (e.g., routing, bridging, switching, Layer 2 aggregation, session border control, Quality of Service, and/or subscriber management), and/or provide support for multiple application services (e.g., data, voice, and video). Subscriber end stations (e.g., servers, workstations, laptops, netbooks, palm tops, mobile phones, smartphones, multimedia phones, Voice Over Internet Protocol (VOIP) phones, user equipment, terminals, portable media players, GPS units, gaming systems, set-top boxes) access content/services provided over the Internet and/or content/services provided on virtual private networks (VPNs) overlaid on (e.g., tunneled through) the Internet. The content and/or services are typically provided by one or more end stations (e.g., server end stations) belonging to a service or content provider or end stations participating in a peer-to-peer (P2P) service, and may include, for example, public webpages (e.g., free content, store fronts, search services), private webpages (e.g., username/password accessed webpages providing email services), and/or corporate networks over VPNs. Typically, subscriber end stations are coupled (e.g., through customer premise equipment coupled to an access network (wired or wirelessly)) to edge network devices, which are coupled (e.g., through one or more core network devices) to other edge network devices, which are coupled to other end stations (e.g., server end stations).</div>
<div class="description-paragraph" id="p-0030" num="0029">Network devices are commonly separated into a control plane and a data plane (sometimes referred to as a forwarding plane or a media plane). In the case that the network device is a router (or is implementing routing functionality), the control plane typically determines how data (e.g., packets) is to be routed (e.g., the next hop for the data and the outgoing port for that data), and the data plane is in charge of forwarding that data. For example, the control plane typically includes one or more routing protocols (e.g., an exterior gateway protocol such as Border Gateway Protocol (BGP), Interior Gateway Protocol(s) (IGP) (e.g., Open Shortest Path First (OSPF), Intermediate System to Intermediate System (IS-IS), Routing Information Protocol (RIP)), Label Distribution Protocol (LDP), Resource Reservation Protocol (RSVP)) that communicate with other network devices to exchange routes and select those routes based on one or more routing metrics.</div>
<div class="description-paragraph" id="p-0031" num="0030">A control plane or a component external to the network may perform computations based on the network topology and current state of the connections within the network, including traffic engineering information. For example in order to determine segment routing paths, the processing component (e.g., control plane, SDN controller, Path Computation Element (PCE), etc.) needs to gather information about the topologies and capabilities of each network device of the SR network in order to properly configure it. In Segment Routing (SR), a network node (e.g., a SR-capable network device) steers a packet through the network by utilizing a set of instructions, herein referred to as segments. The segments are included as part of an SR header which has been prepended onto the packet at the ingress of an SR network. A segment can represent any topological or service instruction. SR architecture can be applied to the MPLS data plane with no change in the forwarding plane. SR, when applied to the MPLS data plane, provides the ability to tunnel services (e.g., Virtual Private Network (VPN), Virtual Private Local LAN Service (VPLS), Virtual Private Wire Service (VPWS)) from an ingress Label Switched Router (LSR) to an egress LSR, without any protocol other than IS-IS or OSPF. A segment is encoded as an MPLS label. An ordered list of segments is encoded as a stack of labels. The next segment to process is on the top of the stack. Upon completion of a segment, the corresponding label is popped from the stack.</div>
<div class="description-paragraph" id="p-0032" num="0031">In particular, a control plane needs to gather information about the maximum segment identifier (SID) depth (MSD) of each network node being configured, such that the controller does not configure the network node with a path/tunnel which would have a SID (or label stack) deeper than the network node is capable of imposing. The “Maximum SID Depth” (MSD) specifies the maximum number of SIDs (i.e., segments or label stacks) that a SR network node is capable of imposing on a packet.</div>
<div class="description-paragraph" id="p-0033" num="0032">In one approach, the control plane may use the Path Computation Element Communication Protocol (PCEP) to retrieve the MSD of a SR network node. PCEP is a set of rules that allows a Path Computation Client (PCC) (e.g., the network node being configured by the control plane) to request path computations from Path Computation Elements (PCEs) (e.g., the control plane). According to PCEP, the MSD is transferred to the control plane via a PCEP extension “SR PCE Capability TLV/METRIC Object,” as discussed in “draft-ietf-pce-segment-routing” (which is hereby incorporated by reference).</div>
<div class="description-paragraph" id="p-0034" num="0033">In another approach, the MSD value for each network node may be transferred to the control plane with the Interior Gateway Protocol(s) (IGP). In this approach, the sub-TLV, called RLSDC sub-TLV, is defined to advertise the capability of the network node to read the maximum label stack depth (i.e., MSD of the network device) as defined for OSPF and IS-IS in “draft-ietf-ospf-mpls-elc” and “draft-ietf-isis-mpls-elc” respectively (which are hereby incorporated by reference).</div>
<div class="description-paragraph" id="p-0035" num="0034">Challenges with Exposing MSD to a Network Controller</div>
<div class="description-paragraph" id="p-0036" num="0035">Although PCEP may be used to expose the MSD of a network node to another network device (e.g., the control plane), when PCEP is not supported by a network node (in particular the head-end of the SR path/tunnel), or if the network node does not participate in IGP routing, the control plane does not have any method to learn the MSD of the network node being configured. This results in the control plane making arbitrary decisions with regards to the label stack depth of the network node being configured, which may result in an erroneous configuration of the network node, leading to packet drops. In addition, PCEP and IGP do not allow a control plane to obtain the MSD of a link within the network node, and only allows the control plane to get the global node MSD.</div>
<div class="description-paragraph" id="p-0037" num="0036">The embodiments presented herein overcome the limitations of the previous approaches. According to some embodiments, a method implemented by a network device acting as a border gateway protocol (BGP) speaker, of transmitting a maximum segment identifier depth (MSD) value associated with the network device, to a network controller is disclosed. In these embodiments, a MSD value of the network device is encoded into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes, a type that indicates the type of the MSD value, a length which indicate the length of the MSD value and the MSD value that indicates a lowest node MSD value of the network device. In other embodiments, the MSD value is a link MSD value indicative of a lowest MSD value for each link of the network device. The BGP-LS extension message is then transmitted to the network controller, wherein the network controller is to use the MSD value when calculating the segment routing path including the network device.</div>
<div class="description-paragraph" id="p-0038" num="0037">BGP-LS as described in “draft-ietf-idr-ls-distribution-11” (which is hereby incorporated by reference), describes a mechanism by which links state and traffic engineering information can be collected from networks and shared with external components (e.g., control plane, centralized controller, PCE, etc.) using the BGP routing protocol.</div>
<div class="description-paragraph" id="p-0039" num="0038"> <figref idrefs="DRAWINGS">FIG. 1</figref> is a block diagram illustrating SR network enabling transmission of maximum segment identifier (SID) depth (MSD) to external applications according to some embodiments.</div>
<div class="description-paragraph" id="p-0040" num="0039"> <figref idrefs="DRAWINGS">FIG. 1</figref>, illustrates a centralized control plane <b>176</b> coupled with a data plane <b>180</b> (sometimes referred to as the infrastructure layer, network forwarding plane, or forwarding plane (which should not be confused with a ND forwarding plane)) that includes the network elements (NEs) <b>170</b>A-H (sometimes referred to as routers, switches, forwarding elements, data plane elements, or nodes). The centralized control plane <b>176</b> includes a network controller <b>178</b>, which includes a centralized reachability and forwarding information module (not illustrated) that determines the reachability within the network and distributes the forwarding information to the NEs <b>170</b>A-H of the data plane <b>180</b>. In these embodiments, the network intelligence is centralized in the centralized control plane <b>176</b> executing on electronic devices that are typically separate from the NDs.</div>
<div class="description-paragraph" id="p-0041" num="0040"> <figref idrefs="DRAWINGS">FIG. 1</figref> also shows that the centralized control plane <b>176</b> has a north bound interface <b>184</b> to an application layer <b>186</b>, in which resides application(s) <b>188</b>. The centralized control plane <b>176</b> has the ability to form virtual networks (sometimes referred to as a logical forwarding plane, network services, or overlay networks (with the NEs <b>170</b>A-H of the data plane <b>180</b> being the underlay network)) for the application(s) <b>188</b>. Thus, the centralized control plane <b>176</b> maintains a global view of all NDs and configured NEs/VNEs, and it maps the virtual networks to the underlying NDs efficiently (including maintaining these mappings as the physical network changes either through hardware (ND, link, or ND component) failure, addition, or removal). Each network element NE <b>170</b>A-H may be implemented by one or more network devices, as it is described in further detail below.</div>
<div class="description-paragraph" id="p-0042" num="0041">The NE <b>170</b>E includes a MSD value which is an indication of the capabilities of the node and/or a link of the node. In some embodiments, the MSD value is a numeric value in the range of [0, 254] that is statically configured in the NE <b>170</b>E. In alternative embodiments, the MSD value is redistributed from an IGP node. In some embodiments, the MSD value is uniquely associated with the network device.</div>
<div class="description-paragraph" id="p-0043" num="0042">The MSD value may be a node MSD value, which indicates the maximum number of labels (SIDs) supported by the NE <b>170</b>E. In some embodiments, a value of 0 means that NE <b>170</b>E is not operable to push an SR stack of any length and should not be used for such functionality. Alternatively, the MSD value may be a link MSD value which indicates a maximum number of labels (SIDs) supported by a link of the NE <b>170</b>E. In some embodiments, a value of 0 means the link is not operable to push an SR stack of any length and should not be used for such functionality.</div>
<div class="description-paragraph" id="p-0044" num="0043">The NE <b>170</b>E and the network controller <b>178</b> are configured to include BGP and to act as BGP speakers in the network <b>100</b>. During a peering handshake, OPEN messages are exchanged between the two BGP speakers (NE <b>170</b>E and network controller <b>178</b>). NE <b>170</b>E and the network controller <b>178</b> negotiate capabilities of the session. In order for the two BGP speakers (NE <b>170</b>E and network controller <b>178</b>) to exchange Link-State Network Layer Reachability Information (NLRI), they use BGP Capabilities Advertisement to ensure that they both are capable of properly processing such NLRI. The negotiation of the capabilities includes the verification that each one of the NE <b>170</b>E and the network controller <b>178</b> is capable of supporting the new functionality of BGP-LS presented herein for transmission of a BGP-LS extension message in which the MSD value of the NE <b>170</b>E is encoded.</div>
<div class="description-paragraph" id="p-0045" num="0044">Following the negotiation of the capabilities, NE <b>170</b>E, at task box (<b>1</b>), encodes the MSD value into a BGP Link State (BGP-LS) extension message to be transmitted to the network controller <b>178</b>. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and an MSD value which indicates a lowest MSD value supported by the network node for enabling a segment routing path.</div>
<div class="description-paragraph" id="p-0046" num="0045">In some embodiments, the MSD value is the node MSD value of NE <b>170</b>E. In some of these embodiments, the node MSD value is encoded in an Opaque Node Attribute Type-Length-Value (TLV) of BGP-LS. The Opaque Node Attribute TLV is an envelope that carries node attribute TLVs advertised by a network element. In embodiments of the invention, the Opaque Node Attribute TLV is used to carry the node MSD value of NE <b>170</b>E. The NE <b>170</b>E uses the Opaque Node Attribute TLV to advertise to other BGP speakers (e.g., network controller <b>178</b>) its associated node MSD value. <figref idrefs="DRAWINGS">FIG. 4A</figref> illustrates an exemplary opaque node attribute TLV including a node MSD value of a network element in accordance with some embodiments. The opaque node attribute TLV is a container <b>400</b> of type TLV (Type-Length-Value). The type <b>410</b> includes a value identifying the type of the value transmitted within the container <b>400</b>, the length <b>412</b> specifies the length of the value transmitted within the container <b>400</b>, and the opaque node attribute <b>414</b> includes the MSD value associated with the NE <b>170</b>E. In some embodiments, the MSD value is a value from the range [0, 254] and indicates the maximum number of labels (SIDs) supported by the NE <b>170</b>E.</div>
<div class="description-paragraph" id="p-0047" num="0046">In other embodiments, the MSD value is a link MSD of NE <b>170</b>E. The Opaque Link Attribute TLV is an envelope that carries link attribute TLVs advertised by a network element. The NE <b>170</b>E uses the Opaque Link Attribute TLV to advertise to other BGP speakers (e.g., network controller <b>178</b>) its associated link MSD. <figref idrefs="DRAWINGS">FIG. 4B</figref> illustrates an exemplary opaque link attribute TLV including a link MSD value of a network element in accordance with some embodiments. The opaque node attribute TLV is a container <b>402</b> of type TLV (Type-Length-Value). The type <b>416</b> includes a value identifying the type of the value transmitted within the container <b>402</b> (e.g., link MSD type), the length <b>418</b> specifies the length of the value transmitted within the container <b>402</b>, and the opaque link attribute <b>420</b> includes the link MSD value associated with the NE <b>170</b>E. In some embodiments, the link MSD value is a value from the range [0, 254] and indicates the lowest maximum number of labels (SIDs) supported by a link of the NE <b>170</b>E.</div>
<div class="description-paragraph" id="p-0048" num="0047">Referring back to <figref idrefs="DRAWINGS">FIG. 1</figref>, at task box (<b>2</b>), the MSD value of NE <b>170</b>E is transmitted to the network controller <b>178</b>. In some embodiments, following the encoding of the MSD value in a BGP-LS extension message (e.g., opaque node attribute TLV or opaque link attribute TLV), the message is advertised to all BGP speakers coupled with NE <b>170</b>E.</div>
<div class="description-paragraph" id="p-0049" num="0048">At task box (<b>3</b>), the network controller <b>178</b> decodes the BGP-LS extension message, to extract a maximum segment identifier depth (MSD) value of the network device. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and an MSD value which indicates a lowest MSD value supported by the network device for enabling segment routing. In some embodiments, once the message is decoded and the MSD value is extracted, the network controller <b>178</b> uses the MSD value to compute a segment routing path which includes NE <b>170</b>E such that the label stack depth of the routing path computed does not exceed the MSD value supported by the network element <b>170</b>E. In some embodiments, the MSD value is uniquely associated with the network device.</div>
<div class="description-paragraph" id="p-0050" num="0049">In some embodiments, the network element <b>170</b>E is a network node which is the head-end of a SR tunnel/path. Thus the MSD value sent to the network controller <b>178</b> enables the network controller to compute a SR path allowing the network element <b>170</b>E to push a complete label (SID) stack of maximum depth equal to the MSD value.</div>
<div class="description-paragraph" id="p-0051" num="0050">Thus the embodiments presented herein describe an efficient way of exposing the MSD value of a network node to external applications (e.g., PCE/SDN controller, network controller) with the use of BGP-LS extensions. The embodiments enable an external application to receive MSD information related to a network element at a finer granularity than prior approaches. Contrary to the prior approaches which enable a network device to only expose the node MSD value of the network node, the mechanisms described with reference to the <figref idrefs="DRAWINGS">FIGS. 1-4B</figref> enable a network device to expose its associated MSD values at the link level in addition to being able to expose the node MSD value.</div>
<div class="description-paragraph" id="p-0052" num="0051">The operations in the flow diagrams will be described with reference to the exemplary embodiments of the other figures. However, it should be understood that the operations of the flow diagrams can be performed by embodiments of the invention other than those discussed with reference to the other figures, and the embodiments of the invention discussed with reference to these other figures can perform operations different than those discussed with reference to the flow diagrams.</div>
<div class="description-paragraph" id="p-0053" num="0052"> <figref idrefs="DRAWINGS">FIG. 2</figref> illustrates a flow diagram of operations <b>200</b> performed in a network device for exposing an MSD value of the network device in accordance with some embodiments. At block <b>202</b>, the NE <b>170</b>E encodes the MSD value into a BGP Link State (BGP-LS) extension message. The BGP-LS extension message includes a type, a length and a MSD value, and where the type indicates the type of the MSD value, the length indicates the length of the MSD value and the MSD value indicates a lowest MSD value supported by the network device for enabling segment routing. Flow then moves to block <b>203</b>.</div>
<div class="description-paragraph" id="p-0054" num="0053">At block <b>203</b>, NE <b>170</b>E transmits the BGP-LS extension message including the MSD value to the network controller <b>178</b>. The network controller <b>178</b> is operative to use the received MSD value to compute a segment routing path including the network device. In some embodiments, the network element <b>170</b>E is a network node which is the head-end of a SR tunnel/path. Thus the MSD value sent to the controller enables the controller to compute a SR path allowing the network element to push a complete label (SID) stack of maximum depth equal to the MSD value.</div>
<div class="description-paragraph" id="p-0055" num="0054"> <figref idrefs="DRAWINGS">FIG. 3</figref> illustrates a flow diagram of operations performed in a network controller in accordance with some embodiments. At block <b>302</b>, the network controller <b>178</b> receives from a network device (e.g., NE <b>170</b>E) acting as a border gateway protocol (BGP) speaker, a BGP Link State (LS) extension message. Flow then moves to block <b>304</b>.</div>
<div class="description-paragraph" id="p-0056" num="0055">At block <b>304</b>, the network controller <b>178</b> decodes the BGP-LS extension message, to extract a maximum segment identifier depth (MSD) value of the network device. The BGP-LS extension message includes a type which indicates the type of the MSD value, a length which indicates the length of the MSD value and a MSD value which indicates a lowest MSD value supported by the network device for enabling segment routing. In some embodiments, the MSD value is uniquely associated with the network device.</div>
<div class="description-paragraph" id="p-0057" num="0056">At block <b>306</b>, the network controller computes, using the extracted MSD value, a segment routing (SR) path including the network device, where the SR path has a label stack depth that is lower than or equal to the MSD value. In some embodiments, the network element <b>170</b>E is a network node which is the head-end of a SR tunnel/path. Thus the MSD value sent to the controller enables the controller to compute a SR path allowing the network node to push a complete label (SID) stack of maximum depth equal to the MSD value.</div>
<div class="description-paragraph" id="p-0058" num="0057">While embodiments of the invention have been described with a network device transmitting an MSD value encoded in a BGP-LS extension message to a network controller of a control plane, the invention is not so limited. Alternative embodiments could be implemented such that the MSD value is transmitted to any type of network element coupled with the network device and operative to decode a BGP-LS extension message including the MSD value.</div>
<div class="description-paragraph" id="p-0059" num="0058">Architecture</div>
<div class="description-paragraph" id="p-0060" num="0059">Typically, a network device includes a set of one or more line cards, a set of one or more control cards, and optionally a set of one or more service cards (sometimes referred to as resource cards). These cards are coupled together through one or more interconnect mechanisms (e.g., a first full mesh coupling the line cards and a second full mesh coupling all of the cards). The set of line cards make up the data plane, while the set of control cards provide the control plane and exchange packets with external network devices through the line cards. The set of service cards can provide specialized processing (e.g., Layer 4 to Layer 7 services (e.g., firewall, Internet Protocol Security (IPsec), Intrusion Detection System (IDS), peer-to-peer (P2P), Voice over IP (VoIP) Session Border Controller, Mobile Wireless Gateways (Gateway General Packet Radio Service (GPRS) Support Node (GGSN), Evolved Packet Core (EPC) Gateway)). By way of example, a service card may be used to terminate IPsec tunnels and execute the attendant authentication and encryption algorithms.</div>
<div class="description-paragraph" id="p-0061" num="0060"> <figref idrefs="DRAWINGS">FIG. 5A</figref> illustrates connectivity between network devices (NDs) within an exemplary network, as well as three exemplary implementations of the NDs, according to some embodiments of the invention. <figref idrefs="DRAWINGS">FIG. 5A</figref> shows NDs <b>500</b>A-H, and their connectivity by way of lines between A-B, B-C, C-D, D-E, E-F, F-G, and A-G, as well as between H and each of A, C, D, and G. These NDs are physical devices, and the connectivity between these NDs can be wireless or wired (often referred to as a link). An additional line extending from NDs <b>500</b>A, E, and F illustrates that these NDs act as ingress and egress points for the network (and thus, these NDs are sometimes referred to as edge NDs; while the other NDs may be called core NDs).</div>
<div class="description-paragraph" id="p-0062" num="0061">Two of the exemplary ND implementations in <figref idrefs="DRAWINGS">FIG. 5A</figref> are: 1) a special-purpose network device <b>502</b> that uses custom application—specific integrated—circuits (ASICs) and a proprietary operating system (OS); and 2) a general purpose network device <b>504</b> that uses common off-the-shelf (COTS) processors and a standard OS.</div>
<div class="description-paragraph" id="p-0063" num="0062">The special-purpose network device <b>502</b> includes networking hardware <b>510</b> comprising compute resource(s) <b>512</b> (which typically include a set of one or more processors), forwarding resource(s) <b>514</b> (which typically include one or more ASICs and/or network processors), and physical network interfaces (NIs) <b>516</b> (sometimes called physical ports), as well as non-transitory machine readable storage media <b>518</b> having stored therein networking software <b>520</b>. A physical NI is hardware in a ND through which a network connection (e.g., wirelessly through a wireless network interface controller (WNIC) or through plugging in a cable to a physical port connected to a network interface controller (NIC)) is made, such as those shown by the connectivity between NDs <b>500</b>A-H. During operation, the BGP-LS MSD value encoder <b>520</b> may be executed by the networking hardware <b>510</b> to instantiate a set of one or more networking software instance(s) <b>522</b> which include BGP-LS MSD value encoder instances <b>533</b>A-R. Each of the networking software instance(s) <b>522</b>, and that part of the networking hardware <b>510</b> that executes that network software instance (be it hardware dedicated to that networking software instance and/or time slices of hardware temporally shared by that networking software instance with others of the networking software instance(s) <b>522</b>), form a separate virtual network element <b>530</b>A-R. During operation, the BGP-LS MSD value encoder is operative to perform operations described with reference to <figref idrefs="DRAWINGS">FIGS. 1, 2, and 4A-4B</figref>. Each of the virtual network element(s) (VNEs) <b>530</b>A-R includes a control communication and configuration module <b>532</b>A-R (sometimes referred to as a local control module or control communication module) and forwarding table(s) <b>534</b>A-R, such that a given virtual network element (e.g., <b>530</b>A) includes the control communication and configuration module (e.g., <b>532</b>A), a set of one or more forwarding table(s) (e.g., <b>534</b>A), and that portion of the networking hardware <b>510</b> that executes the virtual network element (e.g., <b>530</b>A).</div>
<div class="description-paragraph" id="p-0064" num="0063">The special-purpose network device <b>502</b> is often physically and/or logically considered to include: 1) a ND control plane <b>524</b> (sometimes referred to as a control plane) comprising the compute resource(s) <b>512</b> that execute the control communication and configuration module(s) <b>532</b>A-R; and 2) a ND forwarding plane <b>526</b> (sometimes referred to as a forwarding plane, a data plane, or a media plane) comprising the forwarding resource(s) <b>514</b> that utilize the forwarding table(s) <b>534</b>A-R and the physical NIs <b>516</b>. By way of example, where the ND is a router (or is implementing routing functionality), the ND control plane <b>524</b> (the compute resource(s) <b>512</b> executing the control communication and configuration module(s) <b>532</b>A-R) is typically responsible for participating in controlling how data (e.g., packets) is to be routed (e.g., the next hop for the data and the outgoing physical NI for that data) and storing that routing information in the forwarding table(s) <b>534</b>A-R, and the ND forwarding plane <b>526</b> is responsible for receiving that data on the physical NIs <b>516</b> and forwarding that data out the appropriate ones of the physical NIs <b>516</b> based on the forwarding table(s) <b>534</b>A-R.</div>
<div class="description-paragraph" id="p-0065" num="0064"> <figref idrefs="DRAWINGS">FIG. 5B</figref> illustrates an exemplary way to implement the special-purpose network device <b>502</b> according to some embodiments of the invention. <figref idrefs="DRAWINGS">FIG. 5B</figref> shows a special-purpose network device including cards <b>538</b> (typically hot pluggable). While in some embodiments the cards <b>538</b> are of two types (one or more that operate as the ND forwarding plane <b>526</b> (sometimes called line cards), and one or more that operate to implement the ND control plane <b>524</b> (sometimes called control cards)), alternative embodiments may combine functionality onto a single card and/or include additional card types (e.g., one additional type of card is called a service card, resource card, or multi-application card). A service card can provide specialized processing (e.g., Layer 4 to Layer 7 services (e.g., firewall, Internet Protocol Security (IPsec) (RFC 4301 and 4309), Secure Sockets Layer (SSL)/Transport Layer Security (TLS), Intrusion Detection System (IDS), peer-to-peer (P2P), Voice over IP (VoIP) Session Border Controller, Mobile Wireless Gateways (Gateway General Packet Radio Service (GPRS) Support Node (GGSN), Evolved Packet Core (EPC) Gateway)). By way of example, a service card may be used to terminate IPsec tunnels and execute the attendant authentication and encryption algorithms. These cards are coupled together through one or more interconnect mechanisms illustrated as backplane <b>536</b> (e.g., a first full mesh coupling the line cards and a second full mesh coupling all of the cards).</div>
<div class="description-paragraph" id="p-0066" num="0065">Returning to <figref idrefs="DRAWINGS">FIG. 5A</figref>, the general purpose network device <b>504</b> includes hardware <b>540</b> comprising a set of one or more processor(s) <b>542</b> (which are often COTS processors) and network interface controller(s) <b>544</b> (NICs; also known as network interface cards) (which include physical NIs <b>546</b>), as well as non-transitory machine readable storage media <b>548</b> having stored therein software <b>550</b>. During operation, the processor(s) <b>542</b> execute the software <b>550</b> to instantiate one or more sets of one or more applications <b>564</b>A-R. While one embodiment does not implement virtualization, alternative embodiments may use different forms of virtualization—represented by a virtualization layer <b>554</b> and software containers <b>562</b>A-R. For example, one such alternative embodiment implements operating system-level virtualization, in which case the virtualization layer <b>554</b> represents the kernel of an operating system (or a shim executing on a base operating system) that allows for the creation of multiple software containers <b>562</b>A-R that may each be used to execute one of the sets of applications <b>564</b>A-R. In this embodiment, the multiple software containers <b>562</b>A-R (also called virtualization engines, virtual private servers, or jails) are each a user space instance (typically a virtual memory space); these user space instances are separate from each other and separate from the kernel space in which the operating system is run; the set of applications running in a given user space, unless explicitly allowed, cannot access the memory of the other processes. Another such alternative embodiment implements full virtualization, in which case: 1) the virtualization layer <b>554</b> represents a hypervisor (sometimes referred to as a virtual machine monitor (VMM)) or a hypervisor executing on top of a host operating system; and 2) the software containers <b>562</b>A-R each represent a tightly isolated form of software container called a virtual machine that is run by the hypervisor and may include a guest operating system. A virtual machine is a software implementation of a physical machine that runs programs as if they were executing on a physical, non-virtualized machine; and applications generally do not know they are running on a virtual machine as opposed to running on a “bare metal” host electronic device, though some systems provide para-virtualization which allows an operating system or application to be aware of the presence of virtualization for optimization purposes.</div>
<div class="description-paragraph" id="p-0067" num="0066">The instantiation of the one or more sets of one or more applications <b>564</b>A-R, as well as the virtualization layer <b>554</b> and software containers <b>562</b>A-R if implemented, are collectively referred to as software instance(s) <b>552</b>. Each set of applications <b>564</b>A-R, corresponding software container <b>562</b>A-R if implemented, and that part of the hardware <b>540</b> that executes them (be it hardware dedicated to that execution and/or time slices of hardware temporally shared by software containers <b>562</b>A-R), forms a separate virtual network element(s) <b>560</b>A-R.</div>
<div class="description-paragraph" id="p-0068" num="0067">The virtual network element(s) <b>560</b>A-R perform similar functionality to the virtual network element(s) <b>530</b>A-R—e.g., similar to the control communication and configuration module(s) <b>532</b>A and forwarding table(s) <b>534</b>A (this virtualization of the hardware <b>540</b> is sometimes referred to as network function virtualization (NFV)). Thus, NFV may be used to consolidate many network equipment types onto industry standard high volume server hardware, physical switches, and physical storage, which could be located in Data centers, NDs, and customer premise equipment (CPE). However, different embodiments of the invention may implement one or more of the software container(s) <b>562</b>A-R differently. For example, while embodiments of the invention are illustrated with each software container <b>562</b>A-R corresponding to one VNE <b>560</b>A-R, alternative embodiments may implement this correspondence at a finer level granularity (e.g., line card virtual machines virtualize line cards, control card virtual machine virtualize control cards, etc.); it should be understood that the techniques described herein with reference to a correspondence of software containers <b>562</b>A-R to VNEs also apply to embodiments where such a finer level of granularity is used.</div>
<div class="description-paragraph" id="p-0069" num="0068">In certain embodiments, the virtualization layer <b>554</b> includes a virtual switch that provides similar forwarding services as a physical Ethernet switch. Specifically, this virtual switch forwards traffic between software containers <b>562</b>A-R and the NIC(s) <b>544</b>, as well as optionally between the software containers <b>562</b>A-R; in addition, this virtual switch may enforce network isolation between the VNEs <b>560</b>A-R that by policy are not permitted to communicate with each other (e.g., by honoring virtual local area networks (VLANs)).</div>
<div class="description-paragraph" id="p-0070" num="0069">The third exemplary ND implementation in <figref idrefs="DRAWINGS">FIG. 5A</figref> is a hybrid network device <b>506</b>, which includes both custom ASICs/proprietary OS and COTS processors/standard OS in a single ND or a single card within an ND. In certain embodiments of such a hybrid network device, a platform VM (i.e., a VM that that implements the functionality of the special-purpose network device <b>502</b>) could provide for para-virtualization to the networking hardware present in the hybrid network device <b>506</b>.</div>
<div class="description-paragraph" id="p-0071" num="0070">Regardless of the above exemplary implementations of an ND, when a single one of multiple VNEs implemented by an ND is being considered (e.g., only one of the VNEs is part of a given virtual network) or where only a single VNE is currently being implemented by an ND, the shortened term network element (NE) is sometimes used to refer to that VNE. Also in all of the above exemplary implementations, each of the VNEs (e.g., VNE(s) <b>530</b>A-R, VNEs <b>560</b>A-R, and those in the hybrid network device <b>506</b>) receives data on the physical NIs (e.g., <b>516</b>, <b>546</b>) and forwards that data out the appropriate ones of the physical NIs (e.g., <b>516</b>, <b>546</b>). For example, a VNE implementing IP router functionality forwards IP packets on the basis of some of the IP header information in the IP packet; where IP header information includes source IP address, destination IP address, source port, destination port (where “source port” and “destination port” refer herein to protocol ports, as opposed to physical ports of a ND), transport protocol (e.g., user datagram protocol (UDP) (RFC 768, 2460, 2675, 4113, and 5405), Transmission Control Protocol (TCP) (RFC 793 and 1180), and differentiated services (DSCP) values (RFC 2474, 2475, 2597, 2983, 3086, 3140, 3246, 3247, 3260, 4594, 5865, 3289, 3290, and 3317).</div>
<div class="description-paragraph" id="p-0072" num="0071"> <figref idrefs="DRAWINGS">FIG. 5C</figref> illustrates various exemplary ways in which VNEs may be coupled according to some embodiments of the invention. <figref idrefs="DRAWINGS">FIG. 5C</figref> shows VNEs <b>570</b>A.<b>1</b>-<b>570</b>A.P (and optionally VNEs <b>570</b>A.Q-<b>570</b>A.R) implemented in ND <b>500</b>A and VNE <b>570</b>H.<b>1</b> in ND <b>500</b>H. In <figref idrefs="DRAWINGS">FIG. 5C</figref>, VNEs <b>570</b>A.<b>1</b>-P are separate from each other in the sense that they can receive packets from outside ND <b>500</b>A and forward packets outside of ND <b>500</b>A; VNE <b>570</b>A.<b>1</b> is coupled with VNE <b>570</b>H.<b>1</b>, and thus they communicate packets between their respective NDs; VNE <b>570</b>A.<b>2</b>-<b>570</b>A.<b>3</b> may optionally forward packets between themselves without forwarding them outside of the ND <b>500</b>A; and VNE <b>570</b>A.P may optionally be the first in a chain of VNEs that includes VNE <b>570</b>A.Q followed by VNE <b>570</b>A.R (this is sometimes referred to as dynamic service chaining, where each of the VNEs in the series of VNEs provides a different service—e.g., one or more layer 4-7 network services). While <figref idrefs="DRAWINGS">FIG. 5C</figref> illustrates various exemplary relationships between the VNEs, alternative embodiments may support other relationships (e.g., more/fewer VNEs, more/fewer dynamic service chains, multiple different dynamic service chains with some common VNEs and some different VNEs).</div>
<div class="description-paragraph" id="p-0073" num="0072">The NDs of <figref idrefs="DRAWINGS">FIG. 5A</figref>, for example, may form part of the Internet or a private network; and other electronic devices (not shown; such as end user devices including workstations, laptops, netbooks, tablets, palm tops, mobile phones, smartphones, phablets, multimedia phones, Voice Over Internet Protocol (VOIP) phones, terminals, portable media players, GPS units, wearable devices, gaming systems, set-top boxes, Internet enabled household appliances) may be coupled to the network (directly or through other networks such as access networks) to communicate over the network (e.g., the Internet or virtual private networks (VPNs) overlaid on (e.g., tunneled through) the Internet) with each other (directly or through servers) and/or access content and/or services. Such content and/or services are typically provided by one or more servers (not shown) belonging to a service/content provider or one or more end user devices (not shown) participating in a peer-to-peer (P2P) service, and may include, for example, public webpages (e.g., free content, store fronts, search services), private webpages (e.g., username/password accessed webpages providing email services), and/or corporate networks over VPNs. For instance, end user devices may be coupled (e.g., through customer premise equipment coupled to an access network (wired or wirelessly)) to edge NDs, which are coupled (e.g., through one or more core NDs) to other edge NDs, which are coupled to electronic devices acting as servers. However, through compute and storage virtualization, one or more of the electronic devices operating as the NDs in <figref idrefs="DRAWINGS">FIG. 5A</figref> may also host one or more such servers (e.g., in the case of the general purpose network device <b>504</b>, one or more of the software containers <b>562</b>A-R may operate as servers; the same would be true for the hybrid network device <b>506</b>; in the case of the special-purpose network device <b>502</b>, one or more such servers could also be run on a virtualization layer executed by the compute resource(s) <b>512</b>); in which case the servers are said to be co-located with the VNEs of that ND.</div>
<div class="description-paragraph" id="p-0074" num="0073">A virtual network is a logical abstraction of a physical network (such as that in <figref idrefs="DRAWINGS">FIG. 5A</figref>) that provides network services (e.g., L2 and/or L3 services). A virtual network can be implemented as an overlay network (sometimes referred to as a network virtualization overlay) that provides network services (e.g., layer 2 (L2, data link layer) and/or layer 3 (L3, network layer) services) over an underlay network (e.g., an L3 network, such as an Internet Protocol (IP) network that uses tunnels (e.g., generic routing encapsulation (GRE), layer 2 tunneling protocol (L2TP), IPSec) to create the overlay network).</div>
<div class="description-paragraph" id="p-0075" num="0074">A network virtualization edge (NVE) sits at the edge of the underlay network and participates in implementing the network virtualization; the network-facing side of the NVE uses the underlay network to tunnel frames to and from other NVEs; the outward-facing side of the NVE sends and receives data to and from systems outside the network. A virtual network instance (VNI) is a specific instance of a virtual network on a NVE (e.g., a NE/VNE on an ND, a part of a NE/VNE on a ND where that NE/VNE is divided into multiple VNEs through emulation); one or more VNIs can be instantiated on an NVE (e.g., as different VNEs on an ND). A virtual access point (VAP) is a logical connection point on the NVE for connecting external systems to a virtual network; a VAP can be physical or virtual ports identified through logical interface identifiers (e.g., a VLAN ID).</div>
<div class="description-paragraph" id="p-0076" num="0075">Examples of network services include: 1) an Ethernet LAN emulation service (an Ethernet-based multipoint service similar to an Internet Engineering Task Force (IETF) Multiprotocol Label Switching (MPLS) or Ethernet VPN (EVPN) service) in which external systems are interconnected across the network by a LAN environment over the underlay network (e.g., an NVE provides separate L2 VNIs (virtual switching instances) for different such virtual networks, and L3 (e.g., IP/MPLS) tunneling encapsulation across the underlay network); and 2) a virtualized IP forwarding service (similar to IETF IP VPN (e.g., Border Gateway Protocol (BGP)/MPLS IPVPN RFC 4364) from a service definition perspective) in which external systems are interconnected across the network by an L3 environment over the underlay network (e.g., an NVE provides separate L3 VNIs (forwarding and routing instances) for different such virtual networks, and L3 (e.g., IP/MPLS) tunneling encapsulation across the underlay network)). Network services may also include quality of service capabilities (e.g., traffic classification marking, traffic conditioning and scheduling), security capabilities (e.g., filters to protect customer premises from network—originated attacks, to avoid malformed route announcements), and management capabilities (e.g., full detection and processing).</div>
<div class="description-paragraph" id="p-0077" num="0076"> <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates a network with a single network element on each of the NDs of <figref idrefs="DRAWINGS">FIG. 5A</figref>, and within this straight forward approach contrasts a traditional distributed approach (commonly used by traditional routers) with a centralized approach for maintaining reachability and forwarding information (also called network control), according to some embodiments of the invention. Specifically, <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates network elements (NEs) <b>570</b>A-H with the same connectivity as the NDs <b>500</b>A-H of <figref idrefs="DRAWINGS">FIG. 5A</figref>.</div>
<div class="description-paragraph" id="p-0078" num="0077"> <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates that the distributed approach <b>572</b> distributes responsibility for generating the reachability and forwarding information across the NEs <b>570</b>A-H; in other words, the process of neighbor discovery and topology discovery is distributed.</div>
<div class="description-paragraph" id="p-0079" num="0078">For example, where the special-purpose network device <b>502</b> is used, the control communication and configuration module(s) <b>532</b>A-R of the ND control plane <b>524</b> typically include a reachability and forwarding information module to implement one or more routing protocols (e.g., an exterior gateway protocol such as Border Gateway Protocol (BGP) (RFC 4271), Interior Gateway Protocol(s) (IGP) (e.g., Open Shortest Path First (OSPF) (RFC 2328 and 5340), Intermediate System to Intermediate System (IS-IS) (RFC 1142), Routing Information Protocol (RIP) (version 1 RFC 1058, version 2 RFC 2453, and next generation RFC 2080)), Label Distribution Protocol (LDP) (RFC 5036), Resource Reservation Protocol (RSVP) (RFC 2205, 2210, 2211, 2212, as well as RSVP-Traffic Engineering (TE): Extensions to RSVP for LSP Tunnels RFC 3209, Generalized Multi-Protocol Label Switching (GMPLS) Signaling RSVP-TE RFC 3473, RFC 3936, 4495, and 4558)) that communicate with other NEs to exchange routes, and then selects those routes based on one or more routing metrics. Thus, the NEs <b>570</b>A-H (e.g., the compute resource(s) <b>512</b> executing the control communication and configuration module(s) <b>532</b>A-R) perform their responsibility for participating in controlling how data (e.g., packets) is to be routed (e.g., the next hop for the data and the outgoing physical NI for that data) by distributively determining the reachability within the network and calculating their respective forwarding information. Routes and adjacencies are stored in one or more routing structures (e.g., Routing Information Base (RIB), Label Information Base (LIB), one or more adjacency structures) on the ND control plane <b>524</b>. The ND control plane <b>524</b> programs the ND forwarding plane <b>526</b> with information (e.g., adjacency and route information) based on the routing structure(s). For example, the ND control plane <b>524</b> programs the adjacency and route information into one or more forwarding table(s) <b>534</b>A-R (e.g., Forwarding Information Base (FIB), Label Forwarding Information Base (LFIB), and one or more adjacency structures) on the ND forwarding plane <b>526</b>. For layer 2 forwarding, the ND can store one or more bridging tables that are used to forward data based on the layer 2 information in that data. While the above example uses the special-purpose network device <b>502</b>, the same distributed approach <b>572</b> can be implemented on the general purpose network device <b>504</b> and the hybrid network device <b>506</b>.</div>
<div class="description-paragraph" id="p-0080" num="0079"> <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates that a centralized approach <b>574</b> (also known as software defined networking (SDN)) that decouples the system that makes decisions about where traffic is sent from the underlying systems that forwards traffic to the selected destination. The illustrated centralized approach <b>574</b> has the responsibility for the generation of reachability and forwarding information in a centralized control plane <b>576</b> (sometimes referred to as a SDN control module, controller, network controller, OpenFlow controller, SDN controller, control plane node, network virtualization authority, or management control entity), and thus the process of neighbor discovery and topology discovery is centralized. The centralized control plane <b>576</b> has a south bound interface <b>582</b> with a data plane <b>580</b> (sometime referred to the infrastructure layer, network forwarding plane, or forwarding plane (which should not be confused with a ND forwarding plane)) that includes the NEs <b>570</b>A-H (sometimes referred to as switches, forwarding elements, data plane elements, or nodes). The centralized control plane <b>576</b> includes a network controller <b>578</b>, which includes a centralized reachability and forwarding information module <b>579</b> that determines the reachability within the network and distributes the forwarding information to the NEs <b>570</b>A-H of the data plane <b>580</b> over the south bound interface <b>582</b> (which may use the OpenFlow protocol). Thus, the network intelligence is centralized in the centralized control plane <b>576</b> executing on electronic devices that are typically separate from the NDs.</div>
<div class="description-paragraph" id="p-0081" num="0080">For example, where the special-purpose network device <b>502</b> is used in the data plane <b>580</b>, each of the control communication and configuration module(s) <b>532</b>A-R of the ND control plane <b>524</b> typically include a control agent that provides the VNE side of the south bound interface <b>582</b>. In this case, the ND control plane <b>524</b> (the compute resource(s) <b>512</b> executing the control communication and configuration module(s) <b>532</b>A-R) performs its responsibility for participating in controlling how data (e.g., packets) is to be routed (e.g., the next hop for the data and the outgoing physical NI for that data) through the control agent communicating with the centralized control plane <b>576</b> to receive the forwarding information (and in some cases, the reachability information) from the centralized reachability and forwarding information module <b>579</b> (it should be understood that in some embodiments of the invention, the control communication and configuration module(s) <b>532</b>A-R, in addition to communicating with the centralized control plane <b>576</b>, may also play some role in determining reachability and/or calculating forwarding information—albeit less so than in the case of a distributed approach; such embodiments are generally considered to fall under the centralized approach <b>574</b>, but may also be considered a hybrid approach).</div>
<div class="description-paragraph" id="p-0082" num="0081">While the above example uses the special-purpose network device <b>502</b>, the same centralized approach <b>574</b> can be implemented with the general purpose network device <b>504</b> (e.g., each of the VNE <b>560</b>A-R performs its responsibility for controlling how data (e.g., packets) is to be routed (e.g., the next hop for the data and the outgoing physical NI for that data) by communicating with the centralized control plane <b>576</b> to receive the forwarding information (and in some cases, the reachability information) from the centralized reachability and forwarding information module <b>579</b>; it should be understood that in some embodiments of the invention, the VNEs <b>560</b>A-R, in addition to communicating with the centralized control plane <b>576</b>, may also play some role in determining reachability and/or calculating forwarding information—albeit less so than in the case of a distributed approach) and the hybrid network device <b>506</b>. In fact, the use of SDN techniques can enhance the NFV techniques typically used in the general purpose network device <b>504</b> or hybrid network device <b>506</b> implementations as NFV is able to support SDN by providing an infrastructure upon which the SDN software can be run, and NFV and SDN both aim to make use of commodity server hardware and physical switches.</div>
<div class="description-paragraph" id="p-0083" num="0082"> <figref idrefs="DRAWINGS">FIG. 5D</figref> also shows that the centralized control plane <b>576</b> has a north bound interface <b>584</b> to an application layer <b>586</b>, in which resides application(s) <b>588</b>. The centralized control plane <b>576</b> has the ability to form virtual networks <b>592</b> (sometimes referred to as a logical forwarding plane, network services, or overlay networks (with the NEs <b>570</b>A-H of the data plane <b>580</b> being the underlay network)) for the application(s) <b>588</b>. Thus, the centralized control plane <b>576</b> maintains a global view of all NDs and configured NEs/VNEs, and it maps the virtual networks to the underlying NDs efficiently (including maintaining these mappings as the physical network changes either through hardware (ND, link, or ND component) failure, addition, or removal).</div>
<div class="description-paragraph" id="p-0084" num="0083">While <figref idrefs="DRAWINGS">FIG. 5D</figref> shows the distributed approach <b>572</b> separate from the centralized approach <b>574</b>, the effort of network control may be distributed differently or the two combined in certain embodiments of the invention. For example: 1) embodiments may generally use the centralized approach (SDN) <b>574</b>, but have certain functions delegated to the NEs (e.g., the distributed approach may be used to implement one or more of fault monitoring, performance monitoring, protection switching, and primitives for neighbor and/or topology discovery); or 2) embodiments of the invention may perform neighbor discovery and topology discovery via both the centralized control plane and the distributed protocols, and the results compared to raise exceptions where they do not agree. Such embodiments are generally considered to fall under the centralized approach <b>574</b>, but may also be considered a hybrid approach.</div>
<div class="description-paragraph" id="p-0085" num="0084">While <figref idrefs="DRAWINGS">FIG. 5D</figref> illustrates the simple case where each of the NDs <b>500</b>A-H implements a single NE <b>570</b>A-H, it should be understood that the network control approaches described with reference to <figref idrefs="DRAWINGS">FIG. 5D</figref> also work for networks where one or more of the NDs <b>500</b>A-H implement multiple VNEs (e.g., VNEs <b>530</b>A-R, VNEs <b>560</b>A-R, those in the hybrid network device <b>506</b>). Alternatively or in addition, the network controller <b>578</b> may also emulate the implementation of multiple VNEs in a single ND. Specifically, instead of (or in addition to) implementing multiple VNEs in a single ND, the network controller <b>578</b> may present the implementation of a VNE/NE in a single ND as multiple VNEs in the virtual networks <b>592</b> (all in the same one of the virtual network(s) <b>592</b>, each in different ones of the virtual network(s) <b>592</b>, or some combination). For example, the network controller <b>578</b> may cause an ND to implement a single VNE (a NE) in the underlay network, and then logically divide up the resources of that NE within the centralized control plane <b>576</b> to present different VNEs in the virtual network(s) <b>592</b> (where these different VNEs in the overlay networks are sharing the resources of the single VNE/NE implementation on the ND in the underlay network).</div>
<div class="description-paragraph" id="p-0086" num="0085">On the other hand, <figref idrefs="DRAWINGS">FIGS. 5E and 5F</figref> respectively illustrate exemplary abstractions of NEs and VNEs that the network controller <b>578</b> may present as part of different ones of the virtual networks <b>592</b>. <figref idrefs="DRAWINGS">FIG. 5E</figref> illustrates the simple case of where each of the NDs <b>500</b>A-H implements a single NE <b>570</b>A-H (see <figref idrefs="DRAWINGS">FIG. 5D</figref>), but the centralized control plane <b>576</b> has abstracted multiple of the NEs in different NDs (the NEs <b>570</b>A-C and G-H) into (to represent) a single NE <b>570</b>I in one of the virtual network(s) <b>592</b> of <figref idrefs="DRAWINGS">FIG. 5D</figref>, according to some embodiments of the invention. <figref idrefs="DRAWINGS">FIG. 5E</figref> shows that in this virtual network, the NE <b>570</b>I is coupled to NE <b>570</b>D and <b>570</b>F, which are both still coupled to NE <b>570</b>E.</div>
<div class="description-paragraph" id="p-0087" num="0086"> <figref idrefs="DRAWINGS">FIG. 5F</figref> illustrates a case where multiple VNEs (VNE <b>570</b>A.<b>1</b> and VNE <b>570</b>H.<b>1</b>) are implemented on different NDs (ND <b>500</b>A and ND <b>500</b>H) and are coupled to each other, and where the centralized control plane <b>576</b> has abstracted these multiple VNEs such that they appear as a single VNE <b>570</b>T within one of the virtual networks <b>592</b> of <figref idrefs="DRAWINGS">FIG. 5D</figref>, according to some embodiments of the invention. Thus, the abstraction of a NE or VNE can span multiple NDs.</div>
<div class="description-paragraph" id="p-0088" num="0087">While some embodiments of the invention implement the centralized control plane <b>576</b> as a single entity (e.g., a single instance of software running on a single electronic device), alternative embodiments may spread the functionality across multiple entities for redundancy and/or scalability purposes (e.g., multiple instances of software running on different electronic devices).</div>
<div class="description-paragraph" id="p-0089" num="0088">Similar to the network device implementations, the electronic device(s) running the centralized control plane <b>576</b>, and thus the network controller <b>578</b> including the centralized reachability and forwarding information module <b>579</b>, may be implemented a variety of ways (e.g., a special purpose device, a general-purpose (e.g., COTS) device, or hybrid device). These electronic device(s) would similarly include compute resource(s), a set or one or more physical NICs, and a non-transitory machine-readable storage medium having stored thereon the centralized control plane software. For instance, <figref idrefs="DRAWINGS">FIG. 6</figref> illustrates, a general purpose control plane device <b>604</b> including hardware <b>640</b> comprising a set of one or more processor(s) <b>642</b> (which are often COTS processors) and network interface controller(s) <b>644</b> (NICs; also known as network interface cards) (which include physical NIs <b>646</b>), as well as non-transitory machine readable storage media <b>648</b> having stored therein centralized control plane (CCP) software <b>650</b>.</div>
<div class="description-paragraph" id="p-0090" num="0089">In embodiments that use compute virtualization, the processor(s) <b>642</b> typically execute software to instantiate a virtualization layer <b>654</b> and software container(s) <b>662</b>A-R (e.g., with operating system-level virtualization, the virtualization layer <b>654</b> represents the kernel of an operating system (or a shim executing on a base operating system) that allows for the creation of multiple software containers <b>662</b>A-R (representing separate user space instances and also called virtualization engines, virtual private servers, or jails) that may each be used to execute a set of one or more applications; with full virtualization, the virtualization layer <b>654</b> represents a hypervisor (sometimes referred to as a virtual machine monitor (VMM)) or a hypervisor executing on top of a host operating system, and the software containers <b>662</b>A-R each represent a tightly isolated form of software container called a virtual machine that is run by the hypervisor and may include a guest operating system; with para-virtualization, an operating system or application running with a virtual machine may be aware of the presence of virtualization for optimization purposes). Again, in embodiments where compute virtualization is used, during operation an instance of the CCP software <b>650</b> (illustrated as CCP instance <b>676</b>A) is executed within the software container <b>662</b>A on the virtualization layer <b>654</b>. In embodiments where compute virtualization is not used, the CCP instance <b>676</b>A on top of a host operating system is executed on the “bare metal” general purpose control plane device <b>604</b>. The instantiation of the CCP instance <b>676</b>A, as well as the virtualization layer <b>654</b> and software containers <b>662</b>A-R if implemented, are collectively referred to as software instance(s) <b>652</b>.</div>
<div class="description-paragraph" id="p-0091" num="0090">In some embodiments, the CCP instance <b>676</b>A includes a network controller instance <b>678</b>. The network controller instance <b>678</b> includes a centralized reachability and forwarding information module instance <b>679</b> (which is a middleware layer providing the context of the network controller <b>578</b> to the operating system and communicating with the various NEs), and an CCP application layer <b>680</b> (sometimes referred to as an application layer) over the middleware layer (providing the intelligence required for various network operations such as protocols, network situational awareness, and user-interfaces). At a more abstract level, this CCP application layer <b>680</b> within the centralized control plane <b>576</b> works with virtual network view(s) (logical view(s) of the network) and the middleware layer provides the conversion from the virtual networks to the physical view.</div>
<div class="description-paragraph" id="p-0092" num="0091">The centralized control plane <b>576</b> transmits relevant messages to the data plane <b>580</b> based on CCP application layer <b>680</b> calculations and middleware layer mapping for each flow. A flow may be defined as a set of packets whose headers match a given pattern of bits; in this sense, traditional IP forwarding is also flow-based forwarding where the flows are defined by the destination IP address for example; however, in other implementations, the given pattern of bits used for a flow definition may include more fields (e.g., 10 or more) in the packet headers. Different NDs/NEs/VNEs of the data plane <b>580</b> may receive different messages, and thus different forwarding information. The data plane <b>580</b> processes these messages and programs the appropriate flow information and corresponding actions in the forwarding tables (sometime referred to as flow tables) of the appropriate NE/VNEs, and then the NEs/VNEs map incoming packets to flows represented in the forwarding tables and forward packets based on the matches in the forwarding tables.</div>
<div class="description-paragraph" id="p-0093" num="0092">Standards such as OpenFlow define the protocols used for the messages, as well as a model for processing the packets. The model for processing packets includes header parsing, packet classification, and making forwarding decisions. Header parsing describes how to interpret a packet based upon a well-known set of protocols. Some protocol fields are used to build a match structure (or key) that will be used in packet classification (e.g., a first key field could be a source media access control (MAC) address, and a second key field could be a destination MAC address).</div>
<div class="description-paragraph" id="p-0094" num="0093">Packet classification involves executing a lookup in memory to classify the packet by determining which entry (also referred to as a forwarding table entry or flow entry) in the forwarding tables best matches the packet based upon the match structure, or key, of the forwarding table entries. It is possible that many flows represented in the forwarding table entries can correspond/match to a packet; in this case the system is typically configured to determine one forwarding table entry from the many according to a defined scheme (e.g., selecting a first forwarding table entry that is matched). Forwarding table entries include both a specific set of match criteria (a set of values or wildcards, or an indication of what portions of a packet should be compared to a particular value/values/wildcards, as defined by the matching capabilities—for specific fields in the packet header, or for some other packet content), and a set of one or more actions for the data plane to take on receiving a matching packet. For example, an action may be to push a header onto the packet, for the packet using a particular port, flood the packet, or simply drop the packet. Thus, a forwarding table entry for IPv4/IPv6 packets with a particular transmission control protocol (TCP) destination port could contain an action specifying that these packets should be dropped.</div>
<div class="description-paragraph" id="p-0095" num="0094">Making forwarding decisions and performing actions occurs, based upon the forwarding table entry identified during packet classification, by executing the set of actions identified in the matched forwarding table entry on the packet.</div>
<div class="description-paragraph" id="p-0096" num="0095">However, when an unknown packet (for example, a “missed packet” or a “match-miss” as used in OpenFlow parlance) arrives at the data plane <b>580</b>, the packet (or a subset of the packet header and content) is typically forwarded to the centralized control plane <b>576</b>. The centralized control plane <b>576</b> will then program forwarding table entries into the data plane <b>580</b> to accommodate packets belonging to the flow of the unknown packet. Once a specific forwarding table entry has been programmed into the data plane <b>580</b> by the centralized control plane <b>576</b>, the next packet with matching credentials will match that forwarding table entry and take the set of actions associated with that matched entry.</div>
<div class="description-paragraph" id="p-0097" num="0096">A network interface (NI) may be physical or virtual; and in the context of IP, an interface address is an IP address assigned to a NI, be it a physical NI or virtual NI. A virtual NI may be associated with a physical NI, with another virtual interface, or stand on its own (e.g., a loopback interface, a point-to-point protocol interface). A NI (physical or virtual) may be numbered (a NI with an IP address) or unnumbered (a NI without an IP address). A loopback interface (and its loopback address) is a specific type of virtual NI (and IP address) of a NE/VNE (physical or virtual) often used for management purposes; where such an IP address is referred to as the nodal loopback address. The IP address(es) assigned to the NI(s) of a ND are referred to as IP addresses of that ND; at a more granular level, the IP address(es) assigned to NI(s) assigned to a NE/VNE implemented on a ND can be referred to as IP addresses of that NE/VNE.</div>
<div class="description-paragraph" id="p-0098" num="0097">While the flow diagrams in the figures show a particular order of operations performed by certain embodiments of the invention, it should be understood that such order is exemplary (e.g., alternative embodiments may perform the operations in a different order, combine certain operations, overlap certain operations, etc.).</div>
<div class="description-paragraph" id="p-0099" num="0098">While the invention has been described in terms of several embodiments, those skilled in the art will recognize that the invention is not limited to the embodiments described, can be practiced with modification and alteration within the spirit and scope of the appended claims. The description is thus to be regarded as illustrative instead of limiting.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">30</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM260981920">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. A method implemented by a network node, of signaling a maximum segment identifier depth (MSD) of the network node to a centralized controller, the method comprising:
<div class="claim-text">encoding the MSD into an attribute Type Length Value (TLV) including a type, a length and a value, wherein the type indicates the type of the MSD, the length indicates the length of the MSD and the value is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">transmitting the attribute TLV to the centralized controller, wherein the centralized controller is to use the attribute TLV to compute an SR tunnel and the label stack depth of the SR tunnel does not exceed the MSD supported by the network node.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text">5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text">6. A network node for signaling a maximum segment identifier depth (MSD) of the network node to a centralized controller, comprising:
<div class="claim-text">a processor and a memory, said memory containing instructions executable by the processor to cause the network node to:
<div class="claim-text">encode the MSD into an attribute Type Length Value (TLV) including a type, a length and a value, wherein the type indicates the type of the MSD, the length indicates the length of the MSD and the value is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">transmit the attribute TLV to the centralized controller, wherein the centralized controller is to use the attribute TLV to compute an SR tunnel and the label stack depth of the SR tunnel does not exceed the MSD supported by the network node.</div>
</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text">7. The network node of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text">8. The network node of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text">9. The network node of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text">10. The network node of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text">11. A non-transitory machine-readable storage medium that provides instructions that, if executed by a processor of a network node, will cause said processor to perform operations comprising:
<div class="claim-text">encoding a maximum segment identifier depth (MSD) of the network node into an attribute Type Length Value (TLV) including a type, a length and a value, wherein the type indicates the type of the MSD, the length indicates the length of the MSD and the value is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">transmitting the attribute TLV to a centralized controller, wherein the centralized controller is to use the attribute TLV to compute an SR tunnel and the label stack depth of the SR tunnel does not exceed the MSD supported by the network node.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text">12. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00013" num="00013">
<div class="claim-text">13. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00014" num="00014">
<div class="claim-text">14. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00015" num="00015">
<div class="claim-text">15. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00016" num="00016">
<div class="claim-text">16. A method in a network controller, the method comprising:
<div class="claim-text">receiving from a network node an attribute Type Length Value (TLV) including a type, a length and a value;</div>
<div class="claim-text">decoding the attribute TLV, to extract a maximum segment identifier depth (MSD) of the network node, wherein the type of the attribute TLV indicates the type of the MSD, the length of the attribute TLV indicates the length of the MSD and the value of the attribute TLV is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, and wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">computing, using the MSD, an SR tunnel including the network node, wherein the SR tunnel has a label stack depth that is lower than or equal to the MSD of the network node.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00017" num="00017">
<div class="claim-text">17. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00018" num="00018">
<div class="claim-text">18. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00019" num="00019">
<div class="claim-text">19. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00020" num="00020">
<div class="claim-text">20. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00021" num="00021">
<div class="claim-text">21. A centralized controller comprising:
<div class="claim-text">a processor and a memory, said memory containing instructions executable by the processor to cause the centralized controller to:
<div class="claim-text">receive from a network node an attribute Type Length Value (TLV) including a type, a length and a value; and</div>
<div class="claim-text">decode the attribute TLV, to extract a maximum segment identifier depth (MSD) of the network node, wherein the type of the attribute TLV indicates the type of the MSD, the length of the attribute TLV indicates the length of the MSD and the value of the attribute TLV is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, and wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">compute, using the MSD, an SR tunnel including the network node, wherein the SR tunnel has a label stack depth that is lower than or equal to the MSD of the network node.</div>
</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00022" num="00022">
<div class="claim-text">22. The centralized controller of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00023" num="00023">
<div class="claim-text">23. The centralized controller of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00024" num="00024">
<div class="claim-text">24. The centralized controller of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00025" num="00025">
<div class="claim-text">25. The centralized controller of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00026" num="00026">
<div class="claim-text">26. A non-transitory machine-readable storage medium that provides instructions that, if executed by a processor of a centralized controller, will cause said processor to perform operations comprising:
<div class="claim-text">receiving from a network node an attribute Type Length Value (TLV) including a type, a length and a value;</div>
<div class="claim-text">decoding the attribute TLV, to extract a maximum segment identifier depth (MSD) of the network node, wherein the type of the attribute TLV indicates the type of the MSD, the length of the attribute TLV indicates the length of the MSD and the value of the attribute TLV is a number that is a maximum number of segment routing (SR) labels that the network node is capable of imposing, wherein an SR label is used for steering a packet through an SR network, and wherein the type of the attribute TLV indicates that the MSD is a link MSD and the value of the attribute TLV is a lowest MSD supported by a link of the network node; and</div>
<div class="claim-text">computing, using the MSD, an SR tunnel including the network node, wherein the SR tunnel has a label stack depth that is lower than or equal to the MSD of the network node.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00027" num="00027">
<div class="claim-text">27. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the network node is an ingress node of the SR tunnel.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00028" num="00028">
<div class="claim-text">28. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the attribute TLV is a border gateway protocol Link State (BGP-LS) extension message.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00029" num="00029">
<div class="claim-text">29. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the network node does not support Path Computation Element Communication Protocol (PCEP).</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00030" num="00030">
<div class="claim-text">30. The non-transitory machine-readable storage medium of <claim-ref idref="CLM-00026">claim 26</claim-ref>, wherein the network node does not participate in Interior Gateway Protocol(s) (IGP).</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    