
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US11032550B2 - Method and apparatus of video coding 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA450255261">
<div class="abstract" id="p-0001" num="0000">In one example, a method for video coding includes receiving input data associated with a current block in an image frame, generating an inter predictor of the current block, and generating an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode that locates the samples of neighboring pixels. The method further includes generating a final predictor of the current block by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode, and encoding or decoding the current block based on the final predictor to output encoded video data or a decoded block. The one or more intra weight coefficients indicate one or more ratios that corresponding one or more portions of the intra predictor are combined with the inter predictor, respectively.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES294541095">
<heading id="h-0001">INCORPORATION BY REFERENCE</heading>
<div class="description-paragraph" id="p-0002" num="0001">This present disclosure claims the benefit of U.S. Provisional Application No. 62/299,578, “Methods and Apparatus of intra-inter mode in Video and Image Compression” filed on Feb. 25, 2016 and U.S. Provisional Application No. 62/371,251, “Methods for QTBT intra chroma coding and intra inter-mode in image and video compression” filed on Aug. 5, 2016, which are incorporated herein by reference in their entireties.</div>
<heading id="h-0002">BACKGROUND</heading>
<div class="description-paragraph" id="p-0003" num="0002">The background description provided herein is for the purpose of generally presenting the context of the disclosure. Work of the presently named inventors, to the extent the work is described in this background section, as well as aspects of the description that may not otherwise qualify as prior art at the time of filing, are neither expressly nor impliedly admitted as prior art against the present disclosure.</div>
<div class="description-paragraph" id="p-0004" num="0003">Many video coding standards include dividing an image frame of an input video into one or more coding units. In general, a coding unit may include a prediction unit that has a luma prediction block and at least two corresponding chroma prediction blocks. When encoding an original image of a block, the original image of the block can be divided into a predictable portion (also referred to as a predictor) and a residual portion of the block according to a predetermined video coding standard. When decoding the block, a reconstructed image of the block can be obtained by generating and combining the predictor and the residual portion of the block according to the same predetermined video coding standard.</div>
<div class="description-paragraph" id="p-0005" num="0004">In some applications, the predictor of a block can be generated based on the image(s) of other blocks and/or other frames. Such prediction scheme aims at reducing temporal redundancy in the encoded video data and is also known as an inter prediction. In some applications, the predictor of a block can be generated by extrapolating samples of neighboring pixels adjacent to the block based on a selected one of plural predetermined prediction modes. Such prediction scheme can reduce spatial redundancy in the encoded video data and is also known as an intra prediction.</div>
<heading id="h-0003">SUMMARY</heading>
<div class="description-paragraph" id="p-0006" num="0005">Aspects of the disclosure provide a method for video coding. The method can include receiving input data associated with a current block in an image frame, generating an inter predictor of the current block, and generating an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode that locates the samples of neighboring pixels. The method can further include generating a final predictor of the current block by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode, and encoding or decoding the current block based on the final predictor to output encoded video data or a decoded block. The one or more intra weight coefficients indicate one or more ratios that corresponding one or more portions of the intra predictor can be combined with the inter predictor, respectively.</div>
<div class="description-paragraph" id="p-0007" num="0006">In an embodiment, combining the inter predictor and the intra predictor is performed according to an intra weight coefficient applicable to an entirety of the current block when the intra prediction mode is a non-angular prediction mode.</div>
<div class="description-paragraph" id="p-0008" num="0007">In an embodiment, the method further includes dividing the current block into a predetermined number of portions when the intra prediction mode is an angular prediction mode. Combining the inter predictor and the intra predictor may be performed according to intra weight coefficients for the predetermined number of portions, respectively. Also, values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along a direction of reference of the intra prediction mode decrease.</div>
<div class="description-paragraph" id="p-0009" num="0008">In an embodiment, the method further includes identifying a closest one of predetermined representative directions to a direction of reference of the intra prediction mode when the intra prediction mode is an angular prediction mode, and dividing the current block into a predetermined number of portions arranged along the identified representative direction. Combining the inter predictor and the intra predictor is performed according to intra weight coefficients for the predetermined number of portions, respectively. Also, values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along the identified representative direction decrease. Moreover, the predetermined representative directions may include at least a vertical direction of reference and a horizontal direction of reference.</div>
<div class="description-paragraph" id="p-0010" num="0009">The method may further include selecting the intra prediction mode for the current block from a first plurality of predetermined intra prediction modes, and encoding or decoding a second block based on an intra predictor derived according to a second intra prediction mode selected from a second plurality of predetermined intra prediction modes. The first plurality of predetermined intra prediction modes may be a subset of the second plurality of predetermined intra prediction modes.</div>
<div class="description-paragraph" id="p-0011" num="0010">In one embodiment, the first plurality of predetermined intra prediction modes includes at least most probable modes (MPMs) selected from the second plurality of predetermined intra prediction modes. In one embodiment, when the current block is a chroma block, the first plurality of predetermined intra prediction modes includes one or more of the direct mode, linear mode, DC mode, planar mode, horizontal mode, and/or vertical mode.</div>
<div class="description-paragraph" id="p-0012" num="0011">A number of the first plurality of predetermined intra prediction modes may be determinable based on a size of the current block. Moreover, the first plurality of predetermined intra prediction modes may exclude a first portion of angular prediction modes of the second plurality of predetermined intra prediction modes that have directions of reference pointing to a left edge of the current block when a width of the current block is greater than a height of the current block. Also, the first plurality of predetermined intra prediction modes may exclude a second portion of angular prediction modes of the second plurality of predetermined intra prediction modes that have directions of reference pointing to an upper edge of the current block when the width of the current block is less than the height of the current block.</div>
<div class="description-paragraph" id="p-0013" num="0012">The method may further includes including in a Sequence Parameter Set (SPS) or a Picture Parameter Set (PPS) of the encoded video data or extracting from the SPS or the PPS of the input data, an enable flag indicating whether a functionality of encoding or decoding a block using a final predictor generated based on combining an inter predictor and an intra predictor is enabled for a corresponding sequence or picture(s).</div>
<div class="description-paragraph" id="p-0014" num="0013">In one embodiment, a flag indicating whether the current block is encoded using the final predictor generated based on combining the inter predictor and the intra predictor in the encoded video data is included in the encoded video data or extracted from the input data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using inter prediction. In one embodiment, a flag indicating whether the current block is encoded using the final predictor generated based on combining the inter predictor and the intra predictor in the encoded video data is included in the encoded video data or extracted from the input data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using intra prediction.</div>
<div class="description-paragraph" id="p-0015" num="0014">Additionally, in an embodiment, the inter predictor may be generated by deriving a motion vector using an Advanced Motion Vector Prediction (AMVP), Merge, or Skip mode.</div>
<div class="description-paragraph" id="p-0016" num="0015">Aspects of the disclosure can further provide a video coding apparatus that includes a processing circuit configured to receive input data associated with a current block in an image frame, generate an inter predictor of the current block, and generate an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode that locates the samples of neighboring pixels. The processing circuit may be further configured to generate a final predictor of the current block by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode, and encode or decode the current block based on the final predictor to output encoded video data or a decoded block. The one or more intra weight coefficients may indicate one or more ratios that corresponding one or more portions of the intra predictor are combined with the inter predictor, respectively.</div>
<div class="description-paragraph" id="p-0017" num="0016">In an embodiment, the processing circuit may be configured to perform combining the inter predictor and the intra predictor according to an intra weight coefficient applicable to an entirety of the current block when the intra prediction mode is a non-angular prediction mode.</div>
<div class="description-paragraph" id="p-0018" num="0017">Moreover, the processing circuit may be configured to divide the current block into a predetermined number of portions when the intra prediction mode is an angular prediction mode, and perform combining the inter predictor and the intra predictor according to intra weight coefficients for the predetermined number of portions, respectively. Values of the intra weight coefficients may increase when distances between the corresponding portions and the samples of neighboring pixels along a direction of reference of the intra prediction mode decrease.</div>
<div class="description-paragraph" id="p-0019" num="0018">Aspects of the disclosure further provide a non-transitory computer readable medium storing program instructions for causing a processing circuit of an apparatus to perform a video coding method. The method may include receiving input data associated with a current block in an image frame, generating an inter predictor of the current block, and generating an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode that locates the samples of neighboring pixels. The method may further include generating a final predictor of the current block by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode, and encoding or decoding the current block based on the final predictor to output encoded video data or a decoded block. The one or more intra weight coefficients may indicate one or more ratios that corresponding one or more portions of the intra predictor are combined with the inter predictor, respectively.</div>
<description-of-drawings>
<heading id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0020" num="0019">Various embodiments of this disclosure that are proposed as examples will be described in detail with reference to the following figures, wherein like numerals reference like elements, and wherein:</div>
<div class="description-paragraph" id="p-0021" num="0020"> <figref idrefs="DRAWINGS">FIG. 1</figref> shows an exemplary functional block diagram of a video coding system according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIG. 2</figref> shows a diagram illustrating generating a final predictor of a block using an intra-inter prediction according to an exemplary embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 3</figref> shows a functional block diagram of an exemplary decoding circuit in the video coding system in <figref idrefs="DRAWINGS">FIG. 1</figref> according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0024" num="0023"> <figref idrefs="DRAWINGS">FIGS. 4A-4C</figref> show diagrams illustrating example sets of available intra prediction modes for an intra-inter prediction according to an exemplary embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIGS. 5A-5D</figref> show diagrams illustrating another four example sets of available intra prediction modes for an intra-inter prediction according to an exemplary embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIG. 6</figref> shows an exemplary diagram illustrating an example arrangement of intra weight coefficients applicable to various portions of a block in association with different directions of reference of various intra prediction modes according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0027" num="0026"> <figref idrefs="DRAWINGS">FIG. 7</figref> shows an exemplary diagram illustrating another example arrangement of intra weight coefficients applicable to various portions of a block in association with different directions of reference of various intra prediction modes according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0028" num="0027"> <figref idrefs="DRAWINGS">FIG. 8</figref> shows an exemplary diagram illustrating an example arrangement of intra weight coefficients applicable to various portions of a block in association with various distances to samples of neighboring pixels along a direction of reference of an example intra prediction mode according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0029" num="0028"> <figref idrefs="DRAWINGS">FIG. 9</figref> shows an exemplary functional block diagram of a processing circuit for video encoding in the video coding system in <figref idrefs="DRAWINGS">FIG. 1</figref> according to an embodiment of the disclosure;</div>
<div class="description-paragraph" id="p-0030" num="0029"> <figref idrefs="DRAWINGS">FIG. 10</figref> shows a flow chart outlining an exemplary video decoding process using a processing circuit for video decoding, such as the processing circuit in <figref idrefs="DRAWINGS">FIG. 3</figref>, according to an embodiment of the disclosure; and</div>
<div class="description-paragraph" id="p-0031" num="0030"> <figref idrefs="DRAWINGS">FIG. 11</figref> shows a flow chart outlining an exemplary video encoding process using a processing circuit for video encoding, such as the processing circuit in <figref idrefs="DRAWINGS">FIG. 9</figref>, according to an embodiment of the disclosure.</div>
</description-of-drawings>
<heading id="h-0005">DETAILED DESCRIPTION OF EMBODIMENTS</heading>
<div class="description-paragraph" id="p-0032" num="0031"> <figref idrefs="DRAWINGS">FIG. 1</figref> shows an exemplary functional block diagram of a video coding system <b>100</b> according to an embodiment of the disclosure. The video coding system <b>100</b> includes a processing circuit for video decoding (i.e., a decoding circuit) <b>110</b> and a processing circuit for video encoding (i.e., an encoding circuit) <b>120</b>. The encoding circuit <b>120</b> receives input frames <b>106</b> as input data and generates encoded video data <b>102</b> by encoding the input frames <b>106</b>. The decoding circuit <b>110</b> receives the encoded video data <b>102</b> as input data and generates output frames <b>104</b> by decoding the encoded video data <b>102</b>. The video coding system <b>100</b> may be implemented by one or more video coding devices that can include the decoding circuit <b>110</b>, the encoding circuit <b>120</b>, or both the decoding circuit <b>110</b> and encoding circuit <b>120</b>.</div>
<div class="description-paragraph" id="p-0033" num="0032">The decoding circuit <b>110</b> can include at least an intra-inter prediction module <b>112</b> and a decoding controller <b>116</b>. The intra-inter prediction module <b>112</b> can generate a final predictor of a block to be decoded (or a current block) in an image frame using an intra-inter prediction. More specifically, the intra-inter prediction module <b>112</b>, according to prediction parameters provided by the decoding controller <b>116</b>, can generate an intra predictor and an inter predictor of the current block. The intra predictor may be generated based on samples of neighboring pixels adjacent to the current block and an intra prediction mode, which may be dictated by the encoded video data <b>102</b> and usable to locate the samples of neighboring pixels. The inter predictor may be generated based on a reference block that can be located using a motion vector, which may be explicitly provided in the encoded video data <b>102</b> or derived based on information provided in the encoded video data <b>102</b>. Finally, the intra-inter prediction module <b>112</b> can generate the final predictor of the current block by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode.</div>
<div class="description-paragraph" id="p-0034" num="0033">The one or more intra weight coefficients indicate one or more ratios that corresponding one or more portions of the intra predictor are combined with the inter predictor, respectively. The weights can be applied according to a prediction mode of the intra prediction. For example, when an intra prediction mode is a non-angular prediction mode, combining the inter predictor and the intra predictor can be performed according to an intra weight coefficient applicable to an entirety of the current block. When the intra prediction mode is an angular prediction mode, combining the inter predictor and the intra predictor can be performed according to intra weight coefficients for various predetermined portions of the current block, where the values of the intra weight coefficients may vary with distances between the corresponding portions and the samples of neighboring pixels along a direction of reference of the intra prediction mode.</div>
<div class="description-paragraph" id="p-0035" num="0034">The intra prediction mode for decoding the current block can be selected from a first plurality of predetermined intra prediction modes. The decoding circuit <b>110</b> may further decode a second block in the same image frame or another image frame based on an intra predictor derived according to a second intra prediction mode that is selected from a second plurality of predetermined intra prediction modes. In some examples, the first plurality of predetermined intra prediction modes for the intra-inter prediction is a subset of the second plurality of predetermined intra prediction modes for the intra prediction.</div>
<div class="description-paragraph" id="p-0036" num="0035">For example, when the decoding circuit <b>110</b> is used to decode a 4×4 luma block based on the International Telecommunication Union Telecommunication Standardization Sector (ITU-T) H.264 standard (also known as H.264, MPEG-4 Part 10, Advanced Video Coding, MPEG-4 AVC, or H.264/MPEG-4 AVC standard), the second plurality of predetermined intra prediction modes may include 9 different intra prediction modes consistent with the H.264 standard, including 8 different angular prediction modes and one non-angular prediction mode (e.g., a DC mode, where an average value of the neighboring samples is assigned to all pixels of the block). Under this scenario, the first plurality of predetermined intra prediction modes may include the non-angular prediction mode and a portion of the nine angular prediction modes. In another example, when the decoding circuit <b>110</b> is used to decode a 32×32 luma block based on the ITU-T H.265 standard (also known as H.265, High Efficiency Video Coding, HEVC, or H.265/HEVC standard), the second plurality of predetermined intra prediction modes may include 35 different intra prediction modes consistent with the H.265 standard, including 33 different angular prediction modes and two non-angular prediction modes (e.g., a DC mode as discussed above and a planar mode, where values of the pixels of the block are determined using a two-dimensional extrapolation of the neighboring samples). Under this scenario, the first plurality of predetermined intra prediction modes may include the two non-angular prediction modes and a portion of the 33 intra prediction modes. In some examples, the first plurality of predetermined intra prediction modes may include at least the most probable modes (MPMs) among the corresponding predetermined intra prediction modes, which may be selected based on neighboring blocks of the current block. Of course, the second plurality of predetermined intra prediction modes may be defined according to a predetermined video coding standard and may include a number of angular prediction modes or non-angular prediction modes different from those disclosed in the present disclosure.</div>
<div class="description-paragraph" id="p-0037" num="0036">The decoding controller <b>116</b> can oversee the decoding of the encoded video data <b>102</b>, including determining whether to use the intra-inter prediction module <b>112</b> to decode the current block and/or controlling the operation of the intra-inter prediction module <b>112</b>. In some examples, the decoding controller <b>116</b> receives the encoded video data <b>102</b> associated with the current block and extracts information therefrom regarding whether to user the intra-inter prediction module <b>112</b>, the corresponding intra prediction mode, the corresponding motion vector, and/or the one or more intra weight coefficients. In some examples, some or all of the intra prediction mode, motion vector, and one or more intra weight coefficients for decoding the current block can be explicitly specified in the encoded video data <b>102</b> or derived based on the encoded video data <b>102</b> and a predetermined video coding standard.</div>
<div class="description-paragraph" id="p-0038" num="0037">In some examples, whether to use the intra-inter prediction may be determined based on whether the size of the current block is greater than a predetermined threshold. Moreover, the use the intra-inter prediction for the current block may be indicated by a flag, either explicitly specified in or derived from the encoded video data <b>102</b>, as using the intra-inter prediction different from using an intra prediction alone or using an inter prediction alone. In some examples, the use the intra-inter prediction for the current block may be indicated as a special case of the intra prediction. In some other examples, the use the intra-inter prediction for the current block may be indicated as a special case of the inter prediction.</div>
<div class="description-paragraph" id="p-0039" num="0038">The encoding circuit <b>120</b> can include at least an intra-inter prediction module <b>122</b>, an intra-inter estimation module <b>124</b>, and an encoding controller <b>126</b>. The intra-inter estimation module <b>124</b> can analyze the input frames <b>106</b> and determine prediction parameters for encoding a block (or a current block) in an image frame using an intra-inter prediction. The prediction parameters may include an intra prediction mode for generating an intra predictor of the current block, a motion vector for generating an inter predictor of the current block, and/or one or more intra weight coefficients associated with the intra prediction mode for generating a final predictor for the current block. The prediction parameters selected or identified by the intra estimation module <b>124</b> may be forwarded to the encoding controller <b>126</b>, and the encoding controller <b>126</b> may determine whether to encode the current block using the intra-inter prediction and encode the prediction parameters as part of the encoded video data <b>102</b> if the current block is to be coded using the intra-inter prediction. The prediction parameters selected or identified by the intra estimation module <b>124</b> may also be forwarded to the intra-inter prediction module <b>122</b> to generate the final predictor of the current block.</div>
<div class="description-paragraph" id="p-0040" num="0039">The intra-inter prediction module <b>122</b> can generate the final predictor of the current block for further encoding process in a manner similar to the operation of the intra-inter prediction module <b>112</b>. Moreover, the encoding controller <b>126</b> can oversee the encoding of the current block, including determining whether to use the intra-inter estimation module <b>124</b> and the intra-inter prediction module <b>122</b> to encode the current block and/or controlling the operation of the intra-inter estimation module <b>124</b> and the intra-inter prediction module <b>122</b>.</div>
<div class="description-paragraph" id="p-0041" num="0040">The encoding circuit <b>120</b>, like the decoding circuit <b>110</b>, can support the first plurality of predetermined intra prediction modes for the intra-inter prediction and the second plurality of predetermined intra prediction modes for the intra prediction, where the first plurality of predetermined intra prediction modes may be a subset of the second plurality of predetermined intra prediction modes.</div>
<div class="description-paragraph" id="p-0042" num="0041"> <figref idrefs="DRAWINGS">FIG. 2</figref> shows a diagram illustrating generating a final predictor of a block using an intra-inter prediction according to an exemplary embodiment of the disclosure. The final predictor <b>210</b> of the block may be a weighted combination of an intra predictor <b>220</b> and an inter predictor <b>240</b> of the block. The intra predictor <b>220</b> may be generated based on samples of neighboring pixels <b>222</b> <i>a</i>-<b>222</b> <i>g </i>and a specified intra prediction mode. The intra prediction mode may indicate a direction of reference pointing toward corresponding samples for each pixel of the intra predictor when the intra prediction mode is an angular prediction mode. The intra prediction mode may indicate that upper, left, or all neighboring pixels are used for generating the intra predictor when the intra prediction mode is a non-angular prediction mode. In the present disclosure, a direction of an intra prediction mode refers to the direction of reference for locating the neighboring samples. In some applications, the intra prediction mode may be identified by a direction of prediction, which is the opposite of the direction of reference. The intra prediction mode for generating the intra predictor <b>220</b> of the current block may be signaled or derived according to any applicable approach.</div>
<div class="description-paragraph" id="p-0043" num="0042">The inter predictor <b>240</b> may be generated based on a reference block <b>242</b> of another image frame, which can be located based on a specified motion vector <b>244</b>. In some examples, the reference block <b>242</b> may be located in the same frame as the current block <b>240</b>. The motion vector <b>244</b> for generating the inter predictor <b>240</b> of the current block may be signaled or derived according to any applicable approach. In some examples, the motion vector can be derived from a list of motion vector predictor (MVP) candidate(s), which can be encoded using an Advanced Motion Vector Prediction (AMVP), Merge, or Skip mode. Moreover, the inter prediction may be performed according to a normal inter mode, frame rate up-conversion mode (FRUC) mode, affine mode, merge mode, or the like. In some examples, the inter prediction part of the intra-inter prediction may be limited to a subset of the above-noted inter modes.</div>
<div class="description-paragraph" id="p-0044" num="0043">The final predictor <b>210</b> of the current block may be generated by combining the intra predictor <b>220</b> and the inter predictor <b>240</b> of the current block according to one or more intra weight coefficients associated with the intra prediction mode. In some examples, each intra weight coefficient indicates a ratio of a weighting assigned to a particular portion of the intra predictor <b>220</b> to a summation of the weighting assigned to the portion of the intra predictor <b>220</b> and a weighting assigned to a corresponding portion of the inter predictor <b>240</b>. For example, if a value of an intra weight coefficient is 0.5, the weightings for combining corresponding portions of the intra predictor and the inter predictor are 0.5-0.5. In another example, if a value of an intra weight coefficient is 0.8, the weightings for combining corresponding portions of the intra predictor and the inter predictor are 0.8-0.2. Moreover, in some examples, provided a pixel (Pred) of the final predictor is determined based on the corresponding pixels of the intra and inter predictors (Pred_intra and Pred_inter) with the intra weight coefficient w_intra and inter weight coefficient w_inter, the pixel (Pred) of the final predictor can be determined as:
<br/>
Pred=<i>w</i>_intra*Pred_intra+<i>w</i>_inter*Pred_inter, and
<br/>
<i>w</i>_intra+<i>w</i>_inter=1.
</div>
<div class="description-paragraph" id="p-0045" num="0044"> <figref idrefs="DRAWINGS">FIG. 3</figref> shows an exemplary functional block diagram of a decoding circuit <b>310</b> in a video coding system, such as the video coding system <b>100</b> in <figref idrefs="DRAWINGS">FIG. 1</figref>, according to an embodiment of the disclosure. <figref idrefs="DRAWINGS">FIG. 3</figref> is a simplified illustration of the decoding circuit <b>310</b> and thus may not show all the details and variations of the decoding circuit <b>310</b>.</div>
<div class="description-paragraph" id="p-0046" num="0045">The decoding circuit <b>310</b> includes an intra-inter prediction module <b>312</b> and a decoding controller <b>316</b> that may correspond to the intra-inter prediction module <b>112</b> and the decoding controller <b>116</b> in <figref idrefs="DRAWINGS">FIG. 1</figref>, respectively. The intra-inter prediction module <b>312</b> may generate a final predictor of a current block based on a specified intra prediction mode and a specified motion vector, should the decoding controller <b>316</b> determine that the current block is to be decode using the intra-inter prediction. The decoding circuit <b>310</b> also includes an inter prediction module <b>332</b>, an intra prediction module <b>336</b>, an adder <b>342</b>, a residue decoder <b>344</b>, an output filter <b>346</b>, a memory <b>350</b>, and a processor <b>360</b>. The inter prediction module <b>332</b> may generate an inter predictor based on a specified motion vector as the final predictor of the current block when the current block is to be decode using the inter prediction. The intra prediction module <b>336</b> may generate an intra predictor based on a specified intra prediction mode as the final predictor of the current block when the current block is to be decode using the inter prediction.</div>
<div class="description-paragraph" id="p-0047" num="0046">Moreover, the residue decoder <b>344</b> can generate the residual portion of the current block according to the residue information from the decoding controller <b>316</b>. The adder <b>342</b> may generate a decoded image of the current block (i.e., the decoded block) by adding the residual portion of the current block from the residue decoder <b>344</b> and the final predictor of the current block from the inter-intra prediction module <b>312</b>, the inter prediction module <b>332</b>, or the intra prediction module <b>336</b>. The output filter <b>348</b> combines decoded blocks from the adder <b>342</b> into image frames, processes the image frames according to a predetermined filtering process, and output the filtered image frames as the output frames <b>304</b>. The memory <b>350</b> can store filtered image frame from the output filter <b>348</b> and/or previously decoded blocks of a current frame from the prediction modules <b>312</b>, <b>332</b>, or <b>336</b>, which can be further used by the prediction modules <b>312</b>, <b>332</b>, or <b>336</b> for retrieving reference samples.</div>
<div class="description-paragraph" id="p-0048" num="0047">The decoding controller <b>316</b> receives and analyzes the encoded video data <b>302</b> and extracts residue information and prediction parameters of the current block. The decoding controller <b>316</b> may provide the residue information to the residue decoder <b>344</b> and provide the prediction parameters to the intra-inter prediction module <b>312</b>, the inter prediction module <b>332</b>, or the intra prediction module <b>336</b> in order to reconstruct the image of the current block. In some examples, when the current block is to be decoded using the intra-inter prediction, the intra-inter prediction module <b>312</b> may instruct the inter prediction module <b>332</b> and the intra prediction module <b>336</b> to generate corresponding inter predictor and intra predictor of the current block and then combine the inter predictor and intra predictor of the current block to output the final predictor of the current block. Of course, in some other examples, the intra-inter prediction module <b>312</b> may be implemented to have a built-in inter prediction module and/or a built-in intra prediction module such that assistance from the inter prediction module <b>332</b> and/or the intra prediction module <b>336</b> may not be necessary.</div>
<div class="description-paragraph" id="p-0049" num="0048">In operation, when a block in an image frame (i.e., a current block) is to be decoded, the decoding controller <b>316</b> receives the encoded video data <b>302</b> associated with the current block and extracts information with respect to whether the current block is to be decoded using the inter prediction, the intra prediction, or the intra-inter prediction. When the decoding controller <b>316</b> determines that the current block is to be decoded using the intra-inter prediction, the decoding controller <b>316</b> forwards the prediction parameters of the current block to the intra-inter prediction module <b>312</b>. The prediction parameters may include an intra prediction mode for generating an intra predictor of the current block and a motion information for generating an inter predictor of the current block, and/or one or more intra weight coefficients associated with the intra prediction mode for generating a final predictor for the current block. The prediction parameters selected or identified by the decoding controller <b>316</b> may be explicitly specified in the encoded video data <b>302</b> or derived based on information provided in the encoded video data <b>302</b> and a predetermined video coding standard.</div>
<div class="description-paragraph" id="p-0050" num="0049">The intra-inter prediction module <b>312</b> may generate the intra predictor of the current block according to samples of neighboring pixels and the intra prediction mode provided by the decoding controller <b>316</b>. Alternatively, the intra-inter prediction module <b>312</b> may request the intra prediction module <b>336</b> to generate the intra predictor of the current block. Moreover, the intra-inter prediction module <b>312</b> may generate the inter predictor of the current block according to the motion information provided by the decoding controller <b>316</b>. Alternatively, the intra-inter prediction module <b>312</b> may request the inter prediction module <b>332</b> to generate the inter predictor of the current block.</div>
<div class="description-paragraph" id="p-0051" num="0050">After the generation of the intra predictor and the inter predictor of the current block, the intra-inter prediction module <b>312</b> generates a final predictor of the current block by combining the intra predictor and the inter predictor of the current block according to one or more intra weight coefficients associated with the intra prediction mode. On the other hand, the decoding controller <b>316</b> also forwards the residue information to the residue decoder <b>344</b>, where a residual portion of the current block is generated. The current block can now be decoded by adding the final predictor and the residual portion of the current block at the adder <b>342</b>.</div>
<div class="description-paragraph" id="p-0052" num="0051">In some examples, the decoding controller <b>316</b> may extract, from the encoded video data <b>302</b>, a flag indicating whether the current block is encoded using the intra-inter prediction such that the final predictor of the current block is to be generated based on combining the inter predictor and the intra predictor thereof. The flag may be provided as a syntax element at a block level in the encoded video data <b>302</b> (e.g., prediction unit (PU) level). Also, the flag may be bypass coded or context coded, using one, two or three contexts.</div>
<div class="description-paragraph" id="p-0053" num="0052">In some examples, when two contexts (e.g., context0 and context1) are used for the flag, the flag may use context0 when any of the above or left block uses intra-inter prediction and may use context 1 for other scenarios. In some examples, when three contexts (e.g., context0, context1, and context 2) are used for the flag, the flag may use context0 when none of the above or left block uses intra-inter prediction, may use context1 when one of the above or left block uses intra-inter prediction, and may use context2 when both the above and left block use intra-inter prediction.</div>
<div class="description-paragraph" id="p-0054" num="0053">The use of the intra-inter prediction may be signaled as a standalone prediction mode. In some examples, the use the intra-inter prediction for the current block may be indicated as a special case of the inter prediction. In such scenario, the decoding controller <b>316</b> may first determine if the current block is identified in the encoded video data <b>302</b> by another flag as encoded using inter prediction. When the current block is identified as encoded using the inter prediction, a flag will indicate whether the current block is encoded using intra-inter prediction, and the decoding controller <b>316</b> may extract the flag only if the current block is identified as encoded using inter prediction. In some examples, when the current block is encoded using the intra-inter prediction, the intra information will be signaled and the inter information (e.g., motion information) can be signaled or derived. In this case, the intra information is signaled after signaling the flag. Otherwise, when the current block is encoded using just the inter prediction, the intra information will not be available (i.e., no intra information is signaled) while the inter information may be signaled or derived.</div>
<div class="description-paragraph" id="p-0055" num="0054">In some other examples, the use the intra-inter prediction for the current block may be indicated as a special case of the intra prediction. In such scenario, the decoding controller <b>316</b> may first determine if the current block is identified in the encoded video data <b>302</b> by another flag as encoded using intra prediction. When the current block is identified as encoded using the intra prediction, a flag will indicate whether the current block is encoded using intra-inter prediction, and the decoding controller <b>316</b> may extract the flag only if the current block is identified as encoded using intra prediction. In some examples, when the current block is encoded using the intra-inter prediction, the inter information (e.g., motion information) will be signaled and the intra information can be signaled or derived. In this case, the inter information is signaled after signaling the flag. Otherwise, when the current block is encoded using just the intra prediction, the intra information can be signaled or derived while the inter information will not be available (i.e., no inter information is signaled).</div>
<div class="description-paragraph" id="p-0056" num="0055">In some examples, the decoding controller <b>316</b> may further extract, from a Sequence Parameter Set (SPS) or a Picture Parameter Set (PPS) of the encoded video data <b>302</b>, an enable flag indicating whether the intra-inter prediction is enabled or disabled for the corresponding sequence or picture(s). When the enable flag indicates that the intra-inter prediction is enabled for the corresponding sequence or picture(s), the decoding controller <b>316</b> may check the a block level flag (e.g., PU level flag) for identifying if the corresponding block in the corresponding sequence or picture(s) that is encoded using the intra-inter prediction. When the enable flag indicates that the intra-inter prediction is disabled for the corresponding sequence or picture(s), no block in the corresponding sequence or picture(s) is encoded using the intra-inter prediction, and the decoding controller <b>316</b> may not need to check the aforementioned block level flag.</div>
<div class="description-paragraph" id="p-0057" num="0056">Also, for a given block size, the intra-inter prediction module <b>312</b> may support a first plurality of predetermined intra prediction modes, while the intra prediction module <b>336</b> may support a second plurality of predetermined intra prediction modes. In some examples, the first plurality of predetermined intra prediction modes may be a subset of the second plurality of predetermined intra prediction modes in order to reduce the encoding overhead. The selection of the first plurality of predetermined intra prediction modes from the second plurality of predetermined intra prediction modes may vary with a size and/or a shape of the current block. The first plurality of predetermined intra prediction modes may be most probable modes (MPMs) selected from the second plurality of predetermined intra prediction modes based on neighboring blocks of the current block. When the current block is a chroma block, the first plurality of predetermined intra prediction modes may include at least a direct mode (DM mode), which corresponds to an intra prediction mode derived from one or more luma blocks that correspond to the chroma block, or a linear mode (LM mode), which corresponds to an intra prediction mode derived from the corresponding luma block and one or more neighboring luma blocks and/or neighboring chroma blocks. In some examples, when the current block is a chroma block, the first plurality of predetermined intra prediction modes may include one or more of the direct mode, linear mode, DC mode, planar mode, horizontal mode that corresponds to a horizontal direction of reference, and/or vertical mode that corresponds to a vertical direction of reference.</div>
<div class="description-paragraph" id="p-0058" num="0057">The intra weight coefficient(s) for the intra-inter prediction are associated with the intra prediction mode, and thus may be determined based on the intra prediction mode. In some examples, combining the inter predictor and the intra predictor may be performed according to an intra weight coefficient applicable to an entirety of the current block when the intra prediction mode is a non-angular prediction mode, such as a DC mode or a planar mode. In some examples, the current block may be divided into a predetermined number of portions when the intra prediction mode is an angular prediction mode. Combining the inter predictor and the intra predictor may be performed according to intra weight coefficients for the predetermined number of portions, respectively. In some examples, values of the intra weight coefficients may increase when distances between the corresponding portions of the current block and the samples of neighboring pixels along a direction of reference of the intra prediction mode decrease.</div>
<div class="description-paragraph" id="p-0059" num="0058">Of course, some or all of the motion information, the intra prediction mode, and the weight coefficient(s) for decoding the current block can be explicitly specified in the encoded video data.</div>
<div class="description-paragraph" id="p-0060" num="0059">Moreover, as shown in <figref idrefs="DRAWINGS">FIG. 3</figref>, the processor <b>360</b> is electrically coupled with the memory <b>350</b> and can be configured to execute program instructions stored in the memory <b>350</b> to perform various functions. The processor <b>360</b> can include a single or multiple processing cores. Various components of the decoding circuit <b>310</b>, such as the decoding controller <b>316</b>, intra-inter prediction module <b>312</b>, inter prediction module <b>332</b>, intra prediction module <b>336</b>, adder <b>342</b>, residue decoder <b>344</b>, and/or output filter <b>346</b>, may be implemented by hardware components, the processor <b>360</b> executing the program instructions, or a combination thereof. Of course, the processor <b>360</b> can also execute program instructions to control receiving of the encoded video data <b>302</b> and the output or display of the output frames <b>304</b>. In some examples, the processor <b>360</b> can execute program instructions to perform functions that may not be directly related to decoding the encoded video data <b>302</b>.</div>
<div class="description-paragraph" id="p-0061" num="0060">The memory <b>350</b> can be used to store the program instructions, information corresponding to the prediction parameters, previously decoded blocks, output frames, and/or intermediate data for performing various functions of the decoding circuit <b>310</b>. In some examples, the memory <b>350</b> includes a non-transitory computer readable medium, such as a semiconductor or solid-state memory, a random access memory (RAM), a read-only memory (ROM), a hard disk, an optical disk, or other suitable storage medium. In some embodiments, the memory <b>350</b> includes a combination of two or more of the non-transitory computer readable mediums listed above.</div>
<div class="description-paragraph" id="p-0062" num="0061"> <figref idrefs="DRAWINGS">FIG. 4A</figref> shows a diagram illustrating an exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure. The available intra prediction modes may include two non-angular prediction modes and five angular prediction modes. The available non-angular prediction modes may include a planar mode and a DC mode. The directions of reference of the available angular prediction modes may include a vertical direction (V), indicating that suitable samples can be located adjacent to an upper side of the current block, and a horizontal direction (H), indicating that suitable samples can be located adjacent to a left side of the current block. The directions of reference of the available angular prediction modes may further include a vertical diagonal direction (V+1) that corresponds to a 45-degree clockwise rotation to the vertical direction, a diagonal direction (V−1) that corresponds to a 45-degree counterclockwise rotation to the vertical direction, and a horizontal diagonal direction (H+1) that corresponds to a 45-degree counterclockwise rotation to the horizontal direction.</div>
<div class="description-paragraph" id="p-0063" num="0062">There may be many different ways to signal these seven intra prediction modes. In one example, the non-angular modes can be signaled using less bins, and the angular modes can be signaled using more bins. Table 1 shows a bin assignment according to this approach, where various angular modes are identified based on the corresponding direction of reference.</div>
<div class="description-paragraph" id="p-0064" num="0063">
<tables id="TABLE-US-00001" num="00001">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1">TABLE 1</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Intra mode</td>
<td class="description-td">Bin string</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">DC mode</td>
<td class="description-td">10</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Planar mode</td>
<td class="description-td">11</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Mode H + 1</td>
<td class="description-td">00</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Mode H</td>
<td class="description-td">0100</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Mode V − 1</td>
<td class="description-td">0101</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Mode V</td>
<td class="description-td">0110</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Mode V + 1</td>
<td class="description-td">0111</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0065" num="0064">In another example, the signaling of the intra prediction modes can be arranged based on statistic, where a more frequently used mode may be signaled using less bins, and a less frequently used mode may be signaled using more bins. For example, the horizontal mode (Mode H) and vertical mode (Mode V) can use less bins and other mode can have more bins. Table 2 shows a bin assignment according to this approach.</div>
<div class="description-paragraph" id="p-0066" num="0065">
<tables id="TABLE-US-00002" num="00002">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td" colspan="2" nameend="2" namest="1" rowsep="1">TABLE 2</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">Intra </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">mode, in a </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">descending</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">order of</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">frequency</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">of usage</td>
<td class="description-td">Bin string</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td">Mode H</td>
<td class="description-td">10</td>
</tr>
<tr class="description-tr">
<td class="description-td">Mode V</td>
<td class="description-td">11</td>
</tr>
<tr class="description-tr">
<td class="description-td">Planar mode</td>
<td class="description-td">00</td>
</tr>
<tr class="description-tr">
<td class="description-td">DC mode</td>
<td class="description-td">0100</td>
</tr>
<tr class="description-tr">
<td class="description-td">Mode H + 1</td>
<td class="description-td">0101</td>
</tr>
<tr class="description-tr">
<td class="description-td">Mode V − 1</td>
<td class="description-td">0110</td>
</tr>
<tr class="description-tr">
<td class="description-td">Mode V + 1</td>
<td class="description-td">0111</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0067" num="0066">In addition, the bins illustrated with reference to Table 1 and Table 2 can be context coded or bypass coded. Also, the intra prediction modes for the intra-inter prediction may be a subset of available intra prediction modes for the intra prediction. For example, while the intra-inter prediction uses seven different intra prediction modes, the intra prediction may use 35 intra prediction modes according to the H.265/HEVC standard, which include the seven intra prediction modes for the intra-inter prediction and 28 additional angular prediction modes with directions of reference spread between direction (V+1) and direction (H+1). In another example, the intra prediction may use 67 intra prediction modes, which include the seven intra prediction modes for the intra-inter prediction and 60 additional angular prediction mode with directions of reference spread between direction (V+1) and direction (H+1).</div>
<div class="description-paragraph" id="p-0068" num="0067"> <figref idrefs="DRAWINGS">FIG. 4B</figref> shows a diagram illustrating another exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure. The available intra prediction modes may include two non-angular prediction modes and nine angular prediction modes. The available non-angular prediction modes may include a planar mode and a DC mode. The directions of reference of the available angular prediction modes may include the vertical direction (V), the horizontal direction (H), and directions (V−2), (V−1), (V+1), (V+2), (H−1), (H+1), and (H+2), where adjacent directions are separated by 22.5 degrees. The signaling of a selected intra prediction mode may be arranged similar to those illustrated with reference to Table 1 and Table 2. Also, the intra prediction modes for the intra-inter prediction may be a subset of available intra prediction modes for the intra prediction.</div>
<div class="description-paragraph" id="p-0069" num="0068"> <figref idrefs="DRAWINGS">FIG. 4C</figref> shows a diagram illustrating a generalized example of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure. The available intra prediction modes may include two non-angular prediction modes and 4k+1 angular prediction modes, where k is a positive integer greater than 1. The available non-angular prediction modes may include a planar mode and a DC mode. The directions of reference of the available angular prediction modes may include the vertical direction (V), the horizontal direction (H), and directions (V−1) . . . (V−k), (V+1) . . . (V+k), (H−1) . . . (H−k+1), and (H+1) . . . (H+k) within a 180-degree span from the vertical diagonal direction (V+1) to the horizontal vertical diagonal direction H(+1), where adjacent directions are separated by 45/k degrees. In some examples, the available intra prediction modes may further include other applicable angular or non-angular prediction modes, such as a horizontal planar mode or a vertical planar mode.</div>
<div class="description-paragraph" id="p-0070" num="0069">The signaling of a selected intra prediction mode may be arranged similar to those illustrated with reference to Table 1 and Table 2. Also, the intra prediction modes for the intra-inter prediction may be a subset of available intra prediction modes for the intra prediction.</div>
<div class="description-paragraph" id="p-0071" num="0070">In some examples, the available intra prediction modes for intra-inter prediction may be arranged in a descending order of frequency of usage, or listing the MPMs for intra prediction on the top and then followed by a subset of the rest of the intra prediction modes for the intra prediction, either in a predetermined order or a descending order of frequency of usage. The available intra prediction may be coded accordingly using variable-length or fixed-length coding.</div>
<div class="description-paragraph" id="p-0072" num="0071">In one example, the intra-inter prediction may use 69 intra prediction modes, including 65 angular prediction modes and 4 non-angular prediction modes. The first five listed intra prediction modes may be the MPMs and can share the context coding scheme used by the intra prediction or a different context coding scheme. The remaining 64 intra prediction modes can be fixed-length coded or variable-length coded. Table 3 shows an example coding scheme as discussed above.</div>
<div class="description-paragraph" id="p-0073" num="0072">
<tables id="TABLE-US-00003" num="00003">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1">TABLE 3</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Intra</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">prediction </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">mode </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">list </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">index</td>
<td class="description-td">Bin strings</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">010</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">2</td>
<td class="description-td">0110</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">3</td>
<td class="description-td">01110</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">4</td>
<td class="description-td">01111</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">5</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">. . .</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">68</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0074" num="0073">In one example, the intra-inter prediction may use 67 intra prediction modes, including 65 angular prediction modes and 2 non-angular prediction modes as described in the reference software named Joint Exploration Model (JEM) for the Joint Video Exploration Team (WET) group.</div>
<div class="description-paragraph" id="p-0075" num="0074">In another example, the intra-inter prediction may use 37 intra prediction modes, including 33 angular prediction modes and 2 non-angular prediction modes as proposed in H.265/HEVC standard. The first five listed intra prediction modes may be the MPMs of the intra prediction. The remaining 32 intra prediction modes can be fixed-length coded (with five extra bins) or variable-length coded. Table 4 shows an example coding scheme as discussed above.</div>
<div class="description-paragraph" id="p-0076" num="0075">
<tables id="TABLE-US-00004" num="00004">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td" colspan="2" nameend="2" namest="1" rowsep="1">TABLE 4</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">Intra </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">prediction</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">mode</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">list index</td>
<td class="description-td">Bin strings</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td">1</td>
<td class="description-td">010</td>
</tr>
<tr class="description-tr">
<td class="description-td">2</td>
<td class="description-td">0110</td>
</tr>
<tr class="description-tr">
<td class="description-td">3</td>
<td class="description-td">01110</td>
</tr>
<tr class="description-tr">
<td class="description-td">4</td>
<td class="description-td">01111</td>
</tr>
<tr class="description-tr">
<td class="description-td">5</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td">. . .</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td">36</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="2" nameend="2" namest="1" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0077" num="0076">In a generalized example, the intra-inter prediction may use N intra prediction modes, where N is a positive integer greater than 5. The first five listed intra prediction modes may be the MPMs of the intra prediction. The remaining intra prediction modes can be fixed-length coded or variable-length coded. Table 5 shows an example coding scheme as discussed above.</div>
<div class="description-paragraph" id="p-0078" num="0077">
<tables id="TABLE-US-00005" num="00005">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1">TABLE 5</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Intra</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">prediction</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">mode list </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">index</td>
<td class="description-td">Bin strings</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">010</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">2</td>
<td class="description-td">0110</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">3</td>
<td class="description-td">01110</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">4</td>
<td class="description-td">01111</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">5</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">. . .</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">N-1</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0079" num="0078">In one example, the available intra prediction modes for intra-inter prediction can include only the five MPMs of the intra prediction.</div>
<div class="description-paragraph" id="p-0080" num="0079">In yet another generalized example, the intra-inter prediction may use N intra prediction modes, where N is a positive integer greater than 3. The first three listed intra prediction modes may be the MPMs of the intra prediction. The remaining intra prediction modes can be fixed-length coded or variable-length coded. Table 6 shows an example coding scheme as discussed above.</div>
<div class="description-paragraph" id="p-0081" num="0080">
<tables id="TABLE-US-00006" num="00006">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1">TABLE 6</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">Intra </td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">prediction</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">mode list</td>
<td class="description-td"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">index</td>
<td class="description-td">Bin strings</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">010</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">2</td>
<td class="description-td">011</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">3</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">. . .</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">N-1</td>
<td class="description-td">00 + additional bins</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="3" nameend="2" namest="offset" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0082" num="0081">In one example, the available intra prediction modes for intra-inter prediction can include only the five MPMs of the intra prediction.</div>
<div class="description-paragraph" id="p-0083" num="0082">Of course, there may be many other applicable approaches of arranging the order of available intra prediction modes and the corresponding coding scheme. In addition, the bins illustrated with reference to Table 3, Table 4, Table 5, and Table 6 can be context coded or bypass coded. Moreover, the number of available intra prediction modes for intra-inter prediction may vary with a size or a shape of the current block. For example, a block having a greater size may use a greater number of available intra prediction modes, and a block having a smaller size may use a less number of available intra prediction modes. In some examples, one or more syntax elements in the SPS or PPS of the encoded video data may be used to indicate a predetermined set of intra prediction modes available to the intra-inter prediction in the corresponding sequence or picture(s).</div>
<div class="description-paragraph" id="p-0084" num="0083"> <figref idrefs="DRAWINGS">FIG. 5A</figref> shows a diagram illustrating an exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure. The available angular prediction modes for an intra prediction may correspond to directions of reference that include the vertical direction (V), the horizontal direction (H), and directions (V−1) . . . (V−k), (V+1) . . . (V+k), (H−1) . . . (H−k+1), and (H+1) . . . (H+k), where k is a positive integer greater than 1. Moreover, a block <b>510</b> may have a width WIDTH<sub>510 </sub>and a height HEIGHT<sub>510</sub>. When the width WIDTH<sub>510 </sub>of the block <b>510</b> is greater than the height HEIGHT<sub>510 </sub>of the block <b>510</b>, the available intra prediction modes for coding the block <b>510</b> using the intra-inter prediction may excludes a portion of the angular prediction modes that have directions corresponding to a counterclockwise rotation to the horizontal direction (H). As shown in <figref idrefs="DRAWINGS">FIG. 5A</figref>, the excludable angular prediction modes may correspond to the directions of (H+1) . . . (H+k).</div>
<div class="description-paragraph" id="p-0085" num="0084"> <figref idrefs="DRAWINGS">FIG. 5B</figref> shows a diagram illustrating another exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure for the block <b>510</b> that has a longer width than height as described with reference to <figref idrefs="DRAWINGS">FIG. 5A</figref>. The available intra prediction modes for coding the block <b>510</b> using the intra-inter prediction may excludes a portion of the angular prediction modes that are evenly distributed among all directions of reference pointing to the left edge (e.g., within +/−45 degrees from the horizontal direction H). As shown in <figref idrefs="DRAWINGS">FIG. 5B</figref>, the excludable angular prediction modes may correspond to the directions of (H+k′) or (H−k′), where k′ refers to odd numbers between +k and −k. Other applicable approaches of reducing the number of angular prediction modes for the shorter edge are within the contemplated embodiments.</div>
<div class="description-paragraph" id="p-0086" num="0085"> <figref idrefs="DRAWINGS">FIG. 5C</figref> shows a diagram illustrating an exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure. Compared with block <b>510</b>, a block <b>520</b> may have a width WIDTH<sub>520 </sub>and a height HEIGHT<sub>520</sub>. When the width WIDTH<sub>520 </sub>of the block <b>520</b> is less than the height HEIGHT<sub>520 </sub>of the block <b>520</b>, the available intra prediction modes for coding the block <b>520</b> using the intra-inter prediction may excludes a portion of the angular prediction modes that have directions corresponding to a clockwise rotation to the vertical direction (V). As shown in <figref idrefs="DRAWINGS">FIG. 5B</figref>, the excludable angular prediction modes may correspond to the directions of (V+1) . . . (V+k).</div>
<div class="description-paragraph" id="p-0087" num="0086"> <figref idrefs="DRAWINGS">FIG. 5D</figref> shows a diagram illustrating another exemplary set of available intra prediction modes for an intra-inter prediction according to an embodiment of the disclosure for the block <b>520</b> that has a longer height than width as described with reference to <figref idrefs="DRAWINGS">FIG. 5C</figref>. The available intra prediction modes for coding the block <b>520</b> using the intra-inter prediction may excludes a portion of the angular prediction modes that are evenly distributed among all directions of reference pointing to the upper edge (e.g., within +/−45 degrees from the vertical direction V). As shown in <figref idrefs="DRAWINGS">FIG. 5D</figref>, the excludable angular prediction modes may correspond to the directions of (V+k′) or (V−k′), where k′ refers to odd numbers between +k and −k. Other applicable approaches of reducing the number of angular prediction modes for the shorter edge are within the contemplated embodiments.</div>
<div class="description-paragraph" id="p-0088" num="0087">As shown in <figref idrefs="DRAWINGS">FIGS. 5A-5D</figref>, by reducing the number of available intra prediction modes for intra-inter prediction, the overhead for signaling the prediction parameters may be further reduced.</div>
<div class="description-paragraph" id="p-0089" num="0088"> <figref idrefs="DRAWINGS">FIG. 6</figref> shows a diagram illustrating an example arrangement of intra weight coefficients applicable to various portions of a block in association with different directions of reference of various intra prediction modes according to an embodiment of the disclosure. <figref idrefs="DRAWINGS">FIG. 6</figref> shows a block <b>610</b> and two representative directions <b>622</b> and <b>624</b>. Representative direction <b>622</b> corresponds to the vertical direction (V) among the available intra prediction modes, and representative direction <b>624</b> corresponds to the horizontal direction (H) among the available intra prediction modes. The closest one of the representative directions <b>622</b> and <b>624</b> to a direction of reference of the intra prediction mode is identified as the identified representative direction. Also, the block <b>610</b> may be divided into a predetermined number of portions arranged along the identified representative direction. In some examples, combining the inter predictor and the intra predictor is performed according to intra weight coefficients for the portions of the block, respectively. The values of the intra weight coefficients may be set in an ascending order along the identified representative direction such that the values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along the identified representative direction decrease.</div>
<div class="description-paragraph" id="p-0090" num="0089">For example, when the intra prediction mode is an angular mode that is closer to the vertical direction (V) than the horizontal direction (H), such as directions (V−k+1) . . . (V+k) in <figref idrefs="DRAWINGS">FIG. 4C</figref>, the representative <b>622</b> or the vertical direction (V) would be the identified representative direction. The block <b>610</b> may be divided into plural portions arranged along the vertical direction (V), such as the example block <b>612</b> with four portions <b>612</b> <i>a</i>, <b>612</b> <i>b</i>, <b>612</b> <i>c</i>, and <b>612</b> <i>d</i>. The values of the intra weight coefficients w_<b>612</b> <i>a</i>, w_<b>612</b> <i>b</i>, w_<b>612</b> <i>c</i>, and w_<b>612</b> <i>d </i>for the portions <b>612</b> <i>a</i>, <b>612</b> <i>b</i>, <b>612</b> <i>c</i>, and <b>612</b> <i>d </i>may be set in an ascending order along the identified representative direction. For example, w_<b>612</b> <i>a</i>, w_<b>612</b> <i>b</i>, w_<b>612</b> <i>c</i>, and w_<b>612</b> <i>d </i>may be set as 0.8, 0.6, 0.4, and 0.2, respectively. In this example, the values of the inter weight coefficients inter_w_<b>612</b> <i>a</i>, inter_w_<b>612</b> <i>b</i>, inter_w_<b>612</b> <i>c</i>, and inter_w_<b>612</b> <i>d </i>for the portions <b>612</b> <i>a</i>, <b>612</b> <i>b</i>, <b>612</b> <i>c</i>, and <b>612</b> <i>d </i>may be set as 1−w_<b>612</b> <i>a, </i>1−w_<b>612</b> <i>b, </i>1−w_<b>612</b> <i>c</i>, and 1−w_<b>612</b> <i>d </i>(i.e., 0.2, 0.4, 0.6, 0.8, respectively).</div>
<div class="description-paragraph" id="p-0091" num="0090">In another example, when the intra prediction mode is an angular mode that is closer to the horizontal direction (H) than the vertical direction (V), such as directions (H−k+1) . . . (H+k) in <figref idrefs="DRAWINGS">FIG. 4C</figref>, the representative <b>624</b> or the horizontal direction (H) would be the identified representative direction. The block <b>610</b> may be divided into plural portions arranged along the horizontal direction (H), such as the example block <b>614</b> with four portions <b>614</b> <i>a</i>, <b>614</b> <i>b</i>, <b>614</b> <i>c</i>, and <b>614</b> <i>d</i>. The values of the intra weight coefficients w_<b>614</b> <i>a</i>, w_<b>614</b> <i>b</i>, w_<b>614</b> <i>c</i>, and w_<b>614</b> <i>d </i>for the portions <b>614</b> <i>a</i>, <b>614</b> <i>b</i>, <b>614</b> <i>c</i>, and <b>614</b> <i>d </i>may be set in an ascending order along the identified representative direction. For example, w_<b>614</b> <i>a</i>, w_<b>614</b> <i>b</i>, w_<b>614</b> <i>c</i>, and w_<b>614</b> <i>d </i>may be set as 0.8, 0.6, 0.4, and 0.2, respectively. In this example, the values of the inter weight coefficients inter_w_<b>614</b> <i>a</i>, inter_w_<b>614</b> <i>b</i>, inter_w_<b>614</b> <i>c</i>, and inter_w_<b>614</b> <i>d </i>for the portions <b>614</b> <i>a</i>, <b>614</b> <i>b</i>, <b>614</b> <i>c</i>, and <b>614</b> <i>d </i>may be set as 1−w_<b>614</b> <i>a, </i>1−w_<b>614</b> <i>b, </i>1−w_<b>614</b> <i>c</i>, and 1−w_<b>614</b> <i>d </i>(i.e., 0.2, 0.4, 0.6, 0.8, respectively).</div>
<div class="description-paragraph" id="p-0092" num="0091">Moreover, if a direction of reference of an intra prediction mode is about the same distance to both representative directions <b>622</b> and <b>624</b>, such as the direction (V−k), such direction may be defined as to be closer to the direction to its clockwise rotation or counterclockwise rotation, or both such that the intra weight coefficients would be the average of both schemes.</div>
<div class="description-paragraph" id="p-0093" num="0092"> <figref idrefs="DRAWINGS">FIG. 7</figref> shows a diagram illustrating another exemplary arrangement of intra weight coefficients applicable to various portions of a block in association with different directions of reference of various intra prediction modes according to an embodiment of the disclosure. <figref idrefs="DRAWINGS">FIG. 7</figref> shows a block <b>710</b> and five representative directions <b>722</b>, <b>723</b>, <b>724</b>, <b>726</b>, and <b>728</b>. Representative direction <b>722</b> corresponds to the vertical direction (V) among the available intra prediction modes, and representative direction <b>724</b> corresponds to the horizontal direction (H) among the available intra prediction modes. Also, representative direction <b>723</b> corresponds to the diagonal direction (V−k), representative direction <b>724</b> corresponds to the vertical diagonal direction (V+k), and representative direction <b>726</b> corresponds to the horizontal diagonal direction (H+k). In some examples, more or less than five representative directions may be used for assigning the weigh coefficients. The representative directions may be evenly spread in a 180-degree span from the vertical diagonal direction (V+k) to the horizontal diagonal direction (H+k).</div>
<div class="description-paragraph" id="p-0094" num="0093">Similar to the example illustrated with reference to <figref idrefs="DRAWINGS">FIG. 6</figref>, the closest one of the representative directions <b>722</b>, <b>723</b>, <b>724</b>, <b>726</b>, and <b>728</b> to a direction of reference of the intra prediction mode is identified as the identified representative direction. Also, the block <b>710</b> may be divided into a predetermined number of portions arranged along the identified representative direction. The values of the intra weight coefficients may be set in an ascending order along the identified representative direction such that the values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along the identified representative direction decrease.</div>
<div class="description-paragraph" id="p-0095" num="0094">For example, when the intra prediction mode is an angular mode that is closer to the representative <b>722</b> or the vertical direction (V), the block <b>710</b> may be divided into plural portions arranged along the vertical direction (V), such as the example block <b>712</b> with four portions <b>712</b> <i>a</i>, <b>712</b> <i>b</i>, <b>712</b> <i>c</i>, and <b>712</b> <i>d</i>. The values of the intra weight coefficients applicable to the portions <b>712</b> <i>a</i>, <b>712</b> <i>b</i>, <b>712</b> <i>c</i>, and <b>712</b> <i>d </i>may be set in an ascending order along the identified representative direction. In another example, when the intra prediction mode is an angular mode that is closer to the representative <b>724</b> or the horizontal direction (H), the block <b>710</b> may be divided into plural portions arranged along the horizontal direction (H), such as the example block <b>714</b> with four portions <b>714</b> <i>a</i>, <b>714</b> <i>b</i>, <b>714</b> <i>c</i>, and <b>714</b> <i>d</i>. The values of the intra weight coefficients applicable to the portions <b>714</b> <i>a</i>, <b>714</b> <i>b</i>, <b>714</b> <i>c</i>, and <b>714</b> <i>d </i>may be set in an ascending order along the identified representative direction.</div>
<div class="description-paragraph" id="p-0096" num="0095">Similarly, for an intra prediction mode having a direction closer to the representative direction <b>723</b> (V−k), <b>726</b> (V+k), or <b>728</b> (H+k), the block <b>710</b> may be divided into plural portions arranged along such representative direction. For example, example block <b>713</b> may correspond to intra prediction modes closer to the representative direction <b>723</b> (V−k), where the block <b>713</b> is divided into four portions <b>713</b> <i>a</i>, <b>713</b> <i>b</i>, <b>713</b> <i>c</i>, and <b>713</b> <i>d </i>arranged along the representative direction <b>723</b> (V−k). The values of the intra weight coefficients applicable to the portions <b>713</b> <i>a</i>, <b>713</b> <i>b</i>, <b>713</b> <i>c</i>, and <b>713</b> <i>d </i>may be set in an ascending order along the representative direction <b>723</b> (V−k). Example block <b>716</b> may correspond to intra prediction modes closer to the representative direction <b>726</b> (V+k), where the block <b>716</b> is divided into four portions <b>716</b> <i>a</i>, <b>716</b> <i>b</i>, <b>716</b> <i>c</i>, and <b>716</b> <i>d </i>arranged along the representative direction <b>726</b> (V+k). The values of the intra weight coefficients applicable to the portions <b>716</b> <i>a</i>, <b>716</b> <i>b</i>, <b>716</b> <i>c</i>, and <b>716</b> <i>d </i>may be set in an ascending order along the representative direction <b>726</b> (V+k). Also, example block <b>718</b> may correspond to intra prediction modes closer to the representative direction <b>728</b> (H+k), where the block <b>718</b> is divided into four portions <b>718</b> <i>a</i>, <b>718</b> <i>b</i>, <b>718</b> <i>c</i>, and <b>718</b> <i>d </i>arranged along the representative direction <b>728</b> (H+k). The values of the intra weight coefficients applicable to the portions <b>718</b> <i>a</i>, <b>718</b> <i>b</i>, <b>718</b> <i>c</i>, and <b>718</b> <i>d </i>may be set in an ascending order along the representative direction <b>728</b> (H+k).</div>
<div class="description-paragraph" id="p-0097" num="0096">Also, if a direction of an intra prediction mode is about the same distance to both reference directions <b>722</b>-<b>728</b>, such direction may be defined as to be closer to the direction to its clockwise rotation or counterclockwise rotation, or both as illustrated with reference to <figref idrefs="DRAWINGS">FIG. 7</figref>.</div>
<div class="description-paragraph" id="p-0098" num="0097">Furthermore, as shown in <figref idrefs="DRAWINGS">FIG. 6</figref> and <figref idrefs="DRAWINGS">FIG. 7</figref>, the block <b>610</b> or <b>710</b> may be divided into four portions. In some examples, the number of portions may be determinable based on a size of the block <b>610</b> or <b>710</b>, where a larger block may be divided into a greater number of portions. The possible number portions may range from 2 to the number of pixels on one side of the block. Also, the portions may be divided in any suitable manner, including any suitable size or shape.</div>
<div class="description-paragraph" id="p-0099" num="0098"> <figref idrefs="DRAWINGS">FIG. 8</figref> shows a diagram illustrating an example arrangement of intra weight coefficients applicable to various portions of a block <b>810</b> in association with various distances to samples of neighboring pixels along a direction of reference <b>820</b> of an example intra prediction mode according to an exemplary embodiment of the disclosure. The block <b>810</b> is divided into a predetermined number of portions when the intra prediction mode is an angular prediction mode having a direction of reference <b>820</b>. An intra predictor of the block <b>810</b> may be generated based on the direction of reference <b>820</b> and the samples of neighboring pixels <b>830</b>. In some examples, each portion can be as small as just one pixel.</div>
<div class="description-paragraph" id="p-0100" num="0099">As shown in <figref idrefs="DRAWINGS">FIG. 8</figref>, the block <b>810</b> is divided into 16 portions. The combining the inter predictor and the intra predictor for block <b>810</b> can be performed according to intra weight coefficients for the predetermined number of portions, respectively. Also, the values of the intra weight coefficients can be set based on the distances between the corresponding portions and the samples of neighboring pixels <b>830</b> along the direction of reference <b>820</b> of the intra prediction mode. For example, the intra weight coefficient applicable to the portion <b>812</b> may be determined based on a distance D<sub>812 </sub>between the portion <b>812</b> and the neighboring pixels along the direction of reference <b>820</b>. Similarly, the intra weight coefficient applicable to the portion <b>814</b> may be determined based on a distance D<sub>814 </sub>between the portion <b>814</b> and the neighboring pixels along the direction of reference <b>820</b>.</div>
<div class="description-paragraph" id="p-0101" num="0100">In some examples, the values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along the direction of reference of the intra prediction mode decrease. In at least one example, when the distance between a specific portion of the block and the neighboring pixels along the direction of reference <b>820</b> is D, the value of the intra weight coefficient w_intra may be determined as:
<br/>
<i>w</i>_intra(<i>D</i>)=<i>a*D</i> <sup>2</sup> <i>+b. </i>
<br/>
In this equation, a and b are positive numbers that may be included in the encoded video data, such as in the SPS, PPS, or slice header of the encoded video data. Alternatively, a and b may be predefined according to a predetermined video coding standard and thus may be hard-coded in the decoding circuit or the encoding circuit.
</div>
<div class="description-paragraph" id="p-0102" num="0101">In some examples, intra weight coefficients of the current block may be derived from the intra weight coefficients of a previous block, provided that the adjustment parameters for deriving the intra weight coefficients are signaled.</div>
<div class="description-paragraph" id="p-0103" num="0102">Of course, <figref idrefs="DRAWINGS">FIGS. 6-8</figref> are used to show non-limiting examples of assigning the intra weight coefficients. There may be many other suitable approaches to assign the intra weight coefficients for combining the intra predictor and the inter predictor for a current block.</div>
<div class="description-paragraph" id="p-0104" num="0103"> <figref idrefs="DRAWINGS">FIG. 9</figref> shows an exemplary functional block diagram of a processing circuit <b>920</b> for video encoding in a video coding system, such as the video coding system <b>100</b> in <figref idrefs="DRAWINGS">FIG. 1</figref> according to an embodiment of the disclosure. <figref idrefs="DRAWINGS">FIG. 9</figref> is a simplified illustration of the encoding circuit <b>920</b> and thus may not show all the details and variations of the encoding circuit <b>920</b>.</div>
<div class="description-paragraph" id="p-0105" num="0104">The encoding circuit <b>920</b> includes an intra-inter prediction module <b>922</b>, an intra-inter estimation module <b>924</b>, and an encoding controller <b>926</b> that may correspond to the intra-inter prediction module <b>122</b>, the intra-inter estimation module <b>124</b>, and the encoding controller <b>126</b> in <figref idrefs="DRAWINGS">FIG. 1</figref>, respectively. The encoding circuit <b>920</b> also includes an inter prediction module <b>932</b>, an inter estimation module <b>934</b>, an intra prediction module <b>936</b>, an intra estimation module <b>938</b>, an adder <b>942</b>, a residue encoder <b>944</b>, a reconstruction module <b>948</b>, a memory <b>950</b>, and a processor <b>960</b>.</div>
<div class="description-paragraph" id="p-0106" num="0105">The encoding controller <b>926</b> supervises the operation of the intra-inter prediction module <b>922</b>, intra-inter estimation module <b>924</b>, inter prediction module <b>932</b>, inter estimation module <b>934</b>, intra prediction module <b>936</b>, and intra estimation module <b>938</b>. The encoding controller <b>926</b> may instruct the intra-inter estimation module <b>924</b>, inter estimation module <b>934</b>, and/or intra estimation module <b>938</b> to divide each input frame into blocks and to determine the prediction scheme, prediction mode, and/or corresponding prediction parameters for each block. The encoding controller <b>926</b> may select one of the intra-inter prediction module <b>922</b>, inter prediction module <b>932</b>, and intra prediction module <b>936</b> to output a corresponding final predictor of a current block to the adder <b>942</b>. The adder <b>942</b> receives an original image of the current block and the final predictor of the current block and outputs a residual portion of the current block by subtracting the final predictor from the original image of the current block. The residue encoder <b>944</b> receives and encodes the residual portion of the current block. The encoding controller <b>926</b> may generate the encoded video data <b>902</b> based on the prediction parameters from the intra-inter estimation module <b>924</b>, inter estimation module <b>934</b>, and/or intra estimation module <b>938</b> and the output from the residue encoder <b>944</b>.</div>
<div class="description-paragraph" id="p-0107" num="0106">In some examples, the use of the intra-inter prediction may be signaled as a standalone prediction mode. In some examples, the use of the intra-inter prediction for the current block may be indicated as a special case of the inter prediction. In such scenario, the encoding controller <b>926</b> may include in the encoded video data <b>902</b> information identifying if the current block is encoded using inter prediction, and then include a flag identifying the use of the intra-inter prediction only if the current block is identified as encoded using inter prediction (in some embodiment, the corresponding inter information may be signaled accordingly). If the current block is encoded using the inter-intra prediction, then the intra information (e.g., Horizontal mode is selected) is signaled. Otherwise, no intra information is signaled. In some examples, the use the intra-inter prediction for the current block may be indicated as a special case of the intra prediction. In such scenario, the encoding controller <b>926</b> may include in the encoded video data <b>902</b> information identifying if the current block is encoded using intra prediction, and then include a flag identifying the use of the intra-inter prediction only if the current block is identified as encoded using intra prediction (in some embodiment, the corresponding intra information may be signaled accordingly). If the current block is encoded using the inter-intra prediction, then the inter information (e.g., motion vector predictor index, prediction direction, or reference picture index) is signaled. Otherwise, no inter information is signaled.</div>
<div class="description-paragraph" id="p-0108" num="0107">The intra-inter prediction module <b>922</b>, inter prediction module <b>932</b>, and intra prediction module <b>936</b> may receive prediction parameters from the intra-inter estimation module <b>924</b>, inter estimation module <b>934</b>, and intra estimation module <b>938</b>, respectively, and may generate corresponding final predictors for the current block in a manner similar to the operations of the intra-inter prediction module <b>312</b>, inter prediction module <b>332</b>, and intra prediction module <b>336</b> in <figref idrefs="DRAWINGS">FIG. 3</figref>. Detailed description thereof is thus omitted.</div>
<div class="description-paragraph" id="p-0109" num="0108">In some examples, the encoding controller <b>926</b> may control the intra-inter estimation module <b>924</b>, inter estimation module <b>934</b>, intra estimation module <b>938</b>, intra-inter prediction module <b>922</b>, inter prediction module <b>932</b>, intra prediction module <b>936</b>, and/or the residue encoder <b>944</b> to encode the current block based on different prediction schemes and parameters and then may select an optimal combination of encoding scheme and parameters for encoding the current block.</div>
<div class="description-paragraph" id="p-0110" num="0109">The reconstruction module <b>948</b> may receive the final predictor from the intra-inter prediction module <b>922</b>, intra prediction module <b>932</b>, or inter prediction module <b>936</b> and a reconstructed residual portion of the current block from the residue encoder <b>944</b>. Based on such information, the reconstruction module <b>948</b> may generate a reconstructed image of the current block and/or reconstructed frames in a manner similar to the operations of the adder <b>342</b> and the output filter <b>346</b> in <figref idrefs="DRAWINGS">FIG. 3</figref>. The reconstructed blocks and/or frames can be stored in the memory <b>950</b> and are accessible by the intra-inter prediction module <b>922</b>, intra prediction module <b>932</b>, inter prediction module <b>936</b>, intra-inter estimation module <b>924</b>, intra estimation module <b>934</b>, and/or inter estimation module <b>938</b> for estimating prediction parameters for a next block.</div>
<div class="description-paragraph" id="p-0111" num="0110">In operation, when a block of a frame (i.e., a current block) is to be encoded using intra-inter prediction as instructed by the encoding controller <b>926</b>, the intra-inter estimation module <b>924</b> receives the original image of the current block from the input frames <b>906</b>. The intra-inter estimation module <b>924</b> may determine suitable prediction parameters, such as a selected motion vector, a selected intra prediction mode, and/or the associated weight coefficient(s). The intra prediction mode for intra-inter prediction may be selected from available intra prediction modes as illustrated with reference to <figref idrefs="DRAWINGS">FIGS. 4A-5D</figref>. The weight coefficient(s) may be determined as illustrated with reference to <figref idrefs="DRAWINGS">FIGS. 6-8</figref>.</div>
<div class="description-paragraph" id="p-0112" num="0111">In some examples, the intra-inter estimation module <b>924</b> may coordinate with the inter estimation module <b>934</b> and/or the intra estimation module <b>938</b> to obtain a motion information and/or an intra prediction mode therefrom, and may make a final determination with respect to the suitable prediction parameters in view of the weight coefficient(s). The intra-inter estimation module <b>924</b> then sends the prediction parameters to the encoding controller <b>926</b> and the intra-inter prediction module <b>922</b>.</div>
<div class="description-paragraph" id="p-0113" num="0112">The intra-inter prediction module <b>922</b> may generate a final predictor of the current block based on the prediction parameters provide by the intra-inter estimation module <b>924</b>. The intra-inter prediction module <b>922</b> may generate the intra predictor of the current block according to samples of neighboring pixels and the intra prediction mode. Alternatively, the intra-inter prediction module <b>922</b> may request the intra prediction module <b>936</b> to generate the intra predictor of the current block. Moreover, the intra-inter prediction module <b>922</b> may generate the inter predictor of the current block according to the motion information. Alternatively, the intra-inter prediction module <b>922</b> may request the inter prediction module <b>932</b> to generate the inter predictor of the current block. After the generation of the intra predictor and the inter predictor of the current block, the intra-inter prediction module <b>922</b> generates a final predictor of the current block by combining the intra predictor and the inter predictor of the current block according to one or more intra weight coefficients associated with the intra prediction mode.</div>
<div class="description-paragraph" id="p-0114" num="0113">The intra-inter prediction module <b>922</b>, inter prediction module <b>932</b>, and/or intra prediction module <b>936</b> may generate the final predictor in a manner similar to the operation of the intra-inter prediction module <b>312</b>. Therefore, detailed description thereof is omitted.</div>
<div class="description-paragraph" id="p-0115" num="0114">The adder <b>942</b> may output a residual portion of the current block based on the original image of the current block and the final predictor and encoded the residual portion. The encoding controller <b>926</b> may collect the prediction parameters from the inter-intra estimation module <b>924</b>, inter estimation module <b>934</b>, and/or intra estimation module <b>938</b> and the encoded residual information and determine whether the selected coding scheme for the current block is acceptable.</div>
<div class="description-paragraph" id="p-0116" num="0115">Also, the encoding controller <b>926</b> may encode the selected intra prediction mode in a manner as illustrated with reference to Table 1 to Table 6.</div>
<div class="description-paragraph" id="p-0117" num="0116">Moreover, as shown in <figref idrefs="DRAWINGS">FIG. 9</figref>, the processor <b>960</b> is electrically coupled with the memory <b>950</b> and can be configured to execute program instructions stored in the memory <b>950</b> to perform various functions. The processor <b>960</b> can include a single or multiple processing cores. Various components of the encoding circuit <b>920</b>, such as the encoding controller <b>926</b>, intra-inter prediction module <b>922</b>, intra-inter estimation module <b>924</b>, inter prediction module <b>932</b>, inter estimation module <b>934</b>, intra prediction module <b>936</b>, intra estimation module <b>938</b>, adder <b>942</b>, residue encoder <b>944</b>, and/or reconstruction module <b>948</b>, may be implemented by hardware components, the processor <b>960</b> executing the program instructions, or a combination thereof. Of course, the processor <b>960</b> can also execute program instructions to control receiving of the input frames <b>906</b> and the output of the encoded video data <b>902</b>. In some examples, the processor <b>960</b> can execute program instructions to perform functions that may not be directly related to encoding the encoded video data <b>902</b>.</div>
<div class="description-paragraph" id="p-0118" num="0117">The memory <b>950</b> can be used to store the program instructions, information corresponding to the prediction parameters reconstructed blocks, input frames, and/or intermediate data for performing various functions of the encoding circuit <b>910</b>. In some examples, the memory <b>950</b> includes a non-transitory computer readable medium, such as a semiconductor or solid-state memory, a random access memory (RAM), a read-only memory (ROM), a hard disk, an optical disk, or other suitable storage medium. In some embodiments, the memory <b>950</b> includes a combination of two or more of the non-transitory computer readable mediums listed above.</div>
<div class="description-paragraph" id="p-0119" num="0118">Moreover, the decoding circuit <b>310</b> in <figref idrefs="DRAWINGS">FIG. 3</figref> and the encoding circuit <b>920</b> in <figref idrefs="DRAWINGS">FIG. 9</figref> may be implemented in the same electronic device, and various components of the decoding circuit <b>310</b> and the encoding circuit <b>920</b> may be shared or reused. For example, one or more of the memory <b>350</b>, processor <b>360</b>, intra-inter prediction module <b>312</b>, intra prediction module <b>332</b>, inter prediction module <b>336</b>, and output filter <b>346</b> in the decoding circuit <b>310</b> may also be used to function as the memory <b>950</b>, processor <b>960</b>, intra-inter prediction module <b>922</b>, intra prediction module <b>932</b>, inter prediction module <b>936</b>, and reconstruction module <b>948</b> in <figref idrefs="DRAWINGS">FIG. 9</figref>, respectively.</div>
<div class="description-paragraph" id="p-0120" num="0119"> <figref idrefs="DRAWINGS">FIG. 10</figref> shows a flow chart outlining an exemplary video decoding process <b>1000</b> using a processing circuit for video decoding, such as the processing circuit <b>310</b> in <figref idrefs="DRAWINGS">FIG. 3</figref>, according to an embodiment of the disclosure. It is understood that additional operations may be performed before, during, and/or after the process <b>1000</b> depicted in <figref idrefs="DRAWINGS">FIG. 10</figref>. The process <b>1000</b> starts at S<b>1001</b> and proceeds to S<b>1010</b>.</div>
<div class="description-paragraph" id="p-0121" num="0120">At S<b>1010</b>, encoded video data associated with a current block in an image frame are received as input data. For example, the decoding controller <b>316</b> may receive the encoded video data <b>302</b> that includes the input data associated with the current block.</div>
<div class="description-paragraph" id="p-0122" num="0121">At S<b>1020</b>, a type of prediction for decoding the current block is determined. For example, the decoding controller <b>316</b> may receive the encoded video data <b>302</b> that includes the input data associated with the current block. The decoding controller <b>316</b> may extract prediction parameters from the encoded video data <b>302</b> and determines whether the current block is encoded using an inter prediction, an intra prediction, or an intra-inter prediction.</div>
<div class="description-paragraph" id="p-0123" num="0122">As illustrated with referenced to <figref idrefs="DRAWINGS">FIG. 2</figref>, when the current block is encoded using the intra-inter prediction, the current block is to be decoded by generating an inter predictor and an intra predictor and combining the inter predictor and the intra predictor to generate a final predictor. In some examples, a flag indicating whether the current block is encoded using the final predictor generated based on combining the inter predictor and the intra predictor (i.e., using the intra-inter prediction) is extracted from the syntax elements at the block level (e.g., PU level) in the encoded video data. The flag may be bypass coded or context coded, using one, two or three contexts. In some examples, the intra-inter prediction is arranged as a special case of the inter prediction, and the flag is extracted from the encoded video data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using the inter prediction. In some examples, the intra-inter prediction is arranged as a special case of the intra prediction, and the flag is extracted from the encoded video data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using the intra prediction.</div>
<div class="description-paragraph" id="p-0124" num="0123">Moreover, an enable flag indicating whether the intra-inter prediction is enabled or disabled for the corresponding sequence or picture(s) may be extracted from the SPS, PPS, or some other high-level properties of the encoded video data. When the enable flag indicates that the intra-inter prediction is enabled for the corresponding sequence or picture(s), a block level flag may be extracted or checked for identifying is the corresponding block in the corresponding sequence or picture(s) is encoded using the intra-inter prediction. When the enable flag indicates that the intra-inter prediction is disabled for the corresponding sequence or picture(s), no block in the corresponding sequence or picture(s) is encoded using the intra-inter prediction, and the aforementioned PU flag may not need to be extracted or checked.</div>
<div class="description-paragraph" id="p-0125" num="0124">At S<b>1030</b>, if the current block is to be decoded using the intra-inter prediction, the process proceeds to S<b>1040</b>. If the current block is to be decoded using an identified type of prediction other than the intra-inter prediction, the process proceeds to S<b>1035</b>. For example, if the decoding controller <b>316</b> identifies that the current block is encoded using the intra-inter prediction, the process proceeds to S<b>1040</b>; otherwise, the process proceeds to S<b>1035</b>.</div>
<div class="description-paragraph" id="p-0126" num="0125">At S<b>1035</b>, a final predictor of the current block is generated using the identified type of prediction. For example, when the current block is encoded using the inter prediction, the inter prediction module <b>332</b> may generate the final predictor of the current block. Also, when the current block is encoded using the intra prediction, the intra prediction module <b>336</b> may generate the final predictor of the current block.</div>
<div class="description-paragraph" id="p-0127" num="0126">At S<b>1040</b>, the inter predictor of the current block is generated based on a motion vector and a reference image. The motion vector may be explicitly provided in the encoded video data or derived based on motion information provided in the encoded video data. For example, the intra-inter prediction module <b>312</b> may, by itself or with the assistance of the inter prediction module <b>332</b>, generate an inter predictor of the current block as discussed with reference to <figref idrefs="DRAWINGS">FIG. 3</figref>. In some examples, the inter predictor is generated using the motion vector that can be determined by deriving a motion vector using an Advanced Motion Vector Prediction (AMVP), Merge, or Skip mode.</div>
<div class="description-paragraph" id="p-0128" num="0127">At S<b>1050</b>, the intra predictor of the current block is generated based on samples of neighboring pixels and an intra prediction mode that locates the samples of neighboring pixels. The intra prediction mode may be explicitly provided in the encoded video data or derived based on information provided in the encoded video data. For example, the intra-inter prediction module <b>312</b> may, by itself or with the assistance of the intra prediction module <b>336</b>, generate an intra predictor of the current block as discussed with reference to <figref idrefs="DRAWINGS">FIG. 3</figref>.</div>
<div class="description-paragraph" id="p-0129" num="0128">In some examples, the intra prediction mode for the current block using the intra-inter prediction may be selected from a first plurality of predetermined intra prediction modes, and a second block may be encoded or decoded based on a intra predictor derived according to a second intra prediction mode selected from a second plurality of predetermined intra prediction modes. The first plurality of predetermined intra prediction modes may be a subset of the second plurality of predetermined intra prediction modes as discussed with reference to <figref idrefs="DRAWINGS">FIG. 3</figref>. The first plurality of predetermined intra prediction modes may include at least most probable modes (MPMs) selected from the second plurality of predetermined intra prediction modes. In some examples, when the current block is a chroma block, the first plurality of predetermined intra prediction modes may include one or more of the direct mode, linear mode, DC mode, planar mode, horizontal mode, and/or vertical mode.</div>
<div class="description-paragraph" id="p-0130" num="0129">Moreover, a number of the first plurality of predetermined intra prediction modes can be determinable based on a size of the current block. Also, when a width of the current block is greater than a height of the current block, the first plurality of predetermined intra prediction modes may exclude a first portion of angular prediction modes of the second plurality of predetermined intra prediction modes that have directions of reference pointing to a left edge of the current block as discussed with reference to <figref idrefs="DRAWINGS">FIGS. 5A and 5B</figref>. When the width of the current block is less than the height of the current block, the first plurality of predetermined intra prediction modes may exclude a second portion of angular prediction modes of the second plurality of predetermined intra prediction modes that have directions of reference pointing to an upper edge of the current block as discussed with reference to <figref idrefs="DRAWINGS">FIGS. 5C and 5D</figref>.</div>
<div class="description-paragraph" id="p-0131" num="0130">At S<b>1060</b>, the final predictor of the current block is generated by combining the inter predictor and the intra predictor according to one or more intra weight coefficients associated with the intra prediction mode. The one or more intra weight coefficients indicate one or more ratios that corresponding one or more portions of the intra predictor are combined with the inter predictor, respectively. In some examples, the intra-inter prediction module <b>312</b> generate the final predictor of the current block based on the one or more intra weight coefficients, provided by the decoding controller <b>316</b> or determined by the intra-inter prediction module <b>312</b>, as described with reference to <figref idrefs="DRAWINGS">FIG. 3</figref>.</div>
<div class="description-paragraph" id="p-0132" num="0131">In some examples, combining the inter predictor and the intra predictor is performed according to an intra weight coefficient applicable to an entirety of the current block when the intra prediction mode is a non-angular prediction mode. For example, the intra weight coefficient may be set to be 0.5 for the entirety of the current block when the intra prediction mode is the DC mode or a planar mode. In this case, the inter weight coefficient for the inter predictor may be set to be 0.5.</div>
<div class="description-paragraph" id="p-0133" num="0132">In some examples, the current block may be divided into a predetermined number of portions when the intra prediction mode is an angular prediction mode, and combining the inter predictor and the intra predictor may be performed according to intra weight coefficients for the predetermined number of portions, respectively. For example, the values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along a direction of reference of the intra prediction mode decrease, as described with reference to <figref idrefs="DRAWINGS">FIG. 8</figref>.</div>
<div class="description-paragraph" id="p-0134" num="0133">In some examples, a closest one of predetermined representative directions to a direction of reference of the intra prediction mode may be identified when the intra prediction mode is an angular prediction mode. The current block may be divided into a predetermined number of portions arranged along the identified representative direction, as described with reference to <figref idrefs="DRAWINGS">FIGS. 6 and 7</figref>. In such example, combining the inter predictor and the intra predictor is performed according to intra weight coefficients for the predetermined number of portions, respectively, and the values of the intra weight coefficients increase when distances between the corresponding portions and the samples of neighboring pixels along the identified representative direction decrease. In some examples, the predetermined representative directions include at least a vertical direction of reference and a horizontal direction of reference.</div>
<div class="description-paragraph" id="p-0135" num="0134">At S<b>1070</b>, the current block is decoded based on the final predictor to output a decoded block. For example, the adder <b>342</b> generate a decoded block of the current block based on combining the residual portion of the current block and the final predictor from the intra-inter prediction module <b>312</b> as described with reference to <figref idrefs="DRAWINGS">FIG. 3</figref>.</div>
<div class="description-paragraph" id="p-0136" num="0135">After S<b>1070</b>, the process proceeds to S<b>1099</b> and terminates.</div>
<div class="description-paragraph" id="p-0137" num="0136"> <figref idrefs="DRAWINGS">FIG. 11</figref> shows a flow chart outlining a video encoding process <b>1100</b> using a processing circuit for video encoding, such as the processing circuit <b>920</b> in <figref idrefs="DRAWINGS">FIG. 9</figref>, according to an embodiment of the disclosure. It is understood that additional operations may be performed before, during, and/or after the process <b>1100</b> depicted in <figref idrefs="DRAWINGS">FIG. 11</figref>. The process <b>1100</b> starts at S<b>1101</b> and proceeds to S<b>1110</b>.</div>
<div class="description-paragraph" id="p-0138" num="0137">At S<b>1110</b>, an input image frame including a current block to be encoded using an intra-inter prediction is received as input data. For example, the processing circuit <b>920</b> may receive the input frames <b>906</b> that include the image frame having the current block.</div>
<div class="description-paragraph" id="p-0139" num="0138">At S<b>1120</b>, prediction parameters for encoding the current block using the intra-inter prediction are estimated. For example, the intra-inter estimation module <b>924</b>, either alone or with the assistance of the inter estimation module <b>934</b> and/or the intra estimation module <b>938</b>, estimates the prediction parameters for encoding the current block using the intra-inter prediction, as described with reference to <figref idrefs="DRAWINGS">FIG. 9</figref>.</div>
<div class="description-paragraph" id="p-0140" num="0139">As illustrated with referenced to <figref idrefs="DRAWINGS">FIG. 2</figref>, when the current block is encoded using the intra-inter prediction, a final predictor of the current block is generated based on combining an inter predictor and an intra predictor. The estimation of the prediction parameters for generating the inter predictor may be determined by determining a reference frame, a motion vector indicating a reference block in the reference frame, and/or the inter weight coefficient(s) to be used to generate the final predictor. The estimation of the prediction parameters for generating the intra predictor may be based on neighboring pixels, a selected intra prediction mode, and/or the intra weight coefficient(s) to be used to generate the final predictor.</div>
<div class="description-paragraph" id="p-0141" num="0140">In some examples, the intra prediction mode for the current block using the intra-inter prediction may be selected from a first plurality of predetermined intra prediction modes, and a second block may be encoded based on a intra predictor derived according to a second intra prediction mode selected from a second plurality of predetermined intra prediction modes. The first plurality of predetermined intra prediction modes may be a subset of the second plurality of predetermined intra prediction modes as discussed with reference to <figref idrefs="DRAWINGS">FIGS. 3, 9, and 10</figref>. Moreover, the intra weight coefficient(s) may be associated with the selected intra prediction mode. The assignment of the intra weight coefficient(s) may be determined as discussed with reference to <figref idrefs="DRAWINGS">FIGS. 3, 6-9, and 10</figref>.</div>
<div class="description-paragraph" id="p-0142" num="0141">At S<b>1130</b>, the inter predictor of the current block is generated based on the prediction parameters determined at S<b>1120</b>. For example, the intra-inter prediction module <b>922</b>, either alone or with the assistance of the inter prediction module <b>932</b>, generates the inter predictor of the current block based on the prediction parameters provided by the intra-inter estimation module <b>924</b> as described with reference to <figref idrefs="DRAWINGS">FIG. 9</figref>.</div>
<div class="description-paragraph" id="p-0143" num="0142">At S<b>1140</b>, the intra predictor of the current block is generated based on the prediction parameters determined at S<b>1120</b>. For example, the intra-inter prediction module <b>922</b>, either alone or with the assistance of the intra prediction module <b>936</b>, generates the intra predictor of the current block based on the prediction parameters provided by the intra-inter estimation module <b>924</b> as described with reference to <figref idrefs="DRAWINGS">FIG. 9</figref>.</div>
<div class="description-paragraph" id="p-0144" num="0143">At S<b>1150</b>, the final predictor of the current block is generated by combining the inter predictor and the intra predictor according to the weight coefficient(s). For example, the intra-inter prediction module <b>922</b> generates the final predictor of the current block based on the intra weight coefficient(s) associated with the selected intra prediction mode, either provided by the intra-inter estimation module <b>924</b> or determined by the intra-inter prediction module <b>922</b> as described with reference to <figref idrefs="DRAWINGS">FIG. 9</figref>.</div>
<div class="description-paragraph" id="p-0145" num="0144">At S<b>1160</b>, whether the prediction parameters are acceptable is determined. If the prediction parameters are acceptable, the process proceeds to S<b>1170</b>. If the prediction parameters are not acceptable, the process may proceed to S<b>1120</b> to redo the prediction parameter estimation or to S<b>1199</b> to try another type of prediction. For example, the encoding controller <b>926</b> receives the prediction parameters estimated by the intra-inter estimation module <b>924</b> and the encoded residue information from the residue encoder <b>944</b>, which is generated based on the final predictor from the intra-inter prediction module <b>922</b>. The encoding controller <b>926</b> may determine whether the prediction parameters and the encoded residue information are acceptable based on predetermined encoding criteria and determine whether the intra-inter estimation module would have to provide a different set of estimated prediction parameters and/or whether to use only the intra prediction or inter prediction.</div>
<div class="description-paragraph" id="p-0146" num="0145">At S<b>1170</b>, the current block is encoded based on the final predictor to output encoded video data. For example, the current block is encoded by encoding the prediction parameters from S<b>1120</b> and the residue information that is generated based on subtracting the final predictor from an original image of the current block. For example, the adder <b>942</b> generates the residue information of the current block, the residue encoder <b>944</b> generates the encoded residue information, and encoding controller <b>926</b> generates the encoded video data based on the prediction parameters from the intra-inter prediction module <b>924</b> and the encoded residue information from the residue encoder as described with reference to <figref idrefs="DRAWINGS">FIG. 9</figref>.</div>
<div class="description-paragraph" id="p-0147" num="0146">The selection of the intra-inter prediction and various prediction parameters may be explicitly included in the encoded video data or derivable during the decoding process based on information provided in the encoded video data. In some examples, the motion vector for the intra-inter prediction may be explicitly provided in the encoded video data or determined by deriving a motion vector using an Advanced Motion Vector Prediction (AMVP), Merge, or Skip mode. In some examples, a flag indicating whether the current block is encoded using the final predictor generated based on combining the inter predictor and the intra predictor (i.e., using the intra-inter prediction) is included as a syntax elements at the block level (e.g., PU level) in the encoded video data. The flag may be bypass coded or context coded, using one, two or three contexts. In some examples, the intra-inter prediction is arranged as a special case of the inter prediction, and the flag is included in the encoded video data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using the inter prediction. In some examples, the intra-inter prediction is arranged as a special case of the intra prediction, and the flag is included in the encoded video data only if the current block is identified in the encoded video data or is identified in the input data by another flag as encoded using the intra prediction.</div>
<div class="description-paragraph" id="p-0148" num="0147">Moreover, an enable flag indicating whether the intra-inter prediction is enabled or disabled for the corresponding sequence or picture(s) may be further included as a syntax element in the SPS, PPS or any high-level property of the encoded video data.</div>
<div class="description-paragraph" id="p-0149" num="0148">After S<b>1170</b>, the process proceeds to S<b>1199</b> and terminates.</div>
<div class="description-paragraph" id="p-0150" num="0149">While aspects of the present disclosure have been described in conjunction with the specific embodiments thereof that are proposed as examples, alternatives, modifications, and variations to the examples may be made. Accordingly, embodiments as set forth herein are intended to be illustrative and not limiting. There are changes that may be made without departing from the scope of the claims set forth below.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">13</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM290695647">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. A method of video decoding, comprising:
<div class="claim-text">receiving a bitstream that includes coded data to be decoded as a current block in an image frame;</div>
<div class="claim-text">obtaining an enable flag that is included in a Sequence Parameter Set (SPS) or a Picture Parameter Set (PPS) of the bitstream, the enable flag indicating whether intra-inter prediction functionality is enabled for a corresponding sequence or a corresponding picture that includes the current block;</div>
<div class="claim-text">when the enable flag indicates that the intra-inter prediction functionality is enabled for the corresponding sequence or the corresponding picture that includes the current block, determining, as a special case of an inter prediction, whether the current block is coded according to an intra-inter prediction; and</div>
<div class="claim-text">when the current block is deteir tined to be coded according to the intra-inter prediction:
<div class="claim-text">generating an inter predictor of the current block;</div>
<div class="claim-text">generating an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode for the current block that locates the samples of neighboring pixels, the intra prediction mode for the current block being a Planar mode or a DC mode;</div>
<div class="claim-text">determining an intra weight coefficient according to intra information of a previously coded block regardless of the intra prediction mode for the current block, the intra weight coefficient being the same for all samples of the current block;</div>
</div>
<div class="claim-text">generating a final predictor of the current block by combining the inter predictor and the intra predictor according to the intra weight coefficient, wherein the intra weight coefficient indicates a weight of the intra predictor in the final predictor; and</div>
<div class="claim-text">reconstructing the current block for output based on the final predictor.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the current block is a chroma block.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. A video decoding apparatus, comprising:
<div class="claim-text">a processing circuit configured to:
<div class="claim-text">receive a bitstream that includes coded data to be decoded as a current block in an image frame;</div>
<div class="claim-text">obtain an enable flag that is included in a Sequence Parameter Set (SPS) or a Picture Parameter Set (PPS) of the bitstream, the enable flag indicating whether intra-inter prediction functionality is enabled for a corresponding sequence or a corresponding picture that includes the current block;</div>
<div class="claim-text">when the enable flag indicates that the intra-inter prediction functionality is enabled for the corresponding sequence or the corresponding picture that includes the current block, determine, as a special case of an inter prediction, whether the current block is coded according to an intra-inter prediction; and</div>
<div class="claim-text">when the current block is determined to be coded according to the intra-inter prediction:
<div class="claim-text">generate an inter predictor of the current block;</div>
<div class="claim-text">generate an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode for the current block that locates the samples of neighboring pixels, the intra prediction mode for the current block being a Planar mode or a DC mode;</div>
<div class="claim-text">determine an intra weight coefficient according to intra information of a previously coded block regardless of the intra prediction mode for the current block, the intra weight coefficient being the same for all samples of the current block;</div>
<div class="claim-text">generate a final predictor of the current block by combining the inter predictor and the intra predictor according to the intra weight coefficient, wherein the intra weight coefficient indicates a weight of the intra predictor in the final predictor; and</div>
</div>
<div class="claim-text">reconstruct the current block for output based on the final predictor.</div>
</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the determining whether the current block is coded according to the intra-inter prediction comprises determining that the current block is not coded according to the intra-inter prediction in response to a size of the current block being determined as equal to or less than a threshold.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text">5. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the inter predictor is generated by deriving a motion vector using a Merge mode.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text">6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the intra weight coefficient is 0.5.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text">7. The video coding apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the processing circuit is configured to determine that the current block is not coded according to the intra-inter prediction in response to a size of the current block being determined as equal to or less than a threshold.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text">8. The video coding apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the inter predictor is generated by deriving a motion vector using a Merge mode.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text">9. The video coding apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the intra weight coefficient is 0.5.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text">10. A method of video encoding, comprising:
<div class="claim-text">receiving input data associated with a current block in an image frame;</div>
<div class="claim-text">determining, as a special case of an inter prediction, whether the current block is to be coded according to an intra-inter prediction;</div>
<div class="claim-text">when the current block is determined to be coded according to the intra-inter prediction:
<div class="claim-text">generating an inter predictor of the current block;</div>
<div class="claim-text">generating an intra predictor of the current block based on samples of neighboring pixels and an intra prediction mode for the current block that locates the samples of neighboring pixels, the intra prediction mode for the current block being a Planar mode or a DC mode;</div>
<div class="claim-text">determining an intra weight coefficient according to intra information of a previously coded block regardless of the intra prediction mode for the current block, the intra weight coefficient being the same for all samples of the current block;</div>
<div class="claim-text">generating a final predictor of the current block by combining the inter predictor and the intra predictor according to the intra weight coefficient, wherein the intra weight coefficient indicates a weight of the intra predictor in the final predictor;</div>
<div class="claim-text">encoding the current block based on the final predictor to obtain encoded data; and</div>
<div class="claim-text">including the encoded data in a bitstream; and</div>
</div>
<div class="claim-text">including an enable flag in a Sequence Parameter Set (SPS) or a Picture Parameter Set (PPS) of the bitstream, and the enable flag indicating whether intra-inter prediction functionality is enabled for a corresponding sequence or a corresponding picture that includes the current block.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text">11. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the determining whether the current block is coded according to the intra-inter prediction comprises determining that the current block is not coded according to the intra-inter prediction in response to a size of the current block being determined as equal to or less than a threshold.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text">12. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the inter predictor is generated by deriving a motion vector using a Merge mode.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00013" num="00013">
<div class="claim-text">13. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the intra weight coefficient is 0.5.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    