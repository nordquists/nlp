
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US20200309904A1 - RF/mm-Wave Peak Detector with High-Dynamic Range Calibration 
      - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA415541408">
<div class="abstract" id="p-0001" num="0000">An integrated circuit (IC) is provided with a plurality of diode based mm-wave peak voltage detectors (PVD)s. During a testing phase, a multi-point low frequency calibration test is performed on one or more of the PVDs to determine and store a set of alternating current (AC) coefficients. During operation of the IC, a current-voltage sweep is performed on a selected one of the PVDs to determine a process and temperature direct current (DC) coefficient. A peak voltage produced by the PVD in response to a high frequency radio frequency (RF) signal is measured to produce a first measured voltage. An approximate power of the RF signal is calculated by adjusting the first measured voltage using the DC coefficient and the AC coefficient.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><ul class="description" lang="EN" load-source="patent-office" mxw-id="PDES275334782">
<heading id="h-0001">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<li> <para-num num="[0001]"> </para-num> <div class="description-line" id="p-0002" num="0001">This application is a continuation of United States Patent Application No. 14/921,475, filed Oct. 23, 2015, the entirety of which is herein incorporated by reference.</div>
</li> <heading id="h-0002">FIELD OF THE INVENTION</heading>
<li> <para-num num="[0002]"> </para-num> <div class="description-line" id="p-0003" num="0002">Embodiments of the present disclosure generally relate to wireless transceiver systems, and more specifically relate to measurement of transceiver performance parameters in systems that must comply with strict functional requirements.</div>
</li> <heading id="h-0003">BACKGROUND OF THE INVENTION</heading>
<li> <para-num num="[0003]"> </para-num> <div class="description-line" id="p-0004" num="0003">A new class of safety systems, referred to as advanced driver assistance systems (ADAS), has been introduced into automobiles to reduce human operation error. These systems are enabled by smart sensors based primarily on millimeter-wave automotive radars. The proliferation of such assistance systems, which may provide functionality such as rear-view facing cameras, electronic stability control, and vision-based pedestrian detection systems, has been enabled in part by improvements in microcontroller and sensor technologies. Enhanced embedded radar-based solutions are enabling complementary safety features for ADAS designers.</div>
</li> <li> <para-num num="[0004]"> </para-num> <div class="description-line" id="p-0005" num="0004">In an automotive radar system, one or more radar sensors may be used to detect obstacles around the vehicle and the speeds of the detected objects relative to the vehicle. A processing unit in the radar system may determine the appropriate action needed, e.g., to avoid a collision or to reduce collateral damage, based on signals generated by the radar sensors. Current automotive radar systems are capable of detecting objects and obstacles around a vehicle, the position of any detected objects and obstacles relative to the vehicle, and the speed of any detected objects and obstacles relative to the vehicle. Via the processing unit, the radar system may, for example, alert the vehicle driver about potential danger, prevent a collision by controlling the vehicle in a dangerous situation, take over partial control of the vehicle, or assist the driver with parking the vehicle.</div>
</li> <li> <para-num num="[0005]"> </para-num> <div class="description-line" id="p-0006" num="0005">Automotive radar systems are required to meet the functional safety specifications of International Standard 26262 titled “Road Vehicles—Functional Safety.” ISO 26262 defines functional safety as the absence of unreasonable risk caused by malfunctioning behavior of electrical/electronic systems. Functional safety in automotive radar is the prevention of harm to humans due to failure of components in the radar. For automotive radar, the radar should be known to be functioning appropriately within a fault tolerant time interval of approximately <b>100</b> milliseconds (ms). Thus, while the vehicle is operating, a failure in any part of the radar that would lead to a degraded signal-to-noise ratio (SNR) should be detected, and an appropriate response performed within approximately 100 MS.</div>
</li> <description-of-drawings>
<heading id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<li> <para-num num="[0006]"> </para-num> <div class="description-line" id="p-0007" num="0006">Particular embodiments in accordance with the invention will now be described, by way of example only, and with reference to the accompanying drawings:</div>
</li> <li> <para-num num="[0007]"> </para-num> <div class="description-line" id="p-0008" num="0007"> <figref idrefs="DRAWINGS">FIG. 1</figref> is a block diagram of a radar system that may be used for automotive driver assistance applications;</div>
</li> <li> <para-num num="[0008]"> </para-num> <div class="description-line" id="p-0009" num="0008"> <figref idrefs="DRAWINGS">FIGS. 2 and 3</figref> are a more detailed block diagram and a schematic of a peak voltage detector used in the transceiver of <figref idrefs="DRAWINGS">FIG. 1</figref>;</div>
</li> <li> <para-num num="[0009]"> </para-num> <div class="description-line" id="p-0010" num="0009"> <figref idrefs="DRAWINGS">FIG. 4</figref> is a plot illustrating an example response curve for the voltage detector of <figref idrefs="DRAWINGS">FIG. 2</figref>;</div>
</li> <li> <para-num num="[0010]"> </para-num> <div class="description-line" id="p-0011" num="0010"> <figref idrefs="DRAWINGS">FIGS. 5-6</figref> are plots illustrating a calibrated response curve for the peak detector of <figref idrefs="DRAWINGS">FIG. 2</figref>;</div>
</li> <li> <para-num num="[0011]"> </para-num> <div class="description-line" id="p-0012" num="0011"> <figref idrefs="DRAWINGS">FIGS. 7-9</figref> are flow diagrams illustrating calibration of the peak detector of <figref idrefs="DRAWINGS">FIG. 2</figref>;</div>
</li> <li> <para-num num="[0012]"> </para-num> <div class="description-line" id="p-0013" num="0012"> <figref idrefs="DRAWINGS">FIG. 10</figref> is a block diagram of a radar system integrated circuit that includes multiple radar transmitters and receivers; and</div>
</li> <li> <para-num num="[0013]"> </para-num> <div class="description-line" id="p-0014" num="0013"> <figref idrefs="DRAWINGS">FIG. 11</figref> is an illustration of an automobile equipped with multiple radar systems.</div>
</li> </description-of-drawings>
<li> <para-num num="[0014]"> </para-num> <div class="description-line" id="p-0015" num="0014">Other features of the present embodiments will be apparent from the accompanying drawings and from the detailed description that follows.</div>
</li> <heading id="h-0005">DETAILED DESCRIPTION OF EMBODIMENTS OF THE INVENTION</heading>
<li> <para-num num="[0015]"> </para-num> <div class="description-line" id="p-0016" num="0015">Specific embodiments of the invention will now be described in detail with reference to the accompanying figures. Like elements in the various figures are denoted by like reference numerals for consistency. In the following detailed description of embodiments of the invention, numerous specific details are set forth in order to provide a more thorough understanding of the invention. However, it will be apparent to one of ordinary skill in the art that the invention may be practiced without these specific details. In other instances, well-known features have not been described in detail to avoid unnecessarily complicating the description.</div>
</li> <li> <para-num num="[0016]"> </para-num> <div class="description-line" id="p-0017" num="0016">Throughout their lifecycle, automotive radars need to self-diagnose and assess risks due to malfunctions in order to comply with safety standards such as the ISO 26262. A built in self test (BIST) network is disclosed herein that checks performance degradation in the field. Embodiments of the disclosure provide multifold benefits including: means for failure mode detection, digitally assisted performance adaptation, and a significant reduction in the radio frequency (RF) test costs, which may account for up to 30% of the cost of a mass-produced mm-wave product.</div>
</li> <li> <para-num num="[0017]"> </para-num> <div class="description-line" id="p-0018" num="0017"> <figref idrefs="DRAWINGS">FIG. 1</figref> is a block diagram of an example radar system <b>100</b> that may be used for automotive driver assistance applications. In this example, there may be multiple RF transmitters (TX) <b>110</b>, multiple RF receivers (RX) <b>120</b>, RF signal synthesizer circuit <b>130</b>, RF loop back <b>132</b>, etc. Each RF transmitter <b>110</b> may include a chain of amplifiers <b>111</b>, <b>112</b> and a power amplifier (PA) <b>113</b>, for example. Each receiver <b>120</b> may include a low noise amplifier (LNA) <b>121</b> and a chain of amplifiers <b>122</b>, <b>123</b>. The general operation of radar systems is well known and need not be described in detail herein. In this example, the radar system operates in the 79-81 GHz range; however, in other embodiments a higher or lower operating frequency may be used.</div>
</li> <li> <para-num num="[0018]"> </para-num> <div class="description-line" id="p-0019" num="0018">Typically, the highest failure rates in an ADAS are within the high-swing mm-wave blocks illustrated in system <b>100</b>; therefore a set of peak detectors (PD), such as <b>141</b>, <b>142</b>, <b>143</b> are provided to closely monitor the voltage swings at the output of most or all of the RF amplifiers within the each transmitter <b>110</b>, LO (local oscillator) signal distribution, the front-end of each receiver <b>120</b>, and each TX-RX <b>132</b> loop-back path. These low-complexity peak-detectors are allocated at tens of mm-wave nodes within system <b>100</b> while providing negligible impact on RF performance and area. Impedance Detectors (ZDTX, ZDRX) that sense variations in the reflection coefficient and output power may be placed at each antenna port to measure relative output/input impedances variations that may indicate package issues.</div>
</li> <li> <para-num num="[0019]"> </para-num> <div class="description-line" id="p-0020" num="0019">The BIST network <b>148</b> may be coupled to monitor the set of PDs (<b>141</b>-<b>143</b>, etc) and may include one or more low-frequency front-ends made of low-noise instrumentation amplifier(s) <b>145</b> that maximizes the dynamic range at the input of a successive approximation register (SAR) analog to digital converter (ADC) <b>146</b>. A BIST Sub-System Finite-State-Machine (FSM) <b>147</b> controls the BIST network. Functional safety may be built around a lockstep processor (not shown) as digital safe island targeting a Single Point Fault Metric (SPFM) for all analog functions higher than 90%, which is a key requirement for ASIL-B systems.</div>
</li> <heading id="h-0006">Peak-Detectors</heading>
<li> <para-num num="[0020]"> </para-num> <div class="description-line" id="p-0021" num="0020">Sensing voltage at 79 GHz can be a very challenging task, especially to achieve wide test coverage over multiple RF blocks. A capacitive loading of a few femtofarads may introduce impedance mismatches and therefore unacceptable losses. Additionally, as such functional-safety features can be typically allocated only when the RF design and layout are in an advanced stage, a tight area requirement may limit the degrees of freedom on the PD design. Accuracy and precision of the PDs may enable a suite of on-chip RF tests and therefore provide cost savings.</div>
</li> <li> <para-num num="[0021]"> </para-num> <div class="description-line" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIGS. 2 and 3</figref> are a more detailed block diagram and a schematic of an exemplary peak voltage detector <b>241</b> that may be used in the transceiver of <figref idrefs="DRAWINGS">FIG. 1</figref>. PD <b>241</b> may be representative of each of the PDs <b>141</b>-<b>143</b>, etc., referring back to <figref idrefs="DRAWINGS">FIG. 1</figref>. As mentioned above, PDs may be placed at the output of each mm-Wave amplifier in a pseudo differential fashion. Exemplary amplifier <b>211</b> is representative of the various amplifiers <b>111</b>-<b>113</b>, <b>121</b>-<b>123</b>, etc.</div>
</li> <li> <para-num num="[0022]"> </para-num> <div class="description-line" id="p-0023" num="0022">PD <b>241</b> is a square-law device biased in weak-inversion that converts the RF RMS (root mean square) voltage applied to diode connected NMOS device <b>353</b> to peak DC (direct current) voltage. The basic operation of square law detectors is well known. The DC component of the diode output is proportional to the square of the RF input voltage and to a responsivity that depends on the type of diode, the process and temperature. The measured output DC output voltage is then proportional to the input RF power, based on the impedance of the signal path.</div>
</li> <li> <para-num num="[0023]"> </para-num> <div class="description-line" id="p-0024" num="0023">In example PD <b>241</b>, a capacitive divider <b>351</b>, <b>352</b> attenuates an incoming signal received from amplifier <b>211</b> on input <b>354</b> within the linear range of detector <b>241</b>. A low-pass filter formed by resistor <b>355</b> and capacitor <b>356</b> may remove spurious harmonics before the peak signal provided on output <b>357</b> is amplified by low noise amplifier <b>145</b> and provided to the input of the ADC <b>146</b>. A similar topology is provided for pseudo-differential input <b>359</b> using diode connected device <b>358</b>. A differential set of diode connected NMOS devices <b>361</b>, <b>362</b> provide a reference voltage Vo-ref on output <b>360</b>. As will be discussed in more detail below, a voltage measuring across output <b>357</b> and reference output <b>360</b> will be referred to as ΔV<sub>DC</sub>.</div>
</li> <li> <para-num num="[0024]"> </para-num> <div class="description-line" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIG. 4</figref> is a plot illustrating an example response curve for the exemplary voltage detector of <figref idrefs="DRAWINGS">FIG. 2</figref>. The 79 GHz to DC responsivity of PD <b>241</b> may be given by the expression (1).</div>
</li> <li> <div class="description-line" id="p-0026" num="0000">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mn>7</mn>
<mo></mo>
<mn>9</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</msub>
<mo>=</mo>
<mrow>
<mfrac>
<mrow>
<mi>Δ</mi>
<mo></mo>
<msub>
<mi>v</mi>
<mrow>
<mi>d</mi>
<mo></mo>
<mi>c</mi>
</mrow>
</msub>
</mrow>
<msup>
<mrow>
<mo>(</mo>
<msub>
<mi>v</mi>
<mrow>
<mi>RF</mi>
<mo>,</mo>
<mi>rms</mi>
</mrow>
</msub>
<mo>)</mo>
</mrow>
<mn>2</mn>
</msup>
</mfrac>
<mo>=</mo>
<mrow>
<mrow>
<mo>-</mo>
<msub>
<mi>β</mi>
<mn>0</mn>
</msub>
</mrow>
<mo>·</mo>
<msub>
<mi>β</mi>
<mrow>
<mi>a</mi>
<mo></mo>
<mi>c</mi>
</mrow>
</msub>
<mo>·</mo>
<msub>
<mi>β</mi>
<mi>nl</mi>
</msub>
</mrow>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>1</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <div class="description-line" id="p-0027" num="0000">where β<sub>0 </sub>is proportional to the second order derivative of the IV (current-voltage) diode square-law relation and can be referred to as the DC responsivity which depends on process and temperature variations; β<sub>ac </sub>captures the responsivity frequency dependence in linear region <b>402</b>, and β<sub>nl </sub>models the upper-square-law region <b>403</b> where higher order harmonics tend to compress the in/out characteristic. The bottom part <b>401</b> of the PDs dynamic range will be ultimately limited by noise, mismatch, and spurious harmonics.</div>
</li> <heading id="h-0007">Calibration</heading>
<li> <para-num num="[0025]"> </para-num> <div class="description-line" id="p-0028" num="0025">A calibration/trimming strategy that allows tracking and compensation for such unavoidable variations will now be described. It is possible to capture most non-idealities and achieve the desired accuracy by relying on a 3-step process. First, a DC IV (current-voltage) calibration step involves sweeping the PD biasing current by means of a current DAC (digital to analog converter). Referring again to <figref idrefs="DRAWINGS">FIGS. 2 and 3</figref>, DAC <b>247</b> may be used for this purpose. By capturing the input current vs. output voltage characteristic of each diode <b>353</b>, <b>358</b> with a sufficient number of points, the IV exponential diode characteristic I=f(V) may be properly reconstructed at any given process corner and temperature. A regression of the measured points may be used to capture such variations in the DC responsivity as indicated by expression (2).</div>
</li> <li> <div class="description-line" id="p-0029" num="0000">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<msub>
<mi>β</mi>
<mn>0</mn>
</msub>
<mo>=</mo>
<mrow>
<mrow>
<mfrac>
<mn>1</mn>
<mn>2</mn>
</mfrac>
<mo>·</mo>
<mfrac>
<msup>
<mi>f</mi>
<mi>″</mi>
</msup>
<msup>
<mi>f</mi>
<mi>′</mi>
</msup>
</mfrac>
</mrow>
<mo>=</mo>
<mfrac>
<mi>q</mi>
<mrow>
<mn>2</mn>
<mo>·</mo>
<mi>n</mi>
<mo>·</mo>
<mi>k</mi>
<mo>·</mo>
<mi>T</mi>
</mrow>
</mfrac>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>2</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <div class="description-line" id="p-0030" num="0000">where q is the electron charge, n is the non-ideality coefficient, k is the Boltzmann constant, and T is the absolute temperature in Kelvin.</div>
</li> <li> <para-num num="[0026]"> </para-num> <div class="description-line" id="p-0031" num="0026">In a second step, a multipoint “trim” may be performed during final testing of the device when it is manufactured. Alternatively, this trim step may be performed at a later time, such as after the device is installed in a system, for example. This trim step provides improved absolute accuracy. The results may be stored in a static memory for use during operation of the device. For example, the results may be stored by blowing a set of fuses that are located on device <b>100</b>, or by storing the results in a read only memory (ROM) or other type of non-volatile memory located on device <b>100</b>.</div>
</li> <li> <para-num num="[0027]"> </para-num> <div class="description-line" id="p-0032" num="0027">In order to simplify this calibration step, the trim may be performed using a lower frequency signal, such as one that is in the range of 1-10 GHz. The underlying assumption is that the diode connected NMOS devices are wideband and that the 1 GHz versus 80 GHz responsivity will differ by a constant multiplying factor p that has a negligible dependence on process, temperature, and mismatch. This calibration step applies multiple input power points (whose corresponding voltage is v<sub>RF,trim</sub>) and computes a trimming coefficient vector represented by expression (3). Typically, four or more input points should be performed to obtain satisfactory results.</div>
</li> <li> <div class="description-line" id="p-0033" num="0000">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mi>t</mi>
<mo></mo>
<mi>r</mi>
<mo></mo>
<mi>i</mi>
<mo></mo>
<mi>m</mi>
</mrow>
</msub>
<mo>=</mo>
<mrow>
<mi>ρ</mi>
<mo>·</mo>
<mfrac>
<mrow>
<mi>Δ</mi>
<mo></mo>
<msub>
<mi>v</mi>
<mrow>
<mn>0</mn>
<mo>,</mo>
<mi>trim</mi>
</mrow>
</msub>
</mrow>
<mrow>
<msub>
<mi>β</mi>
<mn>0</mn>
</msub>
<mo>·</mo>
<msup>
<mrow>
<mo>(</mo>
<msub>
<mi>v</mi>
<mrow>
<mrow>
<mi>R</mi>
<mo></mo>
<mi>F</mi>
</mrow>
<mo>,</mo>
<mi>trim</mi>
</mrow>
</msub>
<mo>)</mo>
</mrow>
<mn>2</mn>
</msup>
</mrow>
</mfrac>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>3</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <div class="description-line" id="p-0034" num="0000">where β<sub>0 </sub>is computed from</div>
</li> <li> <div class="description-line" id="p-0035" num="0000">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
<mrow>
<msub>
<mi>β</mi>
<mn>0</mn>
</msub>
<mo>=</mo>
<mrow>
<mrow>
<mfrac>
<mn>1</mn>
<mn>2</mn>
</mfrac>
<mo>·</mo>
<mfrac>
<msup>
<mi>f</mi>
<mi>″</mi>
</msup>
<msup>
<mi>f</mi>
<mi>′</mi>
</msup>
</mfrac>
</mrow>
<mo>=</mo>
<mfrac>
<mi>q</mi>
<mrow>
<mn>2</mn>
<mo>·</mo>
<mi>n</mi>
<mo>·</mo>
<mi>k</mi>
<mo>·</mo>
<mi>T</mi>
</mrow>
</mfrac>
</mrow>
</mrow>
<mo>)</mo>
</mrow>
</math>
</maths>
</div>
</li> <li> <div class="description-line" id="p-0036" num="0000">and Δv<sub>0,trim </sub>is the measured DC voltage at the PD output when applying v<sub>RF,trim</sub>. β<sub>ac </sub>and β<sub>nl </sub>may be computed by interpolation of β<sub>trim </sub>in the PD linear region <b>402</b> and non-linear region <b>403</b> respectively.</div>
</li> <li> <para-num num="[0028]"> </para-num> <div class="description-line" id="p-0037" num="0028">In a third step, RF correlated double-sampling (CDS) may be performed. This step may provide improved precision when sensing voltages that are close to the PD sensitivity level in region <b>401</b>, referring again to <figref idrefs="DRAWINGS">FIG. 4</figref>. This step may be performed by sampling the PD output with and without an RF signal present at its input within a short time interval and subtracting the two measurements. Depending on the separation in time between the two samples, the CDS may be full or soft. When subtracting the two samples taken at a short time interval, the effect of CDS on the peak-detector offset and noise is very similar to that of an auto-zeroing process. The transfer function imposes a zero at the origin of frequency that cancels any offset and strongly reduces the 1/f noise. When the time interval increases, the two samples will be less correlated and noise filtering will be less pronounced. On the other hand, the offset error will be still compensated (soft CDS). During the CDS routine, the optimal PD-LNA gain may be estimated. When using full CDS, the routine may use a gain control algorithm for the PD-LNA <b>145</b> that allows a maximization of the SNR at the output while not clipping the input to GPADC <b>146</b>.</div>
</li> <li> <para-num num="[0029]"> </para-num> <div class="description-line" id="p-0038" num="0029">In the embodiment of <figref idrefs="DRAWINGS">FIG. 3</figref>, switches <b>365</b>, <b>366</b> may be used to disconnect the RF input signal, for example. In this manner, correlated slow-varying noise contributions may be cancelled out. In practice, CDS creates a high-pass transfer function that improves the SNR (signal to noise ratio).</div>
</li> <heading id="h-0008">Measurements Results</heading>
<li> <para-num num="[0030]"> </para-num> <div class="description-line" id="p-0039" num="0030"> <figref idrefs="DRAWINGS">FIGS. 5-6</figref> are plots illustrating an example calibrated response curve for the peak detector of <figref idrefs="DRAWINGS">FIG. 2</figref>. A test device was fabricated using a CMOS 45 nm technology and the calibration techniques described above were applied to them. In <figref idrefs="DRAWINGS">FIG. 5</figref>, plot line <b>511</b> represents raw readings taken from the test device, while plot line <b>512</b> illustrates the result of applying the calibration described above to the raw readings. The linear region <b>502</b> is expanded by the calibration process to cover a wider dynamic range (DR). <figref idrefs="DRAWINGS">FIG. 6</figref> illustrates the calibrated Peak-Detector absolute responsivity error for different temperature and several devices located in different places on the test IC that was achieved using the three step process described above. A worse case error of 1 dB over a 27 dB dynamic range <b>602</b> is illustrated.</div>
</li> <heading id="h-0009">Calibration Process</heading>
<li> <para-num num="[0031]"> </para-num> <div class="description-line" id="p-0040" num="0031"> <figref idrefs="DRAWINGS">FIGS. 7-9</figref> are flow diagrams illustrating in more detail the calibration steps described above. <figref idrefs="DRAWINGS">FIG. 7</figref> illustrates the DC IV sweep process. In this example, the β<sub>DC </sub>coefficient, also referred to as the 80 coefficient, is determined using sixty four current steps provided by DAC <b>247</b>, referring again to <figref idrefs="DRAWINGS">FIG. 2</figref>. In other embodiments, more or fewer current steps may be used. The temperature of the IC is measured <b>702</b> using an on-chip temperature sensor. The measured temperature may be stored in a memory circuit located on the IC. In this example, the temperature is rounded to the nearest 10 degrees C. In this embodiment, a single temperature is measured. In other embodiments, there may be several temperature sensors scattered around the IC and each PD may be associated with a nearby temperature sensor, for example.</div>
</li> <li> <para-num num="[0032]"> </para-num> <div class="description-line" id="p-0041" num="0032">In this embodiment, there are several PD-LNAs <b>145</b>, referring again to <figref idrefs="DRAWINGS">FIG. 1</figref>. Depending on which PD is to be operated on, a corresponding PD-LNA <b>145</b> is selected <b>704</b> and calibrated <b>705</b>. The index “x” identifies the selected PD-LNA. The target PD is then selected <b>706</b> and enabled for reading by turning on the ENP and ENM switches, referring again to <figref idrefs="DRAWINGS">FIG. 3</figref>. The index “y” identifies the selected PD.</div>
</li> <li> <para-num num="[0033]"> </para-num> <div class="description-line" id="p-0042" num="0033">If the temperature associated with the selected PD has not changed more than 10 degrees C. <b>707</b> from the last IV sweep, then the results from the last IV sweep <b>716</b> may be used. Otherwise, the IV sweep process continues by placing the selected PD in an “IV sweep mode” <b>708</b> in which the RF input is turned off and the current DAC <b>247</b> is turned on.</div>
</li> <li> <para-num num="[0034]"> </para-num> <div class="description-line" id="p-0043" num="0034">For each current step <b>713</b>, multiple output voltage measurements are made and the results are averaged <b>710</b> and then stored <b>712</b> to form a table of 64 IV results.</div>
</li> <li> <para-num num="[0035]"> </para-num> <div class="description-line" id="p-0044" num="0035">Once the data is collected, a regression is performed <b>714</b> to fit the data to a function. In this embodiment, a non-linear exponential regression is performed based on expression (4) to find “n(x,y,T)” and “i<sub>0</sub>(x,y,T)”, where ip is the sweep current and V<sub>PD </sub>is the measured output voltage at each step.</div>
</li> <li> <div class="description-line" id="p-0045" num="0000">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<msub>
<mi>i</mi>
<mi>D</mi>
</msub>
<mo>=</mo>
<mrow>
<msub>
<mi>i</mi>
<mn>0</mn>
</msub>
<mo>·</mo>
<msup>
<mi>e</mi>
<mfrac>
<msub>
<mi>V</mi>
<mi>pd</mi>
</msub>
<mrow>
<mi>n</mi>
<mo>·</mo>
<msub>
<mi>V</mi>
<mi>T</mi>
</msub>
</mrow>
</mfrac>
</msup>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>4</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <para-num num="[0036]"> </para-num> <div class="description-line" id="p-0046" num="0036">The β<sub>DC </sub>coefficient may then be determined <b>716</b> using expression (5).</div>
</li> <li> <div class="description-line" id="p-0047" num="0000">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mi>d</mi>
<mo></mo>
<mi>c</mi>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
<mo>=</mo>
<mrow>
<mo>-</mo>
<mfrac>
<mn>1</mn>
<mrow>
<mn>2</mn>
<mo>·</mo>
<mrow>
<mi>n</mi>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
<mo>·</mo>
<mrow>
<msub>
<mi>V</mi>
<mi>T</mi>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
</mrow>
</mfrac>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <para-num num="[0037]"> </para-num> <div class="description-line" id="p-0048" num="0037"> <figref idrefs="DRAWINGS">FIG. 8</figref> illustrates the process of AC trimming described above in more detail. As discussed above, the AC trimming process only needs to be performed once, typically at final test during the fabrication of the IC. The results of the trimming process may then be stored in non-volatile storage located on the IC for use during operation of the IC. An RF power source and a power meter that can accurately determine a test power at several power levels may be used to perform the calibration. A dedicated or a shared pin may be provided on the IC package for providing a test RF signal to the BIST network, for example.</div>
</li> <li> <para-num num="[0038]"> </para-num> <div class="description-line" id="p-0049" num="0038">In this embodiment, four power levels are used, however in other embodiments more or fewer power levels may be used for the calibration process. In this embodiment, the high power PDs are calibrated using input power settings of −11 dBm, −5 dBm, 1 dBm, and 7 dBm. Low power PDs are calibrated using input power settings of −22 dBm, −13 dBm, −7 dBm, and −1 dBm. As discussed above, the calibration RF signals may be in the range of 1-10 GHz. Alternatively, calibration may be performed at the full operation frequency in the range of 76-81 GHz. A constant “p” may be determined to convert calibration results done at 1-10 GHz to operation at 79-81 GHz by performing one sample at 79 GHz, for example.</div>
</li> <li> <para-num num="[0039]"> </para-num> <div class="description-line" id="p-0050" num="0039">A target PD and PD-LNA are selected <b>802</b>. For each input power level, a correlated double sampling is performed <b>804</b> to minimize noise effects. The result is referred to as “AVdc”. As mentioned above, in this embodiment four levels of RF power are used for each PD.</div>
</li> <li> <para-num num="[0040]"> </para-num> <div class="description-line" id="p-0051" num="0040">For each of the four AVdc results, a β<sub>trim </sub>coefficient is calculated <b>808</b> using expression (3) using constant p. The four β<sub>trim </sub>coefficients are then stored in non-volatile storage on the IC.</div>
</li> <li> <para-num num="[0041]"> </para-num> <div class="description-line" id="p-0052" num="0041">Referring back to expression (1), the β<sub>ac </sub>coefficient and β<sub>nl </sub>coefficient are obtained by polynomial interpolation in the linear region <b>402</b> and non-linear region <b>403</b>, respectively, referring again to <figref idrefs="DRAWINGS">FIG. 4</figref>.</div>
</li> <li> <para-num num="[0042]"> </para-num> <div class="description-line" id="p-0053" num="0042"> <figref idrefs="DRAWINGS">FIG. 9</figref> illustrates the final process for determining an RF power value based on the raw measured ΔV<sub>DC </sub>value from a selected PD and PD-LNA <b>902</b>. For each measurement <b>904</b>, the current temperature of the IC, or the region of the IC near the selected PD, is determined <b>905</b> from the on-chip temperature sensor. Also, the gain of the selected LNA <b>145</b> provided <b>906</b>. A correlated double sample (CDS) <b>909</b> may be performed when the measured ΔV<sub>DC </sub>value is below a threshold value <b>908</b> that indicates the measured peak voltage is in the noisy region <b>401</b>, referring again to <figref idrefs="DRAWINGS">FIG. 4</figref>. Alternatively, a CDS <b>909</b> may be performed for every measurement, for example.</div>
</li> <li> <para-num num="[0043]"> </para-num> <div class="description-line" id="p-0054" num="0043">As long as the temperature is within ten degrees <b>910</b> of the last IV sweep, then the stored β<sub>DC </sub>constant may be retrieved <b>912</b> from non-volatile memory that is on the IC. If there is more than a ten degree difference, then a new IV sweep may be performed and the results are stored in non-volatile memory <b>904</b>.</div>
</li> <li> <para-num num="[0044]"> </para-num> <div class="description-line" id="p-0055" num="0044">The set of four β<sub>AC </sub>coefficients are then retrieved <b>914</b> from non-volatile memory <b>904</b> and an interpolation is performed based on the raw ΔV<sub>DC </sub>value to determine a β<sub>AC </sub>coefficient to use with the raw ΔV<sub>DC </sub>value.</div>
</li> <li> <para-num num="[0045]"> </para-num> <div class="description-line" id="p-0056" num="0045">The ρ coefficient, also referred to as the “δ<sub>1G-79G</sub>[T]” coefficient may also be retrieved from non-volatile memory. The ρ coefficient captures the delta coefficient between the PD operating at 79 GHz versus the actual low-cost trimming procedure at 1-10 GHz. The temperature dependence of this parameter may be captured through stand-alone PD simulations/measurements and may be normalized <b>916</b> to the Trim temperature. Table 1 summarizes the coefficient over temperature for device <b>100</b>.</div>
</li> <li> <div class="description-line" id="p-0057" num="0000">
<tables id="TABLE-US-00001" num="00001">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td" colspan="1" nameend="1" namest="1" rowsep="1">TABLE 1</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" nameend="1" namest="1" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">Temperature dependence of AC parameters</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" nameend="1" namest="1" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td">−40</td>
<td class="description-td">1.00</td>
<td class="description-td">1.00</td>
</tr>
<tr class="description-tr">
<td class="description-td">−30</td>
<td class="description-td">1.00</td>
<td class="description-td">1.01</td>
</tr>
<tr class="description-tr">
<td class="description-td">−20</td>
<td class="description-td">0.99</td>
<td class="description-td">1.03</td>
</tr>
<tr class="description-tr">
<td class="description-td">−10</td>
<td class="description-td">0.99</td>
<td class="description-td">1.05</td>
</tr>
<tr class="description-tr">
<td class="description-td">0</td>
<td class="description-td">0.97</td>
<td class="description-td">1.07</td>
</tr>
<tr class="description-tr">
<td class="description-td">10</td>
<td class="description-td">0.96</td>
<td class="description-td">1.09</td>
</tr>
<tr class="description-tr">
<td class="description-td">20</td>
<td class="description-td">0.94</td>
<td class="description-td">1.11</td>
</tr>
<tr class="description-tr">
<td class="description-td">25</td>
<td class="description-td">0.93</td>
<td class="description-td">1.12</td>
</tr>
<tr class="description-tr">
<td class="description-td">26</td>
<td class="description-td">0.92</td>
<td class="description-td">1.12</td>
</tr>
<tr class="description-tr">
<td class="description-td">27</td>
<td class="description-td">0.92</td>
<td class="description-td">1.13</td>
</tr>
<tr class="description-tr">
<td class="description-td">40</td>
<td class="description-td">0.89</td>
<td class="description-td">1.16</td>
</tr>
<tr class="description-tr">
<td class="description-td">50</td>
<td class="description-td">0.86</td>
<td class="description-td">1.19</td>
</tr>
<tr class="description-tr">
<td class="description-td">60</td>
<td class="description-td">0.82</td>
<td class="description-td">1.23</td>
</tr>
<tr class="description-tr">
<td class="description-td">70</td>
<td class="description-td">0.78</td>
<td class="description-td">1.26</td>
</tr>
<tr class="description-tr">
<td class="description-td">80</td>
<td class="description-td">0.74</td>
<td class="description-td">1.30</td>
</tr>
<tr class="description-tr">
<td class="description-td">90</td>
<td class="description-td">0.70</td>
<td class="description-td">1.35</td>
</tr>
<tr class="description-tr">
<td class="description-td">100</td>
<td class="description-td">0.64</td>
<td class="description-td">1.40</td>
</tr>
<tr class="description-tr">
<td class="description-td">110</td>
<td class="description-td">0.59</td>
<td class="description-td">1.46</td>
</tr>
<tr class="description-tr">
<td class="description-td">125</td>
<td class="description-td">0.49</td>
<td class="description-td">1.56</td>
</tr>
<tr class="description-tr">
<td class="description-td">130</td>
<td class="description-td">0.46</td>
<td class="description-td">1.60</td>
</tr>
<tr class="description-tr">
<td class="description-td">140</td>
<td class="description-td">0.39</td>
<td class="description-td">1.68</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="3" nameend="3" namest="1" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
</li> <li> <para-num num="[0046]"> </para-num> <div class="description-line" id="p-0058" num="0046">Once all of the coefficients are collected, β<sub>79G </sub>may be calculated <b>918</b> as indicated in expression (1). A more detailed expression for β<sub>796 </sub>is provided by expression (6).</div>
</li> <li> <div class="description-line" id="p-0059" num="0000">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mn>7</mn>
<mo></mo>
<mn>9</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
<mo>,</mo>
<mo>:</mo>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
<mo>=</mo>
<mrow>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mi>d</mi>
<mo></mo>
<mi>c</mi>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
<mo>·</mo>
<mrow>
<mo>{</mo>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mrow>
<mi>a</mi>
<mo></mo>
<mstyle>
<mspace height="0.3ex" width="0.3em"> </mspace>
</mstyle>
<mo></mo>
<mi>c</mi>
</mrow>
<mo>,</mo>
<mrow>
<mn>1</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</mrow>
</msub>
<mo>-</mo>
<mfrac>
<mrow>
<mo>[</mo>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mrow>
<mi>a</mi>
<mo></mo>
<mi>c</mi>
</mrow>
<mo>,</mo>
<mrow>
<mn>1</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</mrow>
</msub>
<mo>-</mo>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mi>acnl</mi>
<mo>,</mo>
<mrow>
<mn>1</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mo>:</mo>
<mo>)</mo>
</mrow>
</mrow>
</mrow>
<mo>]</mo>
</mrow>
<mrow>
<mi>nlTtrim</mi>
<mo></mo>
<mrow>
<mo>(</mo>
<mi>T</mi>
<mo>)</mo>
</mrow>
</mrow>
</mfrac>
</mrow>
<mo>}</mo>
</mrow>
<mo>·</mo>
<mrow>
<msub>
<mi>δ</mi>
<mrow>
<mrow>
<mn>1</mn>
<mo></mo>
<mi>G</mi>
</mrow>
<mo>-</mo>
<mrow>
<mn>7</mn>
<mo></mo>
<mn>9</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mi>T</mi>
<mo>)</mo>
</mrow>
</mrow>
<mo>·</mo>
<msub>
<mi>G</mi>
<mi>LNA</mi>
</msub>
</mrow>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>6</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <div class="description-line" id="p-0060" num="0000">where β<sub>acn1,1G</sub>(:) is a vector result of the AC 1 GHz trimming.</div>
</li> <li> <para-num num="[0047]"> </para-num> <div class="description-line" id="p-0061" num="0047">Once the β<sub>79G</sub>(x,y,T) coefficient is determined, the actual RMS voltage value may then be calculated <b>920</b> using expression (1), which may be rewritten as expression (7). This calculated result may then be provided <b>910</b> to an upper level control system as the final V<sub>RMS </sub>result.</div>
</li> <li> <div class="description-line" id="p-0062" num="0000">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mtable>
<mtr>
<mtd>
<mrow>
<mrow>
<msub>
<mi>v</mi>
<mrow>
<mrow>
<mi>R</mi>
<mo></mo>
<mi>F</mi>
</mrow>
<mo>,</mo>
<mrow>
<mi>r</mi>
<mo></mo>
<mi>m</mi>
<mo></mo>
<mi>s</mi>
</mrow>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>[</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>]</mo>
</mrow>
</mrow>
<mo>=</mo>
<msqrt>
<mrow>
<mo>|</mo>
<mfrac>
<mrow>
<mi>Δ</mi>
<mo></mo>
<mrow>
<msub>
<mi>v</mi>
<mrow>
<mi>dc</mi>
<mo></mo>
<mstyle>
<mspace height="0.3ex" width="0.3em"> </mspace>
</mstyle>
<mo></mo>
<mn>0</mn>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
</mrow>
<mrow>
<msub>
<mi>β</mi>
<mrow>
<mn>7</mn>
<mo></mo>
<mn>9</mn>
<mo></mo>
<mi>G</mi>
</mrow>
</msub>
<mo></mo>
<mrow>
<mo>(</mo>
<mrow>
<mi>x</mi>
<mo>,</mo>
<mi>y</mi>
<mo>,</mo>
<mi>T</mi>
</mrow>
<mo>)</mo>
</mrow>
</mrow>
</mfrac>
<mo>|</mo>
</mrow>
</msqrt>
</mrow>
</mtd>
<mtd>
<mrow>
<mo>(</mo>
<mn>7</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</maths>
</div>
</li> <li> <para-num num="[0048]"> </para-num> <div class="description-line" id="p-0063" num="0048">In review, as described above in more detail, after a wafer containing ICs that each have a mm-wave transceiver with a set of PVDs (peak voltage detectors) has been fabricated, it is sliced and packaged and then final tested. During final testing of each IC, a four-point (or more) test may be performed in which four or more measurements are taken of one (or more) PVDs using a microwave &lt;10 GHz RF source at four or more power levels. The resulting set of PVD outputs are recorded in a non-volatile memory on the IC.</div>
</li> <li> <para-num num="[0049]"> </para-num> <div class="description-line" id="p-0064" num="0049">After the IC is installed in a system, each time it is powered on, a DC current/voltage (IV) calibration will be performed by doing a sweep of currents using a programmable DAC and measuring the PD output voltage while the RF input is turned off, as described in more detail with regards to <figref idrefs="DRAWINGS">FIG. 7</figref>. The chip temperature may be measured using an on-chip temp sensor. A regression is performed using the measured PD output values to derive a value for “n” and “i0” in equation (4). In this example, a non-linear regression is performed, which is a statistical method that interpolates a known non-linear function which in this example is equation (4), where Id is the sweep current, Vpd is the correspondent DC voltage measured at the output, Vt=kT/q, and n and i0 are the variables that are fit through the numerical interpolation process. Once the coefficient “n” is determined, β<sub>0 </sub>may be computed using equation (5) where q and k are constants, T is the measured temperature and n is the result of the interpolation.</div>
</li> <li> <para-num num="[0050]"> </para-num> <div class="description-line" id="p-0065" num="0050">During operation of the chip, a value for β<sub>trim </sub>is calculated using the stored values from the four point calibration and the current value of β<sub>0 </sub>derived from equation (5) based on the value “n”, i0 and Vt.</div>
</li> <li> <para-num num="[0051]"> </para-num> <div class="description-line" id="p-0066" num="0051">The temperature of the IC is monitored using the temp sensor. Whenever the temperature varies by more than 10C during operation, a new DC IV sweep calibration may be performed to determine a new value of “n”, i0 and Vt.</div>
</li> <li> <para-num num="[0052]"> </para-num> <div class="description-line" id="p-0067" num="0052">Each time an RF voltage measurement is done at either microwave or mm-wave frequencies, the PVD output value (Δvdc) is read by a control processor in the system and then a corresponding Vrms value may be determined using equation (6) and equation (7).</div>
</li> <li> <para-num num="[0053]"> </para-num> <div class="description-line" id="p-0068" num="0053">When a reading is taken that corresponds to the lower region of the PVD response curve, a second measurement may be taken with the RF input turned off (i.e., quiescent). This measurement is subtracted from the RMS reading to minimize noise. Noise is only canceled if the second reading is taken within a short time t2&lt;<sub>τ</sub> interval. The longer τ, the lower will be the noise correlation and the effectiveness of the noise canceling. However, if the second measurement is taken at t2»<sub>τ</sub>, offset errors may still be canceled.</div>
</li> <li> <para-num num="[0054]"> </para-num> <div class="description-line" id="p-0069" num="0054"> <figref idrefs="DRAWINGS">FIG. 10</figref> is a block diagram of a radar system SOC 1000 that may include multiple radar transmitters and receivers similar to device <b>100</b>, referring again to <figref idrefs="DRAWINGS">FIG. 1</figref>. The radar SOC <b>1000</b> may include multiple transmit channels <b>1010</b> for transmitting FMCW (frequency modulated continuous wave) RF signals and multiple receive channels <b>1020</b> for receiving the reflected transmitted signals. Further, the number of receive channels may be larger than the number of transmit channels. For example, an embodiment of the radar SOC <b>1000</b> may have three transmit channels and four receive channels.</div>
</li> <li> <para-num num="[0055]"> </para-num> <div class="description-line" id="p-0070" num="0055">A transmit channel includes a suitable transmitter and antenna. A receive channel includes a suitable receiver and antenna. Further, each of the receive channels <b>1020</b> may be identical and include a low-noise amplifier (LNA) <b>1021</b> with one or more stages to amplify the received signal, a mixer <b>1022</b> to mix the signal generated by the transmission generation circuitry with the received signal to generate an IF signal, a baseband bandpass filter <b>1023</b> for filtering the IF signal, a variable gain amplifier (VGA) <b>1024</b> for amplifying the filtered IF signal, and an analog-to-digital converter (ADC) <b>1025</b> for converting the analog IF signal to a digital IF signal. The mixer serves as a down converter that generates an output signal with a frequency equal to the difference between the frequency of the inputs received from the low-noise amplifier and the transmission generation circuitry, both of which are radio frequency (RF) signals. The bandpass filter, VGA, and ADC of a receive channel may be collectively referred to as a baseband chain or baseband filter chain. Further, the bandpass filter and VGA may be collectively referred to as an IF amplifier (IFA).</div>
</li> <li> <para-num num="[0056]"> </para-num> <div class="description-line" id="p-0071" num="0056">The receive channels <b>1020</b> are coupled to a digital front end (DFE) decimation component <b>1051</b> to provide the digital IF signals to the digital control module <b>1050</b>. The DFE <b>1051</b> includes functionality to perform decimation filtering on the digital IF signals to reduce the data transfer rate. A processor <b>1052</b> and/or a signal processor <b>1053</b> in control module <b>1050</b> may also perform other operations on the digital IF signals, e.g., DC offset removal, digital compensation of non-idealities in the receive channels, such as inter-RX gain imbalance non-ideality, inter-RX phase imbalance non-ideality and the like. The control module <b>1050</b> may be coupled to a high speed serial interface (I/F) <b>1054</b> to transfer decimated digital IF signals to a processing unit that may be located in another IC, for example, when the radar SOC <b>1000</b> is in normal mode. The control module may also be coupled to the built in self test (BIST) module <b>1040</b> to transfer digital test signals to the BIST module <b>1040</b> when the radar SOC <b>1000</b> is in test mode.</div>
</li> <li> <para-num num="[0057]"> </para-num> <div class="description-line" id="p-0072" num="0057">A serial peripheral interface (SPI) <b>1055</b> may provide an interface for communication with the processing unit located in another IC. For example, the processing unit may use the SPI <b>1055</b> to send control information, e.g., timing and frequencies of chirps, output power level, triggering of monitoring functions, etc., to the control module DFE. The radar SOC <b>1000</b> may use the SPI <b>1055</b>, for example, to send test data to the processing unit.</div>
</li> <li> <para-num num="[0058]"> </para-num> <div class="description-line" id="p-0073" num="0058">The control module <b>1050</b> includes functionality to control the operation of the radar SOC <b>1000</b> in normal mode and in test mode. The control module <b>1050</b> may include, for example, a buffer to store output samples of the DFE <b>1051</b>, an FFT (Fast Fourier Transform) engine to compute spectral information of the buffer contents, and an MCU that executes firmware to control the operation of the radar SOC <b>1000</b> in normal mode and in test mode.</div>
</li> <li> <para-num num="[0059]"> </para-num> <div class="description-line" id="p-0074" num="0059">A 20 GHz frequency modulation synthesizer (FM-Synth) module <b>1030</b> generates the RF signals that are then multiply by four and provided to the transmitter channels. The programmable timing engine <b>1031</b> includes functionality to receive chirp parameter values for a sequence of chirps in a radar frame from the control module <b>1050</b> and to generate chirp control signals that control the transmission and reception of the chirps in a frame based on the parameter values. The chirp parameters are defined by the radar system architecture and may include, for example, a transmitter enable parameter for indicating which transmitters to enable, a chirp frequency start value, a chirp frequency slope, a chirp duration, indicators of when the transmit channels should transmit and when the DFE output digital should be collected for further radar processing, etc. One or more of these parameters may be programmable.</div>
</li> <li> <para-num num="[0060]"> </para-num> <div class="description-line" id="p-0075" num="0060">The radio frequency synthesizer (SYNTH) <b>1032</b> includes functionality to generate FMCW (frequency modulated continuous wave) signals for transmission based on chirp control signals from the timing engine <b>1031</b>. In some embodiments, the SYNTH <b>1032</b> may include a phase locked loop (APLL) with a voltage controlled oscillator (XO).</div>
</li> <li> <para-num num="[0061]"> </para-num> <div class="description-line" id="p-0076" num="0061">The clock multiplier <b>1033</b> increases the frequency of the transmission signal (LO signal) to the LO frequency of the mixers <b>1022</b>. The clean-up PLL (phase locked loop) operates to increase the frequency of the signal of an external low frequency reference clock (not shown) to the frequency of the SYNTH <b>1032</b> and to filter the reference clock phase noise out of the clock signal.</div>
</li> <li> <para-num num="[0062]"> </para-num> <div class="description-line" id="p-0077" num="0062">The clock multiplier <b>1033</b>, synthesizer <b>1032</b>, timing generator <b>1031</b>, and clean up PLL are an example of transmission generation circuitry. The transmission generation circuitry generates a radio frequency (RF) signal as input to the transmit channels and as input to the mixers in the receive channels via the clock multiplier. The output of the transmission generation circuitry may be referred to as the LO (local oscillator) signal or the FMCW signal.</div>
</li> <li> <para-num num="[0063]"> </para-num> <div class="description-line" id="p-0078" num="0063">The BIST circuitry <b>1040</b> includes one or more temperature sensors <b>1041</b>, dynamic and non-volatile memory <b>1042</b>, a processing engine <b>1043</b>, ADC <b>1046</b>, and various RF/analog components, such as a set of peak detectors as described above in more detail. Processing engine <b>1043</b> is configured to perform the processing described above with regard to <figref idrefs="DRAWINGS">FIGS. 7-9</figref> by executing instructions stored in memory <b>1042</b>, receiving measured voltage information from the set of PDs <b>1044</b> via ADC <b>1046</b>, and accessing coefficient data stored in memory <b>1042</b>.</div>
</li> <li> <para-num num="[0064]"> </para-num> <div class="description-line" id="p-0079" num="0064"> <figref idrefs="DRAWINGS">FIG. 11</figref> is an illustration of an automobile <b>1100</b> equipped with multiple radar systems, as described herein in more detail. Long range radar (LRR) may be used for applications such as automatic cruise control <b>1160</b>. Medium rang radar (MRR) typically use a narrow beam and must detect high relative velocities. MRR may be used for applications such as: braking <b>1161</b>, intersection detection <b>1162</b>, pedestrian detection <b>1163</b>, and reverse cross traffic alerts <b>1164</b>, for example. Short range radar (SRR) typically uses a wide beam with large angular separation to provide good distance resolution. SRR may be used for applications such as: parking lane change and blind spot monitoring <b>1165</b>, <b>1167</b>, and pre-crash alerts and parking <b>1166</b>, <b>1168</b>, for example.</div>
</li> <li> <para-num num="[0065]"> </para-num> <div class="description-line" id="p-0080" num="0065">A set of radar SOCs, such as radar SOC <b>1000</b>, may be deployed around auto <b>1100</b> to provide object detection for the applications mentioned above. As such, each of the radar SOCs may be monitored by BIST logic as described above in more detail in order to provide a level of safety required in automotive applications.</div>
</li> <li> <para-num num="[0066]"> </para-num> <div class="description-line" id="p-0081" num="0066">As described above in more detail, embodiments of this disclosure provide peak detector simplicity, small area, and low current consumption. The simple PD topology may be used and it may be replicated hundreds of times throughout a chip without affecting the RF performance.</div>
</li> <li> <para-num num="[0067]"> </para-num> <div class="description-line" id="p-0082" num="0067">The calibration techniques disclosed herein may provide robustness across process corners, supply voltage and reference current variations, temperature, global and local mismatches, for example. Dynamic range extension may be provided through non-linearity compensation, on one side of the diode curve, and noise floor, offset and mismatches reduction on the other side.</div>
</li> <heading id="h-0010">Other Embodiments</heading>
<li> <para-num num="[0068]"> </para-num> <div class="description-line" id="p-0083" num="0068">While the disclosure has been described with reference to illustrative embodiments, this description is not intended to be construed in a limiting sense. Various other embodiments of the disclosure will be apparent to persons skilled in the art upon reference to this description. For example, while radar systems that operate in the 76-81 GHz band were described herein, other embodiments may operate in RF bands that are higher or lower than this range.</div>
</li> <li> <para-num num="[0069]"> </para-num> <div class="description-line" id="p-0084" num="0069">While non-linear regression was utilized herein to quantify the results of the IV sweep, in other embodiments a linear regression, or even a simple table may be used to quantify the results, for example.</div>
</li> <li> <para-num num="[0070]"> </para-num> <div class="description-line" id="p-0085" num="0070">In embodiments described herein, a new IV sweep is performed when the temperature varies by more than 10 C. In another embodiment, a higher or lower threshold may be used, depending on the accuracy required by the application, for example.</div>
</li> <li> <para-num num="[0071]"> </para-num> <div class="description-line" id="p-0086" num="0071">The techniques described in this disclosure may be implemented in hardware, software, firmware, or any combination thereof. If implemented in software, the software may be executed in one or more processors, such as a microprocessor, application specific integrated circuit (ASIC), field programmable gate array (FPGA), or digital signal processor (DSP). The software that executes the techniques may be initially stored in a computer-readable medium such as compact disc (CD), a diskette, a tape, a file, memory, or any other computer readable storage device and loaded and executed in the processor. In some cases, the software may also be sold in a computer program product, which includes the computer-readable medium and packaging materials for the computer-readable medium. In some cases, the software instructions may be distributed via removable computer readable media (e.g., floppy disk, optical disk, flash memory, USB key), via a transmission path from computer readable media on another digital system, etc.</div>
</li> <li> <para-num num="[0072]"> </para-num> <div class="description-line" id="p-0087" num="0072">Certain terms are used throughout the description and the claims to refer to particular system components. As one skilled in the art will appreciate, components in digital systems may be referred to by different names and/or may be combined in ways not shown herein without departing from the described functionality. This document does not intend to distinguish between components that differ in name but not function. In the following discussion and in the claims, the terms “including” and “comprising” are used in an open-ended fashion, and thus should be interpreted to mean “including, but not limited to . . . .” Also, the term “couple” and derivatives thereof are intended to mean an indirect, direct, optical, and/or wireless electrical connection. Thus, if a first device couples to a second device, that connection may be through a direct electrical connection, through an indirect electrical connection via other devices and connections, through an optical electrical connection, and/or through a wireless electrical connection.</div>
</li> <li> <para-num num="[0073]"> </para-num> <div class="description-line" id="p-0088" num="0073">Although method steps may be presented and described herein in a sequential fashion, one or more of the steps shown and described may be omitted, repeated, performed concurrently, and/or performed in a different order than the order shown in the figures and/or described herein. Accordingly, embodiments of the invention should not be considered limited to the specific ordering of steps shown in the figures and/or described herein.</div>
</li> <li> <para-num num="[0074]"> </para-num> <div class="description-line" id="p-0089" num="0074">It is therefore contemplated that the appended claims will cover any such modifications of the embodiments as fall within the true scope and spirit of the invention.</div>
</li> </ul>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">20</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM270734635">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text"> <b>1</b>. A method comprising:
<div class="claim-text">performing a current-voltage sweep on the peak voltage detector to determine a first coefficient;</div> <div class="claim-text">measuring a peak voltage produced by the peak voltage detector in response to a high frequency radio frequency (RF) signal to obtain a first measured voltage;</div> <div class="claim-text">determine a second coefficient using calibration data, wherein the calibration data is produced by performing an alternating current (AC) calibration with a test signal on the peak voltage detector; and</div> <div class="claim-text">calculating an approximate power of the RF signal by adjusting the first measured voltage using the first and second coefficients.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text"> <b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further including:
<div class="claim-text">measuring a second peak voltage produced by the peak voltage detector in response to a quiescent input to produce a second measured voltage;</div> <div class="claim-text">subtracting the second measured voltage from the first measured voltage to produce a double sampled measured voltage; and</div> <div class="claim-text">in which the double sampled measured voltage is used in place of the first measured voltage to calculate the approximate power of the RF signal.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text"> <b>3</b>. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, in which measuring the second peak voltage is only performed when the first measured voltage is below a threshold value.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text"> <b>4</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further including measuring a temperature representative of the peak voltage detector and storing the measured temperature along with the first coefficient; and
<div class="claim-text">in which the current-voltage sweep is performed only when a current temperature differs from the stored temperature by more than a range value, otherwise using the stored first coefficient for as long as the temperature remains within the range value of the stored temperature.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text"> <b>5</b>. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, in which the range value is 10 C.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text"> <b>6</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, in which performing each test point of the AC calibration test includes:
<div class="claim-text">providing a test radio frequency (RF) signal having a known frequency and a known power level to the peak voltage detector;</div> <div class="claim-text">measuring a resultant peak voltage;</div> <div class="claim-text">calculating a calibration coefficient that relates the peak voltage to the test RF signal; and</div> <div class="claim-text">storing the calibration coefficient in a non-volatile storage location on the integrated circuit.</div> </div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text"> <b>7</b>. A method comprising:
<div class="claim-text">providing a plurality of diode based mm-wave peak voltage detectors (PVD) on the integrated circuit (IC);</div> <div class="claim-text">performing a current-voltage sweep on a PVD of the plurality of PVDs to determine a first coefficient;</div> <div class="claim-text">performing an alternating current (AC) calibration test using one or more test points on a first selected PVD of the plurality of PVDs to determine a set of one or more second coefficients, in which for each test point the method includes:</div> <div class="claim-text">providing a radio frequency (RF) test signal having a known frequency and a known power level to the selected PVD;</div> <div class="claim-text">measuring a resultant peak voltage;</div> <div class="claim-text">calculating an AC calibration coefficient that relates the peak voltage to the RF test signal; and</div> <div class="claim-text">storing the AC calibration coefficient in a non-volatile storage location on the integrated circuit.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text"> <b>8</b>. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, in which the known frequency of the AC calibration test is less than a high frequency operating frequency, further including:
<div class="claim-text">performing at least one high frequency calibration test on a second PVD using a test RF signal having a high frequency in an operating range of the IC;</div> <div class="claim-text">calculating a high frequency calibration coefficient that relates the peak voltage to the test RF signal;</div> <div class="claim-text">calculating a conversion factor (p) value that relates the AC calibration coefficient to the high frequency calibration coefficient; and</div> <div class="claim-text">storing the p value in another non-volatile memory location on the integrated circuit.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text"> <b>9</b>. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, further including:
<div class="claim-text">measuring a peak voltage produced by the second selected PVD in response to a high frequency radio frequency (RF) signal to obtain a first measured voltage; and</div> <div class="claim-text">calculating an approximate power of the RF signal by adjusting the first measured voltage using the first coefficient, the second coefficients, and p.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text"> <b>10</b>. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further including:
<div class="claim-text">measuring a second peak voltage produced by the second selected PVD in response to a quiescent input to produce a second measured voltage;</div> <div class="claim-text">subtracting the second measured voltage from the first measured voltage to produce a double sampled measured voltage; and</div> <div class="claim-text">in which the double sampled measured voltage is used in place of the first measured voltage to calculate the approximate power of the RF signal.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text"> <b>11</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, in which measuring a second peak voltage is only performed when the first measured voltage is below a threshold value.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text"> <b>12</b>. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further including measuring a temperature representative of the second selected PVD and storing the measured temperature along with the DC coefficient; and
<div class="claim-text">in which the current-voltage sweep is performed only when a current temperature differs from the stored temperature by more than a range value, otherwise using the stored DC coefficient for as long as the temperature remains within the range value of the stored temperature.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00013" num="00013">
<div class="claim-text"> <b>13</b>. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, in which the range value is 10 C.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00014" num="00014">
<div class="claim-text"> <b>14</b>. A system on an integrated circuit comprising:
<div class="claim-text">a plurality of mm-wave peak voltage detectors (PVD) formed on a substrate of the integrated circuit (IC), in which each of the plurality of PVDs has an input coupled to receive a mm-wave radio frequency (RF) signal, and in which each of the plurality of PVDs has an output for providing a measured peak voltage signal;</div> <div class="claim-text">a built in self test (BIST) network coupled to read the measured peak voltage signal on the output of each of the plurality of PVDs, in which the BIST includes a processing module and a memory module having a non-volatile memory portion, in which the processing module is operable to:
<div class="claim-text">perform a current-voltage sweep on a selected PVD to determine a first coefficient;</div>
<div class="claim-text">measure a peak voltage produced by the selected PVD in response to a mm-wave radio frequency (RF) signal to obtain a first measured voltage;</div>
<div class="claim-text">determine a second coefficient using calibration data, wherein the calibration data is produced by performing an alternating current (AC) calibration test using one or more known test signals on the peak voltage detector; and</div>
<div class="claim-text">calculate an approximate power of the RF signal by adjusting the first measured voltage using the first and second coefficients.</div>
</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00015" num="00015">
<div class="claim-text"> <b>15</b>. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, in which the processor module is further operable to:
<div class="claim-text">measure a second peak voltage produced by the selected PVD in response to a quiescent input to produce a second measured voltage;</div> <div class="claim-text">subtract the second measured voltage from the first measured voltage to produce a double sampled measured voltage; and</div> <div class="claim-text">in which the double sampled measured voltage is use in place of the first measured voltage to calculate the approximate power of the RF signal.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00016" num="00016">
<div class="claim-text"> <b>16</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, in which measuring the second peak voltage is only performed when the first measured voltage is below a threshold value.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00017" num="00017">
<div class="claim-text"> <b>17</b>. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, in which the processor is further operable to measure a temperature representative of the peak voltage detector and store the measured temperature along with the first coefficient in the memory module; and
<div class="claim-text">in which the current-voltage sweep is performed only when a current temperature differs from the stored temperature by more than a range value, otherwise using the stored first coefficient for as long as the temperature remains within the range value of the stored temperature.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00018" num="00018">
<div class="claim-text"> <b>18</b>. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, in which the range value is 10 C.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00019" num="00019">
<div class="claim-text"> <b>19</b>. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, in which performing each test point of the AC calibration test includes:
<div class="claim-text">providing a test radio frequency (RF) signal having a known frequency and a known power level to the peak voltage detector;</div> <div class="claim-text">measuring a resultant peak voltage;</div> <div class="claim-text">calculating a calibration coefficient that relates the peak voltage to the test RF signal; and</div> <div class="claim-text">storing the calibration coefficient in a location in the non-volatile storage memory on the integrated circuit.</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00020" num="00020">
<div class="claim-text"> <b>20</b>. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, further including a plurality of mm-wave modules that each have an output coupled to an input of a respective one of the plurality of PVDs.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    