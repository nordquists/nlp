
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US9722605B2 - Low leakage and data retention circuitry 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA201550029">
<div class="abstract" id="p-0001" num="0000">An integrated circuit includes first circuitry and sleep transistor circuitry. The first circuitry receives input signals and processes the input signals. The first circuitry also retains data in a sleep state that has low leakage. The sleep transistor circuitry is coupled to the first circuitry and receives a sleep signal that has a negative voltage. The sleep circuitry reduces power consumption of the first circuitry in the sleep state to have low leakage based on the sleep signal while retaining the data in the first circuitry.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES118630580">
<heading id="h-0001">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<div class="description-paragraph" id="p-0002" num="0001">This application is a continuation of U.S. application Ser. No. 14/480,143, filed Sep. 8, 2014, which is a continuation of U.S. application Ser. No. 13/569,613, filed Aug. 8, 2012 (now U.S. Pat. No. 8,854,077), which is a continuation of U.S. application Ser. No. 13/074,291, filed Mar. 29, 2011 (now U.S. Pat. No. 8,253,438), which is a continuation of U.S. application Ser. No. 12/542,352, filed Aug. 17, 2009 (now U.S. Pat. No. 7,940,081), which is a continuation of U.S. application Ser. No. 12/284,311, filed Sep. 19, 2008 (now U.S. Pat. No. 7,592,837), which is a continuation of U.S. application Ser. No. 11/998,725, filed Nov. 30, 2007 (now U.S. Pat. No. 7,443,197), which is a continuation of U.S. application Ser. No. 11/732,181, filed Apr. 2, 2007 (now U.S. Pat. No. 7,348,804), which is a divisional and claims the priority benefit of U.S. application Ser. No. 11/041,687, filed Jan. 20, 2005 (now U.S. Pat. No. 7,227,383), which claims the priority benefit of U.S. Provisional Application No. 60/586,565, filed Jul. 9, 2004, and U.S. Provisional Application No. 60/546,574, filed Feb. 19, 2004. The entire teachings of the above applications are incorporated herein by reference in their entireties.</div>
<heading id="h-0002">FIELD OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0003" num="0002">The present invention relates generally to integrated circuits, and more particularly to low leakage and data retention circuitry.</div>
<heading id="h-0003">DESCRIPTION OF THE RELATED ART</heading>
<div class="description-paragraph" id="p-0004" num="0003">Most integrated circuits have a design goal to reduce the overall power consumption. The total power consumed by an integrated circuit includes dynamic power consumption and standby leakage current consumption. The challenge in designing an integrated circuit is to reduce the dynamic power and leakage power, while maintaining performance and cost goals for the integrated circuit.</div>
<div class="description-paragraph" id="p-0005" num="0004">In complementary metal oxide semiconductors (CMOS), various types of leakage occur such as pn junction reverse-bias current, subthreshold leakage, oxide tunneling current, gate current due to hot-carrier injection, gate-induced drain leakage, and channel punch through current. When the threshold voltage for a CMOS transistor is reduced for higher performance, the leakage power is significant in the total power consumption of the CMOS circuit.</div>
<div class="description-paragraph" id="p-0006" num="0005">There are two approaches in reducing the leakage power for CMOS circuits. The first approach is a process level technique that controls the doping profile of the transistor. The other approach is a circuit level technique where voltages at the different device terminals such as the drain, source, gate, and body are controlled. Some circuit level techniques are discussed below.</div>
<div class="description-paragraph" id="p-0007" num="0006">One circuit level technique is stacking transistors, which is also called self-reverse bias. When more than one transistor in a stack of series-connected transistors is turned off, the subthreshold leakage current is reduced. One problem with the transistor stack is that only a three times reduction in leakage current is achieved.</div>
<div class="description-paragraph" id="p-0008" num="0007">Another circuit level technique is a multiple threshold voltage design. Both high- and low-threshold transistors are on the same chip to deal with the leakage problem. The high-threshold transistors suppress the sub-threshold leakage current. The low-threshold transistors are used to achieve higher performance. One problem with a multiple threshold design is that process complexity and costs are increased.</div>
<div class="description-paragraph" id="p-0009" num="0008">Another circuit level technique is a multiple body bias in which the body voltage is changed to modify the threshold voltage. If separate body biases are applied to different NMOS transistors, the transistor cannot share the same well, which requires triple well technologies. One problem is that well biasing consumes a lot of chip area and requires extra power supplies for each cell. This technique also increases process complexity and the leakage reduction is not optimal.</div>
<div class="description-paragraph" id="p-0010" num="0009">Another technique for reducing leakage is a sleep transistor. <figref idrefs="DRAWINGS">FIG. 1</figref> depicts prior art circuitry including a sleep transistor. For NMOS sleep transistors, one or more NMOS transistors are added to logic gates in series with the cell transistors to VSS. The NMOS sleep transistors act as a switch to turn on and off the logic gate. In <figref idrefs="DRAWINGS">FIG. 1</figref>, the sleep transistor <b>130</b> is turned on (gate to VDD) during normal cell operation. When the cell is idle, the sleep transistor <b>130</b> is turned off (gate tied to VSS) to reduce the leakage current of the cell. Sleep transistors can also be PMOS transistors. One problem with sleep transistors is that if all logic has sleep transistors, the logic will lose their state information.</div>
<heading id="h-0004">SUMMARY OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0011" num="0010">In an exemplary embodiment of the presently disclosed invention, a data retention circuit is provided. The exemplary circuit includes an input/output pad cell that itself includes level shifter circuitry, the level shifter circuitry having inputs and outputs. Output latching circuitry is also provided as a part of the data retention circuit. The output latching circuitry includes two transistors. The transistors are coupled to the outputs of the level shifter circuitry and retain a state of the level shifter circuitry based on the state of the inputs. A leakage optimization circuit is also included, the leakage optimization circuit is configured to simultaneously decrease leakage power in conjunction with the state retention of the output latching circuitry.</div>
<div class="description-paragraph" id="p-0012" num="0011">In another embodiment of the presently disclosed invention, a system for controlling power consumption within an integrated circuit is disclosed. The system includes a power island, the power island includes a first circuit. The first circuit of the power island is configured to receive input signals and a hold signal. The circuit is further configured to process the input signals and retain data in a sleep state having low leakage. The first circuit is further configured to retain the data based on the hold signal. The system further includes a sleep transistor, which is coupled to the first circuit. The sleep transistor is configured to receive a negative voltage sleep signal and reduce power consumption of the first circuit in the sleep state. As a result, the first circuit has low leakage based on the sleep signal while simultaneously retaining the data.</div>
<description-of-drawings>
<heading id="h-0005">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0013" num="0012">The foregoing will be apparent from the following more particular description of example embodiments of the invention, as illustrated in the accompanying drawings in which like reference characters refer to the same parts throughout the different views. The drawings are not necessarily to scale, emphasis instead being placed upon illustrating embodiments of the present invention.</div>
<div class="description-paragraph" id="p-0014" num="0013"> <figref idrefs="DRAWINGS">FIG. 1</figref> is an illustration of circuitry including a sleep transistor in the prior art;</div>
<div class="description-paragraph" id="p-0015" num="0014"> <figref idrefs="DRAWINGS">FIG. 2</figref> is an illustration of an integrated circuit with a power supply in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0016" num="0015"> <figref idrefs="DRAWINGS">FIG. 2A</figref> is a block diagram of a leakage manager system for minimizing state leakage of a logic gate by application of a negative voltage to a sleep transistor;</div>
<div class="description-paragraph" id="p-0017" num="0016"> <figref idrefs="DRAWINGS">FIG. 3</figref> is an illustration of a power island manager with an isolation gate and a D flip-flop in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0018" num="0017"> <figref idrefs="DRAWINGS">FIG. 4</figref> is an illustration of a power island manager in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0019" num="0018"> <figref idrefs="DRAWINGS">FIG. 5</figref> is an illustration of a D/Q portion of flip-flop circuitry in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0020" num="0019"> <figref idrefs="DRAWINGS">FIG. 6</figref> is an illustration of a CK portion of flip-flop circuitry in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0021" num="0020"> <figref idrefs="DRAWINGS">FIG. 7A</figref> is an illustration of a sleep transistor for an OFF node in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIG. 7B</figref> is an illustration of a sleep transistor for an SB node in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 7C</figref> is an illustration of a moderate impedance transistor for an SB node in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0024" num="0023"> <figref idrefs="DRAWINGS">FIG. 8A</figref> is an illustration of circuitry for a tristate inverter in the master latch in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIG. 8B</figref> is an illustration of circuitry for a tristate inverter in the slave latch in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIG. 9</figref> is an illustration of HOLDB and SLEEPB signals in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0027" num="0026"> <figref idrefs="DRAWINGS">FIG. 10</figref> is an illustration of circuitry for low leakage and data retention in an exemplary implementation of the invention;</div>
<div class="description-paragraph" id="p-0028" num="0027"> <figref idrefs="DRAWINGS">FIG. 11</figref> is an illustration of slave latch circuitry in an exemplary implementation of the invention; and</div>
<div class="description-paragraph" id="p-0029" num="0028"> <figref idrefs="DRAWINGS">FIG. 12</figref> is an illustration of circuitry for a level shifter for an I/O pad in an exemplary implementation of the invention.</div>
</description-of-drawings>
<heading id="h-0006">DETAILED DESCRIPTION OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0030" num="0029">A description of example embodiments of the invention follows.</div>
<div class="description-paragraph" id="p-0031" num="0030">As shown in the exemplary drawings wherein like reference numerals indicate like or corresponding elements among the figures, exemplary embodiments of a system and method according to the present invention are described below in detail. It is to be understood, however, that the present invention may be embodied in various forms. Therefore, specific details disclosed herein are not to be interpreted as limiting, but rather as a basis for the claims and as a representative basis for teaching one skilled in the art to employ the present invention in virtually any appropriately detailed system, structure, method, process or manner.</div>
<div class="description-paragraph" id="h-0007" num="0000">Power Island Manager—<figref idrefs="DRAWINGS">FIGS. 2-4</figref> </div>
<div class="description-paragraph" id="p-0032" num="0031">In some embodiments, an integrated circuit can be delineated into power islands. Power consumption can then be controlled within the power island. A power island manager provides control signals to the power island to control power consumption of the power island. In some embodiments, the low leakage, data retention circuitry is located within the power islands.</div>
<div class="description-paragraph" id="p-0033" num="0032"> <figref idrefs="DRAWINGS">FIG. 2</figref> depicts an illustration of an integrated circuit <b>200</b> with a power supply <b>280</b> in an exemplary implementation of the invention. The integrated circuit <b>200</b> includes a central processing unit (CPU) <b>210</b>, a clock manager <b>212</b>, power island managers <b>220</b>, <b>222</b>, and <b>224</b>, a power supply manager <b>240</b>, level shifter/isolation gates (LS/ISO) <b>250</b>, <b>252</b>, and <b>254</b>, logic (power island <b>2</b>) <b>260</b>, memory (power island <b>0</b>) <b>262</b>, third party intellectual property (IP) (power island <b>1</b>) <b>264</b>, adaptive leakage controller (ALC) <b>270</b>, and bus <b>280</b>.</div>
<div class="description-paragraph" id="p-0034" num="0033">A power island is any section, delineation, partition, or division of an integrated circuit where power consumption is controlled within the section, delineation, partition, or division. In some embodiments, the power islands are delineated based on geographic factors of the integrated circuit. In some embodiments, the power islands are delineated based on functional IP units of the integrated circuit <b>200</b>. In this example depicted in <figref idrefs="DRAWINGS">FIG. 2</figref>, power islands are delineated by memory <b>262</b>, logic <b>260</b>, and third party IP <b>264</b>. Power islands are discussed in further detail in pending U.S. patent application Ser. No. 10/840,893, entitled “Managing Power on Integrated Circuits Using Power Islands”, filed on May 7, 2004, which is hereby incorporated by reference.</div>
<div class="description-paragraph" id="p-0035" num="0034">The power island managers <b>220</b>, <b>222</b>, and <b>224</b> are any circuitry, device, or system configured to provide control signals to a power island to control power within the power island. The power island managers <b>220</b>, <b>222</b>, and <b>224</b> can dynamically change the power consumption of the power islands based on the needs and operation of the integrated circuit <b>200</b>. The power island managers <b>220</b>, <b>222</b>, <b>224</b> may select a clock, change clock frequency, or modify the voltage within the power island to control the power consumption of the power island.</div>
<div class="description-paragraph" id="p-0036" num="0035">The ALC <b>270</b> provides control signals to compensate for process and temperature variation to provide the optimum voltage to be applied to sleep transistors in the power islands. The ALC <b>270</b> is described in further detail U.S. patent application Ser. No. 10/996,739, entitled “Systems and Methods for Minimizing Static Leakage of an Integrated Circuit”, filed on Nov. 17, 2004, which is incorporated herein for reference.</div>
<div class="description-paragraph" id="p-0037" num="0036"> <figref idrefs="DRAWINGS">FIG. 2A</figref> is a block diagram of a leakage manager system <b>290</b> for minimizing static leakage of a logic gate by application of a negative voltage to a sleep transistor in accordance with an example embodiment. The leakage manager system <b>290</b> comprises an adaptive leakage controller (ALC) <b>291</b>, a negative voltage regulator <b>292</b>, and a charge pump <b>294</b>. The charge pump <b>294</b> generates a negative voltage <b>295</b> (SLPB). The ALC <b>291</b> determines whether to adjust the negative voltage <b>295</b>. The ALC <b>291</b> generates a signal (depicted as CTRL) depending on the determination. The negative voltage regulator <b>292</b> adjusts the negative voltage <b>295</b> depending on the CTRL signal.</div>
<div class="description-paragraph" id="p-0038" num="0037">As described further herein, the negative voltage regulator <b>292</b> of one embodiment generates an enable (EN) signal to the charge pump <b>294</b> to enable the charge pump <b>294</b> to increase the magnitude of the negative voltage <b>295</b> (i.e., to make the negative voltage <b>295</b> more negative). If the EN signal is low, an alternating signal from an oscillator <b>293</b> to the charge pump <b>294</b> is disabled, preventing the charge pump <b>294</b> from increasing the magnitude of the negative voltage <b>295</b>. Alternatively, if the EN signal is high, the alternating signal from the oscillator <b>293</b> is enabled so that the charge pump <b>294</b> will increase the magnitude of the negative voltage <b>295</b>. Because the negative voltage regulator <b>292</b> toggles the EN signal on or off depending on whether the ALC <b>291</b> determines to adjust the negative voltage <b>295</b>, the leakage manager system <b>290</b> maintains the negative voltage <b>295</b> at a particular negative voltage to minimize static leakage of the logic gate.</div>
<div class="description-paragraph" id="p-0039" num="0038">Under normal operation where the digital logic block is to operate, the sleep control receives a signal (sleep input, polarity unimportant here) to disable the charge pump and raise V<sub>sleep </sub>voltage to V<sub>DD</sub>.</div>
<div class="description-paragraph" id="p-0040" num="0039">Under idle operation, where the digital logic block is to sleep (change to a low leakage current state), the Charge Pump Control Logic (CPCL) sends a clock signal and an enable signal to the Negative Voltage Charge Pump (NVCP) to first rapidly drop the V<sub>sleep </sub>signal to V<sub>SS</sub>. Then the charge pump begins to push the V<sub>sleep </sub>voltage below V<sub>SS </sub>and continues to do so until it receives a pause signal from the CPCL. The Negative Bias Voltage Bias Regulator (NVBR) monitors the V<sub>sleep </sub>voltage until a desirable reduction of the transistor current I<sub>off </sub>has been achieved. At that point it sends a signal to the CPCL to initiate a Pause signal to the NVCP. As time passes the V<sub>sleep </sub>voltage will slowly drift upwards toward V<sub>SS </sub>and at a preset transistor I<sub>off </sub>the NVBR sends a signal to the CPCL to restart the NVCP to restore the V<sub>sleep </sub>negative voltage to achieve the desired I<sub>off</sub>.</div>
<div class="description-paragraph" id="p-0041" num="0040"> <figref idrefs="DRAWINGS">FIG. 3</figref> depicts an illustration of the power island manager <b>220</b> with an isolation gate <b>350</b> and a D flip-flop <b>360</b> in an exemplary embodiment of the invention. The power island manager <b>220</b> includes a data retention state machine <b>330</b> and a sleep generator <b>340</b> that are coupled to each other.</div>
<div class="description-paragraph" id="p-0042" num="0041">The power island manager <b>220</b> is coupled to the isolation gate <b>350</b> by the ISO signal. The ISO signal is also coupled to other isolation gates. The data retention state machine <b>330</b> is coupled to DRB input of the D flip-flop <b>360</b> via the DRB signal. The data retention state machine <b>330</b> is also coupled to the AND gate <b>362</b> via the ENC signal. The clock island (CKI) signal is coupled to the data retention state machine <b>330</b> and the AND gate <b>362</b>. The sleep generator <b>340</b> is coupled to the D flip-flop <b>360</b> and the AND gate <b>362</b> via the SLPB signal. The output of the AND gate <b>362</b> is coupled to the C input of the D flip-flop <b>360</b> via the CKA signal. The system reset signal is coupled to the RESETB input of the power island manager <b>220</b> and the RB input of the D flip-flop <b>360</b>. The SLPB signal, the DRB signal, and the system reset signal are coupled to other data retention flip-flops.</div>
<div class="description-paragraph" id="p-0043" num="0042"> <figref idrefs="DRAWINGS">FIG. 4</figref> depicts an illustration of a power island manager <b>220</b> in an exemplary embodiment of the invention. The power island manager <b>220</b> includes an AND gate <b>402</b>, a multiplexer (MUX) <b>404</b>, a D flip-flop <b>410</b>, an inverter <b>412</b>, an AND gate <b>414</b>, a D flip-flop <b>420</b>, a D flip-flop <b>430</b>, the data retention state machine <b>330</b>, a MUX <b>432</b>, a MUX <b>442</b>, a sleep generator <b>340</b>, and a buffer <b>452</b>.</div>
<div class="description-paragraph" id="p-0044" num="0043">The DI<b>0</b> pin is coupled to the D input of the D flip-flop <b>410</b>. The SI<b>0</b> pin is coupled to the SI input of the D flip-flop <b>410</b>. The CSB and the WEB pins are coupled to the inputs of the AND gate <b>402</b>. The output of the AND gate <b>402</b> and the SCK<b>1</b> pin are coupled to the input of the MUX <b>404</b>. The output of the MUX <b>404</b> is coupled to the C inputs of the D flip-flop <b>410</b>, the D flip-flop <b>420</b>, and the D flip-flop <b>430</b>. The Q output of the D flip-flop <b>410</b> is coupled to the DO<b>0</b> pin, which is coupled to the input of the inverter <b>412</b> and the SI input of the D flip-flop <b>420</b>. The DI<b>1</b> pin is coupled to the D input of the D flip-flop <b>420</b>. The Q output of the D flip-flop <b>420</b> is coupled to the DO<b>1</b> pin, which is coupled to the input of the AND gate <b>414</b> and the SI input of the D flip-flop <b>430</b>. The output of the AND gate <b>414</b> is coupled to the RSTB pin. The DI<b>2</b> pin is coupled to the D input of the D flip-flop <b>430</b>. The Q output of the D flip-flop <b>430</b> is coupled to the DO<b>2</b> pin, which is coupled to the DLY<b>1</b>/ISO pin. The DLY<b>1</b>/ISO pin is coupled to the SO<b>1</b>, the input of the MUX <b>432</b>, and the data retention state machine <b>340</b>.</div>
<div class="description-paragraph" id="p-0045" num="0044">The RESETB pin is coupled to the R input of the D flip-flop <b>430</b>, the D flip-flop <b>420</b>, and the D flip-flop <b>410</b>. The SE pin, the RESETB pin, the CKI pin, and the SI<b>2</b> pin are coupled to the data retention state machine <b>330</b>. The data retention state machine <b>330</b> is coupled to the input of the MUX <b>432</b>, the SO<b>2</b> pin, the DRB pin, the ENC pin, and the input of the MUX <b>442</b>. The output of the MUX <b>442</b>, the VDDI pin, and the VL[0:2] are coupled to the sleep generator <b>340</b>. The sleep generator <b>340</b> is coupled to the SLPB pin. The sleep generator <b>340</b> is coupled to the data retention state machine <b>330</b> via the AW pin and the input of the buffer <b>452</b>. The output of the buffer <b>452</b> is coupled to the DO<b>3</b> pin. The DRMODE pin is coupled to the MUX <b>442</b>.</div>
<div class="description-paragraph" id="p-0046" num="0045">In operation, the power island manager <b>220</b> has a three bit register for controlling a power island for some embodiments. D [<b>0</b>], with input DI<b>0</b> and output DO<b>0</b>, is an island reset for re-initializing a power island. This bit is combined with RESETB to form RSTB to re-initialize the power island whenever RESETB or the D [<b>0</b>] is active. D [<b>1</b>], with input DI<b>1</b> and output DO<b>1</b>, is a sleep bit. When the D [<b>1</b>] bit is set to one, the power island goes into a low leakage state. D [<b>2</b>], with input DI<b>2</b> and output DO<b>2</b>, is a DLY<b>1</b>/Isolate bit. When DRMODE is tied to low, the D [<b>2</b>] bit, when set to one, will add one clock cycle delay between DRB going active and SLPB going active. When DRMODE is tied high, the D [<b>2</b>] bit, when set to one, will activate isolation of the power island. D [<b>3</b>], such as DO<b>3</b>, is an awake bit. This D [<b>3</b>] bit goes high when SLPB is high. This can be used by software to determine when a power island is out of the sleep state.</div>
<div class="description-paragraph" id="p-0047" num="0046">The power island manager <b>220</b> has two operating modes: one that supports power islands with data retention flip-flops and one that does not. When the DRMODE pin is tied high, a power island is put to sleep by writing a one to D[<b>1</b>]. The data retention state machine <b>330</b> performs the timing. The isolate (ISO) signal goes active when the sleep bit is written to a one, and the enable clock (ENC) and the data retention (DRB) will go low after synchronization to the power island clock (CKI). One or two clock cycles later the sleep (SLPB) goes low. To come out of sleep mode, a zero is written to D[<b>1</b>]. In some embodiments, all clock buffers in the power islands can be put to sleep to further minimize leakage. Software can determine when the power island has come out of sleep by reading when DO<b>3</b> is high.</div>
<div class="description-paragraph" id="p-0048" num="0047">The System Reset is typically applied once after initial system power up. In some embodiments, the System Reset goes to all data retention flip-flops. The System Reset signal and DI<b>0</b> bar are combined in a logical AND (RSTB output) to provide initialization to non data retention flip-flops. To create a power island reset, D[<b>0</b>] is set to a one and then cleared to a zero by software.</div>
<div class="description-paragraph" id="p-0049" num="0048">When the DRMODE is tied low, the power island manager <b>220</b> can also provide the control signals for a power island without data retention flip-flops. The power island manager <b>220</b> may have a hardware driven method and a software driven method for interfacing to power islands without data retention flip-flops. The software sequence has the following sequence:
</div> <ul> <li id="ul0001-0001" num="0049">Write 04/turn on isolation</li> <li id="ul0001-0002" num="0050">Write 06/turn on sleep, isolation on/come out of sleep</li> <li id="ul0001-0003" num="0051">Write 05/turn sleep off, reset island, isolation on/wait for sleep to go high</li> <li id="ul0001-0004" num="0052">Read/test for DO<b>3</b>=1; sleep is high</li> <li id="ul0001-0005" num="0053">Write 00/turn isolation off, normal operation</li> </ul>
<div class="description-paragraph" id="p-0050" num="0054">The hardware driven method uses a clock to sequence the state machine. The only action software takes is to write the sleep bit (DI<b>1</b>) to a one to go into sleep and write a zero to the sleep bit to go out of sleep. Software can determine when the island has come out of sleep by reading when DO<b>3</b> is high.</div>
<div class="description-paragraph" id="p-0051" num="0055">In some embodiments, the power island manager <b>220</b> contains two scan chains because some of the flip-flops are clocked on the positive and some on the negative. The scan chain enable pin switches the clock on scan chain <b>1</b> (SI<b>1</b> is the input; SO<b>1</b> is the output), the registers, to CKS<b>1</b>. Scan chain <b>2</b> (SI<b>2</b> is the input; SO<b>2</b> is the output) is connected to the data retention state machine <b>330</b> flip-flops that are clocked on the negative edge of CKI. A separate scan out is provided for each clock domain.</div>
<div class="description-paragraph" id="p-0052" num="0056">In some embodiments, the SLPB net uses p-type antenna diodes. Since the SLPB net may go to a negative voltage, an n-type antenna diode can cause excessive leakage to ground. The leakage can cause SLPB not to go negative and may not work properly. The CSB pin is a chip select pin. The WEB pin is the write enable pin. The VL [2:0] is the leakage control voltage value set by the ALC <b>270</b> (<figref idrefs="DRAWINGS">FIG. 2</figref>). The VDDI is the VDD from the power island.</div>
<div class="description-paragraph" id="h-0008" num="0000">Low Leakage, Data Retention Circuitry—<figref idrefs="DRAWINGS">FIGS. 5, 6, 7A</figref>-C, <b>8</b>A-<b>8</b>B, and <b>9</b>-<b>12</b> </div>
<div class="description-paragraph" id="p-0053" num="0057"> <figref idrefs="DRAWINGS">FIGS. 5, 6, 7A</figref>-C, and <b>8</b>A-<b>8</b>B disclose one embodiment for low leakage, data retention circuitry. In this embodiment, in sleep mode, the circuit parts of a flip-flop that do not require data retention are coupled to ground through a sleep transistor. The gate of the sleep transistor is coupled to a sleep signal that can be driven to a negative voltage such as −0.3V. Thus, the leakage in these circuit parts of the flip-flop is eliminated (reduced). When not in a sleep state, the sleep transistor has a gate value equal to or greater than the VDD supply, which effectively grounds the circuit.</div>
<div class="description-paragraph" id="p-0054" num="0058">The circuit parts that require data retention are coupled to ground through two transistors. One transistor acts effectively to ground the circuit above when not in sleep mode just as the sleep transistor described above. The other transistor is a PMOS device with the gate tied to ground, which provides medium impedance to ground. The voltage drop across this transistor acts to reduce the leakage by increasing the source bias of the NMOS transistors and simultaneously reduces the voltage across the circuit. In this embodiment, the data is retained in a sleep state and reduces the leakage by a factor of 22.</div>
<div class="description-paragraph" id="p-0055" num="0059"> <figref idrefs="DRAWINGS">FIG. 5</figref> depicts an illustration of a D/Q portion <b>500</b> of the flip-flop circuitry in an exemplary implementation of the invention. The D/Q portion <b>500</b> of the flip-flop circuitry includes an inverter <b>502</b>, an M<b>3</b> PMOS transistor <b>504</b>, an M<b>4</b> NMOS transistor <b>506</b>, master latch circuitry <b>510</b>, an M<b>11</b> PMOS transistor <b>522</b>, an M<b>12</b> NMOS transistor <b>524</b>, an M<b>13</b> NMOS transistor <b>526</b>, slave latch circuitry <b>530</b>, and an inverter <b>540</b>.</div>
<div class="description-paragraph" id="p-0056" num="0060">The D signal input is the input of the inverter <b>502</b>, which includes transistors M<b>1</b> and M<b>2</b>. The source of the inverter <b>502</b> is coupled to the node OFF, which is described below in <figref idrefs="DRAWINGS">FIG. 7A</figref>. The output of the inverter <b>502</b> is coupled to the M<b>3</b> PMOS transistor <b>504</b> and the M<b>4</b> NMOS transistor <b>506</b>. The gate of the M<b>3</b> PMOS transistor <b>504</b> is coupled to the CLK signal input. The gate of the M<b>4</b> NMOS transistor <b>506</b> is coupled to the CLKB signal input.</div>
<div class="description-paragraph" id="p-0057" num="0061">The master latch circuitry <b>510</b> includes the inverter <b>512</b> and the inverter <b>514</b>. The inverter <b>514</b> forms a feedback loop with the inverter <b>512</b>, where the output of the inverter <b>512</b> is coupled to the input of the inverter <b>514</b> and the output of the inverter <b>514</b> is coupled to the input of the inverter <b>512</b>. The inverter <b>512</b> corresponds to transistor M<b>5</b> and M<b>6</b>. The inverter <b>514</b> corresponds to transistors M<b>7</b>-M<b>10</b>. The input of the inverter <b>512</b> is coupled to node A, which is described in <figref idrefs="DRAWINGS">FIG. 8A</figref> below. The source of the inverter <b>512</b> is also coupled to node OFF, which is described below in <figref idrefs="DRAWINGS">FIG. 7A</figref>. The output of the inverter <b>512</b> is coupled to node B, which is described below in <figref idrefs="DRAWINGS">FIG. 8A</figref>. The source of the inverter <b>514</b> is coupled to node OFF, which is described below in <figref idrefs="DRAWINGS">FIG. 7A</figref>. The PMOS gate of the inverter <b>514</b> is coupled to the CLKB signal input. The NMOS gate of the inverter <b>514</b> is coupled to the CLK signal input.</div>
<div class="description-paragraph" id="p-0058" num="0062">The M<b>11</b> PMOS transistor <b>522</b> is in parallel to the M<b>12</b> NMOS transistor <b>524</b> and the M<b>13</b> NMOS transistor <b>526</b>, which are in series. The gate of the M<b>11</b> PMOS transistor <b>522</b> is coupled to the CLKB signal input. The gate of the M<b>12</b> NMOS transistor <b>524</b> is coupled to the HOLDB signal input. The gate of the M<b>13</b> NMOS transistor <b>526</b> is coupled to the CLK signal input.</div>
<div class="description-paragraph" id="p-0059" num="0063">The slave latch circuitry <b>530</b> includes the inverter <b>532</b> and the inverter <b>534</b>. The inverter <b>534</b> forms a feedback loop with the inverter <b>532</b>, where the output of the inverter <b>532</b> is coupled to the input of the inverter <b>534</b> and the output of the inverter <b>534</b> is coupled to the input of the inverter <b>532</b>. The inverter <b>532</b> corresponds to transistor M<b>14</b> and M<b>15</b>. The inverter <b>534</b> corresponds to transistors M<b>18</b>-<b>21</b> and M<b>31</b>. The input of the inverter <b>532</b> is coupled to node C, which is described in <figref idrefs="DRAWINGS">FIG. 8B</figref> below. The source of the inverter <b>532</b> is also coupled to node SB, which is described below in <figref idrefs="DRAWINGS">FIGS. 7B-C</figref>. The output of the inverter <b>532</b> is coupled to node D, which is described below in <figref idrefs="DRAWINGS">FIG. 8B</figref>. The source of the inverter <b>534</b> is coupled to node SB, which is described below in <figref idrefs="DRAWINGS">FIGS. 7B-C</figref>. The PMOS gates of the inverter <b>534</b> are coupled to the HOLDB and CLK signal inputs. The NMOS gate of the inverter <b>534</b> is coupled to the CLKB signal input.</div>
<div class="description-paragraph" id="p-0060" num="0064">The output of the inverter <b>532</b> is coupled to the input of the inverter <b>540</b>. The inverter <b>540</b> corresponds to transistors M<b>16</b> and M<b>17</b>. The source of the inverter <b>540</b> is also coupled to node OFF, which is described below in <figref idrefs="DRAWINGS">FIG. 7A</figref>. The output of the inverter <b>540</b> is the Q signal output.</div>
<div class="description-paragraph" id="p-0061" num="0065"> <figref idrefs="DRAWINGS">FIG. 6</figref> depicts a CK portion <b>600</b> of the flip-flop circuitry in an exemplary implementation of the invention. The CK portion <b>600</b> of the flip-flop circuitry includes an inverter <b>602</b>, an M<b>24</b> PMOS transistor <b>604</b>, an M<b>25</b> PMOS transistor <b>606</b>, an M<b>26</b> NMOS transistor <b>608</b>, an M<b>32</b> NMOS transistor <b>610</b>, and an M<b>27</b> PMOS transistor <b>612</b>.</div>
<div class="description-paragraph" id="p-0062" num="0066">The CK signal input is the input of the inverter <b>602</b>, which includes transistors M<b>22</b> and M<b>23</b>. The source of the inverter <b>602</b> is coupled to node OFF, which is described below in <figref idrefs="DRAWINGS">FIG. 7A</figref>. The output of the inverter <b>602</b> is coupled to the drain of the M<b>24</b> PMOS transistor <b>604</b> and the node CLKB. The gate of the M<b>24</b> PMOS transistor <b>604</b> is coupled to the HOLDB signal input. The output of the inverter <b>602</b> is also coupled to the M<b>25</b> PMOS transistor <b>606</b> and the M<b>26</b> NMOS transistor <b>608</b>. The M<b>25</b> PMOS transistor <b>606</b>, the M<b>26</b> NMOS transistor <b>608</b>, and the M<b>32</b> NMOS transistor <b>610</b> are coupled in series. The gate of the M<b>32</b> NMOS transistor <b>610</b> is coupled to the HOLDB signal input.</div>
<div class="description-paragraph" id="p-0063" num="0067">The CLK signal output is coupled to the drain of the M<b>25</b> PMOS transistor <b>606</b>, the drain of the M<b>26</b> NMOS transistor <b>608</b>, and the drain of the M<b>27</b> PMOS transistor <b>612</b>. The gate of the M<b>27</b> PMOS transistor <b>612</b> is coupled to the HOLDB signal input.</div>
<div class="description-paragraph" id="p-0064" num="0068"> <figref idrefs="DRAWINGS">FIG. 7A</figref> depicts a sleep transistor <b>702</b> for the OFF node in an exemplary implementation of the invention. The sleep transistor <b>702</b> is an NMOS transistor that corresponds to transistor M<b>28</b>. The drain of the sleep transistor <b>702</b> is coupled to the OFF node. The gate of the sleep transistor <b>702</b> is coupled to the SLEEPB signal input. The source of the sleep transistor <b>702</b> is coupled to ground. In some embodiments, the OFF node can be separated into two or more nodes each having its own NMOS sleep transistor.</div>
<div class="description-paragraph" id="p-0065" num="0069"> <figref idrefs="DRAWINGS">FIG. 7B</figref> depicts a sleep transistor <b>704</b> for the SB node in an exemplary implementation of the invention. The sleep transistor <b>704</b> is an NMOS transistor that corresponds to transistor M<b>29</b>. The drain of the sleep transistor <b>704</b> is coupled to the SB node. The gate of the sleep transistor <b>704</b> is coupled to the SLEEPB signal input. The source of the sleep transistor <b>704</b> is coupled to ground.</div>
<div class="description-paragraph" id="p-0066" num="0070"> <figref idrefs="DRAWINGS">FIG. 7C</figref> depicts a sleep transistor <b>706</b> for the SB node in an exemplary implementation of the invention. The sleep transistor <b>706</b> is a PMOS transistor that corresponds to transistor M<b>30</b>. The source of the sleep transistor <b>706</b> is coupled to the SB node. The gate and drain of the sleep transistor <b>706</b> are coupled to ground.</div>
<div class="description-paragraph" id="p-0067" num="0071"> <figref idrefs="DRAWINGS">FIG. 8A</figref> depicts circuitry <b>800</b> for the tristate inverter in the master latch in an exemplary implementation of the invention. The circuitry <b>800</b> for the master latch includes a PMOS transistor <b>802</b>, a PMOS transistor <b>804</b>, an NMOS transistor <b>806</b>, and an NMOS transistor <b>808</b> that are coupled together in series. The gates of the PMOS transistor <b>802</b> and the NMOS transistor <b>808</b> are coupled to the node B. The gate of the PMOS transistor <b>804</b> is coupled to the CLKB signal input. The gate of the NMOS transistor <b>806</b> is coupled to the CLK signal input. The drains of the PMOS transistor <b>804</b> and the NMOS transistor <b>806</b> are coupled to node A. The source of the NMOS transistor <b>808</b> is coupled to node OFF.</div>
<div class="description-paragraph" id="p-0068" num="0072"> <figref idrefs="DRAWINGS">FIG. 8B</figref> depicts circuitry <b>810</b> for the tristate inverter in the slave latch in an exemplary implementation of the invention. The circuitry <b>810</b> for the slave latch includes a PMOS transistor <b>812</b>, a PMOS transistor <b>814</b>, a PMOS transistor <b>816</b>, an NMOS transistor <b>818</b>, and an NMOS transistor <b>820</b>. The PMOS transistor <b>812</b> is coupled to the PMOS transistor <b>814</b> and the PMOS transistor <b>816</b> that are parallel to each other. The PMOS transistor <b>814</b> and the PMOS transistor <b>816</b> are coupled to the NMOS transistor <b>818</b>, which is also coupled to the NMOS transistor <b>820</b>.</div>
<div class="description-paragraph" id="p-0069" num="0073">The gates of the PMOS transistor <b>812</b> and the NMOS transistor <b>820</b> are coupled to the node D. The gate of the PMOS transistor <b>814</b> is coupled to the HOLDB signal input. The gate of the PMOS transistor <b>816</b> is coupled to the CLK signal input. The gate of the NMOS transistor <b>818</b> is coupled to the CLKB signal input. The drains of the PMOS transistor <b>814</b>, the PMOS transistor <b>816</b>, and the NMOS transistor <b>806</b> are coupled to node C. The source of the NMOS transistor <b>820</b> is coupled to node SB.</div>
<div class="description-paragraph" id="p-0070" num="0074"> <figref idrefs="DRAWINGS">FIG. 9</figref> depicts an illustration of the HOLDB and SLEEPB signals in an exemplary embodiment of the invention.</div>
<div class="description-paragraph" id="p-0071" num="0075">The operation begins with CK going to zero. This causes CLKB to be equal to VDD and CLK to be equal to zero, which isolates the slave latch circuitry <b>530</b> from the master latch circuitry <b>510</b>. The HOLDB signal goes to 0 to retain the state of the slave latch. The SLEEPB signal then goes to −0.3V. This shuts off transistor M<b>28</b> in <figref idrefs="DRAWINGS">FIG. 7A</figref>, which halts the leakage from all the circuits except in the slave latch circuitry <b>530</b>. When not in sleep mode, transistor M<b>28</b> provides a low impedance path to ground.</div>
<div class="description-paragraph" id="p-0072" num="0076">The slave latch circuitry <b>530</b> is coupled to ground through the transistors M<b>29</b> and M<b>30</b>, respectively depicted in <figref idrefs="DRAWINGS">FIGS. 7B and 7C</figref>. One purpose of transistor M<b>29</b> is to provide a low impedance path to ground when not in sleep mode.</div>
<div class="description-paragraph" id="p-0073" num="0077">One purpose of transistor M<b>30</b> is to provide a default moderate impedance path to ground when transistor M<b>29</b> is off or in sleep mode. The leakage in the slave latch circuitry <b>530</b>, in going through transistor M<b>30</b>, causes node SB to rise. This provides a source bias to the slave NMOS transistors reducing the leakage through them and also reduces the voltage across the slave side to VDD-SB, which further reduces the leakage. Equilibrium is reached where the leakage cannot increase. Basically, the leakage is used to limit itself.</div>
<div class="description-paragraph" id="p-0074" num="0078">This embodiment uses the gated VDD solution because the voltage across the circuit is reduced to VDD-SB. This embodiment combines this gated VDD with the modulated back gate bias method because of the source bias SB but only for the NMOS transistors. This is accomplished without switching a lower VDD and driving a well. Thus, a simple process can be used. Also, this embodiment advantageously uses the moderate impedance transistor in a way that causes leakage to limit itself by reaching equilibrium.</div>
<div class="description-paragraph" id="p-0075" num="0079"> <figref idrefs="DRAWINGS">FIGS. 10 and 11</figref> disclose another embodiment for low leakage, data retention circuitry. In this embodiment, in a sleep state, the circuitries that do not require data retention are coupled to ground through a sleep transistor. The logic coupled to the transistors gated by the SLEEPB signal is shut off and draws minimal leakage. This process is accomplished by driving the SLEEPB signal below VSS by 0.3-0.4V. The HOLDB signal keeps the slave latch circuitry from changing state while the rest of the flip-flop comes out of the sleep state. The only part of the flip-flop still powered is the slave latch circuitry. The slave latch circuitry combines several techniques to minimize leakage.</div>
<div class="description-paragraph" id="p-0076" num="0080"> <figref idrefs="DRAWINGS">FIG. 10</figref> depicts circuitry <b>1000</b> for low leakage and data retention in an exemplary embodiment of the invention. The circuitry <b>1000</b> includes the inverter <b>1002</b>, the master latch circuitry <b>1010</b>, the slave latch circuitry <b>1020</b>, the inverter <b>1032</b>, the inverter <b>1034</b>, the sleep transistors <b>1042</b>, <b>1044</b>, <b>1046</b>, and <b>1048</b>, the inverter <b>1052</b>, and the inverter <b>1054</b>.</div>
<div class="description-paragraph" id="p-0077" num="0081">The D input is the input for the inverter <b>1002</b>. The master latch circuitry <b>1010</b> includes the transmission gate <b>1012</b>, the inverter <b>1014</b>, the transmission gate <b>1016</b>, and the inverter <b>1018</b>. The output of the inverter <b>1002</b> is coupled to the left contact of the transmission gate <b>1012</b>. The right contact of the transmission gate <b>1012</b> is coupled to the input of the inverter <b>1014</b> and the left contact of the transmission gate <b>1016</b>. The output of the inverter <b>1014</b> is coupled to the D input of the slave latch circuitry <b>1020</b> and the input of the inverter <b>1018</b>. The output of the inverter <b>1018</b> is coupled to the DB input of the slave latch circuitry <b>1020</b> and the right contact of the transmission gate <b>1016</b>.</div>
<div class="description-paragraph" id="p-0078" num="0082">The SLEEPB signal input is coupled to the gates for the SL<b>1</b> sleep transistor <b>1042</b>, the SL<b>2</b> sleep transistor <b>1044</b>, the SL<b>3</b> sleep transistor <b>1046</b>, the SL<b>4</b> sleep transistor <b>1048</b>, and the SLEEPB input of the slave latch circuitry <b>1020</b>. The SL<b>1</b> sleep transistor <b>1042</b> is coupled to the inverter <b>1002</b> and ground. The SL<b>2</b> sleep transistor <b>1044</b> is coupled to the inverter <b>1052</b>, the inverter <b>1054</b>, and ground. The SL<b>3</b> sleep transistor <b>1046</b> is coupled to the inverter <b>1014</b>, the inverter <b>1018</b>, and ground. The SL<b>4</b> sleep transistor <b>1048</b> is coupled to the inverter <b>1032</b>, the inverter <b>1034</b>, and ground. In some embodiments, the SL<b>1</b> sleep transistor <b>1042</b>, the SL<b>2</b> sleep transistor <b>1044</b>, the SL<b>3</b> sleep transistor <b>1046</b>, and the SL<b>4</b> sleep transistor <b>1048</b> can each be separated into two or more nodes each having its own NMOS sleep transistor.</div>
<div class="description-paragraph" id="p-0079" num="0083">The CK signal is the input of the inverter <b>1052</b>. The output of the inverter <b>1052</b> is coupled to the transmission gate <b>1012</b>, the transmission gate <b>1016</b>, and the input of the inverter <b>1054</b>. The output of the inverter <b>1054</b> is coupled to the transmission gate <b>1012</b>, the transmission gate <b>1016</b>, and the CLK input of the slave latch circuitry <b>1020</b>. The HOLDB signal input is coupled to the HOLDB input of the slave latch circuitry <b>1020</b>. The output of the slave latch circuitry <b>1020</b> is coupled to the input of the inverter <b>1032</b>. The output of the inverter <b>1032</b> is coupled to the input of the inverter <b>1034</b>. The output of the inverter <b>1034</b> is the Q signal.</div>
<div class="description-paragraph" id="p-0080" num="0084"> <figref idrefs="DRAWINGS">FIG. 11</figref> depicts slave latch circuitry <b>1020</b> in an exemplary embodiment of the invention. The slave latch circuitry <b>1020</b> includes D<b>1</b> transistor <b>1102</b>, D<b>2</b> transistor <b>1104</b>, DH transistor <b>1106</b>, DSL sleep transistor <b>1108</b>, stack transistors <b>1110</b>, stack transistors <b>1120</b>, D<b>1</b>B transistor <b>1132</b>, D<b>2</b>B transistor <b>1134</b>, DHB transistor <b>1136</b>, and sleep transistor <b>1138</b>.</div>
<div class="description-paragraph" id="p-0081" num="0085">The D<b>1</b> transistor <b>1102</b>, the D<b>2</b> transistor <b>1104</b>, the DH transistor <b>1106</b>, and the DSL sleep transistor <b>1108</b> are coupled to each other in series with the sleep transistor <b>1108</b> coupled to ground. The gate of the D<b>1</b> transistor <b>1102</b> is coupled to the CLK signal input. The gate of the D<b>2</b> transistor <b>1104</b> is coupled to the D signal input. The gate of the DH transistor <b>1106</b> is coupled to the HOLDB signal input. The gate of the sleep transistor <b>1108</b> is coupled to the SLEEPB signal input.</div>
<div class="description-paragraph" id="p-0082" num="0086">The stack transistors <b>1110</b> comprise P<b>1</b> transistor <b>1112</b>, P<b>0</b> transistor <b>1114</b>, N<b>1</b> transistor <b>1116</b>, and N<b>0</b> transistor <b>1118</b>. The P<b>1</b> transistor <b>1112</b>, the P<b>0</b> transistor <b>1114</b>, the N<b>1</b> transistor <b>1116</b>, and the N<b>0</b> transistor <b>1118</b> are coupled to each other in series with the N<b>0</b> transistor <b>1118</b> coupled to ground. The gates of the P<b>1</b> transistor <b>1112</b>, the P<b>0</b> transistor <b>1114</b>, the N<b>1</b> transistor <b>1116</b>, and the N<b>0</b> transistor <b>1118</b> are coupled to the LAT signal input. The drains of the P<b>0</b>B transistor <b>1124</b> and the N<b>1</b>B transistor <b>1126</b> are coupled to the LAT signal input.</div>
<div class="description-paragraph" id="p-0083" num="0087">The stack transistors <b>1120</b> comprise P<b>1</b>B transistor <b>1122</b>, P<b>0</b>B transistor <b>1124</b>, N<b>1</b>B transistor <b>1126</b>, and N<b>0</b>B transistor <b>1128</b>. The P<b>1</b>B transistor <b>1122</b>, the P<b>0</b>B transistor <b>1124</b>, the N<b>1</b>B transistor <b>1126</b>, and the N<b>0</b>B transistor <b>1128</b> are coupled to each other in series with the N<b>0</b>B transistor <b>1128</b> coupled to ground. The gates of the P<b>1</b>B transistor <b>1122</b>, the P<b>0</b>B transistor <b>1124</b>, the N<b>1</b>B transistor <b>1126</b>, and the N<b>0</b>B transistor <b>1128</b> are coupled to the LATB signal input. The drains of the P<b>0</b> transistor <b>1114</b> and the N<b>1</b> transistor <b>1116</b> are coupled to the LATB signal input.</div>
<div class="description-paragraph" id="p-0084" num="0088">In operation, the logic coupled to the transistors gated by the SLEEPB signal is shut off and draws minimal leakage. This process is accomplished by driving the SLEEPB signal below VSS by 0.3-0.4V. The HOLDB signal keeps the slave latch circuitry <b>1020</b> from changing state while the rest of the flip-flop comes out of the sleep state. The only part of the flip-flop still powered is the slave latch circuitry <b>1020</b>. The slave latch circuitry <b>1020</b> combines several techniques to minimize leakage. Transistors not necessary for state retention (stacks with CLK) have sleep transistors to shut off leakage (gated by the SLEEPB signal).</div>
<div class="description-paragraph" id="p-0085" num="0089">The 8 transistors in the stack transistors <b>1110</b> and <b>1120</b> use two techniques to reduce leakage. The first technique used is transistor stacking, which is also called self-reverse bias. The N<b>0</b> transistor <b>1118</b> and the N<b>1</b> transistor <b>1116</b> will have some small leakage even when the gate is at 0V. As a result, VNN<b>1</b> will be at a positive voltage. This causes VGS(N<b>1</b>) and VBS(N<b>1</b>) to be negative, and VDS(N<b>1</b>) to decrease. Consequently, the leakage current is reduced in N<b>0</b> transistor <b>1118</b> and the N<b>1</b> transistor <b>1116</b>. The same effect occurs on N<b>0</b>B transistor <b>1128</b>, N<b>1</b>B transistor <b>1126</b>, P<b>0</b> transistor <b>1114</b>, P<b>1</b> transistor <b>1112</b>, P<b>0</b>B transistor <b>1124</b>, and P<b>1</b>B transistor <b>1122</b>.</div>
<div class="description-paragraph" id="p-0086" num="0090">The second technique is called multiple threshold transistors. Increasing channel length of MOS transistors increases the threshold of the devices without any change in process complexity. The N<b>0</b> transistor <b>1118</b>, the N<b>1</b> transistor <b>1116</b>, the N<b>0</b>B transistor <b>1128</b>, and the N<b>1</b>B transistor <b>1126</b> have increased channel length, which raises VTH and reduces leakage current.</div>
<div class="description-paragraph" id="p-0087" num="0091">This embodiment reduces leakage by a factor of 25 over a current standard cell D flip-flop.</div>
<div class="description-paragraph" id="h-0009" num="0000">I/O Pad—<figref idrefs="DRAWINGS">FIG. 12</figref> </div>
<div class="description-paragraph" id="p-0088" num="0092">In some embodiments, a programmable general purpose input and output (I/O) padcell includes built in-level shifters and isolation that interface with the chip core logic. In these embodiments, a level shifter can be controlled to retain data.</div>
<div class="description-paragraph" id="p-0089" num="0093"> <figref idrefs="DRAWINGS">FIG. 12</figref> depicts circuitry <b>1200</b> for a level shifter for an I/O pad in an exemplary embodiment of the invention. The circuitry <b>1200</b> includes MP<b>2</b> transistor <b>1202</b>, MP<b>3</b> transistor <b>1204</b>, M<b>3</b> transistor <b>1206</b>, M<b>4</b> transistor <b>1208</b>, M<b>1</b> transistor <b>1210</b>, M<b>0</b> transistor <b>1212</b>, M<b>5</b> transistor <b>1214</b>, M<b>2</b> transistor <b>1216</b>, and an inverter <b>1218</b>.</div>
<div class="description-paragraph" id="p-0090" num="0094">The circuitry <b>1200</b> is for a latching level shifter. The M<b>3</b> transistor <b>1206</b> and the M<b>4</b> transistor <b>1208</b> are “native” cascode devices. The M<b>3</b> transistor <b>1206</b> and the M<b>4</b> transistor <b>1208</b> are also known as depletion-mode transistors. The M<b>3</b> transistor <b>1206</b> and the M<b>4</b> transistor <b>1208</b> are used to allow thin gate devices to be used in the input stage. This allows large voltage ratios between the VDD and the V<b>3</b>IO. The M<b>0</b> transistor <b>1212</b> and the M<b>1</b> transistor <b>1210</b> are output latching devices that allow the level shifter to retain the state when both IN and INB are 0. Thus, IN and INB control data retention.</div>
<div class="description-paragraph" id="p-0091" num="0095">In some embodiments, the gates of the M<b>3</b> transistor <b>1206</b> and the M<b>4</b> transistor <b>1208</b> are coupled to other transistors connected to the cascode voltage.</div>
<div class="description-paragraph" id="p-0092" num="0096">The following truth table is for circuitry <b>1200</b>.</div>
<div class="description-paragraph" id="p-0093" num="0097">
<tables id="TABLE-US-00001" num="00001">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td align="center" class="description-td" colspan="3" nameend="3" namest="1" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td">IN</td>
<td class="description-td">INB</td>
<td class="description-td">OUT</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="3" nameend="3" namest="1" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td">0</td>
<td class="description-td">0</td>
<td class="description-td">Retain</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">last</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">state</td>
</tr>
<tr class="description-tr">
<td class="description-td">0</td>
<td class="description-td">1</td>
<td class="description-td">0</td>
</tr>
<tr class="description-tr">
<td class="description-td">1</td>
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td">1</td>
<td class="description-td">1</td>
<td class="description-td">Illegal</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="3" nameend="3" namest="1" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0094" num="0098">There will be setup time requirements for any signal compared to SLPB. If level shifters are used with an SRAM cell built into the output stage, the two inputs can be removed anytime after the output latch has flipped to a new state. Both 1.2V inputs to the level shifter cannot go to VDD. This can be prevented by including an inverter. If both the inverter and the level shifter have SLPB transistors, there is a potential timing race if SLPB goes to VSS with VDD high. In this case, the level shifters should be off before the output of the inverter drifts to VDD. In some embodiments, the M<b>5</b> transistor <b>1214</b> and the M<b>2</b> transistor <b>1216</b> can be configured to withstand greater voltages.</div>
<div class="description-paragraph" id="p-0095" num="0099">In some embodiments, the sources of the M<b>5</b> transistor <b>1214</b> and the M<b>2</b> transistor <b>1216</b> can be coupled to a common SLEEPB transistor <b>1240</b> to further reduce leakage. In one embodiment, the width of the SLEEPB transistor <b>1240</b> is 4 micrometers, and the length is 0.13 micrometers. The following truth table is for circuitry <b>1200</b> including this common SLEEPB transistor <b>1240</b>:</div>
<div class="description-paragraph" id="p-0096" num="0100">
<tables id="TABLE-US-00002" num="00002">
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="5" colsep="0" rowsep="0" width="100%">
<thead>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="5" nameend="4" namest="offset" rowsep="1"> </td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">SLEEPB</td>
<td class="description-td">IN</td>
<td class="description-td">INB</td>
<td class="description-td">OUT</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="5" nameend="4" namest="offset" rowsep="1"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">0</td>
<td class="description-td">0</td>
<td class="description-td">Retain</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">state</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">(Data</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">Retention)</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">0</td>
<td class="description-td">1</td>
<td class="description-td">0</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">1</td>
<td class="description-td">0</td>
<td class="description-td">1</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">1</td>
<td class="description-td">1</td>
<td class="description-td">1</td>
<td class="description-td">Illegal</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td">0</td>
<td class="description-td">X</td>
<td class="description-td">X</td>
<td class="description-td">Retain</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td"> </td>
<td class="description-td">State</td>
</tr>
<tr class="description-tr">
<td class="description-td"> </td>
<td align="center" class="description-td" colspan="5" nameend="4" namest="offset" rowsep="1"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph" id="p-0097" num="0101">In some embodiments, the SLEEPB=0 input state should be understood to include the SLEEPB voltage being below 0V (E.g. −0.35V generated by a leakage optimization circuit).</div>
<div class="description-paragraph" id="p-0098" num="0102">In this extension to <figref idrefs="DRAWINGS">FIG. 12</figref> (and the above truth table), the two Data Retention states may be operated independently, sequentially or simultaneously. This is beneficial when the SLEEPB input is used to control/limit leakage power while the IN/INB=00 state is used for data retention. This is because the SLEEPB voltage comes from a charge pump and takes some time to transition from Vdd (=1) to the Data Retention mode.</div>
<div class="description-paragraph" id="p-0099" num="0103">The above description is illustrative and not restrictive. Many variations of the invention will become apparent to those of skill in the art upon review of this disclosure. The scope of the invention should, therefore, be determined not with reference to the above description, but instead should be determined with reference to the appended claims along with their full scope of equivalents.</div>
<div class="description-paragraph" id="p-0100" num="0104">While this invention has been particularly shown and described with references to example embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the scope of the invention encompassed by the appended claims.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">12</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM111947555">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. A system for controlling power consumption within an integrated circuit, the system comprising:
<div class="claim-text">a power island including a first circuit, the first circuit configured to:
<div class="claim-text">receive input signals,</div>
<div class="claim-text">receive a hold signal,</div>
<div class="claim-text">process the input signals, and</div>
<div class="claim-text">retain data during a sleep state having low leakage based on the hold signal;</div>
</div>
<div class="claim-text">a sleep circuitry coupled to the first circuit, the sleep transistor configured to:
<div class="claim-text">receive a voltage sleep signal, and</div>
<div class="claim-text">reduce power consumption of the first circuit during the sleep state, the first circuit having low leakage based on the sleep signal while concurrently retaining the data; and</div>
</div>
<div class="claim-text">a source follower circuitry in parallel with said sleep circuitry, the source follower circuitry configured to provide a moderate impedance while the sleep circuitry is in a sleep mode and reduce leakage in the first circuit by reducing the voltage across the first circuit.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the voltage sleep signal is a variable voltage.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. The system of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the variable voltage is an optimum voltage.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The system of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the optimum voltage is dependent upon a process variation and a temperature variation.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text">5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the power island is for one of a memory function, a logic function and third party intellectual property.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text">6. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the voltage sleep signal is outside the range of logic levels.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text">7. A method for controlling power consumption within an integrated circuit, the method comprising:
<div class="claim-text">receiving, at a first circuit of a power island, input signals;</div>
<div class="claim-text">receiving, at the first circuit, a hold signal;</div>
<div class="claim-text">process, at the first circuit, the input signals;</div>
<div class="claim-text">retain data, at the first circuit, during a sleep state having low leakage based on the hold signal;</div>
<div class="claim-text">receiving, at a sleep circuitry coupled to the first circuit, a voltage sleep signal;</div>
<div class="claim-text">reducing, at the sleep circuitry, power consumption of the first circuit during the sleep state, the first circuit having low leakage based on the sleep signal while concurrently retaining the data;</div>
<div class="claim-text">providing, by a source follower circuitry that is in parallel with said sleep circuitry, a moderate impedance while the sleep circuitry is in a sleep mode; and</div>
<div class="claim-text">reducing the voltage across the first circuit to reduce leakage in the first circuit.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text">8. The system of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the voltage sleep signal is a variable voltage.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text">9. The system of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the variable voltage is an optimum voltage.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text">10. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the optimum voltage is dependent upon a process variation and a temperature variation.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text">11. The system of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the power island is for one of a memory function, a logic function and third party intellectual property.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text">12. The system of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the voltage sleep signal is outside the range of logic levels.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    