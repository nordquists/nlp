
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US9858603B2 - Card reader with power efficient architecture that includes a wake-up circuit 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA214331470">
<div class="abstract" id="p-0001" num="0000">A card reader is provided with a read head with a slot and is configured to be coupled to a mobile device and has a slot for swiping a magnetic stripe of a card. The read head reads data on the magnetic stripe and produces a raw magnetic signal indicative of data stored on the magnetic stripe. A power supply is coupled to wake-up electronics and a microcontroller. An output jack is adapted to be inserted in a port of the mobile device and deliver an output jack signal to the mobile device. The wake-up electronics is powered by a microphone bias of a mobile device.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES124883230">
<heading id="h-0001">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<div class="description-paragraph" id="p-0002" num="0001">This application is a continuation of U.S. application Ser. No. 13/298,487, filed on Nov. 17, 2011, which is a continuation-in-part of U.S. application Ser. No. 13/192,147, filed Jul. 27, 2011, now U.S. Pat. No. 8,615,445, which is a divisional application of U.S. application Ser. No. 13/179,836, filed on Jul. 11, 2011. In turn, U.S. application Ser. No. 13/179,836 is a continuation-in-part of U.S. application Ser. No. 12/707,228, filed Feb. 17, 2010, which is a continuation of U.S. application Ser. No. 12/050,752, filed Mar. 18, 2008, now U.S. Pat. No. 7,684,809, which is a continuation of U.S. application Ser. No. 10/355,557, filed Jan. 31, 2003, now U.S. Pat. No. 7,376,431. In turn, U.S. application Ser. No. 10/355,557 claims priority to each of: U.S. App. No. 60/355,667, filed Feb. 5, 2002; U.S. App. No. 60/356,861, filed Feb. 12, 2002; and U.S. App. No. 60/361,646, filed Mar. 4, 2002. Additionally, U.S. application Ser. No. 13/179,836 is a continuation-in-part of: U.S. application Ser. No. 13/043,268, filed Mar. 8, 2011, now U.S. Pat. No. 8,302,860; U.S. application Ser. No. 13/043,263, filed Mar. 8, 2011; U.S. application Ser. No. 13/043,258, filed Mar. 8, 2011; U.S. application Ser. No. 13/043,203, filed Mar. 8, 2011, now U.S. Pat. No. 8,573,487; U.S. application Ser. No. 13/043,270, filed Mar. 8, 2011, now U.S. Pat. No. 8,235,287; U.S. application Ser. No. 13/012,495, filed Jan. 24, 2011, now U.S. Pat. No. 8,500,018; U.S. application Ser. No. 13/010,796, filed Jan. 21, 2011; U.S. application Ser. No. 13/005,822 filed Jan. 13, 2011; U.S. application Ser. No. 12/985,982, filed Jan. 6, 2011, now U.S. Pat. No. 8,573,486; U.S. application Ser. No. 12/903,753, filed Oct. 13, 2010; and U.S. application Ser. No. 12/903,823, filed Oct. 13, 2010, now U.S. Pat. No. 8,534,546.</div>
<div class="description-paragraph" id="p-0003" num="0002">This application is related to U.S. Ser. No. 12/456,134, filed Jun. 10, 2009, and is hereby incorporated herein by reference.</div>
<div class="description-paragraph" id="p-0004" num="0003">All of the above-identified applications are fully incorporated by reference.</div>
<heading id="h-0002">BACKGROUND</heading>
<div class="description-paragraph" id="p-0005" num="0004">Field of the Invention</div>
<div class="description-paragraph" id="p-0006" num="0005">The present invention relates generally to card readers configured to be coupled to mobile devices to conduct financial transactions, and more particularly to card readers with power efficient architectures that include a wake-up circuit. configured to be coupled to mobile devices.</div>
<div class="description-paragraph" id="p-0007" num="0006">Description of the Related Art</div>
<div class="description-paragraph" id="p-0008" num="0007">Plastic cards having a magnetic stripe embedded on one side of the card are prevalent in everyday commerce. These cards are used in various transactions such as to pay for purchases by using a credit card, a debit card, or a gasoline charge card. A charge card or a debit card may also be used to transact business with a bank through use of an automated teller machine (ATM). The magnetic stripe card is capable of storing data by modifying the magnetism of magnetic particles embedded in the stripe. The data stored on the magnetic stripe may be sensed or read by swiping the stripe past a read head. The analog waveform obtained by sensing the magnetic stripe must undergo a process known as decoding to obtain the digital information stored in the magnetic stripe of the card.</div>
<div class="description-paragraph" id="p-0009" num="0008">Currently, there are hundreds of magnetic stripe readers/swipers on the market, all of them are at least as long as the credit card itself. These existing readers/swipers can be classified as either platform card readers or plunge card readers. Platform card readers are traditional card swipers with single rails, which allow a card to be held against the base of the reader by the user and moved across the read head of the reader. Plunge swipers guide a card by two sets of rails and a backstop. Once the user has inserted the card against the backstop, the card is read as it is removed from the plunge swipers. Plunge swipers are common on ATMs and other self-pay devices because they are less prone to hacking.</div>
<div class="description-paragraph" id="p-0010" num="0009">Magnetic stripe cards having standard specifications can typically be read by point-of-sale devices at a merchant's location. When the card is swiped through an electronic card reader, such as a platform card reader, at the checkout counter at a merchant's store, the reader will usually use its built-in modem to dial the number of a company that handles credit authentication requests. Once the account is verified and an approval signal will be sent back to the merchant to complete a transaction.</div>
<div class="description-paragraph" id="p-0011" num="0010">Although magnetic stripe cards are universally used by merchants, there is no way for an individual to take advantage of the card to receive a payment from another individual (who is not a merchant) by swiping the card through a simple reader attached to his/her mobile device. For a non-limiting example, one person may owe another person money for a debt, and the conventional way to pay the debt is to provide cash or a check. It would be convenient to be able to use a credit card or a debit card to pay off the debt. In addition, it is advantageous for an individual to make payment to another individual or merchant by swiping his magnetic stripe card through a reader connected to a mobile device.</div>
<div class="description-paragraph" id="p-0012" num="0011">There is a need for improved card readers that are configured to be coupled to mobile devices for conducting financial transactions. There is a further need for cost effective card readers configured to be coupled to mobile devices for the conduct of financial transactions. Yet there is a further need for power efficient card readers with wake-up circuits, with the card reader being configured to be coupled to mobile devices for conducting financial transactions.</div>
<heading id="h-0003">SUMMARY</heading>
<div class="description-paragraph" id="p-0013" num="0012">An object of the present invention is to provide card readers for financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0014" num="0013">Another object of the present invention is to provide card readers for conducting financial transactions using portable electronic devices, such devices including software, firmware, hardware, or a combination thereof that is capable of at least receiving a signal.</div>
<div class="description-paragraph" id="p-0015" num="0014">A further object of the present invention is to provide secure card readers for financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0016" num="0015">A further object of the present invention is to provide card readers with increased efficiency for financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0017" num="0016">Yet another object of the present is to provide card readers that have cost efficient architectures for payments using mobile devices.</div>
<div class="description-paragraph" id="p-0018" num="0017">Another object of the present is to provide low cost card readers for conducting financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0019" num="0018">A further object of the present invention is to provide card readers that require limited power for conducting financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0020" num="0019">Another object of the present invention is to provide card readers with wake up circuits to limit the amount of power required by the card reader for conducting financial transactions using mobile devices.</div>
<div class="description-paragraph" id="p-0021" num="0020">These and other objects of the present invention are achieved in a card reader with a read head positioned in a housing. The read head is configured to be coupled to a mobile device and has a slot for swiping a magnetic stripe of a card. The read head reads data on the magnetic stripe and produces a raw magnetic signal indicative of data stored on the magnetic stripe. A power supply is coupled to wake-up electronics and a microcontroller. An output jack is adapted to be inserted in a port of the mobile device and deliver an output jack signal to the mobile device. The wake-up electronics is powered by a microphone bias of a mobile device.</div>
<description-of-drawings>
<heading id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0022" num="0021"> <figref idrefs="DRAWINGS">FIG. 1</figref> depicts an example of a system diagram to support financial transaction between a payer and a payee through a miniaturized card reader connected to a mobile device.</div>
<div class="description-paragraph" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 2</figref> depicts an example of an external structural diagram of a miniaturized card reader.</div>
<div class="description-paragraph" id="p-0024" num="0023"> <figref idrefs="DRAWINGS">FIGS. 3(<i>a</i>)-(<i>b</i>)</figref> depict examples of actual card reader with miniaturized design.</div>
<div class="description-paragraph" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIGS. 4(<i>a</i>)-(<i>b</i>)</figref> depict examples of alignment between read head of the card reader and magnetic stripe of card being swiped.</div>
<div class="description-paragraph" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIG. 5</figref> depicts an example of a TRS connector as a part of card reader.</div>
<div class="description-paragraph" id="p-0027" num="0026"> <figref idrefs="DRAWINGS">FIGS. 6(<i>a</i>)-(<i>c</i>)</figref> depict examples of internal structures of a miniaturized card reader.</div>
<div class="description-paragraph" id="p-0028" num="0027"> <figref idrefs="DRAWINGS">FIGS. 7(<i>a</i>)-(<i>b</i>)</figref> depict examples of waveforms of data read from one track of the magnetic stripe by read head when the card is swiped through the slot of the card reader in the forward and reverse directions, respectively.</div>
<div class="description-paragraph" id="p-0029" num="0028"> <figref idrefs="DRAWINGS">FIG. 8</figref> depicts a flowchart of an example of a process to support swiping of a card with a magnetic stripe through a miniaturized portable card reader.</div>
<div class="description-paragraph" id="p-0030" num="0029"> <figref idrefs="DRAWINGS">FIG. 9</figref> depicts an example of schematic diagram of passive ID circuitry embedded in the card reader.</div>
<div class="description-paragraph" id="p-0031" num="0030"> <figref idrefs="DRAWINGS">FIG. 10</figref> depicts an example of schematic diagram that contains additional components of passive ID circuitry <b>22</b> that contribute to the user experience.</div>
<div class="description-paragraph" id="p-0032" num="0031"> <figref idrefs="DRAWINGS">FIG. 11</figref> depicts an example of an implementation for passive ID circuitry <b>22</b> depicted in <figref idrefs="DRAWINGS">FIG. 10</figref>.</div>
<div class="description-paragraph" id="p-0033" num="0032"> <figref idrefs="DRAWINGS">FIG. 12</figref> depicts a flowchart of an example of a process to deliver the unique ID to mobile device via the passive ID circuitry.</div>
<div class="description-paragraph" id="p-0034" num="0033"> <figref idrefs="DRAWINGS">FIG. 13</figref> depicts an example of additional encryption and/or decryption systems included in the passive ID circuitry for encrypting and decrypting of unique ID of card reader.</div>
<div class="description-paragraph" id="p-0035" num="0034"> <figref idrefs="DRAWINGS">FIG. 14</figref> depicts a flowchart of an example of a process to support decoding of incoming signals from swiping of a card with a magnetic stripe through a miniaturized portable card reader.</div>
<div class="description-paragraph" id="p-0036" num="0035"> <figref idrefs="DRAWINGS">FIG. 15</figref> depicts a flowchart of an example of a process to support financial transaction between a payer and a payee through a miniaturized card reader connected to a mobile device.</div>
<div class="description-paragraph" id="p-0037" num="0036"> <figref idrefs="DRAWINGS">FIGS. 16(<i>a</i>)-(<i>f</i>)</figref> depict screenshots of an example of a financial transaction between a purchaser and a merchant through a miniaturized card reader connected to a mobile device.</div>
<div class="description-paragraph" id="p-0038" num="0037"> <figref idrefs="DRAWINGS">FIG. 17</figref> illustrates an integrated read head/mobile device embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0039" num="0038"> <figref idrefs="DRAWINGS">FIG. 18</figref> illustrates one embodiment of a method of making payments using a mobile device where a tab is opened by a first party and is selected by a qualified second party at any geographic location of the first party's mobile device.</div>
<div class="description-paragraph" id="p-0040" num="0039"> <figref idrefs="DRAWINGS">FIG. 19</figref> illustrates an overall system architecture of a payment service that can be used in various embodiments of the present invention.</div>
<div class="description-paragraph" id="p-0041" num="0040"> <figref idrefs="DRAWINGS">FIG. 20</figref> illustrates an embodiment of the present invention for a method of conducing on-line purchases using a mobile device.</div>
<div class="description-paragraph" id="p-0042" num="0041"> <figref idrefs="DRAWINGS">FIG. 21</figref> illustrates an embodiment of the present invention where a method is provided for transferring funds to and/or from a first party's financial account, and the first party's financial account information is entered with a single initial entry to the payment service and for future payments the information need not be re-entered.</div>
<div class="description-paragraph" id="p-0043" num="0042"> <figref idrefs="DRAWINGS">FIG. 22</figref> illustrates an embodiment of the present invention with a spring member attached to the read head to provide for increased accuracy and read head adjustment</div>
<div class="description-paragraph" id="p-0044" num="0043"> <figref idrefs="DRAWINGS">FIG. 23</figref> illustrates one embodiment of the present invention with a card reader, mobile device and payment system.</div>
<div class="description-paragraph" id="p-0045" num="0044"> <figref idrefs="DRAWINGS">FIG. 24</figref> illustrates one embodiment of the present invention where the output from a read of the track goes to an amplifier, differentiator, into a comparator and then into a microcontroller,</div>
<div class="description-paragraph" id="p-0046" num="0045"> <figref idrefs="DRAWINGS">FIG. 25</figref> illustrates one embodiment of the present invention where a card reader accepts a raw signal from a read head and processes the financial transaction card read on the fly.</div>
<div class="description-paragraph" id="p-0047" num="0046"> <figref idrefs="DRAWINGS">FIG. 26</figref> illustrates one embodiment of the present invention where the slot of a read head has directionality.</div>
<div class="description-paragraph" id="p-0048" num="0047"> <figref idrefs="DRAWINGS">FIG. 27</figref> illustrates an embodiment of the present invention where the read head includes a power source.</div>
<div class="description-paragraph" id="p-0049" num="0048"> <figref idrefs="DRAWINGS">FIG. 28</figref> is a schematic view, according to another embodiment of the present invention, showing a payment device-not-present transaction.</div>
<div class="description-paragraph" id="p-0050" num="0049"> <figref idrefs="DRAWINGS">FIG. 29</figref> is a schematic view illustrating a payment device present transaction according to one embodiment of the present invention;</div>
<div class="description-paragraph" id="p-0051" num="0050"> <figref idrefs="DRAWINGS">FIG. 30</figref> is a schematic view illustrating a security device-present transaction according to one embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0052" num="0051"> <figref idrefs="DRAWINGS">FIG. 31</figref> is a perspective view of a card reader in one embodiment of the present invention, with a slot with a varying width, and one end of the slot is broader than the opposite end, and the exterior housing including indicia for directionality.</div>
<div class="description-paragraph" id="p-0053" num="0052"> <figref idrefs="DRAWINGS">FIG. 32</figref> illustrates an interior review of a card reader of the present invention, showing the read head on one side, and electronics and circuitry on an opposite side.</div>
<div class="description-paragraph" id="p-0054" num="0053"> <figref idrefs="DRAWINGS">FIG. 33</figref> illustrates an embodiment of device electronics for the card reader in one embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0055" num="0054"> <figref idrefs="DRAWINGS">FIG. 34</figref> illustrates an embodiment of the <figref idrefs="DRAWINGS">FIG. 33</figref> device electronics with an analog to digital front-end and a microcontroller.</div>
<div class="description-paragraph" id="p-0056" num="0055"> <figref idrefs="DRAWINGS">FIG. 35</figref> illustrates an embodiment of the present invention where an analog to digital front end can receive a raw magnetic head signal from the magnetic head and convert it into a processed digital signal that the microcontroller, producing a signal with magnetic read head electronics.</div>
<div class="description-paragraph" id="p-0057" num="0056"> <figref idrefs="DRAWINGS">FIG. 36</figref> illustrates an amplifier or amplifier/filter that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0058" num="0057"> <figref idrefs="DRAWINGS">FIG. 37</figref> illustrates a differentiator that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0059" num="0058"> <figref idrefs="DRAWINGS">FIG. 38</figref> illustrates a comparator <b>536</b> that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0060" num="0059"> <figref idrefs="DRAWINGS">FIG. 39</figref> illustrates wake-up electronics that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0061" num="0060"> <figref idrefs="DRAWINGS">FIGS. 40 and 41</figref> illustrates a power source that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0062" num="0061"> <figref idrefs="DRAWINGS">FIG. 42</figref> illustrates transmission electronics that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0063" num="0062"> <figref idrefs="DRAWINGS">FIG. 43</figref> illustrates a card in a slot of a read head in an embodiment of the invention, illustrates how the card can rotate at a angle away from a bottom of the slot, and also exit at an angle relative to the slot.</div>
<div class="description-paragraph" id="p-0064" num="0063"> <figref idrefs="DRAWINGS">FIG. 44</figref> illustrates an embodiment of the present invention with the read head positioned offset from a center of an associated housing, movement of a card through a slot an angle relative to the card reader and a coupled mobile device.</div>
<div class="description-paragraph" id="p-0065" num="0064"> <figref idrefs="DRAWINGS">FIG. 45</figref> illustrates an asymmetric spring that can be used in an embodiment of the present invention.</div>
<div class="description-paragraph" id="p-0066" num="0065"> <figref idrefs="DRAWINGS">FIG. 46</figref> illustrates a flow of a card read with a card reader of the present invention, its' interaction with a mobile device and a back end of a payment system.</div>
</description-of-drawings>
<heading id="h-0005">DETAILED DESCRIPTION</heading>
<div class="description-paragraph" id="p-0067" num="0066">The approach is illustrated by way of example and not by way of limitation in the figures of the accompanying drawings in which like references indicate similar elements. It should be noted that references to “an” or “one” or “some” embodiment(s) in this disclosure are not necessarily to the same embodiment, and such references mean at least one.</div>
<div class="description-paragraph" id="p-0068" num="0067"> <figref idrefs="DRAWINGS">FIG. 1</figref> depicts an example of a system diagram to support financial transaction between a payer and a payee through a miniaturized card reader connected to a mobile device. Although the diagrams depict components as functionally separate, such depiction is merely for illustrative purposes. It will be apparent that the components portrayed in this figure can be arbitrarily combined or divided into separate software, firmware and/or hardware components. Furthermore, it will also be apparent that such components, regardless of how they are combined or divided, can execute on the same host or multiple hosts, and wherein multiple hosts can be connected by one or more networks.</div>
<div class="description-paragraph" id="p-0069" num="0068">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, the system includes a mobile device <b>100</b>, a miniaturized card reader <b>10</b> connected to mobile device <b>100</b>, a decoding engine <b>110</b>, a user interaction engine <b>120</b>, and a transaction engine <b>130</b>, all running on mobile device <b>100</b>. Additionally, the system may also include one or more of user database <b>140</b>, product or service database <b>150</b>, and transaction database <b>160</b>, all coupled to the transaction engine <b>130</b>.</div>
<div class="description-paragraph" id="p-0070" num="0069">As used herein, the term engine refers to software, firmware, hardware, or other component that is used to effectuate a purpose. The engine will typically include software instructions that are stored in non-volatile memory (also referred to as secondary memory). When the software instructions are executed, at least a subset of the software instructions is loaded into memory (also referred to as primary memory) by a processor. The processor then executes the software instructions in memory. The processor may be a shared processor, a dedicated processor, or a combination of shared or dedicated processors. A typical program will include calls to hardware components (such as I/O devices), which typically requires the execution of drivers. The drivers may or may not be considered part of the engine, but the distinction is not critical.</div>
<div class="description-paragraph" id="p-0071" num="0070">As used herein, the term database is used broadly to include any known or convenient means for storing data, whether centralized or distributed, relational or otherwise.</div>
<div class="description-paragraph" id="p-0072" num="0071">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, mobile device <b>100</b> to which the portable card reader <b>10</b> is connected to can be but is not limited to, a cell phone, such as Apple's iPhone, other portable electronic devices, such as Apple's iPod Touches, Apple's iPads, and mobile devices based on Google's Android operating system, and any other portable electronic device that includes software, firmware, hardware, or a combination thereof that is capable of at least receiving the signal, decoding if needed, exchanging information with a transaction server to verify the buyer and/or seller's account information, conducting the transaction, and generating a receipt. Typical components of mobile device <b>100</b> may include but are not limited to persistent memories like flash ROM, random access memory like SRAM, a camera, a battery, LCD driver, a display, a cellular antenna, a speaker, a Bluetooth circuit, and WIFI circuitry, where the persistent memory may contain programs, applications, and/or an operating system for the mobile device.</div>
<div class="description-paragraph" id="p-0073" num="0072">In one embodiment of the present invention a system is provided with transaction engine <b>130</b> running on mobile device <b>100</b>. In response to a financial transaction between a buyer and a seller, the mobile device <b>100</b> accepts information selected including but not limited to information from financial transaction or information pertaining to financial transaction card used by the buyer in the transaction. Additionally, a financial transaction device can be utilized. Non-limiting examples of financial transaction devices include but are not limited to a, wristband, RFID chip, cell phone, biometric marker and the like. At least a portion of this information is communicated with a third party financial institution or payment network to authorize the transaction. The buyer receives confirmation of the payment. Payment confirmation can be in real time by a payment service.</div>
<div class="description-paragraph" id="p-0074" num="0073">Payment confirmation can be made with a communication channel of the buyer's choice. As non-limiting examples, confirmation of payment can be an electronic notification in the form selected from at least one of, email, SMS message, tweet (message delivered via Twitter), instant message, communication within a social network and the like.</div>
<div class="description-paragraph" id="p-0075" num="0074">In response to the transaction, a confirmation is made that the buyer is authorized to use the financial transaction card in order to prevent fraud. There can also be a confirmation that there are sufficient funds for the purchase made by the buyer.</div>
<div class="description-paragraph" id="p-0076" num="0075">In one embodiment, it is determined that that the buyer, authorized to use the financial transaction card, is present with the seller at the time of the financial transaction.</div>
<div class="description-paragraph" id="h-0006" num="0000">Miniaturized Card Reader</div>
<div class="description-paragraph" id="p-0077" num="0076">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, miniaturized card reader <b>10</b> is configured to read data encoded in a magnetic strip of a card being swiped by a buyer and send a signal that corresponds to the data read to mobile device <b>100</b> via a signal plug <b>18</b>. This signal is at least partially if not fully decoded in the mobile device <b>100</b>.</div>
<div class="description-paragraph" id="p-0078" num="0077">The size of card reader <b>10</b> is miniaturized to be portable for connection with mobile device <b>100</b>. For a non-limiting example, the size of card reader <b>10</b> can be miniaturized to an overall length of less than 1.5″. In addition, the miniaturized card reader <b>10</b> is also designed to reliably read the card with minimum error via a single swipe by counteracting vendor specific filtering done by mobile device <b>100</b>. Note that this broad overview is meant to be non-limiting as components to this process are represented in different embodiments. For instance the decoding engine <b>110</b> can be embedded in the card reader <b>10</b> as shown in <figref idrefs="DRAWINGS">FIG. 13</figref> as the decoding system <b>42</b>. <figref idrefs="DRAWINGS">FIG. 2</figref> depicts an example of an external structural diagram of miniaturized card reader <b>10</b>. Although the diagrams depict components as functionally separate, such depiction is merely for illustrative purposes. It will be apparent that the components portrayed in this figure can be arbitrarily combined or divided into separate software, firmware and/or hardware components.</div>
<div class="description-paragraph" id="p-0079" num="0078">In the example of <figref idrefs="DRAWINGS">FIG. 2</figref>, miniaturized card reader <b>10</b> is shown to comprise at least a housing <b>12</b> having a slot <b>14</b>, a read head <b>16</b> embedded on a wall of slot <b>14</b>, a signal plug <b>18</b> extending out from the housing <b>12</b>, and an optional passive ID circuit <b>22</b>.</div>
<div class="description-paragraph" id="p-0080" num="0079"> <figref idrefs="DRAWINGS">FIG. 3(<i>a</i>)</figref> depicts an example of an actual card reader with miniaturized design and <figref idrefs="DRAWINGS">FIG. 3(<i>b</i>)</figref> depicts other examples of miniaturized card reader with width around 0.5″.</div>
<div class="description-paragraph" id="p-0081" num="0080">The card reader <b>10</b> includes the slot <b>14</b> and is miniaturized relative to the size of the mobile device <b>100</b>. In some embodiments, the housing <b>12</b> is not included.</div>
<div class="description-paragraph" id="p-0082" num="0081">In one embodiment, the slot <b>14</b> is configured to maintain contact between the read head <b>16</b>, and the magnetic stripe of the financial transaction card during a swipe. The signal is decoded in the mobile device <b>100</b>. The decoding includes determining pulses in the signal and converting at least some of the pulses to characters. In one embodiment, the slot <b>14</b> has a width of no greater than 1 mm. The width of the slot <b>14</b> is sufficient to enable a successful swiping of the financial transaction card, while producing the signal. It is sized to enable the successful swipe without creating sufficient torque between the signal plug <b>18</b> or output jack and the read head <b>16</b> or at the mobile device <b>100</b> to cause damage due to excessive torque. If the slot <b>14</b> is too wide, then it is more difficult to achieve a successful swipe that produce the signal. If there is a miss, or insufficient data is generated, then the resulting signal is not competent. If the slot <b>14</b> is too narrow, then the financial transaction card can not be swiped. The size of the slot <b>14</b> is selected to reduce torque as discussed above. Additionally, in one embodiment, the output jack <b>18</b> is at least partially if not fully rotatable relative to the port it is coupled to in the mobile device <b>100</b>. The decoding includes error checking. In one embodiment, the decoding includes detecting that data in the signal is from the financial transaction card, seeing the beginning and ending sentinels and reconstructing data in the signal from a pattern of pulses.</div>
<div class="description-paragraph" id="p-0083" num="0082">In one embodiment of the present invention, the mobile device <b>100</b> has an audio input port, a line input port a USB port and others. In one embodiment, a sampling rate of the signal at the audio input port or a line input port of the mobile device is at least 15 kHZ. In various other embodiments, the sample rate of the signal at the audio input port or line import port can be, least 20 kHz; at least 25 kHz, at least 30 kHz, at least 35 kHz or at least 40 kHz.</div>
<div class="description-paragraph" id="p-0084" num="0083">In one embodiment, the slot <b>14</b> is oriented and sized to reduce torque applied on the read head <b>10</b> when the financial transaction card is swiped through the slot <b>14</b> in order to maintain accuracy and reliability of the data read by the read head <b>10</b>.</div>
<div class="description-paragraph" id="p-0085" num="0084">In the example of <figref idrefs="DRAWINGS">FIG. 2</figref>, housing <b>12</b> of card reader <b>10</b> is designed to be asymmetrical with respect to slot <b>14</b>, with texture such as logo on one side of the housing that can be felt and recognized by a user with a touch of a finger. For correct swiping of the card, the texture side of housing <b>12</b> should match with the texture (front) side of the card, so that a user can easily identify the right side of the reader to swipe the card through slot <b>14</b> without actually looking at the reader or card. Even a blind person is able to swipe the card correctly by matching the texture side of the reader with the texture side of the card.</div>
<div class="description-paragraph" id="p-0086" num="0085">In the example of <figref idrefs="DRAWINGS">FIG. 2</figref>, the slot <b>14</b> is wide enough and deep enough to accept a card having a magnetic stripe so that the stripe will fit within the slot <b>14</b>. More importantly, the slot <b>14</b> is configured to reduce the torque applied on the reader <b>10</b> when the card is swiped through slot <b>14</b> in order to maintain accuracy and reliability of the data read by read head <b>16</b>. Since the size of card reader <b>10</b> is miniaturized, slot <b>14</b> also has a length that is significantly less than the length of the card to be inserted into the slot <b>14</b>.</div>
<div class="description-paragraph" id="p-0087" num="0086">To correctly read the data on the magnetic stripe of the card, the read head <b>16</b> must maintain contact with the stripe as the card moves past slot <b>14</b>. If the card rocks during the swipe, the alignment of the head <b>12</b> with the stripe may be compromised. As the length of the slot <b>14</b>, i.e., the card path through which the card swiped though slot <b>14</b>, is shortened, rocking and head alignment may become significant issues. As shown in <figref idrefs="DRAWINGS">FIG. 4(<i>a</i>)</figref>, if the magnetic stripe card is swiped through without the base of the card resting against the flat bottom piece, the magnetic stripe will not align with the read head <b>16</b> when the card is swiped through slot <b>14</b> having a flat base <b>15</b>.</div>
<div class="description-paragraph" id="p-0088" num="0087">In some embodiments, the base <b>15</b> of slot <b>14</b> can be changed from flat to a curved base with a radius in order to increase contact between the read head <b>16</b> and the magnetic stripe to address the rocking problem. As shown in <figref idrefs="DRAWINGS">FIG. 4(<i>b</i>)</figref>, the read head <b>16</b> can maintain contact with the magnetic stripe, even with some additional error due to the gradation of contact introduced by the curved base <b>15</b>.</div>
<div class="description-paragraph" id="p-0089" num="0088"> <figref idrefs="DRAWINGS">FIG. 5</figref> depicts an example of signal plug <b>18</b> as part of card reader <b>10</b>. Here, signal plug <b>18</b> can be but is not limited to a TRS (tip, ring, sleeve) connector also known as an audio plug, phone plug, plug, stereo plug, mini-plug, or a mini-stereo audio connector. The signal plug <b>18</b> may be formed of different sizes such as miniaturized versions that are 3.5 mm or 2.5 mm.</div>
<div class="description-paragraph" id="p-0090" num="0089">In some embodiments, signal plug <b>18</b> may be retractable within the housing <b>12</b>. In some embodiments, signal plug <b>18</b> is configured to extend beyond housing <b>12</b> of the reader in order to accommodate connection with mobile devices <b>100</b> having cases or having a recessed plug-in socket, wherein the socket can be but is not limited to a microphone input socket or a line in audio input of the mobile device.</div>
<div class="description-paragraph" id="p-0091" num="0090">In some embodiments, housing <b>12</b> of card reader <b>10</b> is made of non-conductive material such as plastic so that the reader will not interfere with the function of mobile device <b>100</b> it is connected with. Such choice of material is important since the outer case of certain mobile devices, such as iPhone 4, is conductive and serves as an antenna for the device, which function could potentially be interfered with if the metal case of the device gets in touch with the housing of a card reader made of conductive material.</div>
<div class="description-paragraph" id="p-0092" num="0091"> <figref idrefs="DRAWINGS">FIG. 6(<i>a</i>)</figref> depicts an example of an internal structural diagram of a miniaturized card reader. Although the diagrams depict components as functionally separate, such depiction is merely for illustrative purposes. It will be apparent that the components portrayed in this figure can be arbitrarily combined or divided into separate software, firmware and/or hardware components.</div>
<div class="description-paragraph" id="p-0093" num="0092">In the example of <figref idrefs="DRAWINGS">FIG. 6(<i>a</i>)</figref>, the internal structure inside housing <b>12</b> of card reader <b>10</b> is shown to comprise at least a read head <b>16</b> with embedded circuitry, and a spring structure <b>20</b> to support read head <b>16</b>. <figref idrefs="DRAWINGS">FIG. 6(<i>b</i>)</figref> depicts an example of an internal structure an actual miniaturized card reader. <figref idrefs="DRAWINGS">FIG. 6(<i>c</i>)</figref> depicts an example of separated components of read head <b>16</b> and spring structure <b>20</b> used in the actual miniaturized card reader.</div>
<div class="description-paragraph" id="p-0094" num="0093">In the example of <figref idrefs="DRAWINGS">FIGS. 6(<i>a</i>)-(<i>c</i>)</figref>, read head <b>16</b>, which for a non-limiting example, can be an inductive pickup head, detects and provides data stored in the magnetic stripe of a card to a connected mobile device <b>100</b>. More specifically, as the magnetic stripe of a card is swiped through slot <b>14</b> and in contact with read head <b>16</b>, the card reader device <b>10</b> reads one or more tracks of data or information stored in the magnetic stripe of the card via the detection circuitry embedded inside the read head. Here, data stored in the magnetic stripe may be in the form of magnetic transitions as described in the ISO 7811 standards. As the card moves past the read head <b>16</b>, magnetic transitions representing data induce a voltage or waveform in a coil (not shown) of read head <b>16</b> due to such relative movement between read head <b>16</b> and the stripe (called the Hall Effect), wherein a resistor (not shown) inside read head <b>16</b> sets the amplitude of the waveform. This waveform is sent via the signal plug <b>18</b> into the socket which is registered by the microphone of the mobile device <b>100</b> connected with card reader <b>10</b>.</div>
<div class="description-paragraph" id="p-0095" num="0094">In some embodiments, read head <b>16</b> in card reader is capable of reading only one track of data (either track <b>1</b> or <b>2</b>, but not both) from the magnetic stripe in order to reduce the size and structural complexity of compact read head <b>16</b> as only one pin needs to be included in the read head. <figref idrefs="DRAWINGS">FIGS. 7(<i>a</i>)-(<i>b</i>)</figref> depict examples of waveforms of data read from track <b>1</b> (instead of both tracks <b>1</b> and <b>2</b> as by a traditional read head) of the magnetic stripe by read head <b>16</b> when the card is swiped through slot <b>14</b> in the forward and reverse directions, respectively.</div>
<div class="description-paragraph" id="p-0096" num="0095">In some embodiments, the size or thickness of the housing <b>12</b> of card reader <b>10</b> is configured to be narrow enough to accommodate only a single read head <b>16</b>. Such design is intended to be tampering-proof so that even if the housing <b>12</b> is tampered with, no additional circuitry can be added to the card reader <b>10</b> and such tampering will render the card reader non-functional.</div>
<div class="description-paragraph" id="p-0097" num="0096">In the example of <figref idrefs="DRAWINGS">FIGS. 6(<i>a</i>)-(<i>c</i>)</figref>, spring structure <b>20</b> is a flexible spring mounting to read head <b>16</b> without a screw, causing the read head to be suspended to housing <b>12</b> of card reader <b>10</b>. Here, spring <b>20</b> can either be connected to housing <b>12</b> via screws or welded to plastic housing <b>12</b> without using any screws. As the card moves past the read-head <b>16</b> on the miniaturized card reader, any card bending or misalignment may cause the read head to lose contact with the magnetic stripe. Spring <b>20</b> allows suspended read head <b>16</b> to swivel while maintaining contact pressure to track the stripe of the card being swiped. Spring <b>20</b> is designed to be sufficiently small to fit within the miniaturized card reader <b>10</b>, yet powerful enough to maintain good contact during the stripe. Unlike traditional spring structures, spring <b>20</b> positions the supports for read head <b>20</b> inside the overall form of the spring, which allows the spring to flex without having to make one support moveable.</div>
<div class="description-paragraph" id="p-0098" num="0097"> <figref idrefs="DRAWINGS">FIG. 8</figref> depicts a flowchart of an example of a process to support swiping of a card with a magnetic stripe through a miniaturized portable card reader. Although this figure depicts functional steps in a particular order for purposes of illustration, the process is not limited to any particular order or arrangement of steps. One skilled in the relevant art will appreciate that the various steps portrayed in this figure could be omitted, rearranged, combined and/or adapted in various ways.</div>
<div class="description-paragraph" id="p-0099" num="0098">In the example of <figref idrefs="DRAWINGS">FIG. 8</figref>, the flowchart <b>800</b> starts at block <b>802</b> where a miniaturized card reader is structured to provide sufficient contact between a read head and the magnetic stripe during a swipe of a card. The flowchart <b>800</b> continues to block <b>804</b> where a card with a magnetic stripe is swiped through a slot of the miniaturized card reader. The flowchart <b>800</b> continues to block <b>806</b> where the read head reliably reads data stored in the magnetic stripe and generates an analog signal or waveform indicative of data stored in the magnetic stripe. The flowchart <b>800</b> continues to block <b>808</b> where amplitude of the waveform is set by the circuitry inside the read head. The flowchart <b>800</b> ends at block <b>810</b> where the set waveform is provided to a mobile device <b>100</b> connected with the miniaturized card reader via the signal plug <b>18</b>.</div>
<div class="description-paragraph" id="h-0007" num="0000">Passive ID Circuit</div>
<div class="description-paragraph" id="p-0100" num="0099">In some embodiments, housing <b>12</b> of card reader <b>10</b> may further encapsulate a passive ID circuitry <b>22</b> powered by the mobile device <b>100</b> through signal plug <b>18</b>, wherein passive ID circuitry <b>22</b> delivers an unique ID of the card reader to mobile device <b>100</b> only once upon the card reader being connected to (and powered up by) the mobile device. Although both are integrated in the same housing <b>12</b>, passive ID circuitry <b>22</b> functions independently and separately from read head <b>18</b> without interfering with the read head's card swiping functions described above.</div>
<div class="description-paragraph" id="p-0101" num="0100"> <figref idrefs="DRAWINGS">FIG. 9</figref> depicts an example of schematic diagram of passive ID circuitry embedded in the card reader. In the example of <figref idrefs="DRAWINGS">FIG. 9</figref>, passive ID circuitry <b>22</b> may comprise at least five main subsystem/components: unique ID storage <b>24</b>, communication subsystem <b>26</b>, which reads and transmits the unique ID from unique ID storage <b>24</b>, power subsystem <b>28</b>, which provides power to enable communication with mobile device <b>100</b>, a pathway subsystem <b>30</b> to route signals to signal plug <b>18</b> through the circuitry, and a control unit <b>32</b>, to orchestrate the communication between different systems. All of these subsystems can be implemented in hardware, software or a combination thereof. Communication subsystem <b>26</b>, power subsystem <b>28</b>, and read head <b>16</b> share the same signal plug <b>18</b> for connection with the mobile device. The components portrayed in this figure can be arbitrarily combined or divided into separate software, firmware and/or hardware components.</div>
<div class="description-paragraph" id="p-0102" num="0101">In the example of <figref idrefs="DRAWINGS">FIG. 9</figref>, unique ID storage <b>24</b> is memory containing the Unique ID of the card reader. The unique ID storage <b>24</b> can be any persistent memory containing bytes that can be accessed by the communication subsystem <b>26</b>.</div>
<div class="description-paragraph" id="p-0103" num="0102">In the example of <figref idrefs="DRAWINGS">FIG. 9</figref>, the power subsystem <b>28</b> comprises of a modified charge pump, which utilizes a digital circuit to artificially raise the voltage of a power source to a higher level. Normal charge pump operation requires large current which is then fed into several capacitors, and switching logic switches the capacitors between series and parallel configurations. In the example of <figref idrefs="DRAWINGS">FIG. 10</figref>, the power source is a bias voltage provided by the mobile device meant for detection of a connected component. It is nominally 1.5V and is supplied through a 2 kΩ resistor, resulting in a maximum current of 750 μA. Details of how the power subsystem <b>28</b> function is described in <figref idrefs="DRAWINGS">FIG. 11</figref>.</div>
<div class="description-paragraph" id="p-0104" num="0103">In standard operation the pathway subsystem <b>30</b> is configured to direct the mobile device's <b>100</b> bias voltage to the power subsystem <b>28</b>. After the power subsystem converts the bias voltage to a system voltage, the control unit <b>32</b> is able to operate. Control unit <b>32</b> configures the pathway subsystem <b>30</b> to allow the communication subsystem <b>26</b> access to the mobile device <b>100</b>. The communication subsystem <b>26</b> relays the unique ID from the unique ID storage <b>24</b>. The control unit <b>32</b> then configures the pathway subsystem <b>30</b> to allow the card reader circuit <b>16</b> access to the mobile device <b>100</b>.</div>
<div class="description-paragraph" id="p-0105" num="0104"> <figref idrefs="DRAWINGS">FIG. 10</figref> depicts an example of schematic diagram that contains additional components of passive ID circuitry <b>22</b> that contribute to the user experience. These additional systems prevent the mobile device <b>100</b> from perceiving that the card reader <b>10</b> has been disconnected during power cycles. These additional systems also ensure that the unique ID sent from unique ID storage <b>24</b> is sent as specified by the designer. This extra feature set comprises of a discharge subsystem <b>34</b> to force the device to power cycle, a fake load <b>36</b> so the mobile device <b>100</b> does not perceive a disconnect, and a monitor system <b>38</b> to manage card reader <b>10</b> behavior between power cycles.</div>
<div class="description-paragraph" id="p-0106" num="0105">In the example of <figref idrefs="DRAWINGS">FIG. 10</figref>, communication subsystem <b>26</b> comprises a signal driver connected with control unit <b>32</b> and unique ID storage <b>24</b>. In a non-limiting embodiment of a system which sends an ID only once to a mobile device <b>100</b>, after the control unit <b>32</b> boots up, communication subsystem <b>26</b> will check a status bit in the monitor subsystem <b>38</b>. The first time this process occurs, the status bit will be not set. When the status bit is not set the ID is sent immediately. <figref idrefs="DRAWINGS">FIG. 12</figref> contains a detailed flowchart of a non-limiting example of this process. In one embodiment the control unit <b>32</b> will write to the status bit in monitor subsystem <b>38</b>. It will then use the discharge system <b>34</b> to reset itself. During this time the pathway subsystem <b>30</b> will be configured to direct the signal path to the fake load preventing the mobile device <b>100</b> from detecting a disconnect with the card reader <b>10</b>. Once the power subsystem <b>28</b> has completed its power cycle, the control unit <b>32</b> will read the status bit. Upon seeing that the status bit is cleared it will configure the pathway subsystem <b>30</b> to direct the signal path to the card reader circuit <b>16</b>. The control unit <b>32</b> will then put the system into an extremely low power state (from here referred to as a sleep state). Only the monitoring subsystem <b>38</b> will remain active. The monitor subsystem <b>38</b> will wake the system from the sleep state at some time (time depending on implementation) before a power cycle. The control unit <b>32</b> will notified of the system awakening by the monitoring subsystem <b>38</b>. The control unit <b>32</b> will then set the status bit on the monitor subsystem <b>38</b> only if there is a voltage detected on the fake load indicating the reader is still connected. The control unit <b>32</b> will then force a power cycle.</div>
<div class="description-paragraph" id="p-0107" num="0106"> <figref idrefs="DRAWINGS">FIG. 11</figref> depicts an example of an implementation for passive ID circuitry <b>22</b> depicted in <figref idrefs="DRAWINGS">FIG. 10</figref>. In some embodiments, power subsystem <b>28</b> has multiple capacitors in parallel. A voltage breaker (e.g., zener diode etc) and a latch are used to trigger the transition between parallel and series configurations. Once the latch is flipped, power subsystem <b>28</b> will remain in series configuration until the combined voltage drops bellow the CMOS trigger gate voltage at about 0.4V. At this time the passive ID circuitry <b>22</b> will reset and the unique ID delivery process will begin again</div>
<div class="description-paragraph" id="p-0108" num="0107">In the example of <figref idrefs="DRAWINGS">FIG. 11</figref>, pathway subsystem <b>30</b> comprises a plurality of latches controlled by control unit <b>32</b> for switching among various subsystems of passive ID circuitry <b>22</b>. When passive ID circuitry <b>22</b> is in operation, the default configuration allocates the output signal through signal plug <b>18</b> to modified charge pump of power subsystem <b>28</b>. After the latch to turn off modified charge pump <b>28</b> is triggered, control unit <b>32</b> will route signal plug <b>18</b> from read head <b>16</b> to communication subsystem <b>26</b> and transmit the unique ID through signal plug <b>18</b> after checking the status bit in unique ID storage <b>24</b>. Pathway subsystem <b>30</b> will then write to the status bit in unique ID storage <b>24</b> and discharge the power subsystem <b>28</b>. <figref idrefs="DRAWINGS">FIG. 12</figref> depicts a flowchart of an example of a process to deliver the unique ID to mobile device <b>100</b> via the passive ID circuitry <b>22</b>.</div>
<div class="description-paragraph" id="p-0109" num="0108">In some embodiments, passive ID circuitry <b>22</b> may further include additional encryption and/or decryption systems as shown in <figref idrefs="DRAWINGS">FIG. 13</figref> for encrypting and decrypting of unique ID of card reader <b>10</b>. In the example of <figref idrefs="DRAWINGS">FIG. 13</figref>, the decoding system <b>42</b> and encryption system <b>40</b> can both use the control unit <b>32</b> from the passive ID circuitry <b>22</b> to communicate with the mobile device <b>100</b> over the communication subsystem <b>26</b>.</div>
<div class="description-paragraph" id="h-0008" num="0000">Signal Decoding</div>
<div class="description-paragraph" id="p-0110" num="0109">Once card reader <b>10</b> provides the set waveform to the attached mobile device <b>100</b>, the incoming signals (waveform) may be amplified, sampled, and converted to a stream of digital values or samples by decoding engine <b>110</b> running via a microprocessor inside the mobile device. Here, decoding engine <b>110</b> may comprise a pipeline of software decoding processes (decoders) to decode and process the incoming signals as described below, where each software process in this pipeline can be swapped out and replaced to accommodate various densities of track data read in order to reduce card swipe error rate. The incoming signals may be of low quality due to one or more of: low quality of data read from a single and/or low density track of a magnetic stripe of the card, sampling speed limitations of the microphone input socket of the mobile device, and noise introduced into the mobile device <b>100</b> from card reader <b>10</b>. <figref idrefs="DRAWINGS">FIG. 14</figref> depicts a flowchart of an example of a process to support decoding of incoming signals from swiping of a card with a magnetic stripe through a miniaturized portable card reader.</div>
<div class="description-paragraph" id="p-0111" num="0110">In the example of <figref idrefs="DRAWINGS">FIG. 14</figref>, the flowchart <b>1400</b> starts at block <b>1402</b> where decoding engine <b>110</b> initializes its internal state by waiting for the system voltage to reach a steady state. Upon initial connection of a card reader, there is usually a burst of signal due to feedback caused by slight impedance mismatches and the presence of non-linear elements like the read head. After at least 3 time constants, the signal is determined to be in a steady state. During such initialization phase, the DC offset of the incoming signals are computed when the mobile device is first connected to the card reader over signal plug <b>18</b>. In some embodiments, initialization goes through at least the following steps:</div>
<div class="description-paragraph" id="p-0112" num="0111">Take one system buffer of audio signal and compute the DC offset of this buffer.</div>
<div class="description-paragraph" id="p-0113" num="0112">Save the computed DC offset.</div>
<div class="description-paragraph" id="p-0114" num="0113">Compute the average of the last three DC offsets.</div>
<div class="description-paragraph" id="p-0115" num="0114">Compute the variance of the current DC offset from the average computed in step <b>3</b>.</div>
<div class="description-paragraph" id="p-0116" num="0115">The following values presented were found to be optimum for performance in the decoding system. In the spirit of full disclosure they have been provided here to allow someone trained in the arts to be able to replicate this process. It is fully realized that many other values can be used here and depending on hardware implementation. The values here are meant to be non-limiting. If the variance computed in step <b>4</b> is less than the variance threshold, 0.06% of full scale or less than the offset percentage, 10% of the offset average computed in step <b>3</b>, and the DC offset computed in step <b>1</b> is less than the noise ceiling, 3% of full scale, of the mobile device <b>100</b>. After initialization is complete, decoding engine <b>110</b> can proceed to process the incoming signals to detect the swipe of the card. Otherwise, Steps <b>1</b>-<b>4</b> need to be repeated.</div>
<div class="description-paragraph" id="p-0117" num="0116">The flowchart <b>1400</b> continues to block <b>1404</b> where decoding engine <b>110</b> detects the card swipe once the incoming signals are in a steady state. This signal detection phase processes the incoming signals in steady state in order to detect the presence of a swipe of a card through the card reader. The signal detection phase is a light-weight procedure that operates at near real time. It parses the incoming signals quickly and stitches multiple system buffers of signals together to form a signal of interest. In some embodiments, the signal detection process goes through at least the following steps:</div>
<div class="description-paragraph" id="p-0118" num="0117">Apply a software upscale of system buffers of the incoming signals.</div>
<div class="description-paragraph" id="p-0119" num="0118">Begin taking buffers of incoming signals and look for points that exceed a minimum signal amplitude threshold, which is a hardware-based parameterization found empirically.</div>
<div class="description-paragraph" id="p-0120" num="0119">Set a flag that triggers the detection of a swipe once a single point that exceeds the threshold is detected.</div>
<div class="description-paragraph" id="p-0121" num="0120">Once the flag triggered, the incoming signal is appended to a larger buffer until the signal drops below a minimum signal amplitude threshold for a certain period of time, e.g., 10 ms.</div>
<div class="description-paragraph" id="p-0122" num="0121">Trim the last 10 ms of data to reduce the amount of signal data to be processed later.</div>
<div class="description-paragraph" id="p-0123" num="0122">Check to see if at least a certain number of samples have been collected in the buffer to make sure that there are enough information for later decoding. This number is parameterized based on the hardware of the mobile device used.</div>
<div class="description-paragraph" id="p-0124" num="0123">Alternatively, a hardware independent swipe detection process can be utilized to capture the signal of interest via Fast Fourier Transform (FFT), while trimming the front and back of the signal. Such process would include at least the following steps:</div>
<div class="description-paragraph" id="p-0125" num="0124">Retrieve system buffers of incoming signals and keep a certain number of buffers of history of the signals.</div>
<div class="description-paragraph" id="p-0126" num="0125">Compute the frequency distribution of the signal history kept via FFT.</div>
<div class="description-paragraph" id="p-0127" num="0126">Locate two maxima in the histogram and check if one maximum is located at 2× the frequency of the other maximum. If this condition is satisfied, continue to add on buffers of history that exhibit such behavior.</div>
<div class="description-paragraph" id="p-0128" num="0127">Once such behavior has stopped, begin removing signals from the beginning and ending of the signals in the buffers until SNR is maximized, wherein SNR is defined to be the two maxima's amplitudes that are greatest from the next maximum.</div>
<div class="description-paragraph" id="p-0129" num="0128">The flowchart <b>1400</b> continues to block <b>1406</b> once a card swipe is detected to be present where decoding engine <b>110</b> identifies peaks in the incoming signals. Peak detection is the most complex portion of decoding of incoming signals from credit card swipes, and credit card swipe decodes have traditionally not been done on heavily filtered signals like the signal that enters through the TRS plug, since most mobile device manufacturers assume the incoming signal is audio based. This results in a wide variety of signal filtering that peak detection must account for. Different peak detection approaches discussed below can be utilized by the microprocessor to perform peak detection in the incoming signals in different ways, all applying a basic, moving average low-pass filter to smooth out some of the high frequency noise in order to overcome the low quality data read, sampling speed limitations of the mobile device, and the noise introduced into the mobile device.</div>
<div class="description-paragraph" id="h-0009" num="0000">Reactive Peak Detection</div>
<div class="description-paragraph" id="p-0130" num="0129">Reactive peak detection is a heuristics based approach for peak detection, which is well suited for situations where the incoming signals from the card swipe is not excessively distorted by the mobile device's filter circuitry. This approach utilizes at least the following steps to detect signal peaks:</div>
<div class="description-paragraph" id="p-0131" num="0130">Seed an adaptive positive and adaptive negative threshold with an ambient noise value that is dependent on the hardware of the mobile device. These thresholds will be used for initial peak detection.</div>
<div class="description-paragraph" id="p-0132" num="0131">Begin processing through the sample buffer, and for each sample in the buffer:</div>
<div class="description-paragraph" id="p-0133" num="0132">Wait for the threshold to be crossed again when either the negative or positive threshold is crossed, except with a hysteresis factor applied to the threshold for the second crossing. The hysteresis factor is key in making this approach resistant to ringing in the incoming signals, which is associated with the active filter(s) of the platform hardware.</div>
<div class="description-paragraph" id="p-0134" num="0133">Begin looking for slope changes within this time frame once the two samples where the threshold is crossed have been established.</div>
<div class="description-paragraph" id="p-0135" num="0134">If more than one slope change is found, compute the midpoint of the two samples.</div>
<div class="description-paragraph" id="p-0136" num="0135">If only a single slope change is detected, then, pick the maximum point for the slope change.</div>
<div class="description-paragraph" id="p-0137" num="0136">Compare the peak's amplitude to the previously found peak's amplitude (if this has been established).</div>
<div class="description-paragraph" id="p-0138" num="0137">Skip the current peak and move on if its amplitude is greater than (([full scale]−[current peak amplitude])/([full scale] *100)+100)% of the previous peak's amplitude.</div>
<div class="description-paragraph" id="p-0139" num="0138">If the prior step did not result in skipping of the peak, check the peak's polarity against the previous peak's polarity.</div>
<div class="description-paragraph" id="p-0140" num="0139">If the peak's polarity is the same as the previous peak's polarity, then remove the previous peak and put the current peak in its place.</div>
<div class="description-paragraph" id="p-0141" num="0140">If the polarity of the current peak has changed, then simply add the current peak to the list of peaks. This step is another key component for making this approach resistant to ringing.</div>
<div class="description-paragraph" id="p-0142" num="0141">Upon the finding of a peak, update the adaptive threshold of the corresponding polarity as the polarity of the peak just found and the amplitude to be a percentage of this peak's amplitude. Here, the percentage is a parameter varied by the detection approach being used, since higher values more accurately detects peaks, but are not as resistant to noise, while lower values are more resistant to noise, but may pick up errant peaks associated with ringing.</div>
<div class="description-paragraph" id="h-0010" num="0000">Predictive Peak Detection</div>
<div class="description-paragraph" id="p-0143" num="0142">Predictive peak detection defers the heavy processing to the digitizing stage of decoding. Predictive peak detection is highly resistant to scratches in the card that could cause low quality or false peak information to manifest in the incoming signals. This approach is more memory intensive than the reactive peak detection approach since more peaks are stored. The approach utilizes at least the following steps to detect signal peaks:</div>
<div class="description-paragraph" id="p-0144" num="0143">Seed a positive and adaptive negative threshold with an ambient noise value that is dependent on the hardware of the mobile device.</div>
<div class="description-paragraph" id="p-0145" num="0144">Begin going through the sample buffer. For each sample in the buffer:</div>
<div class="description-paragraph" id="p-0146" num="0145">Begin waiting for the slope to change when either the positive of negative threshold is crossed.</div>
<div class="description-paragraph" id="p-0147" num="0146">When the slope changes, store the current sample as a peak.</div>
<div class="description-paragraph" id="h-0011" num="0000">Maxima Peak Detection</div>
<div class="description-paragraph" id="p-0148" num="0147">Maxima peak detection detects peaks by looking for local maxima and minima within a window of digital samples. If either of these is at the edges of the window of samples, then the approach skips the window and moves to the next window to look for local maxima and minima. These local maxima and minima are then stored into a list of peaks.</div>
<div class="description-paragraph" id="p-0149" num="0148">The flowchart <b>1400</b> continues to block <b>1408</b> where decoding engine <b>110</b> identifies the track from which data of the incoming signals are read through the swipe of the card via the card reader. Traditionally, track <b>1</b> and track <b>2</b> came off of different pins on the read head of a card reader, and so there was no need to guess which track is being read. Since read head <b>16</b> in card reader is capable of reading only one track of data from the magnetic stripe, track identification becomes an important issue. This track identification process is run by detection engine <b>110</b> after peaks are detected to guess and recognize the track (track <b>1</b> or track <b>2</b>) from which the data is read by card reader by inferring a range of peaks to be expected for signals coming from each track. Since track <b>1</b> is known to be much denser in data than track <b>2</b>, it is thus reasonable to expect more peaks to be identified in data coming from track <b>1</b>. Although this process is not a definitive guess, it yields the correct track value 99.9% when coupled with the peak detection algorithms described herein in testing. Alternatively, track guessing can be based on the number of bits found in the digital signals after the digitizing stage of decoding. When a decoder fails due to guessing the wrong track (since track identification affects how the bits from the digital signals are framed and matched against character sets), the decoder may simply choose another track type, though this makes the card processing more processor intensive.</div>
<div class="description-paragraph" id="p-0150" num="0149">The flowchart <b>1400</b> continues to block <b>1410</b> where decoding engine <b>110</b> digitizes the identified peaks in the incoming signals into bits. The digitizing process takes the given peak information turns them into binary data and appends them to an array of digital bits. There are two types of digitizers: reactive digitizing and predictive digitizing.</div>
<div class="description-paragraph" id="h-0012" num="0000">Reactive Digitizing</div>
<div class="description-paragraph" id="p-0151" num="0150">Reactive digitizing takes the given peak information as fact, and attempts to convert them into 1s and 0s in the following steps:</div>
<div class="description-paragraph" id="p-0152" num="0151">Go through all peak information. For each peak:</div>
<div class="description-paragraph" id="p-0153" num="0152">Identify the distance between each pair of adjacent peaks.</div>
<div class="description-paragraph" id="p-0154" num="0153">If these distances are similar (e.g., based on a parameter for finding a series of peaks that are equidistant from each other), begin looking for 1s and 0s. The initial peaks always represent zeros, since the credit card is padded with zeros at the front and back of the signal.</div>
<div class="description-paragraph" id="p-0155" num="0154">Once equidistant peaks are found, identify the number of samples between peaks, which is the number of samples that roughly equate to a bit.</div>
<div class="description-paragraph" id="p-0156" num="0155">Examine the number of samples between the current peak and the next peak.</div>
<div class="description-paragraph" id="p-0157" num="0156">Examine the number of samples between the current peak and the peak after the next.</div>
<div class="description-paragraph" id="p-0158" num="0157">Compare the results from Steps <b>5</b> and <b>6</b> against the value from Step <b>4</b>:</div>
<div class="description-paragraph" id="p-0159" num="0158">If the result from Step <b>5</b> is closer to the value from Step <b>4</b>, then identify the bit found as a 0.</div>
<div class="description-paragraph" id="p-0160" num="0159">If the result from Step <b>6</b> is closer, then identify the bit found as a 1.</div>
<div class="description-paragraph" id="p-0161" num="0160">Tie breaking: if the distances are equal and the next two peak amplitudes are smaller than the current peak amplitude, then identify the bit found as a 1. Otherwise, identify the bit found as a 0.</div>
<div class="description-paragraph" id="p-0162" num="0161">Once the peak is determined, update the bit length based on the peak found: if the peak found was a 0, update with the value of Step <b>5</b>; otherwise, use the value of step <b>6</b>.</div>
<div class="description-paragraph" id="h-0013" num="0000">Predictive Digitizing</div>
<div class="description-paragraph" id="p-0163" num="0162">Predictive digitizing of detected peaks in the incoming signals does not treat the list of peaks as facts. It first finds bit length, and then seeks to a point in the peak list where the next relevant peak should be. Once it reaches this location, it then searches before and after the location for the nearest peak. The process then checks the polarity of this peak compared to the previous peak examined. If the polarities are the same, the bit found is identified as a 1. Otherwise, it is identified as a 0. This method of digitizing a peak list is effective in that it simply ignores any information that is likely irrelevant.</div>
<div class="description-paragraph" id="p-0164" num="0163">The flowchart <b>1400</b> ends at block <b>1412</b> where decoding engine <b>110</b> converts the array of digitized bits into words of card information. This converting process locates the bit sequence that is the start sentinel in the array. At that point, it takes frames of bits (e.g., 5 bits for track <b>2</b>, 7 bits for track <b>1</b>) and decodes them based on a symbol table. Along the way, the process constantly checks for parity and the LRC at the end to ensure the data is correct. If there are any errors in parity, LRC, or track length, blocks <b>1406</b>-<b>1412</b> may be repeated with a different set of parameters to get the correct signal data.</div>
<div class="description-paragraph" id="p-0165" num="0164">When a card swipe begins, decoding engine <b>110</b> can combine various peak detectors and digitizers discussed above in order to cover various ranges of degradation in quality of the analog input signal generated by card reader <b>10</b>. In some embodiments, different process combinations and parameters can be chosen and optimized depending on the hardware platform of the mobile device. These combinations and parameter values can be pre-determined based on experimentation and testing and initialized upon starting of the decoding process. The decoding then runs through all processes specified and runs certain specific processes multiple times in order to get the correct signal. Such decoding process allows automatic scaling and adjustment during each run to account for different amounts of noise, sampling speed variations, signal ringing, and swipe direction.</div>
<div class="description-paragraph" id="h-0014" num="0000">Card Present Transaction without Information Sharing</div>
<div class="description-paragraph" id="p-0166" num="0165">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, user interaction engine <b>120</b> is a software application running on mobile device <b>100</b> associated with a payee (merchant) that enables the payer (buyer) and the merchant to interact with transaction engine <b>130</b> to complete a financial transaction. More specifically, it may take input of information related to the financial transaction from the buyer and/or the merchant, provide such input to transaction engine to initiate and complete the transaction, and present the result of the transaction to the buyer and the merchant. Here, the input of information accepted by user interaction engine <b>120</b> may include but is not limited to one or more of: amount of the transaction, including list price and optionally tips, additional notes related to the transaction such as written description and/or pictures of the item to be purchased, authorization and/or signature of the buyer.</div>
<div class="description-paragraph" id="p-0167" num="0166">In some embodiments, other than the conventional keyboard, user interaction engine <b>120</b> may utilize a touch screen of mobile device <b>100</b> to enable the buyer and the merchant to input numbers, characters, and signatures by touching the screen via a stylus or a finger.</div>
<div class="description-paragraph" id="p-0168" num="0167">In some embodiments, in addition to the result of the transaction, user interaction engine <b>120</b> may also present products or services provided by the merchant to the buyer in combination of one or more of text, pictures, audio, and videos, and enable the buyer to browse through the products and services on the mobile device to choose the one he/she intended to purchase. Such product information can be stored and managed in product database <b>150</b>.</div>
<div class="description-paragraph" id="p-0169" num="0168">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, transaction engine <b>130</b> takes as its input the decoded credit card information from decoding engine <b>110</b> and transaction amount from user interaction engine <b>120</b>. Transaction engine <b>130</b> then contacts third party financial institutions such as an acquiring bank that handles such authorization request, directly or through a payment system, which may then communicate with the card issuing bank to either authorize or deny the transaction. If the third party authorizes the transaction, then transaction engine <b>130</b> will transfer the amount of money deducted from the account of the card holder (e.g., the buyer) to an account of the merchant and provide the transaction results to user interaction engine <b>120</b> for presentation to the buyer and the merchant. In this manner, the merchant may accept a payment from the buyer via card reader <b>10</b> and mobile device <b>100</b>.</div>
<div class="description-paragraph" id="p-0170" num="0169">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, although mobile device <b>100</b> is associated with the merchant, transaction engine <b>130</b> running on mobile device <b>100</b> protects the privacy of the buyer/payer during the card-present transaction by taking card information from the buyer directly from decoding engine <b>110</b> and do not share such information with the merchant via user interaction engine <b>120</b>. Here, the card information that are not shared with the merchant includes but is not limited to, card number, card holder's name, expiration date, security code, etc. In essence, transaction engine <b>130</b> serves as an intermediary between the buyer and the merchant, so that the buyer does not have to share his/her card information with the merchant as in a typical card-present transaction or an online transaction. Still, the buyer is able obtain an itemized receipt for the transaction completed as discussed later.</div>
<div class="description-paragraph" id="p-0171" num="0170">In some embodiments, although transaction engine <b>130</b> does not share card information of the buyer to the merchant, it may present identity information of the buyer, such as a picture of the buyer on record in user database <b>140</b>, with the merchant via user interaction engine <b>120</b> so that merchant can reliably confirm the identity of the buyer during the card-present transaction to prevent credit fraud.</div>
<div class="description-paragraph" id="p-0172" num="0171">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, user database <b>140</b>, product database <b>150</b>, and transaction database <b>160</b> can be used to store information of buyer and the merchant, products and services provided by the merchant, and transactions performed, respectively. This information can also be stored by the payment system. Here, user information (e.g., name, telephone number, e-mail, etc.) can be obtained through online user registration and product information can be provided by the merchant, while transaction database <b>160</b> is updated every time a transaction is processed by the transaction engine <b>130</b>. Information stored can be selectively accessed and provided to the buyer and/or merchant as necessary.</div>
<div class="description-paragraph" id="p-0173" num="0172">In the example of <figref idrefs="DRAWINGS">FIG. 1</figref>, transaction engine <b>130</b> communicates and interacts with the third party financial institution directly or through the payment system, user database <b>140</b>, product database <b>150</b>, and transaction database <b>160</b> over a network through the payment system (not shown). Here, the network can be a communication network based on certain communication protocols, such as TCP/IP protocol. Such network can be but is not limited to, internet, intranet, wide area network (WAN), local area network (LAN), wireless network, Bluetooth, WiFi, and mobile communication network. The physical connections of the network and the communication protocols are well known to those of skill in the art.</div>
<div class="description-paragraph" id="h-0015" num="0000">Dynamic Receipt</div>
<div class="description-paragraph" id="p-0174" num="0173">In various embodiments, upon the completion of a financial transaction through, for a non-limiting example, card reader <b>10</b> connected to mobile device <b>100</b> associated with a merchant, transaction engine <b>130</b> running on the mobile device <b>100</b> can be configured to capture additional data associated with the transaction and incorporate the additional data into a dynamic receipt for the transaction, wherein in addition to transaction information typically included in a conventional receipt, the dynamic receipt may also include additional environmental information of the transaction. For non-limiting examples, the financial transaction can be an electronic transaction conducted over the Internet or a card present point-of-sale transaction where the buyer/payer makes the purchase at a store front, other “brick-and-mortar” location, or simply in presence of a merchant/payee.</div>
<div class="description-paragraph" id="p-0175" num="0174">In some embodiments, the additional environmental information included in the dynamic receipt may include information pertaining to the transaction environment. In one non-limiting example, a mobile device equipped with a Global Positioning System (GPS) receiver can be used to capture the coordinates/location of the transaction, and record it as a part of the information on the dynamic receipt. This way, the physical location of the point of sale (which may be different from the merchant/payee's registered address) can be recorded and used by transaction engine <b>120</b> to verify the transaction. In another non-limiting example, a mobile device equipped with a camera and/or audio and/or video recorder can be used to capture a photo and/or a video and/or an audio recording of the product or service involved in the transaction and incorporate such data or link/reference to such data into the dynamic receipt. In another non-limiting example, a mobile device with a biometric scanner can be used to scan the fingerprint or palm print of the buyer/payer and/or merchant/payee and includes at least a portion of such information in the dynamic receipt. In another non-limiting example, the mobile device can record certain information associated with the transaction in the dynamic receipt, wherein such information includes but is not limited to, how quickly the buyer swipes the card, the angle at which the card is swiped. In another non-limiting example, special characteristics of the card being swiped, also referred to as the magnetic fingerprint of the card, can be recorded and included in the dynamic receipt.</div>
<div class="description-paragraph" id="p-0176" num="0175">In some embodiments, the dynamic receipt can be in electronic form that can be accessed electronically or online and may also include link or reference pointing to multimedia information such as image, video or audio that are relevant to the transaction.</div>
<div class="description-paragraph" id="p-0177" num="0176">In some embodiments, transaction engine <b>130</b> can use the environmental information included in the dynamic receipt to assess risk associated with a transaction. For a non-limiting example, if the GPS information indicates that the transaction is taking place in a high crime/high risk area, the risk associated with the transaction is adjusted accordingly, and the buyer's bank may be notified accordingly. Alternatively, biometric information scanned and included in the dynamic receipt can be used for identity verification purposes to prevent identity theft and credit fraud.</div>
<div class="description-paragraph" id="p-0178" num="0177">In some embodiments, transaction engine <b>130</b> can use the dynamic receipt can be used as a non-intrusive way to communicate with the buyer and/or the merchant. For a non-limiting example, the additional information included in the dynamic receipt can be used to make offers to the buyer. If a dynamic receipt includes the GPS location of the point of sale of the transaction, coupons or other promotional offers made by vendors at nearby locations can be presented to the buyer when the buyer chooses to view the receipt electronically online. Alternatively, if a specific product involved the transaction can be identified by the transaction engine either directly through product description or indirectly by analyzing pictures or videos taken, offers of similar or complementary products can be made by a vendor to the merchant of the product.</div>
<div class="description-paragraph" id="p-0179" num="0178">In some embodiments, transaction engine <b>130</b> may notify buyer and/or the merchant of the receipt via an electronic message, which can be but is not limited to, an email message, a Short Message Service (SMS) message, Twitter, or other forms of electronic communication. The recipient of the electronic message may then retrieve a complete itemized dynamic receipt online at his/her convenience via a telephone number on his/her record in user database <b>140</b> to retrieve his/her electronic receipts stored in transaction database <b>160</b>. In some embodiments, the electronic message may include an indication such as a code that the recipient can use to retrieve the electronic receipt online as an alternative or in combination with the telephone number.</div>
<div class="description-paragraph" id="p-0180" num="0179"> <figref idrefs="DRAWINGS">FIG. 15</figref> depicts a flowchart of an example of a process to support financial transaction between a payer and a payee through a miniaturized card reader, which has length and height dimensions smaller than length of height dimensions of the associated mobile device, connected to a mobile device. In the example of <figref idrefs="DRAWINGS">FIG. 15</figref>, the flowchart <b>1500</b> starts at block <b>1502</b> where an amount of a financial transaction is provided through an interactive user application launched on the mobile device as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>a</i>)</figref>. The flowchart <b>1500</b> continues to block <b>1504</b> where a miniaturized card reader structured to minimize swipe error is connected to the mobile device as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>b</i>)</figref>. The flowchart <b>1500</b> continues to block <b>1506</b> where a card is swiped through the card reader to initiate the financial transaction as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>c</i>)</figref>. The flowchart <b>1500</b> continues to block <b>1508</b> where the payer confirms the amount of the card-present transaction via a signature signed via the interactive user application on the mobile device to complete the transaction as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>d</i>)</figref>. Payments are made with the use of the payment system which is coupled to the mobile device <b>100</b> Note that the signature is required as an additional layer of confirmation for the protection for the payer even when such signature may not be technically required to authorize the transaction. The flowchart <b>1500</b> continues to block <b>1510</b> where result of the transaction is received and presented to the payer and/or merchant as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>e</i>)</figref> through the use of the payment system. The flowchart <b>1500</b> ends at block <b>1512</b> where an electronic receipt of the transaction is provided to the payer in the form of an electronic message as shown in <figref idrefs="DRAWINGS">FIG. 16(<i>f</i>)</figref>.</div>
<div class="description-paragraph" id="p-0181" num="0180">In one embodiment, a longitudinal plane of the of the output jack <b>18</b> lies within the plane that the card travels in the slot <b>14</b> within 5 mm, and in another embodiment within 3 mm.</div>
<div class="description-paragraph" id="p-0182" num="0181">Referring now to <figref idrefs="DRAWINGS">FIG. 17</figref>, in one embodiment of the present invention an integrated read head system includes mobile device <b>212</b> with an audio jack <b>214</b> at least one microphone input port <b>216</b> and other ports, including but not limited to a USB port. A read head <b>218</b> is physically coupled to the mobile device <b>212</b>. The read head <b>218</b> has a slot <b>220</b> for swiping a magnetic stripe of a financial transaction card to enable a financial transaction between a buyer and seller with the payment system. The read head <b>218</b> reads data on the magnetic stripe and produces a signal indicative of data stored on the magnetic stripe. The read head <b>218</b> has an output jack <b>222</b> that physically connects the read head <b>218</b> to at least one of the audio jack <b>214</b> or microphone port <b>216</b> of the mobile device <b>212</b>, the USB port and the like. The read head <b>218</b> provides the signal to the mobile device <b>212</b>. The signal is decoded at the mobile device <b>212</b>. The decoding includes determining pulses in the signal and converts at least some of the pulses to characters.</div>
<div class="description-paragraph" id="p-0183" num="0182">In another embodiment of the present invention, a method is provided for conducting a financial transaction with a financial transaction card using the integrated read head system <b>210</b>.</div>
<div class="description-paragraph" id="p-0184" num="0183">In one embodiment of the present invention, as illustrated in <figref idrefs="DRAWINGS">FIG. 18</figref>, a method of paying a second party (payee) is provided. In this embodiment, a first party (payer) views the names of one or more qualified second parties. The qualified second parties are second parties that, (i) have an association with the payment service, and (ii) second parties that if they do not have an established association with the payment service then they have established one prior to payment. The first party has an association with the payment service. A tab is opened by the first party that can be selected by the qualified second party at any geographic location of a first party's mobile device <b>100</b>. The qualified second party is only able to charge a first party's financial account when the first party's mobile device <b>100</b> is within a defined geographic area. The tab is a relationship between the first party, the payment service and the qualified second party, The qualified second party can engage in a financial transaction with the first party is within the defined geographic area. The overall architecture of the payment system is illustrated in <figref idrefs="DRAWINGS">FIG. 19</figref>.</div>
<div class="description-paragraph" id="p-0185" num="0184">The first party's mobile device <b>100</b> is configured to communicate with the payment service. The first party views the names of the one or more qualified second parties with the first party's mobile device <b>100</b>. The first party establishes the first party's financial account. The first party enters financial account information with a single initial entry to the payment service and additional entries of the financial account information to the payment service are not required for future financial transactions between the first party and any qualified second party when the same payment service is used.</div>
<div class="description-paragraph" id="p-0186" num="0185">The financial account is selected from at least one of, a bank account, credit card, debit card, pre-paid card, a second party financial account and the like. The financial account is selected by the first party by at least one of, use of a mobile device <b>100</b>, from a bank terminal, done on-line and the like. The first party's financial account can be a financial transaction card, and the entering of the first party's financial card information is with a mobile device <b>100</b>. Entering of the financial card information can be done by, swiping the financial transaction card through a slot of a card reader coupled to the mobile device <b>100</b>, through a slot of the mobile device <b>100</b>, by touch of the financial transaction card to the mobile device <b>100</b>, by typing in information at the mobile device <b>100</b>, with photos, by selecting a card from an application on a mobile device <b>100</b>, from an on-line entity and the like. The mobile device <b>100</b> is a device as described above.</div>
<div class="description-paragraph" id="p-0187" num="0186">The qualified second party can see a list of first parties that have an association with the payment service. The qualified second party can view a list of first parties with open tabs. The list of first parties seen by the qualified second party has first party identifying information. The identifying information is anything that reliably identifies the first party and can include, but is not limited to, names, photos, cell number, social security number, e-mail address, other personal identifying information for a first party and the like.</div>
<div class="description-paragraph" id="p-0188" num="0187">In another embodiment, a method of paying a second party a first party views the names of one or more qualified second parties with a mobile device <b>100</b>. Preferably, the mobile device <b>100</b> is the first party's mobile device <b>100</b>. A tab is then opened by the first party as recited above that can be selected by the qualified second party at any geographic location of the first party's mobile device <b>100</b>, but the qualified second party is only able to charge a first party's financial transaction card when the first party's mobile device <b>100</b> is within a defined geographic area In one embodiment, the mobile device <b>100</b> is coupled to a card reader that includes an output jack adapted to be inserted at least one of the audio input port or microphone input port, USB port and the like of the mobile device <b>100</b> and delivers a signal to the mobile device <b>100</b>. In various embodiments, the sampling rate of the signal at the audio input port or a line input port of the mobile device <b>100</b> is at least 15 kHZ, 20 kHz, 30 kHz, 40 kHz and the like.</div>
<div class="description-paragraph" id="p-0189" num="0188">Entering of the financial card information can be achieved by a variety of methods including but not limited to, swiping the financial transaction card through a slot of a card reader coupled to the mobile device <b>100</b>, through a slot of the mobile device <b>100</b>, with a touch of the financial transaction card to the mobile device <b>100</b>, typing in information at the mobile device <b>100</b>, with photos, selecting a card from an application on a mobile device <b>100</b> and from an on-line entity and the like.</div>
<div class="description-paragraph" id="p-0190" num="0189">A confirmation of payment can be made to the first party in response to a transfer of funds from the financial transaction card. In various embodiments, the financial transaction card is selected from at least one of, credit financial transaction card, debit financial transaction card, gift financial transaction card, fund transfer financial transaction card, other types of payment authenticating piece capable of carrying out a transfer of funds and the like, as set forth above.</div>
<div class="description-paragraph" id="p-0191" num="0190">In another embodiment of the present invention, illustrated in <figref idrefs="DRAWINGS">FIG. 20</figref>, a method is provided of conducing on-line purchases using a mobile device <b>100</b>. A first party visits a second party on-line entity. The first party accesses a second party on-line entity. The first party is already registered with the payment service or becomes registered prior to the conclusion of completing a transaction. The mobile device <b>100</b> is configured to communicate with the payment service. The first party considers conducting a transaction with the second party on-line entity. The second party on-line entity is registered with the payment service, or in response to the first party's desire to transact with the second party on-line entity, the second party on-line entity becomes registered with the payment service. The first party enters personal identifying information that is sent to the payment service. In response, the first party receives a push notification to the first party's mobile device <b>100</b> that enables the first party to complete the transaction with the second party on-line entity.</div>
<div class="description-paragraph" id="p-0192" num="0191">In various embodiments, the first party's personal identifying information is entered by at least one of, use of a mobile device <b>100</b>, from a bank terminal, done on-line and the like. For the transaction, the first party uses the first party's financial account. The first party enters financial account as recited above, which does not require re-entry with the payment service for future transactions with second parties that are also registered with the payment service.</div>
<div class="description-paragraph" id="p-0193" num="0192">In one embodiment, the first party uses the first party's financial transaction card for the transaction where the card information is entered to the payment service as recited above. Additionally, the first party enters it's personal indentifying information with the payment service only once as recited above and need not re-enter for second party transactions.</div>
<div class="description-paragraph" id="p-0194" num="0193">In various embodiments, the on-line entity is any second party that can transact business with the payment service including but not limited to, merchants, peers and the like.</div>
<div class="description-paragraph" id="p-0195" num="0194">In one specific embodiment, the first party enters its personal identifying information, that is sent to the payment service, using the first party's mobile device <b>100</b>. In this embodiment, the first party can use a first party financial card to complete the transaction. The first party's mobile device <b>100</b> is coupled to a card reader that includes an output jack adapted to be inserted at least one of the audio input port or microphone input port, USB port and the like, of the mobile device <b>100</b> and delivers a signal to the mobile device <b>100</b>.</div>
<div class="description-paragraph" id="p-0196" num="0195">In another embodiment of the present invention, illustrated in <figref idrefs="DRAWINGS">FIG. 21</figref>, a method is provided for transferring funds to and/or from the first party's financial account. The first party's financial account information is entered with a single initial entry to the payment service. Funds are transferred to and/or from the first party's financial account using the payment service. The funds can be transferred to the first party, or to second parties. The first party's financial account, including but not limited to a financial transaction card can be the destination of the funds. A simple swipe of the first party's financial transaction card can make the financial transaction card a funding source. The first party is either registered with the payment service, or becomes registered prior to the transfer of funds to and/or from the financial account using the payment service. For future uses of the first party's financial account, to transfer funds to and/or from the first party's financial account, the first party's financial account information need not be re-entered again with the payment service.</div>
<div class="description-paragraph" id="p-0197" num="0196">In another embodiment, funds are transferred from the first party's financial account to a second party using the payment service.</div>
<div class="description-paragraph" id="p-0198" num="0197">In one embodiment, the second party is already registered with the payment service or becomes registered with the payment service prior to the transfer of funds from the first party. In another embodiment, the second party is not registered with the payment service.</div>
<div class="description-paragraph" id="p-0199" num="0198">In one specific embodiment, funds are transferred to and/or from the first party's financial account using the payment service, e.g., to the first party or to a second party, where the financial account is a bank account, credit card, debit card, pre-paid card, a third party funding source and the like. In another specific embodiment,</div>
<div class="description-paragraph" id="p-0200" num="0199">In another embodiment, the first party's financial card is entered with a single initial entry to the payment service using a mobile device <b>100</b>. Again, for future uses of the first party's financial transaction card to transfer funds using the payment service to a second party, the first party's financial transaction card information need not be entered again.</div>
<div class="description-paragraph" id="p-0201" num="0200">Again, the entering of the financial card information to the payment service can be achieved by, swiping the financial transaction card through a slot of a card reader coupled to the mobile device <b>100</b>, through a slot of the mobile device <b>100</b>, with a touch of the financial transaction card to the mobile device <b>100</b>, typing in information at the mobile device <b>100</b>, with photos, selecting a card from an application on a mobile device <b>100</b>, from an on-line entity and the like.</div>
<div class="description-paragraph" id="p-0202" num="0201">In another embodiment of the present invention, a method of conducting a financial transaction includes the first party's financial account information being entered once, e.g, with a single initial entry to the payment service. For future uses of the first party's financial account to transfer funds using the payment service to a second party, the first party's financial account information need not be entered again with the payment service. The second party's personal identifying information is entered. Funds are transferred from the first party's financial account to an account of the second party with the use of the payment service.</div>
<div class="description-paragraph" id="p-0203" num="0202">In another embodiment, the first party's financial transaction card information is entered with a single initial entry to the payment service. Again, for future uses of the first party's financial transaction card to transfer funds using the payment service to a second party, the first party's financial account information need not be entered again with the payment service. The second party's personal identifying information is entered and funds are transferred from the first party's financial account to an account of the second party with the use of the payment service.</div>
<div class="description-paragraph" id="p-0204" num="0203">In various embodiments, (i) the second party has an association with the payment system, (ii) the first party and the second party each have an association with the payment system, (iii) the first party has an association with the payment system but the second party does not.</div>
<div class="description-paragraph" id="p-0205" num="0204">In one embodiment, the first party uses a send money mode of the first party's mobile device <b>100</b>. In various embodiments, the second party is (i) anybody on the first party's phone list, (ii) not on the first party's phone list but is added to the first party's phone list in response to a transaction, (iii) the second party has an association with a payment system or is a database of the payment system, (iv) the second party does not have an association but then has one in response to a text message or equivalent sent to the second party, and the like. In response to the text message, the second party either accepts or rejects.</div>
<div class="description-paragraph" id="p-0206" num="0205">In another embodiment, the first party's financial transaction card information is entered with a single initial entry to the payment service. Again, for future uses of the first party's financial transaction card information to transfer funds using the payment service to a second party, the first party's financial account information need not be entered again with the payment service. The second party's mobile device <b>100</b> number is entered in the first party's mobile device <b>100</b>. In response, funds are transferred from the first party to an account of the second party.</div>
<div class="description-paragraph" id="p-0207" num="0206">In one embodiment of the present invention, the read head <b>310</b> reads track <b>1</b> of the financial transaction card. Track <b>1</b> is 210 bytes per inch and is more difficult to decode than track <b>2</b>. In one embodiment of reading track <b>1</b>, the signal is interpreted and transferred at a constant rate 2400 baud.</div>
<div class="description-paragraph" id="p-0208" num="0207">In another embodiment, the read head <b>310</b> is configured to be positioned to provide for rotation of up to 10 degrees while still registering on a track to be read. The location of the read head <b>310</b> relative to the mobile device <b>312</b>, and the microphone port of the mobile device <b>312</b>, is off set from a center of track <b>1</b> in order to bias it to a bottom of track <b>1</b>. As a non-limiting example, the offset can be 0.05 inches in the direction x and 0.040 inches in the y direction.</div>
<div class="description-paragraph" id="p-0209" num="0208">In another embodiment, illustrated in <figref idrefs="DRAWINGS">FIG. 22</figref>, a spring member <b>314</b> is attached to the read head <b>310</b> that provides for increased accuracy and read head <b>310</b> adjustment by creating less friction on the financial transaction card. The spring member <b>314</b> can be softer and be a one leaf design retained on only one side. The spring member <b>314</b> can be a cantilever spring member <b>314</b> with a pre-load onto an opposing wall on a back bone at an angle of about 3-7 degrees to ensure that the read head <b>310</b> is substantially perpendicular to the magnetic strip when the financial transaction card is read. The spring member <b>314</b> can be part of a sub-assembly <b>316</b> that is coupled to a PCB <b>318</b> at one end and coupled to the back bone <b>320</b>.</div>
<div class="description-paragraph" id="p-0210" num="0209">In one embodiment, the mobile device <b>312</b> provides encryption and authentication. In this embodiment, each card reader <b>322</b> can have a unique key that can be included in the microprocessor <b>324</b> of the PCB <b>318</b>. The financial transaction card is swiped and the signal interpreted. The microprocessor <b>324</b> than encrypts the data using a HWID and counter. The signal is encrypted when received at the mobile device <b>312</b> with an ID and counter. The signal sent to the back end <b>326</b> of the payment system where the identification of the read head <b>310</b> is determined and the signal is decrypted.</div>
<div class="description-paragraph" id="p-0211" num="0210">At the back end <b>326</b>, the payment system can use HWID and decode the encrypted signal from the mobile device <b>312</b> using a hard function decode. Using HWID, encrypted hash function decode, the complete CC with CRC is reconstructed which is then sent to a payment gateway <b>328</b> as illustrated in <figref idrefs="DRAWINGS">FIG. 23</figref>. An acknowledgement of a good or bad transaction is then sent back to the mobile device <b>312</b>.</div>
<div class="description-paragraph" id="p-0212" num="0211">As illustrated in <figref idrefs="DRAWINGS">FIG. 24</figref>, the output from a read of the track goes to an amplifier, differentiator, into a comparator and then into a microcontroller. The output to the comparator is analog, and digital into the microcontroller and into the mobile device <b>312</b>.</div>
<div class="description-paragraph" id="p-0213" num="0212">Several fields of cardholder information are sent to the server at the back end <b>326</b> in either an encrypted or authenticated format. In one embodiment, the protocol has several fields: length of message, counter, hardware id, authenticated message length, issue type, last 4 digits of the financial transaction card, cardholder name, PAN number, expiration date, service code, and an authentication tag.</div>
<div class="description-paragraph" id="p-0214" num="0213">Referring to <figref idrefs="DRAWINGS">FIG. 25</figref>, in various embodiments, the card reader <b>322</b> accepts a raw signal from the read head <b>310</b> and processes the financial transaction card read on the fly. A CRC check is performed. The buyer's name, type of financial transaction card from the ABA table, and the last four numbers of the financial transaction card are in an encrypted packet forwarded to the mobile device <b>312</b>. In one embodiment part of the CC that are encrypted and parts are authenticated. In one specific embodiment, a 2400 baud 8-N-1 serial protocol is used in the packet sent to the mobile de vice. The mobile device <b>312</b> interprets the 2400 baud serial transmission and sends an encrypted packed with other financial transaction card information to the backend <b>326</b> of the payment system.</div>
<div class="description-paragraph" id="p-0215" num="0214">Referring to <figref idrefs="DRAWINGS">FIG. 26</figref>, in one embodiment, the slot of the read head <b>310</b> has directionality. In one embodiment, the slot has a wider entrance track and the read head <b>310</b> is biased in one direction. These enables a user to rock the financial transaction card through the slot more in one direction that in the other. In one embodiment, the slot can have a wider entrance track and the read head <b>310</b> is biased in one direction. These enables a user to rock the financial transaction card through the slot more in one direction that in the other.</div>
<div class="description-paragraph" id="p-0216" num="0215">The read head <b>310</b> can include a power source <b>330</b> as illustrated in <figref idrefs="DRAWINGS">FIG. 27</figref>. The power source <b>330</b> can be a battery coupled to the microprocessor <b>324</b>. In another embodiment, power to the read head <b>310</b> is provided by the mobile device <b>312</b>. In one embodiment, wake-up detection is provided and the power source <b>330</b> is in a sleep mode until a swipe of a transaction card is initiated.</div>
<div class="description-paragraph" id="p-0217" num="0216">In one embodiment, the read head <b>310</b> is a four piece plastic mold. The spring member <b>314</b> can be soldered onto the PCB <b>318</b> to form the sub-assembly <b>316</b>.</div>
<div class="description-paragraph" id="p-0218" num="0217">As a non-limiting example, the read head housing <b>330</b> can be heat-staked onto the back side of the backbone <b>320</b>. The battery <b>330</b> can be attached to the front side of the backbone <b>320</b> with PSA. With the front cover, it can be attached to the backbone <b>320</b> using ultrasonic welding. A TRS connector can be placed onto the back bone and the connection soldered to the PCB <b>318</b>. The back cover can be attached to the backbone <b>320</b> to complete the assembly.</div>
<div class="description-paragraph" id="p-0219" num="0218">In various embodiments, the card reader <b>322</b> is coupled to various ports of the mobile device <b>312</b>, including but not limited to the microphone port, the USB port, accessory port.</div>
<div class="description-paragraph" id="p-0220" num="0219">In anther embodiment, the card reader is coupled to other ports of the mobile device <b>100</b>, including but not limited to the USB port, accessory port and the like.</div>
<div class="description-paragraph" id="p-0221" num="0220">In one embodiment of the present invention, a method is provided of conducting a financial transaction with reduced likelihood of fraud. A financial transaction is entered into using a first party's financial transaction instrument to transfer funds. The first party's financial transaction instrument information is sent externally to the mobile device <b>100</b>. The financial transaction instrument information is sent from the financial transaction instrument such as a mobile device <b>100</b> to a payment system. A determination is made to see if there is fraudulent use of the financial transaction instrument <b>100</b> prior to completion of the financial transaction. The mobile device <b>100</b> can be a merchant's mobile device <b>100</b>. The determination of fraudulent use can be made either at the mobile device <b>100</b> or the payment system. In one embodiment, the first party's financial transaction instrument information is only sent once to the mobile device <b>100</b> and need not be done again for future purposes.</div>
<div class="description-paragraph" id="p-0222" num="0221">The financial transaction instrument <b>100</b> is selected from at least one of those listed above, as well as a person's financial account and the like.</div>
<div class="description-paragraph" id="p-0223" num="0222">In one embodiment, a location identifier is received from a position-sensing device indicating a location where the request is submitted or information that can lead to identification of the location where the request is submitted. The position-sensing device can be selected from a group of eligible devices. Information identifying the selected position-sensing device can be received by the request processor in advance of the request processor receiving the submitted request; and determining whether to service the request based at least in part on the received location identifier or information. The submission device can be embodied in an apparatus separate from an apparatus housing the position-sensing device. The submission device and the position-sensing device can be integrated in the mobile device <b>100</b>.</div>
<div class="description-paragraph" id="p-0224" num="0223">In another embodiment, the first party's financial account information is entered using the first party's mobile device <b>100</b> with a single initial entry to a payment service. Funds are transferred to and/or from the first party's financial account using the payment service. The first party is registered with the payment service, or becomes registered prior to transferring funds to and/or from the financial account using the payment service. For future uses of the first party's financial account to transfer funds to and/or from the first party's financial account, the first party's financial account information need not be entered again with the payment service. In response to, (i) entering the first party's financial account information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0225" num="0224">In another embodiment, the first party's financial account information is entered using the first party's mobile device <b>100</b> with a single initial entry to a payment service. Funds are transferred from the first party's financial account to a second party using the payment service. The first party is either registered with the payment service, or becomes registered prior to transferring funds to and/or from the first party's financial account using the payment service. For future uses of the first party's financial account to transfer funds to and/or from the first party's financial account, the first party's financial account information need not be entered again with the payment service. In response to, (i) entering the first party's financial account information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0226" num="0225">In another embodiment, the first party's financial account information is entered using the first party's mobile device <b>100</b> with a single initial entry to the payment service. The first party's financial account is selected from at least one of, a bank account, credit card, debit card, pre-paid card and a third party funding source. Funds are transferred to and/or from the first party's financial account using the payment service. The first party is either registered with the payment service, or becomes registered prior to transferring funds to and/or from the financial account using the payment service. For future uses of the first party's financial account to transfer funds to and/or from the first party's financial account, the first party's financial account information need not be entered again with the payment service. In response to, (i) entering the first party's financial account information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0227" num="0226">In another embodiment, a first party's financial account information is entered using the first party's mobile device <b>100</b> with a single initial entry to a payment service. The first party's financial account is selected from at least one of, a bank account, credit card, debit card, pre-paid card and a third party funding source. Funds are transferred from the first party's financial account to a second party using the payment service. The first party is registered with the payment service, or becomes registered prior to transferring funds to and/or from the first party's financial account using the payment service. For future uses of the first party's financial account to transfer funds to and/or from the first party's financial account, the first party's financial information need not be entered again with the payment service. In response to, (i) entering the first party's financial account information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0228" num="0227">In another embodiment, a first party's financial transaction card information is entered using the first party's mobile device <b>100</b> with a single initial entry to a payment service. For future uses of the first party's financial transaction card to transfer funds to and/or from the first party's financial transaction card, the first party's financial transaction card information need not be entered again with the payment service. In response to, (i) entering the first party's financial transaction card information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0229" num="0228">In another embodiment, a first party's financial transaction card information is entered using the first party's mobile device <b>100</b> with a single initial entry to a payment service. Funds are transferred from the first party's financial transaction card to a second party using the payment service. The first party is registered with the payment service, or becomes registered prior to transferring funds to and/or from the first party's financial transaction card using the payment service. For future uses of the first party's financial transaction card to transfer funds to and/or from the first party's financial transaction card, the first party's financial transaction card information need not be entered again with the payment service the first party's financial. In response to, (i) entering the first party's financial transaction card information or (ii) using the first party's mobile device <b>100</b> for a financial transaction following the single initial entry to the payment service, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account information is committed.</div>
<div class="description-paragraph" id="p-0230" num="0229">In another embodiment, a first party accesses names of one or more qualified second parties. The qualified second parties are defined as second parties having an association with the payment service, and second parties that if they do not have an established association with the payment service, have an established association with the payment service prior to payment. The first party has an association with the payment service. A tab is opened by the first party that can be selected by the qualified second party at any geographic location of a first party's mobile device <b>100</b>. The qualified second party is only able to charge a first party's financial account when the first party's mobile device <b>100</b> is within a defined geographic area. The tab is a relationship between the first party, the payment service and the qualified second party. The qualified second party can engage in a financial transaction with the first party when the first party is within the defined geographic area. In response to the second party, (i) attempting to charge the first party or (ii) charging the first party, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial account is committed.</div>
<div class="description-paragraph" id="p-0231" num="0230">In another embodiment, names of one or more qualified second parties are accessing by the first party with the first party's mobile device <b>100</b>. The second parties have an association with the payment service, or if not have one prior to payment. The first party has an association with the payment service. A tab is opened by the first party that can be selected by the qualified second party at any geographic location of the first party's mobile device <b>100</b>. The qualified second party is only able to charge a first party's financial transaction card when the first party's mobile device <b>100</b> is within a defined geographic area. The qualified second party can engage in a financial transaction with the first party when the first party is within the defined geographic area. In response to the use of the first party's mobile device <b>100</b> to pay the second party, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial transaction card is committed.</div>
<div class="description-paragraph" id="p-0232" num="0231">In another embodiment, a first party accesses a second party on-line entity. The mobile device <b>100</b> is configured to communicate with the payment service. The first party considers conducting a transaction with the second party on-line entity. The second party on-line entity is registered with the payment service or in response to the first party's desire to transact with the second party on-line entity, the second party on-line entity becomes registered with the payment service. The first party enters personal identifying information that is sent to the payment service. The first party receives a push notification to the first party's mobile device <b>100</b> that enables the first party to complete the transaction with the second party on-line entity. In response to the first party receiving the push notification to the first party's mobile device <b>100</b>, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial transaction card is committed.</div>
<div class="description-paragraph" id="p-0233" num="0232">In another embodiment, a first party visits a second party on-line entity. The first party considers conducting a transaction with the second party on-line entity. The first party enters personal identifying information using the first party's mobile device <b>312</b> and this is sent to the payment service. The first party receives a push notification of the first party's mobile device <b>312</b> that enables the first party to complete the transaction with the second party on-line entity. In response to the first party receiving the push notification to the first party's mobile device <b>312</b>, a determination is made to see if a fraudulent attempt or fraudulent use of the first party's financial transaction card is committed.</div>
<div class="description-paragraph" id="p-0234" num="0233">Referring now to <figref idrefs="DRAWINGS">FIG. 28</figref>, a mobile device <b>412</b> can include a position sensor <b>416</b>. In this embodiment, the mobile device receives financial transaction card information by any of the methods listed above. The financial transaction card information is sent from the mobile device to a payment system for processing. The mobile device <b>412</b> can be capable of transmitting position information to the payment system and can include a position sensor <b>416</b> configured to detect a position of the mobile device and send this position information to the payment processing system via a variety of methods including but not limited to wireless and the like. Mobile device <b>412</b> can send the financial card transaction information substantially simultaneously and position information to payment system. Payment system <b>414</b> can includes an associated database of permissible and/or impermissible use areas for a particular user's mobile device <b>412</b>.</div>
<div class="description-paragraph" id="p-0235" num="0234">Payment system <b>414</b> can be configured to check position information of the mobile device <b>412</b> against the permissible and/or impermissible use areas for each user, and thereby determine if the device is being used in an impermissible use area for the user. If so, the payment system <b>414</b> is configured to indicate that a possibility of fraud exists in the pending transaction. If the possibility of fraud is detected, the system may be configured to take an action, such as preventing fulfillment of the transaction due to the possibility of fraud.</div>
<div class="description-paragraph" id="p-0236" num="0235">The payment system <b>414</b> can be as described above and can include a conventional computing system with storage medium having programming instructions designed to implement the present invention, and one or more processors to execute the programming instructions.</div>
<div class="description-paragraph" id="p-0237" num="0236">In one embodiment, when a financial transaction cardholder is issued a financial transaction card, the cardholder may be asked to give the geographic location of their home and office, as well as any other locations that the cardholder frequently place on-line orders and use the credit card. This information may be obtained during the application process or on an ongoing basis. The information may be entered into a database.</div>
<div class="description-paragraph" id="p-0238" num="0237">Thus, when a financial transaction is conducted using a mobile device <b>412</b> current location information can be provided to the payment system <b>414</b> where a check can be performed for whether the financial transaction is being conducted from a permissible location. If the financial transaction is not being conducted from a permissible location, the financial transaction may be rejected. Additionally, a warning in the form of a message and/or a call may be provided to the financial transaction cardholder.</div>
<div class="description-paragraph" id="p-0239" num="0238">Referring to <figref idrefs="DRAWINGS">FIG. 29</figref>, in another embodiment, a card reader <b>416</b>, which can be any of the card readers described herein, can include a position sensor <b>416</b>. In a financial transaction, the position of the card reader <b>416</b> is determined when a financial transaction is entered into, wherein financial card transaction information can be sent to the mobile device <b>412</b>, and then sent to payment system <b>414</b>.</div>
<div class="description-paragraph" id="p-0240" num="0239">The payment processing system <b>414</b> can detect the position of the card reader <b>418</b> and therefore, the position of the payment device in a payment device-present transaction</div>
<div class="description-paragraph" id="p-0241" num="0240">In another embodiment, a position sensing device <b>420</b> can be included. The position-sensing device <b>420</b> can be configured to send position information to a position tracking system <b>422</b>. The communication link between position tracking system <b>422</b> and position-sensing device <b>420</b> may be a satellite link such as used in a global positioning satellite system, radio frequency link, optical link such as infrared, or virtually any other communication link suitable for use in position detection.</div>
<div class="description-paragraph" id="p-0242" num="0241">As shown in <figref idrefs="DRAWINGS">FIG. 30</figref>, a security device-present transaction system <b>424</b> can be utilized and can utilize location indicators, alone or in combination with other parameters, to determine the security clearance for access to a particular secured location. Security device-present transaction system <b>424</b> can include a security device <b>426</b> configured to be read by a security device reader <b>428</b>. Security device <b>426</b> may be a card or badge encoded with security information, such as an access code, a mobile device, a card reader and the like, configured to transmit security information to security device reader <b>424</b> via an infrared or other communication link. Further, the security device may be any other device capable of providing the appropriate security and position information to security device reader <b>424</b>. In particular, security device <b>426</b> may include a position sensor <b>416</b>, configured to transmit information about its relative geographical location.</div>
<div class="description-paragraph" id="p-0243" num="0242">Security access control system <b>430</b> is further configured to detect the location or position of security device <b>426</b> and/or security reader <b>428</b> by the position information received from position sensor <b>416</b>. Alternatively, the security access control system <b>430</b> can be configured to detect the position of the security device reader (and therefore the position of the security device in a device-present transaction), by resolving a security identifier using a database of known security identifier locations. For example, the security identifier <b>1234567</b> may correspond to a gated entrance to a secured building.</div>
<div class="description-paragraph" id="p-0244" num="0243">In order to detect an improper use of security device <b>426</b>, security access control system <b>430</b> is configured to compare the position of position-sensing device <b>416</b> the location or position of a current transaction involving security device <b>426</b> (i.e., the location or position of security device <b>426</b> and/or security device reader <b>428</b>). If the locations of the position-sensing device <b>416</b> and the security device <b>426</b> are different, or alternatively, if the locations of position-sensing device <b>416</b> and security reader <b>428</b> are different, then the security access control system is configured to determine that there is a possibility of improper use of the security device in the current transaction.</div>
<div class="description-paragraph" id="p-0245" num="0244">Upon determining the possibility of improper use, the system <b>430</b> is configured to take a designated action, such as warning a security attendant and/or by automatically locking an entrance to a secured area.</div>
<div class="description-paragraph" id="p-0246" num="0245">The security control system may be implemented with conventional computing system with storage medium having programming instructions designed to implement the present invention, and one or more processors to execute the programming instructions.</div>
<div class="description-paragraph" id="p-0247" num="0246">In one embodiment of the present invention, illustrated in <figref idrefs="DRAWINGS">FIGS. 16(<i>b</i>) 16(<i>c</i>)</figref>, <b>31</b> and <b>32</b>, a card reader, generally denoted as <b>510</b>, is provided that includes a housing <b>512</b> and a read head <b>514</b> positioned therein. The read head <b>514</b> is configured to be coupled to a mobile device <b>516</b> and includes a slot <b>518</b> for swiping a magnetic stripe of a card <b>520</b>. In one embodiment, the card reader <b>510</b> with the slot <b>518</b> is utilized for a transaction between a buyer and seller. The read head <b>514</b> reads data on the magnetic stripe and produces a raw magnetic signal indicative of data stored on the magnetic stripe.</div>
<div class="description-paragraph" id="p-0248" num="0247">Referring now to <figref idrefs="DRAWINGS">FIGS. 33 and 34</figref>, device electronics <b>522</b> are provided that include an analog to digital front-end <b>524</b> and a microcontroller <b>526</b>. The analog to digital front end <b>524</b> is coupled to a processing element <b>528</b> in the microcontroller <b>526</b>. The analog to digital front end <b>524</b> receives a raw magnetic head signal from the magnetic head <b>525</b>, <figref idrefs="DRAWINGS">FIG. 35</figref>, and converts it into a processed digital signal that the microcontroller <b>526</b> can interpret, with the microcontroller <b>526</b> producing a signal. An output jack <b>530</b> of the card reader <b>510</b> is adapted to be inserted in a port of the mobile device <b>516</b> and deliver an output jack signal to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0249" num="0248">The microcontroller <b>526</b> is configured to convert raw bit patterns into formatted credit card <b>520</b> information. The microcontroller <b>526</b> can independently determine if the card data is valid. The card reader <b>510</b> can accept motion of the card <b>520</b> bi-directionally at either end of the slot <b>518</b> and at varying velocities as it is swiped through the slot <b>518</b>. In one embodiment, the mobile device <b>516</b> detects the card reader <b>510</b> as a microphone.</div>
<div class="description-paragraph" id="p-0250" num="0249">In various embodiments, the output jack signal is an encrypted output jack signal, and encrypted and signed output jack signal and the like. The signal from the microcontroller <b>526</b> can be the output jack signal. The output jack signal can be a synchronous Manchester encoded stream, an asynchronized stream and the like. In one embodiment, the output jack signal is at a frequency that the output jack signal appears to look AC to a microphone input of the mobile device <b>516</b>. In one embodiment, a frequency of the output jack signal is 2 KHz to 48 kHz, and in another it is 2.4 kHz. The output jack signal can be a low-amplitude analog waveform.</div>
<div class="description-paragraph" id="p-0251" num="0250">In one embodiment, the read head <b>514</b> sends the output jack signal to the mobile device <b>516</b> at a constant baud rate. As a non-limiting example, the constant baud rate is 2400 to 9200 baud.</div>
<div class="description-paragraph" id="p-0252" num="0251">In one embodiment, the microcontroller <b>526</b> has a non-volatile memory with a size of 2-8 kbytes, and RAM with a size 128-512 bytes. In an embodiment, the analog to digital front end <b>524</b> is configured to capture card <b>520</b> readings that are swept at a rate of 5 inches to 50 inches per second.</div>
<div class="description-paragraph" id="p-0253" num="0252">In one embodiment, the analog to digital front end <b>524</b> includes, an amplifier or amplifier/filter, (collectively <b>532</b>) (<figref idrefs="DRAWINGS">FIG. 36</figref>), differentiator <b>534</b> (<figref idrefs="DRAWINGS">FIG. 37</figref>), a comparator <b>536</b> (<figref idrefs="DRAWINGS">FIG. 38</figref>) and can include have wake-up electronics <b>538</b> (<figref idrefs="DRAWINGS">FIG. 39</figref>) which can be a wake-up circuit. A power source <b>540</b> (<figref idrefs="DRAWINGS">FIGS. 40 and 41</figref>), including but not limited to a battery, can be coupled to the wake-up electronics <b>538</b>. The wake-up electronics <b>538</b> signals the microcontroller <b>526</b>, which in turn puts the device electronics <b>522</b> into an active mode from a sleep mode and back into the sleep mode when a card <b>520</b> swipe signal stops. The wake-up electronics <b>538</b> is powered down by the microcontroller <b>526</b> when the device electronics <b>522</b> is in the active mode. In various embodiments the wake-up electronics <b>538</b>, (i) utilize an op-amp, (ii) utilize an op-amp, a discrete transistor, and associated passive components and the like. Portions of the analog circuitry can be powered-down to conserve power when not in use, and automatically powered-up when the beginning of a card <b>520</b> swipe is detected.</div>
<div class="description-paragraph" id="p-0254" num="0253">In one embodiment, the wake-up electronics <b>538</b> are powered by a microphone bias of a mobile device <b>516</b>. In another embodiment, the microphone-bias line is used both for power and for data transmission back to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0255" num="0254">The wake-up electronics <b>538</b> detects when there is an edge from leading zeros of a card <b>520</b> being swiped and alerts to wake up the microcontroller <b>526</b> and device electronics <b>522</b>. The device electronics <b>522</b> wakes up in enough time to process and encrypt a card <b>520</b> swipe signal.</div>
<div class="description-paragraph" id="p-0256" num="0255">The device electronics <b>522</b> can include the amplifier/filter <b>532</b>, differentiator <b>534</b>, comparator <b>536</b>, transmission electronics <b>542</b> (<figref idrefs="DRAWINGS">FIG. 42</figref>), the microcontroller <b>526</b> and optionally the wake-up electronics <b>538</b>.</div>
<div class="description-paragraph" id="p-0257" num="0256">The raw magnetic head signal is amplified by the amplifier/filter <b>532</b> and processed before the microcontroller <b>526</b> accepts it as an input. The differentiator <b>534</b> takes the output of the amplifier/filter <b>532</b> and differentiates it, looking for peaks in the input signal. The comparator <b>536</b> takes the output of the differentiator <b>534</b> and compares it to a reference voltage and produces an output that is a processed digital version of a magnetic swipe. The comparator <b>536</b> looks for where an input signal crosses zero. The microcontroller <b>526</b> accepts the comparator <b>536</b> inputs, processes the comparator <b>536</b> inputs and encrypts at least a portion of data of the comparator <b>536</b> input. The microcontroller <b>526</b> controls power to the amplifier/filter <b>532</b>, differentiator <b>534</b> and the comparator <b>536</b>. The comparator <b>536</b> can be included as part of the microcontroller <b>526</b>. The transmission electronics <b>542</b> accepts output data of the microcontroller <b>526</b> as an input and uses this to modulate a microphone-bias line of the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0258" num="0257">In another embodiment, a method is provided of transmitting information to a mobile device <b>516</b> using the card reader <b>510</b>. In this embodiment, the raw magnetic head signal is received at the analog to digital front end <b>524</b> and converted into a processed digital signal that the microcontroller <b>526</b> can interpret. The output jack signal is thereafter delivered to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0259" num="0258">In another embodiment, the card reader <b>510</b> includes a housing <b>512</b>. The read head <b>514</b> is positioned in the housing <b>512</b> and is configured to be coupled to the mobile device <b>516</b>. In this embodiment, the power supply is coupled to the wake-up electronics <b>538</b> and the microcontroller <b>526</b>. The output jack <b>530</b> is adapted to be inserted in a port of the mobile device <b>516</b> and deliver the output jack signal to the mobile device <b>516</b>. The wake-up electronics <b>538</b> is powered by a microphone bias of a mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0260" num="0259">In another embodiment, a method is provided of transmitting information to a mobile device <b>516</b>. The read head <b>514</b> includes the power supply coupled to wake-up electronics <b>538</b> and the microcontroller <b>526</b>. The wake-up electronics <b>538</b> is powered by a microphone bias of the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0261" num="0260">In another embodiment, the card reader <b>510</b> includes a housing <b>512</b>, a read head <b>514</b> positioned in the housing <b>512</b>, the power supply coupled to wake-up electronics <b>538</b> and the microcontroller <b>526</b> and the output jack <b>530</b> adapted to be inserted in a port of the mobile device <b>516</b> and deliver an output jack signal to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0262" num="0261">In another embodiment, a method is of transmitting information to a mobile device <b>516</b>. A card reader <b>510</b> is provided with a read head <b>514</b> that has a slot <b>518</b> for swiping a magnetic stripe of a card <b>520</b>, a power supply, the card reader <b>510</b> including wake-up electronics <b>538</b> and a microcontroller <b>526</b>, and a power supply coupled to the wake-up electronics <b>538</b> and the microcontroller <b>526</b>. Data is read from the magnetic stripe. A raw magnetic signal is produced indicative of data stored on the magnetic stripe. The raw magnetic head signal is converted into a processed digital signal that the microcontroller <b>526</b> interprets. An output jack signal is thereafter sent to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0263" num="0262">In another embodiment of the present invention, illustrated in <figref idrefs="DRAWINGS">FIG. 42</figref>, a card reader <b>510</b> is provided with the housing <b>512</b> and the read head <b>514</b> positioned in the housing <b>512</b>. The read head <b>514</b> includes the slot <b>518</b>. The read head <b>514</b> is positioned, and configured, to accommodate rocking of a card <b>520</b> while being swept in the slot <b>518</b>, and produce a successful read of the magnetic stripe of the card <b>520</b>. In one embodiment, the rocking is in an amount of 1 to 10 degrees of rotation from the bottom surface of the card away to the bottom surface of the slot.</div>
<div class="description-paragraph" id="p-0264" num="0263">In various embodiments, the rocking can be, 2 to 10 degrees of rotation, 3 to 10 degrees of rotation, 4 to 10 degrees of rotation and the like.</div>
<div class="description-paragraph" id="p-0265" num="0264">The rotation can be in a direction of a plane of the card <b>520</b>. Accommodation of rocking enables a bottom of the card <b>520</b> to be moved in a direction away from a bottom of the slot <b>518</b> while the card <b>520</b> is slid through the slot <b>518</b> (<figref idrefs="DRAWINGS">FIG. 44</figref>). In one embodiment, the read head <b>514</b> has a side where the output jack <b>530</b> extends with a width of no more than 5 mm.</div>
<div class="description-paragraph" id="p-0266" num="0265">In one embodiment, the slot <b>518</b> is configured to provide for directionality of card <b>520</b> swipe directions (<figref idrefs="DRAWINGS">FIG. 31</figref>). This can be achieved by, the slot <b>518</b> having a wider entrance track at one end to receive a card <b>520</b>, providing direction indicia on the housing <b>512</b>, and the like.</div>
<div class="description-paragraph" id="p-0267" num="0266">As illustrated in <figref idrefs="DRAWINGS">FIG. 44</figref>, in one embodiment, the read head <b>514</b> is biased in a direction to one edge of a magnetic track of the card <b>520</b> when the card is in the slot <b>518</b>. The read head <b>514</b> can be biased to one edge of a magnetic track of the card <b>520</b> and to one side of the card slot <b>518</b>. The result of this is that a card in the slot can be rotated more on one side of the card slot.</div>
<div class="description-paragraph" id="p-0268" num="0267">In another embodiment, a method is provided of transmitting information to a mobile device <b>516</b> with a small reader <b>510</b>. The card reader <b>510</b> has length and height dimensions that are less than length or height dimensions of a coupled mobile device <b>516</b> (<figref idrefs="DRAWINGS">FIG. 16(<i>b</i>)</figref>). A card <b>520</b> is slid in the slot <b>518</b>, data is read from the magnetic stripe, a raw magnetic signal indicative of data stored on the magnetic stripe is produced, and the raw magnetic head signal is processed into a processed digital signal that the microcontroller <b>526</b> can interpret. Rocking of the card <b>520</b> in the slot <b>518</b> is accommodated with a successful read of the magnetic stripe of the card <b>520</b>. The rocking is in an amount of 1 to 10 degrees of rotation of a bottom surface of the card <b>520</b> away from a bottom surface of the slot <b>518</b>. An output jack signal is thereafter sent to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0269" num="0268">Referring now to <figref idrefs="DRAWINGS">FIG. 45</figref>, in another embodiment of the present invention, a card reader <b>510</b> includes a housing <b>512</b> with length, height and width dimensions. A read head <b>514</b> is positioned in the housing <b>512</b>. The read head <b>514</b> is configured to be coupled to a mobile device <b>516</b>. The read head <b>514</b> has a slot <b>518</b> for swiping a magnetic stripe of a card <b>520</b>. The read head <b>514</b> reads data on the magnetic stripe and produces a signal indicative of data stored on the magnetic stripe. An asymmetric spring <b>544</b> is coupled to the read head <b>514</b>. The asymmetric spring <b>514</b> positions the read head <b>514</b> to be offset in the housing <b>512</b>, with the housing length and height edges being non-symmetrical in respect to the length and height edges of the read head <b>514</b>. An output jack <b>530</b> is adapted to be inserted in a port of the mobile device and deliver an output jack signal to the mobile device;</div>
<div class="description-paragraph" id="p-0270" num="0269">The asymmetric spring <b>544</b> can be a cantilever with a pre-load onto an opposing wall on a back bone to provide that the read head <b>514</b> is substantially perpendicular to the magnetic strip of the card <b>520</b> when the card <b>520</b> is read by the read head <b>514</b>. The asymmetric spring <b>544</b> can be configured to provide read head <b>514</b> positional adjustment when a card <b>520</b> is in the card reader slot <b>518</b>. Accommodation of rocking enables a card <b>520</b> to be moved in a direction away from a bottom of the slot <b>518</b> while the card <b>520</b> is slid through the slot <b>518</b>. The asymmetric spring <b>544</b> can be attached at a single point to a side of the housing <b>512</b>.</div>
<div class="description-paragraph" id="p-0271" num="0270">In one embodiment, the asymmetric spring <b>544</b> angles the read head <b>514</b> to create an angled read head <b>514</b>. This provides that when a card <b>520</b> is inserted in the slot <b>518</b> the read head <b>514</b> is parallel to the card <b>520</b>. The angled head is substantially parallel with a card <b>520</b> as it is swiped through the slot <b>518</b>.</div>
<div class="description-paragraph" id="p-0272" num="0271">As illustrated in <figref idrefs="DRAWINGS">FIG. 44</figref>, the asymmetric spring <b>544</b> shifts the read head <b>514</b> off center relative to the housing <b>512</b>. In various embodiments, offsetting of the read head <b>514</b>, (i) increases successful card <b>520</b> readings when the card <b>520</b> is rotated about a corner of a bottom of the slot <b>518</b>; (ii) allows the card <b>520</b> to be rotated at a greater angle while still keeping the read head's active area on the magnetic track of the card <b>520</b>; (iii) allows for more card <b>520</b> rotation by the user as the card <b>520</b> is swept through the slot <b>518</b>; and the like.</div>
<div class="description-paragraph" id="p-0273" num="0272">In one embodiment, the read head <b>514</b> is shifted up with respect to a center line of the magnetic track. The card <b>520</b> can be rotated farther off a bottom of the slot <b>518</b> before a read head active area is no longer on the magnetic track of the card <b>520</b>. In various embodiments, the read head <b>514</b> is configured to be positioned to, (i) be offset from a center of track <b>1</b> or track <b>2</b> of the card <b>520</b>; provide up to 10 degrees of rotation and still register on track <b>1</b> or track <b>2</b> of the card <b>520</b>, and the like.</div>
<div class="description-paragraph" id="p-0274" num="0273">As shown in <figref idrefs="DRAWINGS">FIG. 44</figref>, in one embodiment, the read head <b>514</b> is positioned away from the center point of the housing <b>512</b>. The read head <b>514</b> is offset from track <b>1</b> of the card <b>520</b> when the card <b>520</b> is positioned in the slot <b>518</b> and is in contact with a bottom of the slot <b>518</b>. Offsetting the read head <b>514</b> from track <b>1</b> of a card <b>520</b> is used to bias the slot <b>518</b> to a bottom of track <b>1</b> of the card <b>520</b>. When the read head <b>514</b> is offset the user is provided with a flexibility to move the card <b>520</b> in a direction away from a bottom of the slot <b>518</b> as the card <b>520</b> is slid.</div>
<div class="description-paragraph" id="p-0275" num="0274">By offsetting, the housing <b>512</b> has a bottom surface that is adjacent to the mobile device <b>516</b>, and the read head <b>514</b> is positioned in the housing <b>512</b> to be non-parallel to the bottom surface and the associated surface of the mobile device <b>516</b>. Off setting provides a higher success rate of swipes achieved with rotation of the card <b>520</b> in the slot <b>518</b>.</div>
<div class="description-paragraph" id="p-0276" num="0275">In one embodiment, the device electronics receives a raw signal ferom the read head <b>514</b> and converts it into a process digital signal that the microcontroller <b>526</b> can interpret. The microcontroller <b>526</b> has associated logic resources and code that receives a digital signal from the device electronics <b>522</b> and creates an encrypted and signed message based on the contents of the signal. The output jack <b>530</b> delivers an encrypted and signed output jack signal to the mobile device <b>516</b>, with at least a portion of the output jack signal being encrypted. The message created can contain both encrypted and non-encrypted data, and a signature that can be used to verify that the data has not been modified.</div>
<div class="description-paragraph" id="p-0277" num="0276">In one embodiment, the microcontroller code uses a block cipher for encryption and signing. In one embodiment, the microcontroller uses the CCFB+H cipher mode for encryption and signing. Some embodiments of the encryption logic are described in <i>Two</i>-<i>Pass Authenticated Encryption Faster than Generic Composition</i>, S. Lucks, University of Mannheim, Germany; http://th/informatic-uni-mannheim/de/people/lucks/.; and <i>Comparing Block Cipher Modes of Operation on MICAz Sensor Nodes</i>, G. Bauer et al., Institute for Applied Information Processing and Communications, Gran University of Technology, both fully incorporated herein by reference.</div>
<div class="description-paragraph" id="p-0278" num="0277">The microcontroller code can include a unique identifier and cryptographic key. The code can inspect itself to see if it, its cryptographic key, or its identifier has been modified. In one embodiment, the code includes countermeasures to detect tampering and attacks on the card reader.</div>
<div class="description-paragraph" id="p-0279" num="0278">In one embodiment, the card reader <b>514</b> disables itself when modification or tampering is detected. In one embodiment, the code is no more than 8 kilobytes in size.</div>
<div class="description-paragraph" id="p-0280" num="0279">The cryptographic key can be expanded before programming, and the microcontroller code does not include or require key expansion functionality. The microcontroller can be configured to recalculate the bit period in real time to capture variable-speed swipes. In one embodiment, the microcontroller is configured to parse and error-check card data. Additionally, the microcontroller can be configured to run periodic checksums on code and memory.</div>
<div class="description-paragraph" id="p-0281" num="0280">In one embodiment, the microcontroller uses thresholds to filter out erroneous data and/or false edges. The microcontroller can be configured to determine 1's and 0's by checking the frequency of polarity changes within a bit period.</div>
<div class="description-paragraph" id="p-0282" num="0281">In one embodiment, the microcontroller <b>526</b> is configured to produce a synchronous Manchester encoded stream that makes a greater number of 0 crossings. The output jack <b>530</b> is adapted to be inserted in a port of the mobile device <b>516</b> and deliver a Manchester encoded stream via the output jack <b>530</b> to the mobile device <b>516</b>.</div>
<div class="description-paragraph" id="p-0283" num="0282">The number of 0 crossings is sufficient to simulate a signal with a sufficiently high frequency so that the mobile device's active filter does not cut off the output jack signal. AC coupling/filtering can be applied to the output jack signal.</div>
<div class="description-paragraph" id="p-0284" num="0283">Referring to <figref idrefs="DRAWINGS">FIG. 46</figref>, in another embodiment a method of reconstructing a packet that includes financial card information from a mobile device uses a card reader <b>510</b> with a read head <b>514</b> and a slot <b>518</b> for swiping a magnetic stripe of a card <b>520</b>. Device electronics <b>522</b> includes a microcontroller <b>526</b> with logic resources with code. The card reader <b>514</b> has a unique identifier and associated cryptographic key. The same code is used to produce an encrypted and signed signal. The encrypted and signed signal, that includes the card reader identifier, is delivered to the mobile device <b>516</b>. The mobile device <b>516</b> sends an encrypted and signed packet to a back end of a payment system. A cryptographic key is used to decrypt and verify the contents of the packet at the back end. Non-encrypted card <b>520</b> information is sent to a payment gateway.</div>
<div class="description-paragraph" id="p-0285" num="0284">The packet can contain both encrypted and non-encrypted data. The signature can be used to verify that the data has not been modified. In one embodiment, the encrypted and signed packet includes an identifier that is unique to the card reader <b>510</b>. The cryptographic key associated with the card reader <b>510</b> is derived from a master secret and the card reader's unique identifier. The master secret can be created in a hardware security module and never transmitted to or shared with the card reader <b>510</b> manufacturing facility, payment gateway, mobile devices, or any other third party.</div>
<div class="description-paragraph" id="p-0286" num="0285">The back end derives the cryptographic key used to encrypt a packet based on the unique identifier contained within the packet. In one embodiment, the back end uses a block cipher algorithm to decrypt and verify the contents of the packet, and the CCFB+H cipher mode to decrypt and verify the contents of the packet.</div>
<div class="description-paragraph" id="p-0287" num="0286">An acknowledgment of successful or unsuccessful transactions can be sent from the back-end to the mobile device. Selected information about the packet and transaction can be stored at the back-end and used for data mining. The stored information can be used for communicating to a purchaser relative to the purchaser's purchasing history and activity.</div>
<div class="description-paragraph" id="p-0288" num="0287">In one embodiment, the encrypted and signed signal is created by the microcontroller <b>526</b> with no more than 8 kilobytes of code. The microcontroller <b>526</b> can be used to recalculate a bit period in real time to capture variable-speed swipes. Additionally, the microcontroller <b>526</b> can be used to parse and error-check card <b>520</b> data. In one embodiment, the microcontroller <b>526</b> is used to run periodic checksums on code and memory.</div>
<div class="description-paragraph" id="p-0289" num="0288">Thresholds can be used to filter out erroneous data and/or false edges. The microcontroller <b>526</b> can be used to determine 1's and 0's by checking the frequency of polarity changes within a bit period.</div>
<div class="description-paragraph" id="p-0290" num="0289">The foregoing description of various embodiments of the claimed subject matter has been provided for the purposes of illustration and description. It is not intended to be exhaustive or to limit the claimed subject matter to the precise forms disclosed. Many modifications and variations will be apparent to the practitioner skilled in the art. Particularly, while the concept “component” is used in the embodiments of the systems and methods described above, it will be evident that such concept can be interchangeably used with equivalent concepts such as, class, method, type, interface, module, object model, and other suitable concepts. Embodiments were chosen and described in order to best describe the principles of the invention and its practical application, thereby enabling others skilled in the relevant art to understand the claimed subject matter, the various embodiments and with various modifications that are suited to the particular use contemplated.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">20</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM118799526">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. A payment card reader, comprising:
<div class="claim-text">a housing;</div>
<div class="claim-text">a slot positioned within the housing, the slot comprising a read head configured to be coupled to a mobile device, wherein the read head is configured to read data on a payment card and produce a signal indicative of data stored on the payment card;</div>
<div class="claim-text">a power supply coupled to a microcontroller;</div>
<div class="claim-text">an output jack adapted to be inserted in a port of the mobile device and deliver an output jack signal to the mobile device; and</div>
<div class="claim-text">device electronics comprising a control unit, a pathway subsystem, and a fake load, and wherein the pathway subsystem is configured to direct a signal path to the fake load and prevent the mobile device from detecting a disconnect with the payment card reader during a power cycle of the payment card reader.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the output jack signal is an encrypted output jack signal.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the output jack signal is produced by the microcontroller.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<div class="claim-text">device electronics that includes the microcontroller and an analog to digital front-end.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text">5. The payment card reader of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the analog to digital front end is coupled to a processing element in the microcontroller, and the analog to digital front end is configured to receive a raw magnetic head signal and convert the raw magnetic head signal into a processed digital signal that the microcontroller can interpret.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text">6. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the payment card is one of: a financial transaction card, a wristband, a radio frequency identification number (RFID) chip, a cell phone, or a biometric marker.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text">7. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising wake-up electronics that are configured to signal the microcontroller, which in turn puts the device electronics into an active mode from a sleep mode, and back into the sleep mode when the payment card is no longer present at the payment card reader.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text">8. The payment card reader of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the wake-up electronics are powered down by the microcontroller when the device electronics is in the active mode.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text">9. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a communication subsystem and a monitor subsystem, wherein the control unit is configured to set a status bit if a voltage is detected on the fake load indicating the payment card reader is still connected to the mobile device.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text">10. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the microcontroller in the payment card reader is configured to run periodic checksums on memory of the payment card reader.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text">11. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising transmission electronics that are configured to accept output data of the microcontroller as an input and use this to modulate a microphone-bias line of the mobile device.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text">12. The payment card reader of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the power supply receives power from a bias voltage applied to a microphone-bias line by the mobile device.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00013" num="00013">
<div class="claim-text">13. A payment object reader, comprising:
<div class="claim-text">a read head configured to read data stored on a payment object;</div>
<div class="claim-text">a load configured to develop a signal condition in response to an input signal applied to the load;</div>
<div class="claim-text">a connector configured to be connected to a port of a mobile device, wherein the connector is further configured to deliver an output signal based at least in part on the data stored on the payment object to the mobile device, and wherein the connector is further configured to selectively deliver the input signal to the load; and</div>
<div class="claim-text">a control unit configured to select delivery of the input signal to the load to prevent the mobile device from detecting a disconnection from the payment object reader during a power cycle of the payment object reader.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00014" num="00014">
<div class="claim-text">14. The payment object reader of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the read head comprises a chip reading head.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00015" num="00015">
<div class="claim-text">15. The payment object reader of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the read head comprises a magnetic stripe reading head.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00016" num="00016">
<div class="claim-text">16. The payment object reader of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the read head comprises a radio frequency identification number (RFID) reading head.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00017" num="00017">
<div class="claim-text">17. The payment object reader of <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising wake-up electronics, device electronics, and a microcontroller within the payment object reader, wherein the wake-up electronics are configured to signal the microcontroller, which in turn puts the device electronics into an active mode from a sleep mode, and back into the sleep mode when a payment object signal stops.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00018" num="00018">
<div class="claim-text">18. The payment object reader of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the wake-up electronics are powered down by the microcontroller when the device electronics is in the active mode.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00019" num="00019">
<div class="claim-text">19. The payment object reader of <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising a power supply that receives power from a bias voltage applied to a microphone-bias line by the mobile device.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00020" num="00020">
<div class="claim-text">20. A method comprising:
<div class="claim-text">reading, by a read head of a payment object reader, data stored on a payment object;</div>
<div class="claim-text">delivering, by a connector of the payment object reader that is configured to be connected to a port of a mobile device, an output signal to the mobile device based at least in part on the data stored on the payment object;</div>
<div class="claim-text">selecting delivery of an input signal, by a control unit of the payment object reader, to a load to prevent the mobile device from detecting a disconnection from the payment object reader during a power cycle of the payment object reader;</div>
<div class="claim-text">developing a signal condition, by a load of the payment object reader, in response to an input signal applied to the load.</div>
</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    