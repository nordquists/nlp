
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US20060206744A1 - Low-power high-throughput streaming computations 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA49471286">
<div class="abstract" id="p-0001" num="0000">A method for optimizing voltage and frequency for pipelined architectures that offers better power efficiency. The invention provides methods for low-power high-throughput hardware implementations to stream computations by partitioning a computation into temporally distinct stages, assigning a clock frequency to each stage such that an overall computational throughput is met and assigning to each stage a supply voltage according to its respective clock frequency and circuit parameters. </div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><ul class="description" lang="EN" load-source="patent-office" mxw-id="PDES13814745">
<heading id="h-0001">BACKGROUND </heading>
<li> <para-num num="[0001]"> </para-num> <div class="description-line" id="p-0002" num="0001"> The invention relates generally to the field of pipelined hardware architecture. More specifically, embodiments of the invention relate to systems and methods for implementing power efficient hardware solutions for streaming computations. </div>
</li> <li> <para-num num="[0002]"> </para-num> <div class="description-line" id="p-0003" num="0002"> Low power consumption and high performance are important requirements for any signal processing hardware design. Mobile multimedia systems are becoming popular consumer items, but limited battery life continues to be a problem. Energy efficiency must be balanced against the fact that users demand a high quality of service. With the ever increasing number of battery-operated devices, the need for minimizing power consumption without compromising performance is essential. </div>
</li> <li> <para-num num="[0003]"> </para-num> <div class="description-line" id="p-0004" num="0003"> The practice of using data pipelines for streaming computations leads to high performance. Pipelining breaks up a complex operation performed on a stream of data into smaller sequential stages or subprocesses where the output of one subprocess feeds into the next. When implemented properly, multiple operations can be performed concurrently even if one step normally would depend on the result of the preceding step before it can start. Pipelining improves performance by reducing the idle time or latency of each piece of hardware. Conversely, the pipelined stages must be designed to make the pipeline balanced, so that the different stages take approximately the same time to complete. With each clock cycle, new data is input to one end of the pipeline and a completed result will be output from the other end. </div>
</li> <li> <para-num num="[0004]"> </para-num> <div class="description-line" id="p-0005" num="0004"> Pipelining enables the realization of high-speed, high-efficiency complementary metal oxide semiconductor (CMOS) data paths by allowing for the reduction of supply voltages to the lowest possible levels while still satisfying throughput constraints. In deep pipelines, however, registers and corresponding clock trees are responsible for an increasingly large fraction of total dissipation, no matter how efficiently they may have been implemented. </div>
</li> <li> <para-num num="[0005]"> </para-num> <div class="description-line" id="p-0006" num="0005"> One application that naturally lends itself to pipelining is video processing, a key component of streaming multimedia communications and an integral part of next-generation portable devices. Currently, there are several video standards established for different purposes such as MPEG, JPEG 2000 and others, and their implementations for mobile systems-on-a-chip (SoCs) provide substantial computing capabilities at low energy consumption levels. The requirements of these standards incorporate demanding computations that include the discrete cosine transform (DCT) and inverse discrete cosine transform (IDCT), the discrete wavelet transform (DWT) and inverse discrete wavelet transform (IDWT), motion estimation, motion compensation, variable-length coding/decoding, quantization and inverse quantization. JPEG 2000 is a recently developed standard for digital image processing and individually compresses each frame in a moving picture. Implementations of JPEG 2000 may be used in applications ranging from battery-operated cameras where low-power consumption is desirable, to digital cinema which requires real-time decompression of high-resolution images. </div>
</li> <li> <para-num num="[0006]"> </para-num> <div class="description-line" id="p-0007" num="0006"> Streaming computations are numeric operations in which data flow is unidirectional and uninterrupted from a primary input or inputs, to a primary output or outputs. During computation, however, the data flow can experience transformations where the amount of data being processed changes. Data can increase progressively as it is processed through a plurality of stages due to external inputs or internal generation due in part to signal processing techniques like the Nyquist criteria. Most current implementations are synchronous, using a global clock to pace all operations of a system or device where all components of the system operate once per clock cycle. However, using a global clock reduces efficiency. </div>
</li> <li> <para-num num="[0007]"> </para-num> <div class="description-line" id="p-0008" num="0007"> To illustrate the association of power and frequency, the delay of a logic gate T<sub>d </sub>is given by  
<maths id="MATH-US-00001" num="1"> <math overflow="scroll"> <mtable> <mtr> <mtd> <mrow> <mrow> <msub> <mi>T</mi> <mi>d</mi> </msub> <mo>=</mo> <mfrac> <mrow> <msub> <mi>C</mi> <mi>L</mi> </msub> <mo>⁢</mo> <msub> <mi>xV</mi> <mi>dd</mi> </msub> </mrow> <mrow> <mi>μ</mi> <mo>⁢</mo> <mstyle> <mtext> </mtext> </mstyle> <mo>⁢</mo> <mrow> <msub> <mi>C</mi> <mi>ox</mi> </msub> <mo>⁡</mo> <mrow> <mo>(</mo> <mrow> <mi>W</mi> <mo>/</mo> <mi>L</mi> </mrow> <mo>)</mo> </mrow> </mrow> <mo>⁢</mo> <msup> <mrow> <mo>(</mo> <mrow> <msub> <mi>V</mi> <mi>dd</mi> </msub> <mo>-</mo> <msub> <mi>V</mi> <mi>th</mi> </msub> </mrow> <mo>)</mo> </mrow> <mn>2</mn> </msup> </mrow> </mfrac> </mrow> <mo>,</mo> </mrow> </mtd> <mtd> <mrow> <mo>(</mo> <mn>1</mn> <mo>)</mo> </mrow> </mtd> </mtr> </mtable> </math> </maths>
</div>
</li> <li> <para-num num="[0008]"> </para-num> <div class="description-line" id="p-0009" num="0008"> where C<sub>L </sub>is the load capacitance, V<sub>dd </sub>the supply voltage, V<sub>th </sub>the device threshold voltage, W and L the width and length of the transistor channels, C<sub>ox </sub>the oxide capacitance and μ the mobility. CMOS transistors have a source-drain channel formed only when their gate voltage is larger than V<sub>th</sub>. If the source-drain voltage V<sub>dd </sub>is greater than the gate voltage, the transistor operates in a saturation mode where they exhibit switch-like properties required for logic circuit design. Keeping all device parameters and circuit topology constant, T<sub>d </sub>is inversely proportional to the supply voltage V<sub>dd </sub>if operation is over the threshold voltage. </div>
</li> <li> <para-num num="[0009]"> </para-num> <div class="description-line" id="p-0010" num="0009"> The delay T<sub>d </sub>approximately doubles if the voltage is halved. Conversely, if the frequency is halved, the voltage can be reduced in practice. </div>
</li> <li> <para-num num="[0010]"> </para-num> <div class="description-line" id="p-0011" num="0010"> In addition to logic gate delay Td, the power P consumed by a CMOS device is 
<br/>
<i>P=C</i> <sub>L</sub> <i>V</i> <sub>dd</sub> <sup>2</sup> <i>f</i>  (2) 
</div>
</li> <li> <para-num num="[0011]"> </para-num> <div class="description-line" id="p-0012" num="0011"> where f is the frequency. As can be seen, power has a quadratic dependence on the supply voltage V<sub>dd</sub>, and a linear relationship with the frequency f of operation. Since power consumption is proportional to clock frequency, the difference becomes more important at higher operating frequencies. </div>
</li> <li> <para-num num="[0012]"> </para-num> <div class="description-line" id="p-0013" num="0012"> <figref idrefs="DRAWINGS">FIG. 1</figref> <i>a </i>shows a single computation block C transformed into two discrete computation blocks that can be evaluated in a parallel configuration (spatially parallel) as shown in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>b </i>or in a pipelined configuration (temporally parallel) as shown in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>c</i>. Computation block C has two inputs, D<sub>in1 </sub>and D<sub>in2 </sub>and a single output D<sub>out</sub>. Each data element in the data stream has a binary word length and communication can be serial (w=1) or parallel (w=2, 3, 4, . . . n, a plurality of lines corresponding to a binary word length). In order to operate, computation block C requires a supply voltage V and a clock frequency f. </div>
</li> <li> <para-num num="[0013]"> </para-num> <div class="description-line" id="p-0014" num="0013"> When the functional requirement of computation block C is decomposed into a system of parallel computation blocks C<sub>1 </sub>and C<sub>2 </sub>as in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>b</i>, each block can be clocked at half the frequency of computation block C,  
<maths id="MATH-US-00002" num="2"> <math overflow="scroll"> <mrow> <mfrac> <mi>f</mi> <mn>2</mn> </mfrac> <mo>,</mo> </mrow> </math> </maths>
<br/>
 while maintaining the same data throughput. Voltages V<sub>1 </sub>and V<sub>2 </sub>supplied to blocks C<sub>1 </sub>and C<sub>2 </sub>can be reduced by  
<maths id="MATH-US-00003" num="3"> <math overflow="scroll"> <mrow> <mfrac> <mn>1</mn> <mn>2</mn> </mfrac> <mo>⁢</mo> <mrow> <mo>(</mo> <mfrac> <mi>V</mi> <mn>2</mn> </mfrac> <mo>)</mo> </mrow> </mrow> </math> </maths>
<br/>
 in proportion to the frequency  
<maths id="MATH-US-00004" num="4"> <math overflow="scroll"> <mfrac> <mi>f</mi> <mn>2</mn> </mfrac> </math> </maths>
<br/>
 and are equal V<sub>1</sub>=V<sub>2</sub>. While voltage and frequency decrease by a factor of two, the total system capacitance increases approximately by a factor of two due to the parallel implementation. Power has a cubic relationship with voltage and frequency as shown in equations (1) and (2), leading to a 4× reduction in power. In practice, the power reduction is not as great due to additional wiring capacitances and smaller voltage reductions due to threshold voltage restrictions. 
</div>
</li> <li> <para-num num="[0014]"> </para-num> <div class="description-line" id="p-0015" num="0014"> When computation block C is functionally decomposed into a pipeline comprising serial computation blocks C<sub>3 </sub>and C<sub>4 </sub>as in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>c</i>, additional latches are inserted at the boundary between blocks C<sub>3 </sub>and C<sub>4</sub>. The latches enable the components of a pipeline to operate on different portions of the same data stream. Even though the frequency is f, the critical path through the computation block C is split by the latches. In <figref idrefs="DRAWINGS">FIG. 1</figref> <i>a</i>, the delay through computation block C is  
<maths id="MATH-US-00005" num="5"> <math overflow="scroll"> <mrow> <mfrac> <mn>1</mn> <mi>f</mi> </mfrac> <mo>.</mo> </mrow> </math> </maths>
<br/>
 In <figref idrefs="DRAWINGS">FIG. 1</figref> <i>c</i>, the delay through each computation block is  
<maths id="MATH-US-00006" num="6"> <math overflow="scroll"> <mfrac> <mn>1</mn> <mi>f</mi> </mfrac> </math> </maths>
<br/>
 yielding a total delay of  
<maths id="MATH-US-00007" num="7"> <math overflow="scroll"> <mrow> <mfrac> <mn>2</mn> <mi>f</mi> </mfrac> <mo>,</mo> </mrow> </math> </maths>
<br/>
 and the number of circuit elements in the critical path is reduced by two. The circuit elements within blocks C<sub>3 </sub>and C<sub>4 </sub>can have a larger delay and supply voltage V<sub>3 </sub>can be reduced (V<sub>3</sub>&lt;V). The supply voltage V<sub>3 </sub>and frequency f can be reduced by a factor of two leading to a 4× reduction in power. However, capacitance remains unchanged since the hardware for blocks C<sub>3 </sub>and C<sub>4 </sub>together constitute computation block C. In practice, power reduction is not as great due to extra capacitance added by latches and smaller voltage reductions. 
</div>
</li> <li> <para-num num="[0015]"> </para-num> <div class="description-line" id="p-0016" num="0015"> In terms of power consumption, the transformation of computation block C shown in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>b </i>is better than the transformation shown in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>c</i>. In terms of performance, the transformations shown in <figref idrefs="DRAWINGS">FIGS. 1</figref> <i>b </i>and <b>1</b> <i>c </i>are approximately equal. </div>
</li> <li> <para-num num="[0016]"> </para-num> <div class="description-line" id="p-0017" num="0016"> Most existing parallel and pipelined computations use a single global clock and voltage supply. To decrease power consumption, voltage scaling has been employed which uses software controlled voltage modulation based on run-time demands. Other current design efforts for low power operation lower voltage for portions of the circuit, i.e., voltage islands, which are removed from the critical path. A power efficient solution for stream-based pipelines having a plurality of stages but with different computational requirements in each stage has not yet been proposed. </div>
</li> <heading id="h-0002">SUMMARY </heading>
<li> <para-num num="[0017]"> </para-num> <div class="description-line" id="p-0018" num="0017"> A method for optimizing voltage and frequency for pipelined architectures that offers better power efficiency is not available. The inventors have discovered that it would be desirable to have a method of implementing pipelined architectures that result in reduced power consumption while maintaining high throughput by determining frequencies and voltages in conjunction with semiconductor parameters that are dependent upon the amount of streaming data processed in each stage of the pipeline. </div>
</li> <li> <para-num num="[0018]"> </para-num> <div class="description-line" id="p-0019" num="0018"> One aspect of the invention provides methods for implementing a computation as a pipeline that processes streaming data. Methods according to this aspect of the invention preferably start with partitioning the computation into a plurality of temporal stages, each stage having at least one input and at least one output, wherein one of the stages is a first stage having at least one primary input and one of the stages is a last stage having at least one primary output, each stage defined by a clock frequency. Forming a pipeline by coupling at least one output from the first stage to at least one input of another one of the plurality of stages, and coupling at least one output from another one of the plurality of stages to at least one input for the last stage. Assigning a clock frequency to each one of the stages in the pipeline such that an overall throughput requirement is met and not all of the assigned stage clock frequencies are equal and assigning to each stage in the pipeline a supply voltage where not all of the assigned stage voltages are equal. </div>
</li> <li> <para-num num="[0019]"> </para-num> <div class="description-line" id="p-0020" num="0019"> Another aspect of the method of the invention is inserting at least one storage element in at least one of the plurality of stages in the pipeline to allow for operational independence between the storage element stage and another one of the plurality of stages. </div>
</li> <li> <para-num num="[0020]"> </para-num> <div class="description-line" id="p-0021" num="0020"> Yet another aspect of the method of the invention is an inverse discrete wavelet pipeline implementation having at least one reconstruction channel having a low input, a high input and an output, a row processing stage having a row reconstruction channel; the row reconstruction channel output coupled to a row stage storage element first input, the row storage element having a corresponding first output, and the row storage element having a second input and a corresponding second output, a third input and a corresponding third output, and a fourth input and a corresponding fourth output. </div>
</li> <li> <para-num num="[0021]"> </para-num> <div class="description-line" id="p-0022" num="0021"> Other objects and advantages of the systems and methods will become apparent to those skilled in the art after reading the detailed description of the preferred embodiments.</div>
</li> <heading id="h-0003">BRIEF DESCRIPTION OF THE DRAWINGS </heading>
<li> <para-num num="[0022]"> </para-num> <div class="description-line" id="p-0023" num="0022"> <figref idrefs="DRAWINGS">FIG. 1</figref> <i>a </i>is a diagram of an exemplary single computation block. </div>
</li> <li> <para-num num="[0023]"> </para-num> <div class="description-line" id="p-0024" num="0023"> <figref idrefs="DRAWINGS">FIG. 1</figref> <i>b </i>is a diagram of an exemplary parallel computation. </div>
</li> <li> <para-num num="[0024]"> </para-num> <div class="description-line" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIG. 1</figref> <i>c </i>is a diagram of an exemplary pipeline computation. </div>
</li> <li> <para-num num="[0025]"> </para-num> <div class="description-line" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIGS. 2</figref> <i>a </i>and <b>2</b> <i>b </i>is a diagram of an exemplary method of the invention. </div>
</li> <li> <para-num num="[0026]"> </para-num> <div class="description-line" id="p-0027" num="0026"> <figref idrefs="DRAWINGS">FIG. 3</figref> is a diagram of an exemplary pipeline in accordance with the invention. </div>
</li> <li> <para-num num="[0027]"> </para-num> <div class="description-line" id="p-0028" num="0027"> <figref idrefs="DRAWINGS">FIG. 4</figref> is a diagram of an exemplary pipeline including a storage element in accordance with the invention. </div>
</li> <li> <para-num num="[0028]"> </para-num> <div class="description-line" id="p-0029" num="0028"> <figref idrefs="DRAWINGS">FIG. 5</figref> is a diagram of an exemplary forward DWT. </div>
</li> <li> <para-num num="[0029]"> </para-num> <div class="description-line" id="p-0030" num="0029"> <figref idrefs="DRAWINGS">FIG. 6</figref> is a diagram of an exemplary transverse digital filter. </div>
</li> <li> <para-num num="[0030]"> </para-num> <div class="description-line" id="p-0031" num="0030"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a </i>is a diagram of an exemplary N row by M column array. </div>
</li> <li> <para-num num="[0031]"> </para-num> <div class="description-line" id="p-0032" num="0031"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>b </i>is a diagram of an exemplary row decomposition of the array of <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a. </i> </div>
</li> <li> <para-num num="[0032]"> </para-num> <div class="description-line" id="p-0033" num="0032"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>c </i>is a diagram of an exemplary one level decomposition of the array of <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a. </i> </div>
</li> <li> <para-num num="[0033]"> </para-num> <div class="description-line" id="p-0034" num="0033"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>d </i>is a diagram of an exemplary two level decomposition of the array of <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a. </i> </div>
</li> <li> <para-num num="[0034]"> </para-num> <div class="description-line" id="p-0035" num="0034"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>e </i>is a diagram of an exemplary three level decomposition of the array of <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a. </i> </div>
</li> <li> <para-num num="[0035]"> </para-num> <div class="description-line" id="p-0036" num="0035"> <figref idrefs="DRAWINGS">FIG. 7</figref> <i>f </i>is a diagram of an exemplary four level decomposition of the array of <figref idrefs="DRAWINGS">FIG. 7</figref> <i>a. </i> </div>
</li> <li> <para-num num="[0036]"> </para-num> <div class="description-line" id="p-0037" num="0036"> <figref idrefs="DRAWINGS">FIG. 8</figref> is a data flow of an exemplary two level DWT. </div>
</li> <li> <para-num num="[0037]"> </para-num> <div class="description-line" id="p-0038" num="0037"> <figref idrefs="DRAWINGS">FIG. 9</figref> is a diagram of an exemplary IDWT. </div>
</li> <li> <para-num num="[0038]"> </para-num> <div class="description-line" id="p-0039" num="0038"> <figref idrefs="DRAWINGS">FIG. 10</figref> <i>a </i>is a schematic of an exemplary IDWT column stage in accordance with the invention. </div>
</li> <li> <para-num num="[0039]"> </para-num> <div class="description-line" id="p-0040" num="0039"> <figref idrefs="DRAWINGS">FIG. 10</figref> <i>b </i>is a schematic of an exemplary IDWT row stage in accordance with the invention. </div>
</li> <li> <para-num num="[0040]"> </para-num> <div class="description-line" id="p-0041" num="0040"> <figref idrefs="DRAWINGS">FIGS. 11</figref> <i>a</i>-<b>11</b> <i>e </i>is an exemplary data flow of a five level, IDWT using the stages of <figref idrefs="DRAWINGS">FIGS. 10</figref> <i>a </i>and <b>10</b> <i>b. </i> </div>
</li> <heading id="h-0004">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS </heading>
<li> <para-num num="[0041]"> </para-num> <div class="description-line" id="p-0042" num="0041"> Embodiments of the invention will be described with reference to the accompanying drawing figures wherein like numbers represent like elements throughout. Before embodiments of the invention are explained in detail, it is to be understood that the invention is not limited in its application to the details of the examples set forth in the following description or illustrated in the figures. The invention is capable of other embodiments and of being practiced or carried out in a variety of applications and in various ways. Also, it is to be understood that the phraseology and terminology used herein is for the purpose of description and should not be regarded as limiting. The use of “including,” “comprising,” or “having” and variations thereof herein is meant to encompass the items listed thereafter and equivalents thereof as well as additional items. The terms “mounted,” “connected,” and “coupled” are used broadly and encompass both direct and indirect mounting, connecting, and coupling. Further, “connected” and “coupled” are not restricted to physical or mechanical connections or couplings. </div>
</li> <li> <para-num num="[0042]"> </para-num> <div class="description-line" id="p-0043" num="0042"> Shown in <figref idrefs="DRAWINGS">FIGS. 2</figref> <i>a </i>and <b>2</b> <i>b </i>is the method of the invention. The method begins (step <b>101</b>) with the examination of the computation for pipelining to determine performance requirements such as overall throughput required, number of bits for each data element in the data stream, number of discrete operations, inputs and outputs, and the like (step <b>103</b>). The computation is partitioned temporally into a plurality of distinct pipeline stages (step <b>105</b>) defined by a clock frequency. </div>
</li> <li> <para-num num="[0043]"> </para-num> <div class="description-line" id="p-0044" num="0043"> A typical high-level synthesis algorithm comprises a number of steps. The operations within a computation are decomposed into a standard set of operations supported by the pipeline stages. For example, multiplications are broken up into addition and shift operations. Then, an interconnected network of standard operations is formed and allocated to available stages in the pipeline. One algorithm for performing this task is list scheduling, where the given network is topologically sorted and each operation is assigned to a component in the pipeline stage capable of executing it. An operation is assigned only after its predecessors in the network have been assigned. Based on granularity, different operations in the network may be allocated to the same pipeline stage or different stages. Operations in different pipeline stages are temporally divided from each other by latches between stages. Several practical heuristics exist to synthesize a pipeline with minimal stages, minimal latency, etc. A more detailed discussion of the synthesis step is beyond the scope of this disclosure. After synthesis, the operation(s) performed within each stage is translated into a hardware equivalent (step <b>107</b>). </div>
</li> <li> <para-num num="[0044]"> </para-num> <div class="description-line" id="p-0045" num="0044"> Depending upon the performance/computation requirements (step <b>103</b>) and synthesis (step <b>105</b>), a storage element with write and read functionality may be inserted within a pipeline stage (steps <b>109</b>, <b>111</b>) if required. Storage elements are used to maintain continuous data flow and may or may not be required. </div>
</li> <li> <para-num num="[0045]"> </para-num> <div class="description-line" id="p-0046" num="0045"> Once the hardware is synthesized and storage element allocation is complete, clock frequencies are assigned to each pipeline stage, starting with the final stage (step <b>113</b>). The frequency of the final stage is determined to be as low as possible while maintaining the design throughput requirement. The clock frequency for each preceding stage is determined, set as low as possible while maintaining the design throughput (steps <b>115</b>, <b>117</b>, <b>119</b>) until the clock frequencies for all stages in the pipeline are set to their lowest possible values. </div>
</li> <li> <para-num num="[0046]"> </para-num> <div class="description-line" id="p-0047" num="0046"> After all stage clock frequencies have been assigned, the operating voltage for each pipeline stage is determined according to the respective clock frequencies (steps <b>121</b>, <b>123</b>). As discussed above, supply voltage V<sub>dd </sub>and time delay T<sub>d </sub>are inversely proportional, which makes voltage V<sub>dd </sub>and frequency f directly proportional. If the clock frequency for a preceding stage is halved, its supply voltage can likewise be halved so long as the stage supply voltage V<sub>dd </sub>is higher than the hardware threshold voltage V<sub>th </sub>as previously discussed. </div>
</li> <li> <para-num num="[0047]"> </para-num> <div class="description-line" id="p-0048" num="0047"> <figref idrefs="DRAWINGS">FIG. 3</figref> shows an exemplary pipeline resulting from the method of the invention. For an overall process or computation block C, such as that shown in <figref idrefs="DRAWINGS">FIG. 1</figref> <i>a</i>, block C is partitioned into a plurality of stages. For this example, bock C is partitioned into two stages, C<sub>5 </sub>and C<sub>6</sub>. Based upon the data processing functions performed within stage C<sub>5</sub>, the clock frequency f<sub>5 </sub>supplied to stage C<sub>5 </sub>is twice the frequency of f<sub>6</sub>(f<sub>5</sub>=2f<sub>6</sub>) and a switching element sw is required at the input of stage C<sub>5 </sub>to ensure both inputs, D<sub>in1 </sub>and D<sub>in2</sub>, are provided to stage C<sub>5 </sub>at the predetermined frequency f<sub>5</sub>. Switching element sw time-multiplexes the two inputs D<sub>in1</sub>, and D<sub>in2 </sub>into a single input at twice the frequency. The voltage V<sub>6 </sub>supplied to stage C<sub>6 </sub>is set as low as possible, corresponding to the clock frequency f<sub>6 </sub>requirements of stage C<sub>6</sub>, but greater than the hardware threshold voltage V<sub>th </sub>of stage C<sub>6</sub>. The voltage V<sub>5 </sub>supplied to stage C<sub>5 </sub>is then set as low as possible, corresponding to the clock f<sub>5 </sub>requirements of stage C<sub>5</sub>, but greater than the hardware threshold voltage V<sub>th </sub>of stage C<sub>5</sub>. </div>
</li> <li> <para-num num="[0048]"> </para-num> <div class="description-line" id="p-0049" num="0048"> <figref idrefs="DRAWINGS">FIG. 4</figref> shows the use of a storage element str between two consecutive pipeline stages, C<sub>7 </sub>and C<sub>8</sub>. The storage element str allocates two memory spaces mem<sub>1</sub>, mem<sub>2</sub>. The use of the two memory spaces mem<sub>1</sub>, mem<sub>2 </sub>accessed using associated write sw<sub>write </sub>and read sw<sub>read </sub>functions allows each pipeline stage C<sub>7</sub>, C<sub>8 </sub>to work independently of the other. Each write/read function sw<sub>write</sub>, sw<sub>read </sub>can be a functional equivalent of a single-pole double-throw switch, having one pole that can throw or make electrical contact with two separate stationary contacts such as an addressing function of the storage element str, an addressing function of a multiple input port—multiple output port static RAM, a memory space access device, a latch, and the like. The write/read function sw<sub>write</sub>, sw<sub>read </sub>equivalents can switch one or a plurality of data lines w depending if the data path is serial or parallel to each memory space mem<sub>1</sub>, mem<sub>2 </sub>memory content location. The memory spaces mem<sub>1</sub>, mem<sub>2 </sub>in the storage element str are accessed independently, in an exclusive or arrangement by the write/read functions sw<sub>write</sub>, sw<sub>read </sub>allowing for a write function sw<sub>write </sub>to “write to” either memory space, and a read function sw<sub>read </sub>to “read from” either memory space. The “writing to” and “reading from” functions can access the memory content locations of the memory spaces mem<sub>1</sub>, mem<sub>2 </sub>in any predetermined pattern. The memory spaces mem<sub>1</sub>, mem<sub>2 </sub>can have the same or different storage capacities. </div>
</li> <li> <para-num num="[0049]"> </para-num> <div class="description-line" id="p-0050" num="0049"> Depending upon the access of the read function sw<sub>read</sub>, storage element sir contents mem<sub>1 </sub>or mem<sub>2 </sub>can be read by stage C<sub>8</sub>. Depending upon the access of the write function sw<sub>write</sub>, storage element str contents mem<sub>1 </sub>or mem<sub>2 </sub>can be written to by stage C<sub>7</sub>. In this example, the access of the write sw<sub>write </sub>and read sw<sub>read </sub>functions are controlled in opposite correspondence—one memory space mem<sub>2 </sub>is read from while the other memory space mem<sub>1 </sub>is written to. </div>
</li> <li> <para-num num="[0050]"> </para-num> <div class="description-line" id="p-0051" num="0050"> Each stage C<sub>7</sub>, C<sub>8 </sub>can process data until it reads (stage C<sub>8</sub>) all data (mem<sub>2</sub>), or writes (stage C<sub>7</sub>) all data (mem<sub>1</sub>). The separation of stage operations using a storage element sir is desirable when different stages have to write or read data in different patterns. The storage capacity of a memory space is greater than or equal to the latency of a following stage. A classic, prior art pipeline implementation only permits sequential dataflow, i.e., the output of a stage is accessed in the same order by the input of a subsequent stage. The operating frequency of the storage elements sir is that of its associated stage. The voltage V<sub>8 </sub>supplied to stage C<sub>8 </sub>is set as low as possible, corresponding to the clock f<sub>8 </sub>requirements of stage C<sub>8</sub>, but greater than the hardware threshold voltage V<sub>th </sub>of stage C<sub>8</sub>. The voltage V<sub>7 </sub>supplied to stage C<sub>7 </sub>is then set as low as possible, corresponding to the clock f<sub>7 </sub>requirements of stage C<sub>7</sub>, but greater than the hardware threshold voltage V<sub>th </sub>of stage C<sub>7</sub>. </div>
</li> <li> <para-num num="[0051]"> </para-num> <div class="description-line" id="p-0052" num="0051"> The advantage of the method of the invention is reduced power consumption. As discussed above, power has a quadratic relationship with voltage and a linear relationship with frequency. Power therefore has a cubic relationship with voltage and frequency together. If frequency and voltage are both halved, power consumption reduces by a factor of 8. Another advantage is the use of storage elements providing for high throughput. </div>
</li> <li> <para-num num="[0052]"> </para-num> <div class="description-line" id="p-0053" num="0052"> The invention is used to optimally realize in hardware operationally complex computations. What follows is an example of a low-power, high-throughput hardware implementation of multi-stage digital signal transformations based upon the teachings of the invention. The example implements one of the more complex portions of JPEG 2000 image reconstruction—a 2-dimensional IDWT. </div>
</li> <li> <para-num num="[0053]"> </para-num> <div class="description-line" id="p-0054" num="0053"> When reconstructing an image using a 2-dimensional IDWT, the amount of data increases with each successive level until the image is formed. To sustain the IDWT throughput, the hardware implementation requires resources that provide considerable storage, multipliers, and arithmetic logic units (ALUs). The method of the invention creates an efficient stream-based architecture employing polyphase reconstruction, multiple voltage levels, multiple clocked pipelines, and storage elements as will be described. </div>
</li> <li> <para-num num="[0054]"> </para-num> <div class="description-line" id="p-0055" num="0054"> By way of background, the wavelet transform converts a time-domain signal to the frequency-domain. The wavelet analysis filters different frequency bands, and then sections each band into slices in time. Unlike a Fourier transform, the wavelet transform can provide time and location information of the frequencies, i.e., which frequency components exist at different time intervals. Image compression is achieved using a source encoder, a quantizer and an entropy encoder. Wavelet decomposition is the source encoder for image compression. Computation time for both the forward and inverse DWT is great and increases exponentially with signal size. </div>
</li> <li> <para-num num="[0055]"> </para-num> <div class="description-line" id="p-0056" num="0055"> Wavelet analysis separates the smooth variations and details of an image by decomposing the image using a DWT into subband coefficients. The advantage of wavelet subband compression includes gain control for image softening and sharpening, and a scalable compressed data stream. Wavelet image processing keeps an image intact once it is compressed obviating distortions. </div>
</li> <li> <para-num num="[0056]"> </para-num> <div class="description-line" id="p-0057" num="0056"> A typical digital image is represented as a two-dimensional array of pixels, with each pixel representing the brightness level at that point. In a color image, each pixel is a triplet of red, green and blue (RGB) subpixel intensities. The number of distinct colors that can be represented by a pixel depends on the color depth, i.e., the number of bits per pixel (bpp). </div>
</li> <li> <para-num num="[0057]"> </para-num> <div class="description-line" id="p-0058" num="0057"> Images are transformed from an RGB color space to either a YCrCb or a reversible component transform (RCT) space leading to three components. After transformation, the image array can be processed. </div>
</li> <li> <para-num num="[0058]"> </para-num> <div class="description-line" id="p-0059" num="0058"> A time-domain function f(t) can be expressed in terms of wavelets using the wavelet series  
<maths id="MATH-US-00008" num="8"> <math overflow="scroll"> <mtable> <mtr> <mtd> <mrow> <mrow> <mrow> <mi>f</mi> <mo>⁡</mo> <mrow> <mo>(</mo> <mi>t</mi> <mo>)</mo> </mrow> </mrow> <mo>=</mo> <mrow> <munder> <mo>∑</mo> <mi>s</mi> </munder> <mo>⁢</mo> <mrow> <munder> <mo>∑</mo> <mi>τ</mi> </munder> <mo>⁢</mo> <mrow> <msub> <mi>a</mi> <mrow> <mi>s</mi> <mo>,</mo> <mi>τ</mi> </mrow> </msub> <mo>⁢</mo> <mi>ψ</mi> <mo>⁢</mo> <mstyle> <mtext> </mtext> </mstyle> <mo>⁢</mo> <mrow> <mo>(</mo> <mrow> <mi>s</mi> <mo>,</mo> <mi>τ</mi> <mo>,</mo> <mi>t</mi> </mrow> <mo>)</mo> </mrow> <mo>⁢</mo> <mi>dt</mi> </mrow> </mrow> </mrow> </mrow> <mo>,</mo> </mrow> </mtd> <mtd> <mrow> <mo>(</mo> <mn>3</mn> <mo>)</mo> </mrow> </mtd> </mtr> </mtable> </math> </maths>
</div>
</li> <li> <para-num num="[0059]"> </para-num> <div class="description-line" id="p-0060" num="0059"> where ψ(S, τ, t) represents the different wavelets obtained from the “mother wavelet” ψ, and S indicates dilations of the wavelet. A large S indicates a wide wavelet that can extract low frequency components when convolved with the input signal, while a small S indicates a narrow wavelet that can extract high frequency components. τ represents different translations of the mother wavelet in time and is used to extract frequency components at different time intervals of the input signal. </div>
</li> <li> <para-num num="[0060]"> </para-num> <div class="description-line" id="p-0061" num="0060"> The coefficients a<sub>s,τ</sub> of the wavelets are found using  
<maths id="MATH-US-00009" num="9"> <math overflow="scroll"> <mtable> <mtr> <mtd> <mrow> <msub> <mi>a</mi> <mrow> <mi>s</mi> <mo>,</mo> <mi>τ</mi> </mrow> </msub> <mo>=</mo> <mrow> <msubsup> <mo>∫</mo> <mrow> <mo>-</mo> <mi>∞</mi> </mrow> <mi>∞</mi> </msubsup> <mo>⁢</mo> <mrow> <mrow> <mi>f</mi> <mo>⁡</mo> <mrow> <mo>(</mo> <mi>t</mi> <mo>)</mo> </mrow> </mrow> <mo>⁢</mo> <mrow> <mi>ψ</mi> <mo>⁡</mo> <mrow> <mo>(</mo> <mrow> <mi>s</mi> <mo>,</mo> <mi>τ</mi> <mo>,</mo> <mi>t</mi> </mrow> <mo>)</mo> </mrow> </mrow> <mo>⁢</mo> <mstyle> <mtext> </mtext> </mstyle> <mo>⁢</mo> <mrow> <mrow> <mo>ⅆ</mo> <mi>t</mi> </mrow> <mo>.</mo> </mrow> </mrow> </mrow> </mrow> </mtd> <mtd> <mrow> <mo>(</mo> <mn>4</mn> <mo>)</mo> </mrow> </mtd> </mtr> </mtable> </math> </maths>
</div>
</li> <li> <para-num num="[0061]"> </para-num> <div class="description-line" id="p-0062" num="0061"> The discrete wavelet transform applies the wavelet transform to a discrete-time signal x(n) of finite length having N components. Filter banks are used to approximate the behavior of a continuous wavelet transform. Subband coefficients are found using a series of filtering operations. </div>
</li> <li> <para-num num="[0062]"> </para-num> <div class="description-line" id="p-0063" num="0062"> Wavelet decomposition—applying a DWT in a forward direction—is performed using two-channel analysis filters where the signal is decomposed using a pair of filters, a half band low pass filter and a half band high pass filter, into high and low frequency components followed by down-sampling. A forward DWT is shown in <figref idrefs="DRAWINGS">FIG. 5</figref>. </div>
</li> <li> <para-num num="[0063]"> </para-num> <div class="description-line" id="p-0064" num="0063"> Filtering a signal in the digital domain corresponds to the mathematical operation of convolution, where the signal is convolved with the impulse response of the filter. The half band low pass filter removes all frequencies that are above half of the highest frequency in the signal. The half band high pass filter removes all frequencies that are below half of the highest frequency in the signal. The low-frequency component usually contains most of the frequency of the signal and is referred to as the approximation. The high-frequency component contains the details of the signal. </div>
</li> <li> <para-num num="[0064]"> </para-num> <div class="description-line" id="p-0065" num="0064"> Most natural images have smooth color variations with fine details represented as sharp edges in between the smooth variations. The smooth variations in color can be referred to as low frequency variations and the sharp variations as high frequency variations. The low frequency components constitute the base of an image, and the high frequency components add upon them to refine the image giving detail. </div>
</li> <li> <para-num num="[0065]"> </para-num> <div class="description-line" id="p-0066" num="0065"> For image processing, digital high and low pass filters are commonly employed in the DWT and DCT processes as one or two-dimensional filters. One-dimensional filters operate on a serial stream of data, whereas two-dimensional filters comprise two one-dimensional filters that alternately operate on the data stream and its transpose. </div>
</li> <li> <para-num num="[0066]"> </para-num> <div class="description-line" id="p-0067" num="0066"> The filters used for decomposition are typically transverse digital filters as shown in <figref idrefs="DRAWINGS">FIG. 6</figref>. Transverse filters can be implemented using a weighted average. Filtering involves convolving the filter coefficients with the input signal, or stream of pixels 
<br/>
<i>y[k]=Σ</i> <sub>i=−∞</sub> <sup>i=∞</sup> <i>H[i].x[k−i]=Σ</i> <sub>i=0</sub> <sup>i=K</sup> <i>H[i].x[k−i],</i>  (5) 
</div>
</li> <li> <para-num num="[0067]"> </para-num> <div class="description-line" id="p-0068" num="0067"> where H<sub>0</sub>, H<sub>1</sub>, H<sub>2</sub>, H<sub>3</sub>, . . . H<sub>k </sub>are predefined filter coefficients or weights and z<sup>−1 </sup>are shift register positions temporarily storing incoming values. With each new value, the filter calculates an output value for a given instant in time by observing the input values surrounding that instant of time. As a new value arrives, the shift register values are displaced discarding the oldest value. The process consists of multiplying each input value by the filter weights which define the filtering action. By adjusting the weights, a low pass or a high pass filter can be obtained. Since the filters employed are half band low pass and half band high pass filters, the filter architectures are the same for each level of decomposition. </div>
</li> <li> <para-num num="[0068]"> </para-num> <div class="description-line" id="p-0069" num="0068"> Decomposition of an N×M color space is performed in levels with each level performing a row-by-row (N) and a column-by-column (M) analysis. This type of wavelet decomposition is referred to as a 2-dimensional DWT, an example where N&lt;M is shown in <figref idrefs="DRAWINGS">FIGS. 7</figref> <i>a</i>-<b>7</b> <i>f</i>. Each N row contains M pixels, with each pixel typically having three color space multi-bit values. Decomposition is performed for each color space value. In image processing, the input signal is not a time-domain signal, but pixels distributed in space. </div>
</li> <li> <para-num num="[0069]"> </para-num> <div class="description-line" id="p-0070" num="0069"> Each row of pixels (sub pixel) is low and high pass filtered. After filtering, half of the samples can be eliminated or down-sampled, yielding two  
<maths id="MATH-US-00010" num="10"> <math overflow="scroll"> <mrow> <mi>N</mi> <mo>×</mo> <mfrac> <mi>M</mi> <mn>2</mn> </mfrac> </mrow> </math> </maths>
<br/>
 images referred to as L (low) and H (high) row subband coefficients. The intermediate results are indexed as an array in memory as shown in <figref idrefs="DRAWINGS">FIG. 7</figref> <i>b. </i>
</div>
</li> <li> <para-num num="[0070]"> </para-num> <div class="description-line" id="p-0071" num="0070"> The Nyquist theorem states that the minimum number of discrete samples to perfectly reconstruct a signal is twice the maximum frequency component of the signal. Therefore, if a half band low pass filter, which removes all frequency components larger than the median frequency, is applied to a signal, every other sample in the output can be discarded. Discarding every other sample subsamples the signal by two whereby the signal will have half the number of discrete samples effectively doubling the scale. A variation of the theorem makes down-sampling applicable for a high pass filter that removes all frequency components smaller than the median frequency. </div>
</li> <li> <para-num num="[0071]"> </para-num> <div class="description-line" id="p-0072" num="0071"> Decomposition halves the time resolution since half of the number of samples characterizes the entire signal. However, the operation doubles the frequency resolution since the frequency band of the signal now spans only half the previous frequency band, effectively reducing the uncertainty in the frequency by half. This is referred to as subband coding. </div>
</li> <li> <para-num num="[0072]"> </para-num> <div class="description-line" id="p-0073" num="0072"> From the data store, each column (M) of coefficients is low and high pass filtered, down-sampled, and stored yielding four  
<maths id="MATH-US-00011" num="11"> <math overflow="scroll"> <mrow> <mfrac> <mi>N</mi> <mn>2</mn> </mfrac> <mo>×</mo> <mfrac> <mi>M</mi> <mn>2</mn> </mfrac> </mrow> </math> </maths>
<br/>
 sub images as shown in <figref idrefs="DRAWINGS">FIG. 7</figref> <i>c</i>. The four sub images are the resultant coefficients of a one level, 2-dimensional decomposition. Of the four sub images obtained, the image obtained by low pass filtering the columns and rows is referred to as the LL (column low, row low) sub image. The image obtained by high pass filtering the columns and low pass filtering the rows is referred to as the HL (column high, row low) sub image. The image obtained by low pass filtering the columns and high pass filtering the rows is referred to as the LH (column low, row high) sub image. And the image obtained by high pass filtering the columns and rows is referred to as the HH (column high, row high) sub image. Each sub image obtained can then be filtered and subsampled to obtain four more sub images. This process can be continued for a desired subband structure. A subband is a set of real number coefficients which represent aspects of the image associated with a certain frequency range as well as a spatial area of the image. The result is a collection of subbands which represent several approximation scales. 
</div>
</li> <li> <para-num num="[0073]"> </para-num> <div class="description-line" id="p-0074" num="0073"> JPEG 2000 supports pyramid decomposition. Pyramid decomposition only decomposes the LL sub image in subsequent levels, each leading to four more sub images as shown in <figref idrefs="DRAWINGS">FIGS. 7</figref> <i>d</i>-<b>7</b> <i>f</i>. <figref idrefs="DRAWINGS">FIG. 7</figref> <i>d </i>shows a two level decomposition producing second level subbands L<sup>4</sup>, HL<sup>3</sup>, LHL<sup>2 </sup>and H<sup>2</sup>L<sup>2</sup>. <figref idrefs="DRAWINGS">FIG. 7</figref> <i>e </i>shows a three level decomposition producing third level subbands L<sup>6</sup>, HL<sup>5</sup>, LHL<sup>4 </sup>and H<sup>2</sup>L<sup>4</sup>. <figref idrefs="DRAWINGS">FIG. 7</figref> <i>f </i>shows a four level decomposition producing fourth level subbands L<sup>8</sup>, HL<sup>7</sup>, LHL<sup>6 </sup>and H<sup>2</sup>L<sup>6</sup>. At this level, the L<sup>8 </sup>subband coefficients occupy  
<maths id="MATH-US-00012" num="12"> <math overflow="scroll"> <mrow> <mfrac> <mi>N</mi> <mn>16</mn> </mfrac> <mo>×</mo> <mfrac> <mi>M</mi> <mn>16</mn> </mfrac> </mrow> </math> </maths>
<br/>
 of the original image space. A fifth level decomposition would produce fifth level subbands L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8 </sup>and H<sup>2</sup>L<sup>8 </sup>(not shown). The subbands for a five level decomposition of one video frame are: L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8</sup>, H<sup>2</sup>L<sup>8</sup>; HL<sup>7</sup>, LHL<sup>6</sup>, H<sup>2</sup>L<sup>6</sup>; HL<sup>5</sup>, LHL<sup>4</sup>, H<sup>2</sup>L<sup>4</sup>; HL<sup>3</sup>, LHL<sup>2</sup>, H<sup>2</sup>L<sup>2</sup>; HL, LH and HH. 
</div>
</li> <li> <para-num num="[0074]"> </para-num> <div class="description-line" id="p-0075" num="0074"> Shown in <figref idrefs="DRAWINGS">FIG. 8</figref> is the data flow for the two level, 2-dimensional forward DWT producing <figref idrefs="DRAWINGS">FIG. 7</figref> <i>d</i>. Each level of decomposition reduces the image resolution by a factor of two in each dimension. Each row process uses one analysis filter pair and each column process uses two analysis filter pairs. All of the subband coefficients represent the same image, but correspond to different frequency bands. The LL subband at the highest level contains the most information while the other detail bands contain relatively less information—image details such as sharp edges. </div>
</li> <li> <para-num num="[0075]"> </para-num> <div class="description-line" id="p-0076" num="0075"> The forward DWT analyzes the image data producing a series of subband coefficients. Rather than discarding some of the subband information and losing detail, all subband coefficients are kept and compression results from subsequent subband quantization and the compression scheme used in the entropy encoder. The quantizer reduces the precision of the values generated from the encoder reducing the number of bits required to save the transform coefficients. </div>
</li> <li> <para-num num="[0076]"> </para-num> <div class="description-line" id="p-0077" num="0076"> Reconstruction of the original image is performed in reverse; by entropy decoding, inverse quantization, and source decoding—the later performing the DWT in an inverse direction as shown in <figref idrefs="DRAWINGS">FIG. 9</figref>. The forward DWT separates image data into various classes of importance; the IDWT reconstructs the various classes of data back into the image. </div>
</li> <li> <para-num num="[0077]"> </para-num> <div class="description-line" id="p-0078" num="0077"> A filter pair comprising high and low pass filters is used and is referred to as a synthesis filter. The inverse process begins using the subband coefficients output from the last level of a forward DWT, applying the filters column wise and then row wise for each level, with the number of levels corresponding to the number of levels used in the forward DWT until image reconstruction is complete. The inputs at each level of reconstruction are subband coefficients. </div>
</li> <li> <para-num num="[0078]"> </para-num> <div class="description-line" id="p-0079" num="0078"> The IDWT can be implemented as a pipelined data path. Owing to up-sampling, successive stages of the pipeline operate on progressively higher amounts of data. For an N×M image, the last level of reconstruction operates on four subbands, each of size  
<maths id="MATH-US-00013" num="13"> <math overflow="scroll"> <mrow> <mfrac> <mi>N</mi> <mn>2</mn> </mfrac> <mo>×</mo> <mrow> <mfrac> <mi>M</mi> <mn>2</mn> </mfrac> <mo>.</mo> </mrow> </mrow> </math> </maths>
<br/>
 The four subbands of the preceding level are  
<maths id="MATH-US-00014" num="14"> <math overflow="scroll"> <mrow> <mfrac> <mi>N</mi> <mn>4</mn> </mfrac> <mo>×</mo> <mrow> <mfrac> <mi>M</mi> <mn>4</mn> </mfrac> <mo>.</mo> </mrow> </mrow> </math> </maths>
</div>
</li> <li> <para-num num="[0079]"> </para-num> <div class="description-line" id="p-0080" num="0079"> The input to each level of the IDWT consists of four subbands and the final output is an N×M image. Each level consists of column and row processing. The column stage which includes up-sampling produces two subbands. These subbands are row processed which includes up-sampling to produce another subband. For a given level of reconstruction, the rows cannot be processed until all of the columns are processed. For a high throughput, the row and column stages must be able to operate independently of each other to ensure continuous data flow. </div>
</li> <li> <para-num num="[0080]"> </para-num> <div class="description-line" id="p-0081" num="0080"> Using the method of the invention shown in <figref idrefs="DRAWINGS">FIGS. 2</figref> <i>a</i>-<b>2</b> <i>b </i>to implement an IDWT for a particular image resolution, the entire IDWT is analyzed and a performance requirement is established (steps <b>101</b>, <b>103</b>). For this example, a five level IDWT is to be implemented complementing the forward DWT described above. The overall computation is synthesized (step <b>105</b>) into a plurality of levels (n=5), with each level comprising a column and a row stage. The column stage comprises two reconstruction channels; the row stage one reconstruction channel. Each reconstruction channel (<figref idrefs="DRAWINGS">FIG. 9</figref>) comprises two up-samplers coupled to a synthesis filter and an adder providing a subband coefficient (summed filter) output. The fifth level subband coefficients output from the forward DWT are ultimately input at the n<sup>th</sup>-level (5<sup>th </sup>level) of the IDWT. Three subband coefficients are input at each subsequent level. The last level (1<sup>st </sup>level) outputs the image. </div>
</li> <li> <para-num num="[0081]"> </para-num> <div class="description-line" id="p-0082" num="0081"> From the synthesis step (step <b>105</b>) one stage is produced for column processing <b>17</b> and another stage is produced for row processing <b>33</b> as shown in <figref idrefs="DRAWINGS">FIGS. 10</figref> <i>a </i>and <b>10</b> <i>b </i>respectively. The operations used in each stage are translated (step <b>107</b>) into a hardware equivalent. As one skilled in the art will appreciate, the data paths show in <figref idrefs="DRAWINGS">FIGS. 10</figref> <i>a</i>, <b>10</b> <i>b</i>, and <b>11</b> <i>a</i>-<b>11</b> <i>e </i>can be serial (w=1) or parallel (w=2, 3, . . . n) data lines. Storage elements comprising allocated memory spaces (steps <b>109</b>, <b>111</b>) are employed between column and row processing. For each memory space within a storage element, one space is written to while the other space is read from, keeping the pipeline filled. Once each memory space write/read is completed, the memory space pair is exchanged, allowing for continuous data flow. The entire pipeline is choreographed such that every register in every function in every stage of the pipeline is filled, and with each clock cycle, data is moved forward with no stalling. Each stage <b>17</b>, <b>33</b> has its own predetermined clock frequency clk<sub>colx</sub>, clk<sub>rowx </sub>(step <b>115</b>). </div>
</li> <li> <para-num num="[0082]"> </para-num> <div class="description-line" id="p-0083" num="0082"> <figref idrefs="DRAWINGS">FIG. 10</figref> <i>a </i>shows the column processing stage <b>17</b> derived for each level of the IDWT according to the teachings of the invention. The column processing stage <b>17</b> comprises two reconstruction channels having four inputs c<sub>in1</sub>, c<sub>in2</sub>, c<sub>in3</sub>, c<sub>in4</sub>, four up-samplers up<sub>1</sub>, up<sub>2</sub>, up<sub>3</sub>, up<sub>4</sub>, each coupled to an input, the up-sampler outputs coupled to two synthesis filters <b>19</b> <sub>1</sub>, <b>19</b> <sub>2 </sub>each synthesis filter comprising a low LPF<sub>1</sub>, LPF<sub>3 </sub>and a high HPF<sub>2</sub>, HPF<sub>4 </sub>pass filter, each filter having an input LPF<sub>in1</sub>, HPF<sub>in2</sub>, LPF<sub>in3</sub>, HPF<sub>in4 </sub>coupled to a respective up-sampler up<sub>1</sub>, up<sub>2</sub>, up<sub>3</sub>, up<sub>4</sub>. Each synthesis filter pair <b>19</b> <sub>1</sub>, <b>19</b> <sub>2 </sub>output LPF<sub>out1</sub>, HPF<sub>out2</sub>, LPF<sub>out3</sub>, HPF<sub>out4 </sub>is coupled to an adder <b>21</b> <sub>1</sub>, <b>21</b> <sub>2</sub>. Each adder <b>21</b> <sub>1</sub>, <b>21</b> <sub>2 </sub>output is coupled to a storage element str<sub>col </sub>write function sw<b>1</b> <sub>write</sub>. </div>
</li> <li> <para-num num="[0083]"> </para-num> <div class="description-line" id="p-0084" num="0083"> As described above, each storage element str<sub>col </sub>allocates memory spaces for storing data output from an upstream computation, while allowing a downstream computation to read previously written data in any pattern. For each pair of memory spaces, write/read functions are used to direct data exclusively to and from each memory space for simultaneous writing and reading, allowing upstream and downstream computation stages to function independently. </div>
</li> <li> <para-num num="[0084]"> </para-num> <div class="description-line" id="p-0085" num="0084"> The storage element str<sub>col </sub>for the column stage <b>17</b> has two pairs of allocated memory spaces mem<b>1</b> <sub>a</sub>, mem<b>1</b> <sub>b</sub>, mem<b>2</b> <sub>a</sub>, mem<b>2</b> <sub>b </sub>accessed by write/read functions sw<b>1</b> <sub>write</sub>, sw<b>1</b> <sub>read</sub>, sw<b>2</b> <sub>write</sub>, sw<b>2</b> <sub>read</sub>. The common pole of the write function sw<b>1</b> <sub>write </sub>is coupled to the output of the first channel adder <b>21</b> <sub>1</sub>. The common pole of the write function sw<b>2</b> <sub>write </sub>is coupled to the output of the second channel adder <b>21</b> <sub>2</sub>. The common pole of the two read functions sw<b>1</b> <sub>read</sub>, sw<b>2</b> <sub>read </sub>are coupled to stage outputs c<sub>out1</sub>, c<sub>out2</sub>. The column IDWT stage <b>17</b> is used in conjunction with the row IDWT stage <b>33</b> for 2-dimensional IDWT, n level reconstruction. </div>
</li> <li> <para-num num="[0085]"> </para-num> <div class="description-line" id="p-0086" num="0085"> A voltage input Vcol<sub>x </sub>provides operating voltage for the column x stage <b>17</b> based upon clock <b>27</b> frequency. A controller <b>31</b> accepts an image information signal setting forth the size of the image, frame rate, color depth (bpp), level of reconstruction known a priori from a common bus BUS coupling all stages in all levels and controls the switching action of the storage element str<sub>col </sub>write/read functions over line <b>29</b>. The image information is obtained either from an external control such as a user configurable setting, or more advantageously, decoded upstream prior to entropy decoding in the incoming data stream header. A maximum image size determines the required storage element capacity for each column <b>17</b> and row <b>33</b> stage. Image sizes less than the maximum can be processed. Each smaller image size has a correspondingly smaller memory footprint in the allocated memory spaces. The image information changes each storage element memory space access write/read function pattern for each image size. </div>
</li> <li> <para-num num="[0086]"> </para-num> <div class="description-line" id="p-0087" num="0086"> <figref idrefs="DRAWINGS">FIG. 10</figref> <i>b </i>shows the row processing stage <b>33</b> derived for each level of the IDWT according to the teachings of the invention. The row processing stage <b>33</b> comprises one reconstruction channel and five inputs r<sub>in1</sub>, r<sub>in2</sub>, r<sub>in3</sub>, r<sub>in4</sub>, r<sub>in5</sub>, two up-samplers up<sub>L</sub>, up<sub>H</sub>, coupled to inputs r<sub>in1</sub>, r<sub>in2</sub>, the up-sampler outputs coupled to a synthesis filter <b>19</b> comprising a low LPF and a high HPF pass filter, each filter having an input LPF<sub>in</sub>, HPF<sub>in </sub>coupled to a respective up-sampler up<sub>L</sub>, up<sub>H</sub>, and an output LPF<sub>out</sub>, HPF<sub>out </sub>coupled to the reconstruction channel adder <b>21</b>. The adder <b>21</b> output is coupled to a storage element str<sub>row </sub>write function sw<sub>write</sub>. </div>
</li> <li> <para-num num="[0087]"> </para-num> <div class="description-line" id="p-0088" num="0087"> The storage element str<sub>row </sub>for the row stage <b>33</b> has four pairs of allocated memory spaces mem<sub>a</sub>, mem<sub>b</sub>, mem<b>3</b> <sub>a</sub>, mem<b>3</b> <sub>b</sub>, mem<b>4</b> <sub>a</sub>, mem<b>4</b> <sub>b</sub>, mem<b>5</b> <sub>a</sub>, mem<b>5</b> <sub>b </sub>accessed by four write/read functions sw<sub>write</sub>, sw<sub>read</sub>, sw<b>3</b> <sub>write</sub>, sw<b>3</b> <sub>read</sub>, sw<b>4</b> <sub>write</sub>, sw<b>4</b> <sub>read</sub>, sw<b>5</b> <sub>write</sub>, sw<b>5</b> <sub>read</sub>. Write function sw<sub>write </sub>is coupled to the output of the adder <b>21</b>. The three remaining write functions sw<b>3</b> <sub>write</sub>, sw<b>4</b> <sub>write</sub>, sw<b>5</b> <sub>write </sub>are coupled to stage inputs r<sub>in3</sub>, r<sub>in4</sub>, r<sub>in5 </sub>to receive subband coefficients available and waiting to be processed. The four read functions sw<sub>read</sub>, sw<b>3</b> <sub>read</sub>, sw<b>4</b> <sub>read</sub>, sw<b>5</b> <sub>read </sub>couple to row stage outputs r<sub>out</sub>, r<sub>out3</sub>, r<sub>out4</sub>, r<sub>out5</sub>. </div>
</li> <li> <para-num num="[0088]"> </para-num> <div class="description-line" id="p-0089" num="0088"> A voltage input Vrow<sub>x </sub>provides operating voltage for the row x stage <b>33</b> based upon clock <b>37</b> frequency. A controller <b>41</b> accepts a signal setting forth the size of the image, color depth (bpp) and level of reconstruction, known a priori, from a common bus BUS and controls the switching action of the storage element str<sub>row </sub>write/read functions over line <b>39</b>. The row processing stage <b>33</b> for the last level is simplified needing only the reconstruction channel. </div>
</li> <li> <para-num num="[0089]"> </para-num> <div class="description-line" id="p-0090" num="0089"> <figref idrefs="DRAWINGS">FIGS. 11</figref> <i>a</i>-<b>11</b> <i>e</i>. show a five level IDWT using the column <b>17</b> and row <b>33</b> stages. The beginning of the inverse transform is the fifth level as shown in <figref idrefs="DRAWINGS">FIG. 11</figref> <i>a</i>. The fifth level column stage clock frequency clk<sub>col5 </sub>is the slowest. Each subsequent stage processes twice as much data as the one before, requiring double the clock frequency. The voltage of each subsequent stage must increase for maximum power efficiency, or can be set at any level as long as the hardware voltage threshold V<sub>th </sub>for the respective level is met. The voltage Vcol<sub>x </sub>of each column stage <b>17</b> can be approximately half the voltage Vrow<sub>x </sub>of each row stage <b>33</b> for a given level. </div>
</li> <li> <para-num num="[0090]"> </para-num> <div class="description-line" id="p-0091" num="0090"> By knowing the reconstructed image size, bpp and number of levels of reconstruction; the column str<sub>col5</sub>, str<sub>col4</sub>, str<sub>col3</sub>, str<sub>col2</sub>, str<sub>col1 </sub>and row Str<sub>row5</sub>, Str<sub>row4</sub>, Str<sub>row3</sub>, str<sub>row2 </sub>storage element memory spaces, clock frequencies clk<sub>col5</sub>, clk<sub>row5</sub>, clk<sub>col4</sub>, Clk<sub>row4</sub>, clk<sub>col3</sub>, clk<sub>row3</sub>, clk<sub>col2</sub>, clk<sub>row2</sub>, clk<sub>col1</sub>, clk<sub>row1 </sub>and stage voltages V<sub>col5</sub>, V<sub>row5</sub>, V<sub>col4</sub>, V<sub>row4</sub>, V<sub>col3</sub>, V<sub>row3</sub>, V<sub>col2</sub>, V<sub>row2</sub>, V<sub>col1</sub>, V<sub>row1 </sub>and can be determined. </div>
</li> <li> <para-num num="[0091]"> </para-num> <div class="description-line" id="p-0092" num="0091"> Continuing with the example, for real-time reconstruction of one color plane of a moving picture having an image resolution of 1024(2<sup>10</sup>)×2048(2<sup>11</sup>) pixels (i.e., sub pixels) at a frame rate of 48 frames per second, wavelet reconstruction of the 1024(N)×2048(M) color space would assemble an image having 2,097,152 pixels, requiring the source decoder (IDWT) to process 100,663,296 pixels per second with each pixel having an associated color depth. For this example, each pixel has a 16 bit value. The larger the color depth, the more storage element memory required. The clock rate supporting real-time reconstruction would be ˜9.9 ns per pixel or ˜101 MHz at the output of the last (1<sup>st</sup>) level (step <b>115</b>). </div>
</li> <li> <para-num num="[0092]"> </para-num> <div class="description-line" id="p-0093" num="0092"> For moving images having a frame rate of 48 fps, each frame of the moving image is processed for display every 0.0208 seconds. For the five level IDWT <b>51</b> shown in <figref idrefs="DRAWINGS">FIGS. 11</figref> <i>a</i>-<b>11</b> <i>e</i>, the clock frequency of the level <b>1</b> row stage Clk<sub>row1 </sub>must process each pixel at ˜101 MHz. As described above, each subsequent stage in an IDWT operates at twice the frequency of the previous stage. Each previous stage operates slower. In inverse order, clk<sub>col1</sub>=50.5 MHz; clk<sub>row2</sub>=25.3 MHz, clk<sub>col2</sub>=12.6 MHz, clk<sub>row3</sub>=6.3 MHz, clk<sub>col3</sub>=3.16 MHz, Clk<sub>row4</sub>=1.58 MHz, clk<sub>col4</sub>=789 kHz, Clk<sub>row5</sub>=395 kHz, clk<sub>col5</sub>=197 kHz, and clk<sub>x</sub>=98,600 Hz (steps <b>117</b>, <b>119</b>). </div>
</li> <li> <para-num num="[0093]"> </para-num> <div class="description-line" id="p-0094" num="0093"> The last step of the invention is assigning operating voltages (steps <b>121</b>, <b>123</b>) to each stage in the pipeline <b>51</b>. The ten stage voltages V<sub>col5</sub>, V<sub>row5</sub>, V<sub>col4</sub>, V<sub>row4</sub>, V<sub>col3</sub>, V<sub>row3</sub>, V<sub>col2</sub>, V<sub>row2</sub>, V<sub>col1</sub>, V<sub>row1 </sub>can be determined since each stage voltage is proportional with the stage operating frequency. Each stage voltage must be greater than the threshold voltage V<sub>th </sub>of the respective stage hardware. A theoretical value can be approximated for each stage threshold voltage V<sub>th </sub>or obtained empirically. For the streaming computation to have maximum power efficiency, the stage in the pipeline having the fastest clock frequency clk<sub>row1 </sub>will typically have the highest voltage V<sub>row1 </sub>and the stage having the slowest clock frequency clk<sub>col5 </sub>will have the lowest voltage level V<sub>col5</sub>. The stage voltages residing between the maximum V<sub>row1 </sub>and minimum V<sub>col5 </sub>vary accordingly V<sub>row5</sub>, V<sub>col4</sub>, V<sub>row4</sub>, V<sub>col3</sub>, V<sub>row3</sub>, V<sub>col2</sub>, V<sub>row2</sub>, V<sub>col1</sub>. Alternatively, each stage voltage in the pipeline can have the same value, or at least one or more different values, so long as the voltage threshold requirement for each stage is met. </div>
</li> <li> <para-num num="[0094]"> </para-num> <div class="description-line" id="p-0095" num="0094"> After entropy decoding, inverse quantization and removal of any header information is complete, the subband pixel coefficients for each frame of the one color plane enter the source decoder <b>51</b> at a clock clk<sub>x </sub>rate of 98,600 Hz. </div>
</li> <li> <para-num num="[0095]"> </para-num> <div class="description-line" id="p-0096" num="0095"> <figref idrefs="DRAWINGS">FIGS. 11</figref> <i>a</i>-<b>11</b> <i>d </i>shows an incoming frame subband coefficient data stream L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8</sup>, H<sup>2</sup>L<sup>8</sup>; HL<sup>7</sup>, LHL<sup>6</sup>, H<sup>2</sup>L<sup>6</sup>; HL<sup>5</sup>, LHL<sup>4</sup>, H<sup>2</sup>L<sup>4</sup>; HL<sup>3</sup>, LHL<sup>2</sup>, H<sup>2</sup>L<sup>2</sup>; HL, LH and HH, and their respective storage element memory spaces <b>53</b> <i>a</i>, <b>53</b> <i>b</i>, <b>55</b> <i>a</i>, <b>55</b> <i>b</i>, <b>57</b> <i>a</i>, <b>57</b> <i>b</i>, <b>59</b> <i>a</i>, <b>59</b> <i>b</i>, <b>61</b> <i>a</i>, <b>61</b> <i>b</i>. Each storage element memory space alternately stores subband coefficients for one incoming frame for reconstruction. For this example, the incoming frame subband coefficients would be continuously written 48 times per second in alternate a, b memory spaces of the incoming frame <b>53</b> <i>a</i>, <b>53</b> <i>b</i>, and fifth <b>55</b> <i>a</i>, <b>55</b> <i>b</i>, fourth <b>57</b> <i>a</i>, <b>57</b> <i>b</i>, third <b>59</b> <i>a</i>, <b>59</b> <i>b</i>, and second <b>61</b> <i>a</i>, <b>61</b> <i>b </i>level row storage elements str<sub>rowx</sub>. The fifth level subband coefficients L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8</sup>, H<sup>2</sup>L<sup>8</sup>, fourth level subband coefficients HL<sup>7</sup>, LHL<sup>6</sup>, H<sup>2</sup>L<sup>6</sup>, third level subband coefficients HL<sup>5</sup>, LHL<sup>4</sup>, H<sup>2</sup>L<sup>4</sup>, second level subband coefficients HL<sup>3</sup>, LHL<sup>2</sup>, H<sup>2</sup>L<sup>2 </sup>and first level subband coefficients HL, LH and HH for frame <b>1</b> are written into one of the memory spaces (a) of the storage elements, completing all subband coefficients for one frame. The coefficients arrive in time for each level of reconstruction. A discussion of inverse quantization which controls the incoming subband coefficients is beyond the scope of this disclosure. The process continues by writing the fifth level subband coefficients L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8</sup>, H<sup>2</sup>L<sup>8 </sup>for the next frame (<b>2</b>) into the other memory space (b) of the incoming frame storage element <b>53</b>. </div>
</li> <li> <para-num num="[0096]"> </para-num> <div class="description-line" id="p-0097" num="0096"> As can be seen in <figref idrefs="DRAWINGS">FIG. 11</figref> <i>a</i>, fifth level reconstruction for frame <b>1</b> can commence as soon as fifth level subband coefficients L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8</sup>, H<sup>2</sup>L<sup>8 </sup>are written into incoming frame storage element <b>53</b> memory space <b>53</b> <i>a</i>. The processing rate for the column stage clk<sub>col5 </sub>is 197 kHz. The fourth level subband coefficients HL<sup>7</sup>, LHL<sup>6</sup>, H<sup>2</sup>L<sup>6 </sup>are written into fifth level row storage element <b>55</b> memory spaces <b>55</b> <i>a </i>at the clk<sub>row5 </sub>clock rate. The output of the fifth level, L<sup>8</sup>, is written into a first memory space <b>63</b> <i>a </i>of the fifth level row storage element with fourth level subband coefficients HL<sup>7</sup>, LHL<sup>6</sup>, and H<sup>2</sup>L<sup>6 </sup>for fourth level processing. </div>
</li> <li> <para-num num="[0097]"> </para-num> <div class="description-line" id="p-0098" num="0097"> Fourth level reconstruction (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>b</i>) commences and the outputs are computed at the clk<sub>col4 </sub>clock rate. The third level subband coefficients HL<sup>5</sup>, LHL<sup>4</sup>, H<sup>2</sup>L<sup>4 </sup>are written into fourth level row storage element <b>57</b> memory spaces <b>57</b> <i>a </i>at the clk<sub>row4 </sub>clock rate. The output of the fourth level, L<sup>6</sup>, is written into one memory space <b>65</b> <i>a </i>of the fourth level row storage element with third level subband coefficients HL<sup>5</sup>, LHL<sup>4</sup>, and H<sup>2</sup>L<sup>4 </sup>for third level processing. </div>
</li> <li> <para-num num="[0098]"> </para-num> <div class="description-line" id="p-0099" num="0098"> Third level reconstruction (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>c</i>) commences and is performed at the clk<sub>col3 </sub>clock rate. The second level subband coefficients HL<sup>3</sup>, LHL<sup>2</sup>, H<sup>2</sup>L<sup>2 </sup>are written into third level row storage element <b>59</b> memory spaces <b>59</b> <i>a </i>at the clk<sub>row3 </sub>clock rate. The output of the third level, L<sup>4</sup>, is written into one memory space <b>67</b> <i>a </i>of the third level row storage element with second level subband coefficients HL<sup>3</sup>, LHL<sup>2</sup>, and H<sup>2</sup>L<sup>2 </sup>for second level processing. </div>
</li> <li> <para-num num="[0099]"> </para-num> <div class="description-line" id="p-0100" num="0099"> Second level reconstruction (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>d</i>) can commence and is performed at the clk<sub>col2 </sub>clock rate. The first level subband coefficients HL, LH and HH are written into second level row storage element <b>61</b> memory spaces <b>61</b> <i>a </i>at the clk<sub>row2 </sub>clock rate. The output of the second level, L<sup>2</sup>, is written into one memory space <b>69</b> <i>a </i>of the second level row storage element with first level subband coefficients HL, LH and HH for first level processing. </div>
</li> <li> <para-num num="[0100]"> </para-num> <div class="description-line" id="p-0101" num="0100"> First level reconstruction (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>e</i>) can commence and is performed at the clk<sub>col1 </sub>clock rate. The output of the first level is a one color plane reconstruction of the 1024(N)×2048(M) image. </div>
</li> <li> <para-num num="[0101]"> </para-num> <div class="description-line" id="p-0102" num="0101"> The entire five level IDWT <b>51</b> is filled and busy, with each stage of each level processing coefficients belonging to a subsequent frame. Column <b>17</b> and row <b>33</b> stages of each level of the IDWT <b>51</b> contain storage elements str<sub>colx</sub>, str<sub>rowx </sub>for allocating memory spaces mem<sub>a</sub>, mem<sub>b </sub>for the fifth level <b>71</b> <i>a</i>, <b>71</b> <i>b</i>, <b>63</b> <i>a</i>, <b>63</b> <i>b</i>, <b>55</b> <i>a</i>, <b>55</b> <i>b</i>, fourth level <b>73</b> <i>a</i>, <b>73</b> <i>b</i>, <b>65</b> <i>a</i>, <b>65</b> <i>b</i>, <b>57</b> <i>a</i>, <b>57</b> <i>b</i>, third level <b>75</b> <i>a</i>, <b>75</b> <i>b</i>, <b>67</b> <i>a</i>, <b>67</b> <i>b</i>, <b>59</b> <i>a</i>, <b>59</b> <i>b</i>, second level <b>77</b> <i>a</i>, <b>77</b> <i>b</i>, <b>69</b> <i>a</i>, <b>69</b> <i>b</i>, <b>61</b> <i>a</i>, <b>61</b> <i>b</i>, and first level <b>79</b> <i>a</i>, <b>79</b> <i>b</i>, for holding the results of column processing <b>17</b> before row processing <b>33</b> and allowing the row processing stages <b>33</b> to access the memory spaces in a transpose read. </div>
</li> <li> <para-num num="[0102]"> </para-num> <div class="description-line" id="p-0103" num="0102"> The fifth level subband coefficients L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8 </sup>and H<sup>2</sup>L<sup>8 </sup>each comprise 32×64 values (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>a</i>). For a color depth of 16 bpp, the memory required for one memory space <b>53</b> <i>a </i>of the incoming frame storage element <b>53</b> would be 32,768 bits, or 4,096 bytes for all coefficients of one subband. Since there are four subbands L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8 </sup>and H<sup>2</sup>L<sup>8</sup>, and the invention allocates two memory spaces for coefficients of each subband, the total subband coefficient memory required for the fifth level incoming frame storage element <b>53</b> is approximately (4,096 bytes)×(4 subbands)×(2 memory spaces)≅32 KB. </div>
</li> <li> <para-num num="[0103]"> </para-num> <div class="description-line" id="p-0104" num="0103"> The four subbands L<sup>10</sup>, HL<sup>9</sup>, LHL<sup>8 </sup>and H<sup>2</sup>L<sup>8 </sup>are read by column, up-sampled up<sub>1</sub>, up<sub>2</sub>, up<sub>3</sub>, up<sub>4 </sub>by inserting a zero between each coefficient, and low pass and high pass filtered using the two synthesis filters <b>19</b> <sub>1</sub>, <b>19</b> <sub>2</sub>. Up-sampling increases the clock rate by a factor of two, transitioning from 98,600 Hz (clk<sub>x</sub>) to 197 kHz (clk<sub>col5</sub>). The synthesis filter <b>19</b> <sub>1</sub>, <b>19</b> <sub>2 </sub>outputs are summed <b>21</b> <sub>1</sub>, <b>21</b> <sub>2 </sub>forming two subbands L<sup>9 </sup>and HL<sup>8 </sup>each comprising 64×64 coefficients which are written into a fifth level column storage element <b>71</b>. The memory required would be 65,536 bits, or 8,192 bytes for all coefficients of one subband. Since there are two subbands L<sup>9 </sup>and HL<sup>8</sup>, and two memory spaces are employed, the total subband memory required for the fifth level row storage element <b>71</b> is approximately (8,192 bytes)×(2 subbands)×(2 memory spaces)≅32 KB. </div>
</li> <li> <para-num num="[0104]"> </para-num> <div class="description-line" id="p-0105" num="0104"> The coefficients of subbands L<sup>9 </sup>and HL<sup>8 </sup>are read by rows in a row stage <b>33</b>, up-sampled up<sub>L</sub>, up<sub>H</sub>, and low pass and high pass filtered using one synthesis filter <b>19</b>. The 197 kHz clock rate (clk<sub>col5</sub>) transitions to 395 kHz (clk<sub>row5</sub>). The values are summed <b>21</b> forming subband coefficients L<sup>8 </sup>and are written into a fourth level row storage element <b>63</b>, <b>55</b>. </div>
</li> <li> <para-num num="[0105]"> </para-num> <div class="description-line" id="p-0106" num="0105"> The amount of memory required to store subband coefficients for each level of the IDWT progressively increases by a factor of four. The fourth level subbands L<sup>8</sup>, HL<sup>7</sup>, LHL<sup>6 </sup>and H<sup>2</sup>L<sup>6 </sup>each comprise 64×128 coefficients. For a sixteen bit color depth, 131,072 bits or 16,384 bytes are required. Using two memory spaces, (16,384 bytes)×(4 subbands)×(2 memory spaces)≅131 KB are required. </div>
</li> <li> <para-num num="[0106]"> </para-num> <div class="description-line" id="p-0107" num="0106"> At the fourth level, subbands L<sup>8</sup>, HL<sup>7</sup>, LHL<sup>6 </sup>and H<sup>2</sup>L<sup>6 </sup>are up-sampled and column <b>17</b> processed (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>b</i>). The 395 kHz clock rate (clk<sub>row5</sub>) transitions to 789 kHz (clk<sub>col4</sub>). After column processing <b>17</b>, subbands L<sup>7 </sup>and HL<sup>6 </sup>each comprising 128×128 coefficients are written into a fourth level column storage element <b>73</b> and are available for row processing <b>33</b>. The memory required would be 262,144 bits, or 32,768 bytes for all coefficients of one subband. Since there are two subbands and two memory spaces are employed, the total subband memory required for the fourth level column storage element <b>73</b> is approximately (32,768 bytes)×(2 subbands)×(2 memory spaces)≅131 KB. After row processing <b>33</b>, subband L<sup>6 </sup>coefficients are written into a third level row storage element <b>65</b>, <b>57</b>. The 789 kHz clock rate (clk<sub>col4</sub>) transitions to 1.58 MHz (clk<sub>row4</sub>). The third level subbands L<sup>6</sup>, HL<sup>5</sup>, LHL<sup>4 </sup>and H<sup>2</sup>L<sup>4 </sup>each comprise 128×256 coefficients. For a sixteen bit color depth, 524,288 bits or 65,536 bytes are required. Using two memory spaces <b>65</b> <i>a</i>, <b>65</b> <i>b</i>, <b>57</b> <i>a</i>, <b>57</b> <i>b</i>, (65,536 bytes)×(4 subbands)×(2 memory spaces)≅524 KB are required. </div>
</li> <li> <para-num num="[0107]"> </para-num> <div class="description-line" id="p-0108" num="0107"> At the third level, subbands L<sup>6</sup>, HL<sup>5</sup>, LHL<sup>4 </sup>and H<sup>2</sup>L<sup>4 </sup>are up-sampled and column processed <b>17</b> (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>c</i>). The 1.58 MHz clock rate (Clk<sub>row4</sub>) transitions to 3.16 MHz (clk<sub>col3</sub>). After column processing <b>17</b>, subbands L<sup>5 </sup>and HL<sup>4 </sup>each comprising 256×256 coefficients are written into a third level column storage element <b>75</b> and are available for row processing <b>33</b>. The memory required would be 1,048,576 bits, or 131,072 bytes for all coefficients of one subband. Since there are two subbands and two memory spaces are employed, the total subband memory required for the third level <b>75</b> <i>a</i>, <b>75</b> <i>b </i>is approximately (131,072 bytes)×(2 subbands)×(2 memory spaces)≅524 KB. After row processing <b>33</b>, subband coefficients L<sup>4 </sup>are written into a third level row storage element <b>67</b>, <b>59</b>. The 3.16 MHz clock rate (clk<sub>col3</sub>) transitions to 6.3 MHz (Clk<sub>row3</sub>). The second level subbands L<sup>4</sup>, HL<sup>3</sup>, LHL<sup>2 </sup>and H<sup>2</sup>L<sup>2 </sup>each comprise 256×512 coefficients. For a sixteen bit color depth, 2,097,152 bits or 262,144 bytes are required. Using memory spaces <b>67</b> <i>a</i>, <b>67</b> <i>b</i>, <b>59</b> <i>a</i>, <b>59</b> <i>b</i>, (262,144 bytes)×(4 subbands)×(2 memory spaces)≅2 MB are required. </div>
</li> <li> <para-num num="[0108]"> </para-num> <div class="description-line" id="p-0109" num="0108"> At the second level, subbands L<sup>4</sup>, HL<sup>3</sup>, LHL<sup>2 </sup>and H<sup>2</sup>L<sup>2 </sup>are column processed <b>17</b> (<figref idrefs="DRAWINGS">FIG. 1</figref> <i>d</i>). The 6.3 MHz clock rate (clk<sub>row3</sub>) transitions to 12.6 MHz (clk<sub>col2</sub>). After column processing <b>17</b>, subbands L<sup>3 </sup>and HL<sup>2 </sup>each comprising 512×512 coefficients are written into a second level column storage element <b>77</b> and are available for row processing <b>33</b>. The memory required would be 4,194,304 bits, or 524,288 bytes for all coefficients of one subband. Since there are two subbands and memory spaces are employed, the total subband memory required for the second level column storage element <b>77</b> is approximately (524,288 bytes)×(2 subbands)×(2 memory spaces)≅2 MB. After row processing <b>33</b>, subband coefficients L<sup>2 </sup>are written into a second level row storage element <b>69</b>, <b>61</b>. The 12.6 MHz clock rate (clk<sub>col2</sub>) transitions to 25.3 MHz (clk<sub>row2</sub>). The first level subbands LL, HL, LH and HH each comprise 512×1024 values. For a sixteen bit color depth, 8,388,608 bits or 1,048,576 bytes are required. Using memory spaces <b>69</b> <i>a</i>, <b>69</b> <i>b</i>, <b>61</b> <i>a</i>, <b>61</b> <i>b</i>, (1,048,576 bytes)×(4 subbands)×(2 memory spaces)≅8 MB are required. </div>
</li> <li> <para-num num="[0109]"> </para-num> <div class="description-line" id="p-0110" num="0109"> At the first level, subbands L<sup>2</sup>, HL, LH and HH are column processed <b>17</b> (<figref idrefs="DRAWINGS">FIG. 11</figref> <i>e</i>). The 25.3 MHz clock rate (clk<sub>row2</sub>) transitions to 50.5 MHz (clk<sub>col1</sub>). After column processing <b>17</b>, subbands L and H each comprising 1024×1024 coefficients are written into a first level column storage element <b>79</b> and are available for row processing <b>33</b>. The memory required would be 16,777,216 bits, or 2,097,152 bytes for all coefficients of one subband. Since there are two subbands and memory spaces are employed, the total subband memory required for the first level column storage element <b>79</b> is approximately (2,097,152 bytes)×(2 subbands)×(2 memory spaces)≅8 MB. The 50.5 MHz clock rate (clk<sub>col1</sub>) transitions to 101 MHz (clk<sub>row1</sub>) during row processing <b>17</b>. </div>
</li> <li> <para-num num="[0110]"> </para-num> <div class="description-line" id="p-0111" num="0110"> The above example shows the method of the invention as applied to one type of signal processing transform, the IDWT, requiring multiple temporal stages, each stage having a storage element allocating memory spaces and its own operating frequency and voltage for maximum power efficiency. The invention can likewise be used to derive pipeline stages for a DWT, DCT, IDCT and other signal processing streaming calculations. </div>
</li> <li> <para-num num="[0111]"> </para-num> <div class="description-line" id="p-0112" num="0111"> Although the invention herein has been described with reference to particular embodiments, it is to be understood that these embodiments are merely illustrative of the principles and applications of the present invention. It is therefore to be understood that numerous modifications may be made to the illustrative embodiments and that other arrangements may be devised without departing from the spirit and scope of the present invention as defined by the appended claims. </div>
</li> </ul>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">32</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM7439653">
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text"> <b>1</b>. A method for implementing a computation as a pipeline that processes streaming data comprising: 
<div class="claim-text">partitioning the computation into a plurality of temporal stages, each said stage having at least one input and at least one output, wherein one of said stages is a first stage having at least one primary input, and one of said stages is a last stage having at least one primary output, with each said stage defined by a clock frequency; </div> <div class="claim-text">forming a pipeline by coupling at least one output from said first stage to at least one input of another one of said plurality of stages, and coupling at least one output from another one of said plurality of stages to at least one input of said last stage; </div> <div class="claim-text">assigning a clock frequency to each one of said stages in said pipeline such that an overall throughput requirement is met and not all of said assigned stage clock frequencies are equal; and </div> <div class="claim-text">assigning to each said stage in said pipeline a supply voltage wherein not all of said assigned stage supply voltages are equal. </div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text"> <b>2</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein each one of said stages comprise at least one operation. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text"> <b>3</b>. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref> further comprising synthesizing said at least one operation for each one of said stages into circuit elements. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text"> <b>4</b>. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref> further comprising reducing said circuit elements for each one of said stages into hardware, said hardware exhibiting a predetermined latency. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text"> <b>5</b>. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref> wherein each one of said stages has a respective voltage threshold defined by said stage hardware and said supply voltage assigned to a respective stage is greater than its respective voltage threshold. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text"> <b>6</b>. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein said last stage assigned clock frequency is set at a minimum value that maintains the throughput requirement at said primary output. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text"> <b>7</b>. The method according to <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein each said stage assigned clock frequency is set at a minimum value that maintains the throughput requirement at said primary output. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text"> <b>8</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein each said stage assigned supply voltage is determined in proportion to its respective clock frequency. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text"> <b>9</b>. The method according to <claim-ref idref="CLM-00008">claim 8</claim-ref> further comprising inserting at least one storage element in at least one of said plurality of stages in said pipeline to allow for operational independence between said storage element stage and another one of said plurality of said stages. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text"> <b>10</b>. The method according to <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein each said storage element allocates a first and a second memory space, said first and said second memory spaces are accessed by a write function for writing data to and a read function for reading data from, said write and said read functions access either said first or said second memory spaces in any predetermined pattern. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text"> <b>11</b>. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref> wherein said write and said read functions access said first and said second memory spaces exclusively. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text"> <b>12</b>. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein said first and said second memory spaces have a memory capacity that is equal to or greater than the latency of a following stage. </div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00013" num="00013">
<div class="claim-text"> <b>13</b>. An inverse discrete wavelet pipeline comprising: 
<div class="claim-text">at least one reconstruction channel having a low input, a high input and an output; </div> <div class="claim-text">a row processing stage comprising: 
<div class="claim-text">a row reconstruction channel; said row reconstruction channel output coupled to a row stage storage element first input, said row storage element having a corresponding first output and said row storage element having a second input and a corresponding second output, a third input and a corresponding third output, and a fourth input and a corresponding fourth output. </div>
</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00014" num="00014">
<div class="claim-text"> <b>14</b>. The pipeline according to <claim-ref idref="CLM-00013">claim 13</claim-ref> further comprising a column processing stage comprising: 
<div class="claim-text">first and second column reconstruction channels; </div> <div class="claim-text">said first column reconstruction channel output coupled to a column storage element first input, said column storage element having a corresponding first output, said second column reconstruction channel output coupled to a second input of said column storage element, said column storage element having a corresponding second output. </div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00015" num="00015">
<div class="claim-text"> <b>15</b>. The pipeline according to <claim-ref idref="CLM-00014">claim 14</claim-ref> further comprising a level, said level comprising: 
<div class="claim-text">a column stage coupled to a row stage, wherein said column storage element first output is coupled to said row reconstruction channel low input, said column storage element second output is coupled to said row reconstruction channel high input defining a level whereby said column first reconstruction channel low and high inputs and second reconstruction channel low and high inputs are subband coefficient inputs, and said row storage element first, second, third and fourth outputs are subband coefficient outputs. </div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00016" num="00016">
<div class="claim-text"> <b>16</b>. The pipeline according to <claim-ref idref="CLM-00015">claim 15</claim-ref> further comprising a plurality of levels, wherein one level is an n<sup>th</sup>-level for receiving n<sup>th</sup>-level subband coefficients, and one of said levels is a first level for outputting a complete reconstruction whereby said subband coefficient outputs from said n<sup>th</sup>-level are coupled to subband coefficient inputs of another one of said plurality of levels, and subband coefficient outputs from another one of said plurality of levels are coupled to subband coefficient inputs of said first level. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00017" num="00017">
<div class="claim-text"> <b>17</b>. The pipeline according to <claim-ref idref="CLM-00016">claim 16</claim-ref> wherein each stage is defined by a stage clock frequency and a stage supply voltage. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00018" num="00018">
<div class="claim-text"> <b>18</b>. The pipeline according to <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein each stage exhibits a predetermined latency. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00019" num="00019">
<div class="claim-text"> <b>19</b>. The pipeline according to <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein each stage has a respective voltage threshold and said stage supply voltage is greater than its respective voltage threshold. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00020" num="00020">
<div class="claim-text"> <b>20</b>. The pipeline according to <claim-ref idref="CLM-00019">claim 19</claim-ref> wherein said first level row stage clock frequency is set at a minimum value that maintains a reconstruction throughput requirement. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00021" num="00021">
<div class="claim-text"> <b>21</b>. The pipeline according to <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein each stage clock frequency is set at a minimum value that maintains said reconstruction throughput requirement. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00022" num="00022">
<div class="claim-text"> <b>22</b>. The pipeline according to <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein each said stage supply voltage is in proportion to its respective clock frequency. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00023" num="00023">
<div class="claim-text"> <b>23</b>. The pipeline according to <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein all of said stage supply voltages are equal. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00024" num="00024">
<div class="claim-text"> <b>24</b>. The pipeline according to <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein not all of said stage supply voltages are equal. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00025" num="00025">
<div class="claim-text"> <b>25</b>. The pipeline according to <claim-ref idref="CLM-00022">claim 22</claim-ref> wherein said storage elements in the pipeline allow for operational independence between each said stage. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00026" num="00026">
<div class="claim-text"> <b>26</b>. The pipeline according to <claim-ref idref="CLM-00025">claim 25</claim-ref> wherein for each said input and corresponding output of each said storage element, first and second memory spaces are allocated and accessed by a write function for writing data from each of said storage element inputs to either of said corresponding first and second memory spaces, and a read function for reading data from each of said storage element outputs to either of said corresponding first or said second memory spaces in any predetermined pattern. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00027" num="00027">
<div class="claim-text"> <b>27</b>. The pipeline according to <claim-ref idref="CLM-00026">claim 26</claim-ref> wherein said write and said read functions access said first and said second memory spaces exclusively. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00028" num="00028">
<div class="claim-text"> <b>28</b>. The pipeline according to <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein said first and said second memory spaces contain a memory capacity that is equal to or greater than the latency of a following stage. </div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00029" num="00029">
<div class="claim-text"> <b>29</b>. A pipeline for performing a streaming computation, the pipeline having a plurality of stages coupled together, each stage having at least one input and at least one output and one of the stages is a first stage having at least one primary input and one of the stages is a last stage having at least one primary output with each stage performing a subprocess computation comprising: 
<div class="claim-text">at least one storage element, said storage element having an input and an output and a first and a second memory space, said storage element input coupled to at least one output from one of the plurality of stages and said storage element output coupled to at least one input of another one of the plurality of stages, said storage element first memory space writing data output from said one of the plurality of stages in any pattern and said another one of the plurality of stages reading previously written data in any pattern from said second memory space. </div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00030" num="00030">
<div class="claim-text"> <b>30</b>. The pipeline according to <claim-ref idref="CLM-00029">claim 29</claim-ref> further comprising a stage clock frequency for each one of the plurality of stages wherein each said stage clock frequency is set at a minimum value that maintains a throughput requirement. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00031" num="00031">
<div class="claim-text"> <b>31</b>. The pipeline according to <claim-ref idref="CLM-00030">claim 30</claim-ref> further comprising a stage supply voltage for each one of the plurality of stages wherein each stage has a respective voltage threshold and said stage supply voltage for a stage is greater than its respective voltage threshold. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00032" num="00032">
<div class="claim-text"> <b>32</b>. The pipeline according to <claim-ref idref="CLM-00031">claim 31</claim-ref> wherein each said stage supply voltage is in proportion to its respective clock frequency.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    