
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US6201178B1 - On-the-fly note generation and a musical instrument 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA72526327">
<div class="abstract">A method and apparatus for performing music on an electronic instrument in which individual chord progression chords can be triggered in real-time, while various individual notes of the chord, and/or possible scale notes and non-scale notes to play along with the chord, can be generated from separate fixed locations on the instrument, and in different octaves. The method of performance involves the designation of a chord progression section on the instrument, then assigning chords or individual chord notes to this chord progression section according to the defined customary scale or customary scale equivalent of a song key. Further, as each chord is played in the chord progression section, various individual notes of the currently triggered chords can be generated from separate fixed chord locations on the instrument, and in different octaves. Fundamental and alternate notes of each chord can be generated from separate fixed chord locations on the instrument for composing purposes, and in different octaves. Possible scale notes and/or non-scale notes to play along with the currently triggered chord, can also be generated from separate fixed locations on the instrument, and in different octaves. All performance data can be stored in memory or on a storage device, and can later be retrieved and performed by a user from one or more fixed locations on the instrument. The performance data may also be performed using a variable number of input controllers. Further, multiple instruments of the present invention may be used together to allow interaction among multiple users during performance, with no knowledge of music theory required.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES54511947">
<div class="description-paragraph">This is a continuation in part of application Ser. No. 09/247,378 filed Feb. 10, 1999, which is a continuation in part of application Ser. No. 09/119,870 filed Jul. 21, 1998, which is a continuation in part of application Ser. No. 08/898,613, filed Jul. 22, 1997, U.S. Pat. No. 5,783,767, which is a continuation in part of application Ser. No. 08/531,786, filed Sep. 21, 1995, U.S. Pat. No. 5,650,584, which claims the benefit of Provisional Application No. 60/020,457 filed Aug. 28, 1995.</div>
<heading>FIELD OF THE INVENTION</heading>
<div class="description-paragraph">The present invention relates generally to a method of performing music on an electronic instrument. This invention relates more particularly to a method and an instrument for performing in which a plurality of notes and note groups can be generated in real-time. Simultaneously, other notes and/or note groups, such as chord notes, scale notes, and non-scale notes may be generated in response to performances from separate fixed locations on the instrument. All performance data can later be retrieved and performed from one or more fixed locations on the instrument, and from a varied number of input controllers. Further, multiple instruments of the present invention may be used together to allow interaction among multiple users during performance, with no knowledge of music theory required.</div>
<heading>BACKGROUND OF THE INVENTION</heading>
<div class="description-paragraph">A complete electronic musical system should have a means of performing professional music with little or no training, whether live or along with a previously recorded track, while still allowing the highest levels of creativity and interaction to be achieved during the performance.</div>
<div class="description-paragraph">Methods of performing music on an electronic instrument are known, and may typically be classified in either of two ways: (1) a method in which automatic chord progressions are generated by depression of a key or keys (for example, Cotton Jr., et al., U.S. Pat. No. 4,449,437), or by generating a suitable chord progression after a melody is given by a user (for example, Minamitaka, U.S. Pat. No. 5,218,153); and (2) a method in which a plurality of note tables is used for MIDI note-identifying information, and is selected in response to a user command (for example, Hotz, U.S. Pat. Nos. 5,099,738 and 5,619,003).</div>
<div class="description-paragraph">The first method of musical performance involves generating pre-sequenced or preprogrammed accompaniment. This automatic method of musical performance lacks the creativity necessary to perform music with the freedom and expression of a trained musician. This method dictates a preprogrammed accompaniment without user-selectable modifications in real-time, and is therefore unduly limited.</div>
<div class="description-paragraph">The second method of musical performance involves the use of note tables to define each key as one or more preselected musical notes. Note-identifying information is stored in a table so that each key has predetermined note-identifying information which corresponds to the key. The note-identifying information corresponding to a key is provided in response to a user selection/deselection of the key. This method of using tables of note-identifying information is unduly limited and does not allow for the levels of professional performance, flexibility, and efficiency as achieved by the present invention.</div>
<div class="description-paragraph">The present invention allows any and all needed performance notes and/or note groups to be generated on-the-fly, providing many advantages. Any note or group of notes can be auto-corrected during performance according to a generated note or generated note group, thus preventing incorrect or “undesirable” notes from playing over the various chord and scale changes in the performance. Every possible combination of chord groups, scale note groups, combined scale note groups, non-scale note groups, harmonies/inversions/voicings, note ordering, note group setups, and instrument setups can be generated and made accessible to a user at any time using the present invention. All that is required is the current status messages or other triggers described herein, or various user-selectable input, as described herein. This allows any new musical part to be added to a performance at any time, and these current status messages can also be stored and then transferred between various instruments for virtually unlimited compatibility and flexibility during both composition and performance. The nature of the present invention also allows musically-correct chords, as well as musically-correct individual chord notes, to be performed from the chord section while generating needed data which will be used for further note generation. The present invention achieves the highest levels of flexibility and efficiency in both composition and performance. Further, various indicators described herein which are needed by an untrained user for professional performance, can be easily determined and provided using the present invention.</div>
<div class="description-paragraph">There are five distinct needs which must be met, before a person with little or no musical training can effectively perform music with total creative control, just as a trained musician would:</div>
<div class="description-paragraph">(1) A means is needed for assigning a particular section of a musical instrument as a chord progression section in which individual chords and/or chord notes can be triggered in real-time. Further, the instrument should provide a means for dividing this chord progression section into particular song keys, and providing indicators so that a user understands the relative position of the chord in the predetermined song key, as described more fully below.</div>
<div class="description-paragraph">Various systems known in the art use a designated chord progression section, but with no allowance for indicating to a user the relative position of a chord regardless of any song key chosen. One of the most basic tools of a composer is the freedom to compose in a selected key, and to compose using specific chord progressions based on the song key. For example, when composing a song in the key of E Major, the musician should be permitted to play a chord progression of 1-4-5-6-2-3, or any other chord progression chosen by the musician. The indicators provided by the present invention can also indicate relative positions in the customary scale and/or customary scale equivalent of a selected song key, thus eliminating the confusion between major song keys, and their relative minor equivalents. Chromatic chords may also be performed at the discretion of a user. Inexperienced composers who use the present invention are made fully aware at all times of what they are actually playing, therefore allowing “non-scale” chromatic chords to be added by choice, not just added unknowingly.</div>
<div class="description-paragraph">(2) There also remains a need for a musical instrument that provides a user the option to play chords with one or more fingers in the chord progression section as previously described, while various individual notes of the currently triggered chord can be generated from separate fixed chord locations on the instrument, and in different octaves. Regardless of the different chords which are being played in the chord progression section, various individual notes of each currently triggered chord should be made available for playing in these same separate fixed chord locations on the instrument, and in real-time. The fundamental note and the alternate note of the chord may also be generated from designated fixed locations on the instrument for composing purposes, and chord notes can be reconfigured in any way in real-time for increased system flexibility.</div>
<div class="description-paragraph">(3) The re also remains a need for a way to trigger chords with on e or more fingers in the chord progression section, while various note groups such as chord note groups, scale note groups, and non-scale note groups can be generated from separate fixed locations on the instrument, and in different octaves. There should also be a means of correcting incorrect or “undesirable” notes during a performance, while allowing other notes to play through the chord and scale changes in the performance. A variety of different note groups should also be accessible to a user at any time, thus allowing a higher level of performance to be achieved. The on-the-fly note generation methods of the present invention allow virtually any note group or note group combination to be made available to a user at any time during a performance.</div>
<div class="description-paragraph">(4) There also remains a need for a way to trigger chords with one or more fingers in the chord progression section, while the entire chord can be generated from separate fixed locations on the instrument, and in different octaves. A variety of different chord voicings should also be accessible to a user at any time during a performance.</div>
<div class="description-paragraph">(5) Finally, there needs to be a means for adding to or modifying a composition once a basic progression and melody are decided upon and recorded by a user. A user with little or no musical training is thus able to add a variety of additional musically correct parts and/or non-scale parts to the composition, to remove portion s of the composition that were previously recorded, or to simply modify the composition in accordance with the taste of the musician.</div>
<div class="description-paragraph">Techniques for automating the performance of music on an electronic instrument are well known. They primarily involve the use of indication systems. These indication systems display to a user the notes to play on an instrument in order to achieve the desired performance. These techniques are primarily used as teaching aids of traditional music theory and performance (e.g., Shaffer et al., U.S. Pat. No. 5,266,735). These current methods provide high tech “cheat sheets”. A user must follow along to an indication system and play all chords, notes, and scales just as a trained musician would. These methods do nothing to actually reduce the demanding physical skills required to perform the music, while still allowing the user to maintain creative control. Other performance techniques known in the art allow a song to be “stepped through” by pressing one or more input controllers multiple times. These techniques are unduly limited in the fact that very little user interaction is achieved. Still, other techniques do employ indication systems to allow a song to be stepped through (i.e. Casio's “Magic Light Keyboard”). These systems are unduly limited in the fact that they provide no means of reducing the complexity of a performance, or of allowing an untrained user to achieve the high levels of creative control and performance as described herein by the present invention (i.e. advanced tempo control, improvisational capability, multiple skill levels, multi-user performance, etc.). The present invention takes into account all of these needs. The present invention allows the number of input controllers needed to effect a given performance to be varied. Indications are used to accomplish this. The methods of the present invention allow a user to improvise in a given performance with complete creative control, and with no training required. Different skill levels may be used to provide different levels of user interaction. The advanced tempo control methods described herein provide a user with complete creative tempo control over a given performance, as well as allow an intended tempo to be indicated to the user. The on-the-fly note generation methods of the present invention allow all appropriate notes, note groups, one-finger chords, and harmonies to be made available to a user from fixed locations on the instrument during performance. This allows an untrained user to improvise, as well as reduces the amount of physical skill needed to perform music. A user with little or no musical training can effectively perform music while maintaining the high level of creativity and interaction of a trained musician. Increased system flexibility is also provided due to all of the various notes, note groups, setup configurations, modes, etc. that are accessible to a user at any time.</div>
<div class="description-paragraph">It is a further object of the present invention, to allow multiple instruments of the present invention to be used together for allowing interactive play among users. The present invention allows interactive composition and/or performance among multiple users, with no need for knowledge of music theory. The highest levels of creativity and flexibility are maintained. Users may perform together using instruments connected directly into one other, connected through the use of an external processor or processors, or by using various combinations of these. Multiple users may each select a specific performance part or parts to perform, in order to cumulatively effect an entire performance simultaneously. The on-the-fly note generation methods of the present invention allow any previously recorded music to be played from a broad range of musical instruments, and with a virtually unlimited number of note groups, note group combinations, etc. being made accessible to a user at any time, and using only one set of recorded triggers.</div>
<heading>SUMMARY OF THE INVENTION</heading>
<div class="description-paragraph">There currently exists no such adequate means of performing music with little or no musical training. It is therefore an object of the present invention to allow individuals to perform music with reduced physical skill requirements and no need for knowledge of music theory, while still maintaining the highest levels of creativity and flexibility that a trained musician would have. The on-the-fly note generation methods of the present invention solve these problems in an efficient and flexible manner, while still allowing a user to maintain creative control in a performance.</div>
<div class="description-paragraph">These and other features of the present invention will be apparent to those of skill in the art from a review of the following detailed description, along with the accompanying drawings.</div>
<heading>BRIEF DESCRIPTION OF DRAWINGS</heading>
<div class="description-paragraph">FIG. 1A is a schematic diagram of a performance instrument of the present invention.</div>
<div class="description-paragraph">FIG. 1B is a general overview of the chord progression method and the fixed scale location method.</div>
<div class="description-paragraph">FIG. 1C is a general overview of the chord progression method and the fixed chord location method.</div>
<div class="description-paragraph">FIG. 1D is one sample of a printed indicator system which can be attached to or placed on the instrument.</div>
<div class="description-paragraph">FIG. 2 is a detail drawing of a keyboard of the present invention defining key elements.</div>
<div class="description-paragraph">FIG. 3 is an overall logic flow block diagram of the system of the present invention.</div>
<div class="description-paragraph">FIG. 4 is a high level logic flow diagram of the system.</div>
<div class="description-paragraph">FIG. 5 is a logic flow diagram of chord objects ‘Set Chord’ service.</div>
<div class="description-paragraph">FIGS. 6A and 6B together are a logic flow diagram of scale objects ‘Set scale’ service.</div>
<div class="description-paragraph">FIGS. 7A, <b>7</b>B, <b>7</b>C, and <b>7</b>D together are a logic flow diagram of chord inversion objects.</div>
<div class="description-paragraph">FIG. 8 is a logic flow diagram of channel output objects ‘Send note off’ service.</div>
<div class="description-paragraph">FIG. 9A is a logic flow diagram of channel output objects ‘Send note on’ service.</div>
<div class="description-paragraph">FIG. 9B is a logic flow diagram of channel output objects ‘Send note on if off’ service.</div>
<div class="description-paragraph">FIGS. 10A and 10B together are a logic flow diagram of PianoKey::Chord Progression Key objects ‘Respond to key on’ service.</div>
<div class="description-paragraph">FIG. 11 is a logic flow diagram of PianoKey::Chord Progression Key objects ‘Respond to key off’ service.</div>
<div class="description-paragraph">FIGS. 12A, through <b>12</b>J together are a logic flow diagram of PianoKey::Melody Key objects ‘Respond to key on’ service.</div>
<div class="description-paragraph">FIG. 12K is a logic flow diagram of PianoKey::Melody Key objects ‘Respond to key off’ service.</div>
<div class="description-paragraph">FIGS. 13A through 13F together are a logic flow diagram of the PianoKey::MelodyKey objects ‘Respond To Key On’ service.</div>
<div class="description-paragraph">FIGS. 14A through 14D together are a logic flow diagram of Music Administrator objects ‘Update’ service.</div>
<div class="description-paragraph">FIG. 15A is a general overview of a performance function of the present invention.</div>
<div class="description-paragraph">FIG. 15B is a logic flow diagram of the Engage(velocity) service of the performance function.</div>
<div class="description-paragraph">FIG. 15C is a logic flow diagram of the Disengage( ) service of the performance function.</div>
<div class="description-paragraph">FIG. 15D is a logic flow diagram of the Arm(keyNum) service of the performance function.</div>
<div class="description-paragraph">FIG. 15E is a logic flow diagram of the DisArm(keyNum) service of the performance function.</div>
<div class="description-paragraph">FIG. 15F is a logic flow diagram of the RcvLiveKey(keyEvent) service of the performance function.</div>
<div class="description-paragraph">FIGS. 15G through 15J together are a logic flow diagram of mode setting services for the performance function.</div>
<div class="description-paragraph">FIG. 15K is a logic flow diagram of a tempo control feature of the performance function.</div>
<div class="description-paragraph">FIG. 16A is a general overview including multiple instruments of the present invention daisy-chained to one another for simultaneous performance.</div>
<div class="description-paragraph">FIG. 16B is a general overview including multiple embodiments of the present invention being used simultaneously with an external processor.</div>
<div class="description-paragraph">FIG. 16C is a general overview including multiple embodiments of the present invention being used together in a network.</div>
<heading>DETAILED DESCRIPTION OF A PREFERRED EMBODIMENT</heading>
<div class="description-paragraph">The present invention is primarily software based and the software is in large part a responsibility driven object oriented design. The software is a collection of collaborating software objects, where each object is responsible for a certain function.</div>
<div class="description-paragraph">For a more complete understanding of a preferred embodiment of the present invention, the following detailed description is divided to (1) show a context diagram of the software domain (FIG. <b>1</b>A); (2) describe the nature of the musical key inputs to the software (FIG. <b>2</b>); (3) show a diagram of the major objects (FIG. <b>3</b>); (3) identify the responsibility of each major object; (4) list and describe the attributes of each major object; (5) list and describe the services or methods of each object, including flow diagrams for those methods that are key contributors to the present invention; and (6) describe the collaboration between each of the main objects.</div>
<div class="description-paragraph">Referring first to FIG. 1A, a computer <b>1</b>-<b>10</b> memory and processing elements in the usual manner. The computer <b>1</b>-<b>10</b> preferably has the music software program installed thereon. The music software program comprises an off-the-shelf program, and provides computer assisted musical performance software. This program accepts inputs from a keyboard <b>1</b>-<b>12</b> or other user interface element and a user-selectable set of settings <b>1</b>-<b>14</b>. The keyboard <b>1</b>-<b>12</b> develops a set of key inputs <b>1</b>-<b>13</b> and the settings <b>1</b>-<b>14</b> provides a user settings input group <b>1</b>-<b>15</b>.</div>
<div class="description-paragraph">It should be appreciated that the keyboard may comprise a standard style keyboard, or it may include a computer keyboard or other custom-made input device, as desired. For example, gloves are gaining in popularity as input devices for electronic instruments. The computer <b>1</b>-<b>10</b> sends outputs to musical outputs <b>1</b>-<b>16</b> for tone generation or other optional displays <b>1</b>-<b>18</b>. The optional displays <b>1</b>-<b>18</b> provide a user with information which includes the present configuration, chords, scales and notes being played (output).</div>
<div class="description-paragraph">The music software in the computer <b>1</b>-<b>10</b> takes key inputs and translates them into musical note outputs. This software and/or program may exist separately from its inputs and outputs such as in a personal computer and/or other processing device. The software and/or program may also be incorporated along with its inputs and outputs as any one of its inputs or outputs, or in combination with any or all of its inputs or outputs. It is also possible to have a combination of these methods. All of these, whether used separately or together in any combination may be used to create the “instrument” as described herein.</div>
<div class="description-paragraph">The User settings input group <b>1</b>-<b>14</b> contains settings and configurations specified by a user that influence the way the software interprets the Key inputs <b>1</b>-<b>13</b> and translates these into musical notes at the musical outputs <b>1</b>-<b>16</b>. The user settings <b>1</b>-<b>15</b> may be input through a computer keyboard, push buttons, hand operated switches, foot operated switches, or any combination of such devices. Some or all of these settings may also be input from the Key inputs <b>1</b>-<b>13</b>. The user settings <b>1</b>-<b>15</b> include a System on/off setting, a song key setting, chord assignments, scale assignments, and various modes of operation.</div>
<div class="description-paragraph">The key inputs <b>1</b>-<b>13</b> are the principle musical inputs to the music software. The key inputs <b>1</b>-<b>13</b> contain musical chord requests, scale requests, melodic note requests, chord note requests and configuration requests and settings. These inputs are described in more detail in FIG. <b>2</b>. The preferred source of the key inputs and/or input controllers is a digital electronic (piano) keyboard that is readily available from numerous vendors. This provides a user with the most familiar and conventional way of inputting musical requests to the software. The music software in the computer <b>1</b>-<b>10</b>, however, may accept inputs <b>1</b>-<b>13</b> from other sources such as computer keyboards, or any other input controllers comprising various switching devices, which may or may not be velocity sensitive. A sequencer <b>1</b>-<b>22</b> or other device may simultaneously provide pre-recorded input to the computer <b>1</b>-<b>10</b>, allowing a user to add another “voice” to a composition, and/or for performance.</div>
<div class="description-paragraph">The system may also include an optional non-volatile file storage device <b>1</b>-<b>20</b>. The storage device <b>1</b>-<b>20</b> may be used to store and later retrieve the settings and configurations. This convenience allows a user to quickly and easily configure the system to a variety of different configurations. The storage device <b>1</b>-<b>20</b> may comprise a magnetic disk, tape, or other device commonly found on personal computers and other digital electronic devices. These configurations may also be stored in memory to provide real-time setups from an input controller, user interface, etc.</div>
<div class="description-paragraph">The musical outputs <b>1</b>-<b>16</b> provide the main output of the system. The output <b>1</b>-<b>16</b> contain the notes that a user intends to be sounded (heard) as well as other information, relating to how notes are sounded (loudness, etc.). In addition, other data such as configuration and key inputs <b>1</b>-<b>13</b> are encoded into the output stream to facilitate iteratively playing back and refining the results. The present invention can be used to generate sounds by coupling intended output with a sound source, such as a computer sound card, external sound source, internal sound source, software-based sound source, etc. which are all known in the art. The sound source described herein may be a single sound source, or multiple sound sources acting as; a unit to generate sounds of any or all of the various notes or note groups described herein. An original performance can also be output (unheard) along with the processed performance (heard), and recorded for purposes of re-performance, substitutions, etc. MIDI is an acronym that stands for Musical Instrument Digital Interface, an international standard. Even though the preferred embodiment is described using the specifications of MIDI, any adequate protocol could be used. This can be done by simply carrying out all processing relative to the desired protocol. Therefore, the disclosed invention is riot limited to MIDI only.</div>
<div class="description-paragraph">FIG. 2 shows how the system parses key inputs <b>1</b>-<b>13</b>. Only two octaves are shown in FIG. 2, but the pattern repeats for all other lower and higher octaves. Each key input <b>1</b>-<b>13</b> has a unique absolute key number <b>2</b>-<b>10</b>, shown on the top row of numbers in FIG. <b>2</b>. The present invention may use a MIDI keyboard and, in such a case, the absolute key numbers are the same as the MIDI note numbers as described in the MIDI specification. The absolute key number <b>2</b>-<b>10</b> (or note number), along with velocity, is input to the computer for manipulation by the software. The software assigns other identifying numbers to each key as shown in rows 2 through 4 in FIG. <b>2</b>. The software assigns to each key a relative key number <b>2</b>-<b>12</b> as shown in row 2. This is the key number relative to a C chromatic scale and ranges from 0-11 for the 12 notes of the scale. For example, every ‘F’ key on the keyboard is identified with relative number 5. Each key is also assigned a color (black or white) key number <b>2</b>-<b>14</b>. Each white key is numbered 0-6 (7 keys) and each black key is numbered 0-4 (5 keys). For example, every ‘F’ key is identified as color (white) key number 3 (the 4th white key) and every ‘F♯’ as color (black) key number 2 (the 3rd black key). The color key number is also relative to the C scale. The 4th row shown on FIG. 2 is the octave number <b>2</b>-<b>16</b>. This number identifies which octave on the keyboard a given key is in. The octave number 0 is assigned to absolute key numbers 54 through 65. Lower keys are assigned negative octave numbers and higher keys are assigned positive octave numbers. The logic flow description that follows will refer to all 4 key identifying numbers.</div>
<div class="description-paragraph">FIG. 3 is a block diagram of the structure of the software showing the major objects. Each object has its own memory for storing its variables or attributes. Each object provides a set of services or methods (subroutines) which are used by other objects. A particular service for a given object is invoked by sending a message to that object. This is tantamount to calling a given subroutine within that object. This concept of message sending is described in numerous text books on software engineering and is well known in the art. The lines with arrows in FIG. 3 represent the collaborations between the objects. The lines point from the caller to the receiver.</div>
<div class="description-paragraph">Each object forms a part of the software; the objects work together to achieve the desired result. Below, each of the objects will be described independent of the other objects. Those services which are key to the present invention will include flow diagrams.</div>
<div class="description-paragraph">The Main block <b>3</b>-<b>1</b> is the main or outermost software loop. The Main block <b>3</b>-<b>1</b> repeatedly invokes services of other objects. FIG. 4 depicts the logic flow for the Main object <b>3</b>-<b>1</b>. It starts in step <b>4</b>-<b>10</b> and then invokes the initialization service of every object in step <b>4</b>-<b>12</b>. Steps <b>4</b>-<b>14</b> and <b>4</b>-<b>16</b> then repeatedly invoke the update services of a Music Administrator object <b>3</b>-<b>3</b> and a User Interface object <b>3</b>-<b>2</b>. The oobjects <b>3</b>-<b>3</b> and <b>3</b>-<b>2</b> in turn invoke the services of other objects in response to key (music) inputs <b>1</b>-<b>13</b> and user interface inputs. The user interface object <b>3</b>-<b>2</b> in step <b>4</b>-<b>18</b> determines whether or not a user wants to terminate the program.</div>
<div class="description-paragraph">Thus, the Main Object <b>3</b>-<b>1</b> calls the objects <b>3</b>-<b>3</b> and <b>3</b>-<b>2</b> to direct the overall action of the system and the lower level action of the dependent objects will now be developed.</div>
<div class="description-paragraph">Tables 1 and 2</div>
<div class="description-paragraph">Among other duties, the User Interface object <b>3</b>-<b>2</b> calls up a song key object <b>3</b>-<b>8</b>. The object <b>3</b>-<b>8</b> contains the one current song key and provides services for determining the chord fundamental for each key in the chord progression section. The song key is stored in the attribute songKey and is initialized to C (See Table 2 for a list of song keys). The attribute circleStart (Table 1) holds the starting point (fundamental for relative key number 0) in the circle of 5ths or 4ths. The Get Key and Set Key services return and set the songKey attribute, respectively. The service ‘SetMode( )’ sets the mode attribute. The service SetCircle Start( ) sets the circle Start attribute.</div>
<div class="description-paragraph">When mode=normal, the ‘Get-Chord Fundamental for relative key number Y’ determines the chord fundamental note from Table 2. The relative key number Y is added to the current song key. If this sum is greater than 11, then 11 is subtracted from the sum. The sum becomes the index into Table 2 where the chord fundamental note is located and returned.</div>
<div class="description-paragraph">The chord fundamentals are stored in Table 2 in such a way as to put the scale chords on the white keys (index values of 0, 2, 4, 5, 7, 9, and 11) and the non-scale chords on the black keys (index values 1, 3, 6, 8, and 10). This is also the preferred method for storing the fundamental for the minor song keys. Optionally the fundamental for the minor keys may be stored using the offset shown in the chord indication row of Table 2.</div>
<div class="description-paragraph">As shown, a single song key actually defines both a customary scale and a customary scale equivalent. This means that a chord assigned to an input controller will represent a specific relative position in either the customary scale or customary scale equivalent of the song key. The song key is defined herein to be one song key regardless of various labels conveyed to a user (i.e. major/minor, minor, major, etc.). Non-traditional song key names may also be used (i.e. red, green, blue, 1, 2, 3, etc.). Regardless of the label used, a selected song key will still define one customary scale and one customary scale equivalent. The song key will be readily apparent during performance due to the fact that the song key has been used over a period of centuries and is well known. It should be noted that all indicators described herein by the present invention may be provided to a user in a variety of ways. Some of these may include through the use of a user interface, LEDs, printing, etching, molding, color-coding, design, decals, description or illustration in literature, provided to or created by a user for placement on the instrument, etc. Those of ordinary skill in the art will recognize that many ways, types, and combinations may be used to provide the indicators of the present invention. Therefore, indicators are not limited to the types described herein. It should also be noted that the methods of the present invention may also be used for other forms of music. Other forms of music may use different customary scales such as Indian scales, Chinese scales, etc. These scales may be used by carrying out all processing described herein relative to the scales.</div>
<div class="description-paragraph">Sending the message ‘Get chord fundamental for relative key number Y’ to the song key object calls a function or subroutine within the song key object that takes the relative key number as a parameter and returns the chord fundamental. When mode=circle<b>5</b> or circle<b>4</b>, the relative key number Y is added to circleStart and the fundamental is found in Table 2 in circle of 5th and circle of 4th rows respectively. The service ‘GetSongKeyLable( )’ returns the key label for use by the user interface.</div>
<div class="description-paragraph">The service ‘GetIndicationForKey(relativeKeyNumber)’ is provided as an added feature to the preferred ‘fixed location’ method which assigns the first chord of the song key to the first key, the 2nd chord of the song key to the 2nd key etc. As an added feature, instead of reassigning the keys, the chords may be indicated on a computer monitor or above the appropriate keys using an alphanumeric display or other indication system. This indicates to a user where the first chord of the song key is, where the 2nd chord is etc. The service ‘GetIndicationForKey(relativeKeyNumber)’ returns the alphanumeric indication that would be displayed. The indicators are in Table 2 in the row labeled ‘Chord Indications’. The song key object locates the correct indicator by subtracting the song key from the relative key number. If the difference is less than 0, then 12 is added. This number becomes the table index where the chord indication is found. For example, if the song key is E MAJOR, the service GetIndicationForKey(4) returns indication ‘1’ since 4 (relative key)−4 (song key)=0 (table index). GetIndicationForKey(11) returns ‘5’ since 11 (relative key)−4 (song Key)=7 (table index) and GetIndicationForKey(3) returns ‘7’ since 3(relative key)−4(song key)+12=11 (table index). If the indication system is used, then the user interface object requests the chord indications for each of the 11 keys each time the song key changed. The chord indication and the key labels can be used together to indicate the chord name as well (D, F♯, etc.)</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 1</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">SongKey Object Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. songKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. circleStart</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetSongKey(newSongKey);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. GetSongKey(); songKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. GetChordFundamental(relativeKeyNumber): fundamental</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. GetSongKeyLabel(); textLabel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. GetIndicationForKey(relativeKeyNumber); indication</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. setCircleStart(newStart)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" pgwide="1" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 2</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Song key and Chord Fundamental</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="13" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Table Index</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10</td>
<td class="description-td" morerows="0" valign="top">11</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Song Key</td>
<td class="description-td" morerows="0" valign="top">C</td>
<td class="description-td" morerows="0" valign="top">C#</td>
<td class="description-td" morerows="0" valign="top">D</td>
<td class="description-td" morerows="0" valign="top">D#</td>
<td class="description-td" morerows="0" valign="top">E</td>
<td class="description-td" morerows="0" valign="top">F</td>
<td class="description-td" morerows="0" valign="top">F#</td>
<td class="description-td" morerows="0" valign="top">G</td>
<td class="description-td" morerows="0" valign="top">G#</td>
<td class="description-td" morerows="0" valign="top">A</td>
<td class="description-td" morerows="0" valign="top">A#</td>
<td class="description-td" morerows="0" valign="top">B</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Song Key attribute</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10</td>
<td class="description-td" morerows="0" valign="top">11</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Fundamental</td>
<td class="description-td" morerows="0" valign="top">60</td>
<td class="description-td" morerows="0" valign="top">61</td>
<td class="description-td" morerows="0" valign="top">62</td>
<td class="description-td" morerows="0" valign="top">63</td>
<td class="description-td" morerows="0" valign="top">64</td>
<td class="description-td" morerows="0" valign="top">65</td>
<td class="description-td" morerows="0" valign="top">54</td>
<td class="description-td" morerows="0" valign="top">55</td>
<td class="description-td" morerows="0" valign="top">56</td>
<td class="description-td" morerows="0" valign="top">57</td>
<td class="description-td" morerows="0" valign="top">58</td>
<td class="description-td" morerows="0" valign="top">59</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Circle of 5ths</td>
<td class="description-td" morerows="0" valign="top">C</td>
<td class="description-td" morerows="0" valign="top">G</td>
<td class="description-td" morerows="0" valign="top">D</td>
<td class="description-td" morerows="0" valign="top">A</td>
<td class="description-td" morerows="0" valign="top">E</td>
<td class="description-td" morerows="0" valign="top">B</td>
<td class="description-td" morerows="0" valign="top">F#</td>
<td class="description-td" morerows="0" valign="top">C#</td>
<td class="description-td" morerows="0" valign="top">G#</td>
<td class="description-td" morerows="0" valign="top">D#</td>
<td class="description-td" morerows="0" valign="top">A#</td>
<td class="description-td" morerows="0" valign="top">F</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">(60)</td>
<td class="description-td" morerows="0" valign="top">(55)</td>
<td class="description-td" morerows="0" valign="top">(62)</td>
<td class="description-td" morerows="0" valign="top">(57)</td>
<td class="description-td" morerows="0" valign="top">(64)</td>
<td class="description-td" morerows="0" valign="top">(59)</td>
<td class="description-td" morerows="0" valign="top">(54)</td>
<td class="description-td" morerows="0" valign="top">(61)</td>
<td class="description-td" morerows="0" valign="top">(56)</td>
<td class="description-td" morerows="0" valign="top">(63)</td>
<td class="description-td" morerows="0" valign="top">(58)</td>
<td class="description-td" morerows="0" valign="top">(65)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Circle of 4ths</td>
<td class="description-td" morerows="0" valign="top">C</td>
<td class="description-td" morerows="0" valign="top">F</td>
<td class="description-td" morerows="0" valign="top">Bb</td>
<td class="description-td" morerows="0" valign="top">Eb</td>
<td class="description-td" morerows="0" valign="top">Ab</td>
<td class="description-td" morerows="0" valign="top">Db</td>
<td class="description-td" morerows="0" valign="top">Gb</td>
<td class="description-td" morerows="0" valign="top">B</td>
<td class="description-td" morerows="0" valign="top">E</td>
<td class="description-td" morerows="0" valign="top">A</td>
<td class="description-td" morerows="0" valign="top">D</td>
<td class="description-td" morerows="0" valign="top">G</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">(60)</td>
<td class="description-td" morerows="0" valign="top">(65)</td>
<td class="description-td" morerows="0" valign="top">(58)</td>
<td class="description-td" morerows="0" valign="top">(63)</td>
<td class="description-td" morerows="0" valign="top">(56)</td>
<td class="description-td" morerows="0" valign="top">(61)</td>
<td class="description-td" morerows="0" valign="top">(54)</td>
<td class="description-td" morerows="0" valign="top">(59)</td>
<td class="description-td" morerows="0" valign="top">(64)</td>
<td class="description-td" morerows="0" valign="top">(57)</td>
<td class="description-td" morerows="0" valign="top">(62)</td>
<td class="description-td" morerows="0" valign="top">(55)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Key Label</td>
<td class="description-td" morerows="0" valign="top">C</td>
<td class="description-td" morerows="0" valign="top">C#</td>
<td class="description-td" morerows="0" valign="top">D</td>
<td class="description-td" morerows="0" valign="top">D#</td>
<td class="description-td" morerows="0" valign="top">E</td>
<td class="description-td" morerows="0" valign="top">F</td>
<td class="description-td" morerows="0" valign="top">F#</td>
<td class="description-td" morerows="0" valign="top">G</td>
<td class="description-td" morerows="0" valign="top">G#</td>
<td class="description-td" morerows="0" valign="top">A</td>
<td class="description-td" morerows="0" valign="top">A#</td>
<td class="description-td" morerows="0" valign="top">B</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord indication</td>
<td class="description-td" morerows="0" valign="top">‘1’</td>
<td class="description-td" morerows="0" valign="top">‘1#’</td>
<td class="description-td" morerows="0" valign="top">‘2’</td>
<td class="description-td" morerows="0" valign="top">‘2#’</td>
<td class="description-td" morerows="0" valign="top">‘3’</td>
<td class="description-td" morerows="0" valign="top">‘4’</td>
<td class="description-td" morerows="0" valign="top">‘4#’</td>
<td class="description-td" morerows="0" valign="top">‘5’</td>
<td class="description-td" morerows="0" valign="top">‘5#’</td>
<td class="description-td" morerows="0" valign="top">‘6’</td>
<td class="description-td" morerows="0" valign="top">‘6#</td>
<td class="description-td" morerows="0" valign="top">‘7’</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Relative minor</td>
<td class="description-td" morerows="0" valign="top">‘3’</td>
<td class="description-td" morerows="0" valign="top">‘3#</td>
<td class="description-td" morerows="0" valign="top">‘4’</td>
<td class="description-td" morerows="0" valign="top">‘4#’</td>
<td class="description-td" morerows="0" valign="top">‘5’</td>
<td class="description-td" morerows="0" valign="top">‘6’</td>
<td class="description-td" morerows="0" valign="top">‘6#’</td>
<td class="description-td" morerows="0" valign="top">‘7’</td>
<td class="description-td" morerows="0" valign="top">‘7#’</td>
<td class="description-td" morerows="0" valign="top">‘1’</td>
<td class="description-td" morerows="0" valign="top">‘1#’</td>
<td class="description-td" morerows="0" valign="top">‘2’</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="13" morerows="0" nameend="13" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">For example, if the current song key is D Major, then the current song key value is 2. If a message is received requesting the chord fundamental note for relative key number 5, then the song key object returns 55, which is the chord fundamental note for the 7th (2+5) entry in Table 2. This means that in the song key of D, an F piano key should play a G chord, but how the returned chord fundamental is used is entirely up to the object receiving the information. The song key object (<b>3</b>-<b>8</b>) does its part by providing the services shown.</div>
<div class="description-paragraph">FIG. <b>5</b> and Tables 3 and 4</div>
<div class="description-paragraph">There is one current chord object <b>3</b>-<b>7</b>. Table 3 shows the attributes and services of the chord object which include the current chord type and the four notes of the current chord. The current chord object provides nine services.</div>
<div class="description-paragraph">The ‘GetChord( )’ service returns the current chord type (major, minor, etc.) and chord fundamental note. The ‘CopyNotes( )’ service copies the notes of the chord to a destination specified by the caller. Table 4 shows the possible chord types and the chord formulae used in generating chords. The current chord type is represented by the index in Table 4. For example, if the current chord type is =6, then the current chord type is a suspended 2nd chord.</div>
<div class="description-paragraph">FIG. 5 shows a flow diagram for the service that generates and sets the current chord. Referring to FIG. 5, this service first sets the chord type to the requested type X in step <b>5</b>-<b>1</b>. The fundamental note Y is then stored in step <b>5</b>-<b>2</b>. Generally, all the notes of the current chord will be contained in octave number 0 which includes absolute note numbers 54 through 65 (FIG. <b>2</b>). Y will always be in this range. The remaining three notes, the Alt note, C<b>1</b> note, and C<b>2</b> note of the chord are then generated by adding an offset to the fundamental note. The offset for each of these note is found in Table 4 under the columns labeled Alt, C<b>1</b> and C<b>2</b>. Four notes are always generated. In the case where a chord has only three notes, the C<b>2</b> note will be a duplicate of the C<b>1</b> note.</div>
<div class="description-paragraph">Referring back to FIG. 5, step <b>5</b>-<b>3</b> determines if the sum of the fundamental note and the offset for the Alt note (designated Alt[x]) is less than or equal to 65 (<b>5</b>-<b>3</b>). If so, then the Alt note is set to the sum of the fundamental note plus the offset for the Alt note in step <b>5</b>-<b>4</b>. If the sum of the fundamental note and the offset for the Alt note is greater than 65, then the Alt note is set to the sum of the fundamental note plus the offset of the Alt note minus 12 in step <b>5</b>-<b>5</b>. Subtracting 12 yields the same note one octave lower.</div>
<div class="description-paragraph">Similarly, the C<b>1</b> and C<b>2</b> notes are generated in steps <b>5</b>-<b>6</b> through <b>5</b>-<b>11</b>. For example, if this service is called requesting to set the current chord to type D Major (X=0, Y=62), then the current chord type will be equal to 0, the fundamental note will be 62 (D), the Alt note will be 57 (A, 62+7−12), the C<b>1</b> note will be 54 (F♯, 62+4−12) and the C<b>2</b> note also be 54 (F♯, 62+4−12). New chords may also be added simply by extending Table 4, including chords with more than 4 notes. Also, the current chord object can be configured so that the C<b>1</b> note is always the 3rd note of the chord, etc. or note may be arranged in any order. A mode may be included where the 5th(ALT) is omitted from any chord simply by adding an attribute such as ‘drop5th’ and adding a service for setting ‘drop5th’ to be true or false and modifying the SetChordTo( ) service to ignore the ALT in Table 4 when ‘drop5th’ is true.</div>
<div class="description-paragraph">The service ‘isNoteInChord(noteNumber)’ will scan chordNote[ ] for noteNumber. If noteNumber is found it will return True (1). If it is not found, it will return False (0).</div>
<div class="description-paragraph">The remaining services return a specific chord note (fundamental, alternate, etc.) or the chord label.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 3</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Object Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. chordType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. chordNote [4]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetChordTo(ChordType, Fundamental);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. GetChordType(); chordType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. CopyChordNotes(destination);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. GetFundamental(); chordNote[0]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. GetAlt(); chordNote[1]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. GetC1(); chordNote[2]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. GetC2(); chordNote[3]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. GetChordLabel(); textLabel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">9. isNoteInChord(noteNumber); True/False</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 4</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Note Generation</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="7" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Index</td>
<td class="description-td" morerows="0" valign="top">Type</td>
<td class="description-td" morerows="0" valign="top">Fund</td>
<td class="description-td" morerows="0" valign="top">Alt</td>
<td class="description-td" morerows="0" valign="top">C1</td>
<td class="description-td" morerows="0" valign="top">C2</td>
<td class="description-td" morerows="0" valign="top">Label</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="7" morerows="0" nameend="7" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">Major</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">“ “</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">Major seven</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">“M7”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">minor</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">“m”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">minor seven</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">“m7”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">seven</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">“7”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">six</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">“6”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">suspended 2nd</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">“sus2”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">suspended 4th</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">“sus4”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">Major 7 diminished 5th</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">“M7(−5)”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">minor six</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">“m6”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">minor 7 diminished 5th</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">“m7(−5)”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">minor Major 7</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">“m(M7)”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">12 </td>
<td class="description-td" morerows="0" valign="top">seven diminished 5</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">“7(−5)”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">13 </td>
<td class="description-td" morerows="0" valign="top">seven augmented 5</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">“7(+5)”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">14 </td>
<td class="description-td" morerows="0" valign="top">augmented</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">“aug”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">15 </td>
<td class="description-td" morerows="0" valign="top">diminished</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">“dim”</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">16 </td>
<td class="description-td" morerows="0" valign="top">diminished 7</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">“dim7”</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="7" morerows="0" nameend="7" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 6<i>a </i>and <b>6</b> <i>b </i>and Tables 5, 6a, 6b, and 7</div>
<div class="description-paragraph">As shown in FIG. 3, there is one Current Scale object <b>3</b>-<b>9</b>. This object is responsible for generating the notes of the current scale. It also generates the notes of the current scale with the notes common to the current chord removed. It also provides the remaining notes that are not contained in the current scale or the current chord.</div>
<div class="description-paragraph">Referring to Table 5, the attributes of the current scale include the scale type (Major, pentatonic, etc.), the root note and all other notes in three scales. The scaleNote[7] attribute contains the normal notes of the current scale. The remainScaleNote[7] attributes contains the normal notes of the current scale less the notes contained in the current chord. The remainNonScaleNote[7] attribute contains all remaining notes (of the 12 note chromatic scale) that are not in the current scale or the current chord. The combinedScaleNote[11] attribute combines the normal notes of the current scale (scaleNote[ ]) with all notes of the current chord that are not in the current scale (if any).</div>
<div class="description-paragraph">Each note attribute ( . . . Note[ ]) contains two fields, a note number and a note indication (text label). The note number field is simply the value (MIDI note number) of the note to be sounded. The note indication field is provided in the event that an alpha numeric, LED (light emitting diode) or other indication system is available. It may provide a useful indication on a computer monitor as well. This ‘indication’ system indicates to a user where certain notes of the scale appear on the keyboard. The indications provided for each note include the note name, (A, B, C♯, etc.), and note position in the scale (indicated by the numbers 1 through 7). Also, certain notes have additional indications. The root note is indicated with the letter ‘R’, the fundamental of the current chord is indicated by the letter ‘F’, the alternate of the current chord is indicated by the letter ‘A’, and the C<b>1</b> and C<b>2</b> notes of the current chord by the letters ‘C<b>1</b>’ and ‘C<b>2</b>’, respectively. All non-scale notes (notes not contained in scaleNote[ ]) have a blank (‘ ’) scale position indication. Unless otherwise stated, references to the note attributes refer to the note number field.</div>
<div class="description-paragraph">The object provides twelve main services. FIGS. 6<i>a </i>and <b>6</b> <i>b </i>show a flow diagram for the service that sets the scale type. This service is invoked by sending the message ‘Set scale type to Y with root note N’ to the scale object. First, the scale type is saved in step <b>6</b>-<b>1</b>. Next, the root or first note of the scale, designated note[0 ], is set to N in step <b>6</b>-<b>2</b>. The remaining notes of the scale are generated in step <b>6</b>-<b>3</b> by adding an offset for each note to the root note. The offsets are shown for each scale type in Table 6a. As with the current chord object, all the scale notes will be in octave 0 (FIG. <b>2</b>). As each note is generated in step <b>6</b>-<b>3</b>, if the sum of the root note and the offset is greater than 65, then 12, or one octave, is subtracted, forcing the note to be between 54 and 65. As shown in Table 6a, some scales have duplicate offsets. This is because not all scales have 7 different notes. By subtracting 12 from some notes to keep them in octave <b>0</b>, it is possible that the duplicated notes will not be the highest note of the resulting scale. Note that the value of ‘Z’ (step <b>6</b>-<b>3</b>) becomes the position (in the scale) indication for each note, except that duplicate notes will have duplicate position indications.</div>
<div class="description-paragraph">Step <b>6</b>-<b>4</b> then forces the duplicate notes (if any) to be the highest resulting note of the current scale. It is also possible that the generated notes may not be in order from lowest to highest.</div>
<div class="description-paragraph">Step <b>6</b>-<b>5</b>, in generating the current scale, rearranges the notes from lowest to highest. As an example, Table 7 shows the values of each attribute of the current scale after each step <b>6</b>-<b>1</b> through <b>6</b>-<b>5</b> shown in FIG. 6 when the scale is set to C Major Pentatonic. Next, the remaining scales notes are generated in step <b>6</b>-<b>6</b>. This is done by first copying the normal scale notes to remainScaleNote[ ] array. Next, the notes of the current chord are fetched from the current chord object in step <b>6</b>-<b>7</b>.</div>
<div class="description-paragraph">Then, step <b>6</b>-<b>8</b> removes those notes in the scale that are duplicated in the chord. This is done by shifting the scale notes down, replacing the chord note. For example, if remainScaleNote[2] is found in the current chord, then remainScaleNote[2] is set to remainScaleNote[3], remainScaleNote[3] is set to remainScaleNote[4], etc. (remainScaleNote[6] is unchanged). This process is repeated for each note in remainScaleNote[ ] until all the chord notes have been removed. If remainScaleNote[6] is in the current chord, it will be set equal to remainScaleNote[5]. Thus, the remainScaleNote[ ] array contains the notes of the scale less the notes of the current chord, arranged from highest to lowest (with possible duplicate notes as the higher notes).</div>
<div class="description-paragraph">Finally, the remaining non-scale notes (remainNonScaleNote[ ]) are generated. This is done in a manner similar to the remaining scale notes. First, remainNonScaleNote[ ] array is filled with all the non-scale notes as determined in step <b>6</b>-<b>9</b> from Table 6b in the same manner as the scale notes were determined from Table 6a. The chord notes (if any) are then removed in step <b>6</b>-<b>10</b> in the same manner as for remainScaleNotes[ ]. The combineScaleNote[ ] attribute is generated in step <b>6</b>-<b>11</b>. This is done by taking the scaleNote[ ] attribute and adding any note in the current chord (fundamental, alternate, C<b>1</b>, or C<b>2</b>) that is not already in scaleNote[ ] (if any). The added notes are inserted in a manner that preserves scale order (lowest to highest).</div>
<div class="description-paragraph">The additional indications (Fundamental, Alternate, C<b>1</b> and C<b>2</b>) are then filled in step <b>6</b>-<b>12</b>. The GetScaleType( ) service returns the scale type. The service GetScaleNote(n) returns the nth note of the normal scale. Similarly, services GetRemainScaleNote(n) and GetRemainNonScaleNote(n) return the nth note of the remaining scale notes and the remaining non-scale notes respectively. The services, ‘GetScaleNotelndication’ and ‘GetCombinedNoteIndication’, return the indication field of the scaleNote[ ] and combinedScaleNote[ ] attribute respectively. The service ‘GetScaleLabel( ) returns the scale label (such as ‘C MAJOR’ or ‘f minor’).</div>
<div class="description-paragraph">The service ‘GetScaleThirdBelow(noteNumber)’ returns the scale note that is the third scale note below noteNumber. The scale is scanned from scaleNote[0] through scaleNote[6] until noteNumber is found. If it is not found, then combinedScaleNote[ ] is scanned. If it is still not found, the original note Number is returned (it should always be found as all notes of interest will be either a scale note or a chord note). When found, the note two positions before (where noteNumber was found) is returned as scaleThird. The 2nd position before a given position is determined in a circular fashion, ie., the position before the first position (scaleNote[0] or combinedScaleNote[0] is the last position (scaleNote[6] or combinedScaleNote[10]. Also, positions with a duplicate of the next lower position are not counted. ie., if scaleNote[6] is a duplicate of scaleNote[5] and scaleNote[5] is not a duplicate of scaleNote[4]. then the position before scaleNote[0] is scaleNote[5]. If scaleThird is higher than noteNumber, it is lowered by one octave (=scaleThird−12) before it is returned. The service ‘GetBlockNote(nthNote, noteNumber)’ returns the nthNote chord note in the combined scale that is less (lower) than noteNumber. If there is no chord note less than noteNumber, 0 is returned.</div>
<div class="description-paragraph">The services ‘isNoteInScale(noteNumber)’ and ‘isNoteInCombinedScale(noteNumber)’ will scan the scale Note[ ] and combinedScaleNote[ ] arrays respectively for noteNumber. If noteNumber is found it will return True (1). If it is not found, it will return False (0).</div>
<div class="description-paragraph">A configuration object <b>3</b>-<b>5</b> collaborates with the scale object <b>3</b>-<b>9</b> by calling the SetScaleTo service each time a new chord/scale is required. This object <b>3</b>-<b>9</b> collaborates with a current chord object <b>3</b>-<b>7</b> to determine the notes in the current chord (CopyNotes service). The PianoKey objects <b>3</b>-<b>6</b> collaborate with this object by calling the appropriate GetNote service (normal, remaining scale, or remaining non-scale) to get the note(s) to be sounded. If an indication system is used, the user interface object <b>3</b>-<b>2</b> calls the appropriate indication service (‘Get . . . NoteIndication( )’) and outputs the results to the alphanumeric display, LED display, or computer monitor.</div>
<div class="description-paragraph">The present invention has eighteen different scale types (index 0-17), as shown in Table 6a. Additional scale types can be added simply by extending Tables 6a and 6b.</div>
<div class="description-paragraph">The present invention may also derive one or a combination of 2nds, 4ths, 5ths, 6ths, etc. and raise or lower these derived notes by one or more octaves to produce scalic harmonies.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 5</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Scale Object Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes.</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 1.</td>
<td class="description-td" morerows="0" valign="top">scaleType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 2.</td>
<td class="description-td" morerows="0" valign="top">rootNote</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 3.</td>
<td class="description-td" morerows="0" valign="top">scaleNote[7]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 4.</td>
<td class="description-td" morerows="0" valign="top">remainScaleNote[7]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 5.</td>
<td class="description-td" morerows="0" valign="top">remainNonScaleNote[7]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 6.</td>
<td class="description-td" morerows="0" valign="top">combinedScaleNote[11]</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="3" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 1.</td>
<td class="description-td" morerows="0" valign="top">SetScaleTo(scaleType, rootNote);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 2.</td>
<td class="description-td" morerows="0" valign="top">GetScaleType(); scaleType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 3.</td>
<td class="description-td" morerows="0" valign="top">GetScaleNote(noteNumber); scaleNote[noteNumber]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 4.</td>
<td class="description-td" morerows="0" valign="top">GetRemainScaleNote(noteNumber);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">remainScaleNote[noteNumber]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 5.</td>
<td class="description-td" morerows="0" valign="top">GetRemainNonScaleNote(noteNumber);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">remainNonScaleNote[noteNumber]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 6.</td>
<td class="description-td" morerows="0" valign="top">GetScaleThirdBelow(noteNumber); scaleThird</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 7.</td>
<td class="description-td" morerows="0" valign="top">GetBlockNote(nthNote, noteNumber);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">combinedScaleNote[derivedValue]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 8.</td>
<td class="description-td" morerows="0" valign="top">GetScaleLabel(); textLabel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> 9.</td>
<td class="description-td" morerows="0" valign="top">GetScaleNoteIndication(noteNumber); indication</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">10.</td>
<td class="description-td" morerows="0" valign="top">GetCombinedScaleNoteIndication(noteNumber); indication</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">11.</td>
<td class="description-td" morerows="0" valign="top">isNoteInScale(noteNumber); True/False</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">12.</td>
<td class="description-td" morerows="0" valign="top">isNoteInCombinedScale(noteNumber); True/False</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="3" morerows="0" nameend="2" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" pgwide="1" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 6a</td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Normal Scale Note Generation</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="8" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Scale type</td>
<td class="description-td" morerows="0" valign="top">2nd note</td>
<td class="description-td" morerows="0" valign="top">3rd note</td>
<td class="description-td" morerows="0" valign="top">4th note</td>
<td class="description-td" morerows="0" valign="top">5th note</td>
<td class="description-td" morerows="0" valign="top">6th note</td>
<td class="description-td" morerows="0" valign="top">7th note</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Index</td>
<td class="description-td" morerows="0" valign="top">and label</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="8" morerows="0" nameend="8" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 0</td>
<td class="description-td" morerows="0" valign="top">minor</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 1</td>
<td class="description-td" morerows="0" valign="top">MAJOR</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 2</td>
<td class="description-td" morerows="0" valign="top">MAJ. PENT.</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">9</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 3</td>
<td class="description-td" morerows="0" valign="top">min. pent.</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 4</td>
<td class="description-td" morerows="0" valign="top">LYDIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 5</td>
<td class="description-td" morerows="0" valign="top">DORIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 6</td>
<td class="description-td" morerows="0" valign="top">AEOLIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 7</td>
<td class="description-td" morerows="0" valign="top">MIXOLYDIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 8</td>
<td class="description-td" morerows="0" valign="top">MAJ. PENT + 4</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">9</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 9</td>
<td class="description-td" morerows="0" valign="top">LOCRIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">10</td>
<td class="description-td" morerows="0" valign="top">mel. minor</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">11</td>
<td class="description-td" morerows="0" valign="top">WHOLE TONE</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">12</td>
<td class="description-td" morerows="0" valign="top">DIM. WHOLE</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">13</td>
<td class="description-td" morerows="0" valign="top">HALF/WHOLE</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">14</td>
<td class="description-td" morerows="0" valign="top">WHOLE/HALF</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">15</td>
<td class="description-td" morerows="0" valign="top">BLUES</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">16</td>
<td class="description-td" morerows="0" valign="top">harm. minor</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">17</td>
<td class="description-td" morerows="0" valign="top">PHRYGIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="8" morerows="0" nameend="8" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" pgwide="1" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 6b</td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Non-Scale Note Generation</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="9" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Scale type</td>
<td class="description-td" morerows="0" valign="top">1st note</td>
<td class="description-td" morerows="0" valign="top">2nd note</td>
<td class="description-td" morerows="0" valign="top">3rd note</td>
<td class="description-td" morerows="0" valign="top">4th note</td>
<td class="description-td" morerows="0" valign="top">5th note</td>
<td class="description-td" morerows="0" valign="top">6th note</td>
<td class="description-td" morerows="0" valign="top">7th note</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Index</td>
<td class="description-td" morerows="0" valign="top">and label</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
<td class="description-td" morerows="0" valign="top">offset</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="9" morerows="0" nameend="9" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 0</td>
<td class="description-td" morerows="0" valign="top">minor</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 1</td>
<td class="description-td" morerows="0" valign="top">MAJOR</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 2</td>
<td class="description-td" morerows="0" valign="top">MAJ. PENT.</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 3</td>
<td class="description-td" morerows="0" valign="top">min. pent.</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 4</td>
<td class="description-td" morerows="0" valign="top">LYDIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 5</td>
<td class="description-td" morerows="0" valign="top">DORIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 6</td>
<td class="description-td" morerows="0" valign="top">AEOLIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 7</td>
<td class="description-td" morerows="0" valign="top">MIXOLYDIAN</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 8</td>
<td class="description-td" morerows="0" valign="top">MAJ. PENT + 4</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 9</td>
<td class="description-td" morerows="0" valign="top">LOCRIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">10</td>
<td class="description-td" morerows="0" valign="top">mel. minor</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">11</td>
<td class="description-td" morerows="0" valign="top">WHOLE TONE</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">12</td>
<td class="description-td" morerows="0" valign="top">DIM. WHOLE</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">13</td>
<td class="description-td" morerows="0" valign="top">HALF/WHOLE</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">5</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">14</td>
<td class="description-td" morerows="0" valign="top">WHOLE/HALF</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">7</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">15</td>
<td class="description-td" morerows="0" valign="top">BLUES</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">8</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">16</td>
<td class="description-td" morerows="0" valign="top">harm. minor</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
<td class="description-td" morerows="0" valign="top">10 </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">17</td>
<td class="description-td" morerows="0" valign="top">PHRYGIAN</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">4</td>
<td class="description-td" morerows="0" valign="top">6</td>
<td class="description-td" morerows="0" valign="top">9</td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
<td class="description-td" morerows="0" valign="top">11 </td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="9" morerows="0" nameend="9" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" pgwide="1" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 7</td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Example Scale Note Generation</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Example: Set current scale to type 2 (Major Pentatonic) with root note 60 (C)</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="9" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top">After</td>
<td class="description-td" morerows="0" valign="top">Scale</td>
<td class="description-td" morerows="0" valign="top">note [0]</td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">(see FIG. 6)</td>
<td class="description-td" morerows="0" valign="top">Type</td>
<td class="description-td" morerows="0" valign="top">(root)</td>
<td class="description-td" morerows="0" valign="top">note [1]</td>
<td class="description-td" morerows="0" valign="top">note [2]</td>
<td class="description-td" morerows="0" valign="top">note [3]</td>
<td class="description-td" morerows="0" valign="top">note [4]</td>
<td class="description-td" morerows="0" valign="top">note [5]</td>
<td class="description-td" morerows="0" valign="top">note [6]</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="9" morerows="0" nameend="9" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-1</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-2</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 1)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 2)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 3)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 4)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">—</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 5)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">—</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-3 (Z = 6)</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-4</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">6-5</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">55 (G)</td>
<td class="description-td" morerows="0" valign="top">57 (A)</td>
<td class="description-td" morerows="0" valign="top">60 (C)</td>
<td class="description-td" morerows="0" valign="top">62 (D)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
<td class="description-td" morerows="0" valign="top">64 (E)</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="9" morerows="0" nameend="9" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 7<i>a</i>, <b>7</b> <i>b </i>and <b>7</b> <i>c </i>and Table 8</div>
<div class="description-paragraph">The present invention further includes three or more Chord Inversion objects <b>3</b>-<b>10</b>. InversionA is for use by the Chord Progression type of PianoKey objects <b>3</b>-<b>6</b>. InversionB is for the black melody type piano keys that play single notes <b>3</b>-<b>6</b> and inversionC is for the black melody type piano key that plays the whole chord <b>3</b>-<b>6</b>. These objects simultaneously provide different inversions of the current chord object <b>3</b>-<b>7</b>. These objects have the “intelligence” to invert chords. Table 8 shows the services and attributes that these objects provide. The single attribute inversionType, holds the inversion to perform and may be 0, 1, 2, 3, or 4.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 8</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Inversion Object Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. inversionType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetInversion(newInversionType);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. GetInversion(note[]);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. GetRightHandChord(note[], Number);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. GetRightHandChordWithHighNote(note[],HighNote);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. GetFundamental(); Fundamental</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. GetAlternate(); Alternate</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. GetC1(); C1</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. GetC2(); C2</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">The SetInversion( ) service sets the attribute inversionType. It is usually called by the user interface <b>3</b>-<b>2</b> in response to keyboard input by a user or by a user pressing a foot switch that changes the current inversion.</div>
<div class="description-paragraph">For services 2, 3, and 4 of Table 8, note[ ], the destination for the chord, is passed as a parameter to the service by the caller.</div>
<div class="description-paragraph">FIGS. 7A, and <b>7</b>B show a flow diagram for the GetInversion( ) service. The GetInversion( ) service first (<b>7</b>A-<b>1</b>) gets all four notes of the current chord from the current chord object (<b>3</b>-<b>7</b>) and stores these in the destination (note[0] through note [3]). At this point, the chord is in inversion 0 where it is known that the fundamental of the chord is in note [0], the alternate is in note [1], the C<b>1</b> note is in note [2] and C<b>2</b> is in note [3] and that all of these notes are within one octave (referred to as ‘popular voicing)’. If inversionType is 1, then <b>7</b>A-<b>2</b> of FIG. 7A will set the fundamental to be the lowest note of the chord. This is done by adding one octave (12) to every other note of the chord that is lower than the fundamental (note[0]). If inversionType is 2, then <b>7</b>A-<b>3</b> of FIG. 7A will set the alternate to be the lowest note of the chord. This is done by adding one octave (12) to every other note of the chord that is lower than the alternate (note[1]). If inversionType is 3, then <b>7</b>A-<b>4</b> of FIG. 7A will set the C<b>1</b> note to be the lowest note of the chord. This is done by adding one octave (12) to every other note of the chord that is lower than the C<b>1</b> note (note[2]). If inversionType is none of the above (then it must be 4) then <b>7</b>A-<b>5</b> of FIG. 7A will set the C<b>2</b> note to be the lowest note of the chord. This is done by adding one octave (12) to every other note of the chord that is lower than the C<b>2</b> note (note[3]). After the inversion is set then processing continues with FIG. <b>7</b>B. <b>7</b>B-<b>1</b> of FIG. 7B checks if over half of the different notes of the chord have a value that is greater than 65. If so, then <b>7</b>B-<b>2</b> drops the entire chord one octave by subtracting 12 from every note. If not, <b>7</b>B-<b>3</b> checks if over half of the different notes of the chord are less than 54. If so, then <b>7</b>B-<b>4</b> raises the entire chord by one octave by adding 12 to every note. If more than half the notes are not outside the range 54-65, then <b>7</b>B-<b>5</b> checks to see if exactly half the notes are outside this range. If so, then <b>7</b>B-<b>6</b> checks if the fundamental note (note[0]) is greater than 65. If it is, then <b>7</b>B-<b>7</b> lowers the entire chord by one octave by subtracting 12 from every note. If the chord fundamental is not greater than 65, then <b>7</b>B-<b>8</b> checks to see if it (note[0]) is less than 54. If it is, then <b>7</b>B-<b>9</b> raises the entire chord one octave by adding 12 to every note. If preferred, inversions can also be shifted so as to always keep the fundamental note in the 54-65 range.</div>
<div class="description-paragraph">FIG. 7C shows a flow diagram for the service GetRightHand Chord( ). The right hand chord to get is passed as a parameter (N in FIG. <b>7</b>C). <b>7</b>C-<b>1</b> first gets the current chord from the current chord object. If the right hand chord desired is1 (N=1), meaning that the fundamental should be the highest note, then <b>7</b>C-<b>2</b> subtracts 12 (one octave) from any other note that is higher than the fundamental (note[0]). If the right hand chord desired is 2, meaning that the alternate should be the highest note, then <b>7</b>C-<b>3</b> subtracts 12 (one octave) from any other note that is higher than the alternate (note[1]). If the right hand chord desired is 3, meaning that the C<b>1</b> note should be the highest note, then <b>7</b>C-<b>4</b> subtracts 12 (one octave) from any other note that is higher than the C<b>1</b> note (note[2]). If the right hand chord desired is not 1, 2 or 3, then it is assumed to be 4, meaning that the C<b>2</b> note should be the highest note and then <b>7</b>C-<b>5</b> subtracts 12 (one octave) from any other note that is higher than the C<b>2</b> note (note[3]).</div>
<div class="description-paragraph">FIG. 7D shows a flow diagram for the service GetRightHandChordWithHighNote( ). This service is called by the white melody keys when the scale note they are to play is a chord note the mode calls for a right hand chord. It is desirable to play the scale note as the highest note, regardless of whether it is the fundamental, alternate, etc. This service returns the right hand chord with the specified note as the highest. First, the 4 notes of the chord are fetched from the current chord object (<b>7</b>D-<b>1</b>). The flow diagram of FIG. 7D indicated by <b>7</b>D-<b>2</b> checks each note of the chord and lowers it one octave (by subtracting 12) if it is higher than the specified note. This will result in a chord that is the current chord with the desired note as the highest.</div>
<div class="description-paragraph">Services 5, 6, 7 and 8 of table 8 each return a single note as specified by the service name (fundamental, alternate, etc.). These services first perform the same sequence as in FIG. 7A (<b>7</b>A-<b>1</b> through <b>7</b>A-<b>5</b>). This puts the current chord in the inversion specified by the attribute inversionType. These services then return a single note and they differ only in the note they return. GetFundamental( ) returns the fundamental (note [0]). GetAlternate( ) returns the alternate (note [1]). Get C<b>1</b>( ) returns the C<b>1</b> note (note[2]) and GetC<b>2</b> returns the C<b>2</b> note (note [3]).</div>
<div class="description-paragraph">Table 10</div>
<div class="description-paragraph">A Main Configuration Memory <b>3</b>-<b>5</b> contains one or more sets or banks of chord assignments and scale assignments for each chord progression key. It responds to messages from the user interface <b>3</b>-<b>2</b> telling it to assign a chord or scale to a particular key. The Memory <b>3</b>-<b>5</b> responds to messages from the piano key objects <b>3</b>-<b>6</b> requesting the current chord or scale assignment for a particular key, or to switch to a different assignment set or bank. The response to these messages may result in the configuration memory <b>3</b>-<b>5</b> sending messages to other objects, thereby changing the present configuration. The configuration object provides memory storage of settings that may be saved and recalled from a named disk file, etc. These settings may also be stored in memory, such as for providing real-time setups in response to user-selectable input. The number of storage banks or settings is arbitrary. A user may have several different configurations saved. It is provided as a convenience to a user. The present invention preferably uses the following configuration:</div>
<div class="description-paragraph">There are two song keys stored in songKey[2]. There are two chord banks, one for each song key called chordTypeBank<b>1</b> [60] and chordTypeBank<b>2</b>[60]. These may be expanded to include more of each if preferred. Each chord bank hold sixty chords, one for each chord progression key. There are two scale banks, one for each song key, called scalebank<b>1</b> [60][2] and scaleBank<b>2</b>[60][2]. Each scale bank holds 2 scales (root and type) for each of the sixty chord progression keys. The currentChordFundamental attribute holds the current chord fundamental. The attribute currentChordKeyNum holds the number of the current chord progression key and selects one of sixty chords in the selected chord bank or scales in the selected scale bank. The attribute songKeyBank identifies which one of the two song keys is selected (songKey[songKeyBank]), which chord bank is selected (chordTypeBank<b>1</b>[60] or chordTypeBank<b>2</b>[60]) and which scale bank is selected (scaleBank<b>1</b>[60][2] or scaleBank<b>2</b>[60][2]). The attribute scaeBank[60] identifies which one of the two scales is selected in the selected scale bank (scaleBank<b>1</b>or<b>2</b>[currentChordKeyNum] [scaleBank[currentChordKey Num]]).</div>
<div class="description-paragraph">The following discussion assumes that songKeyBank is set to 0. The service ‘SetSongKeyBank(newSongKeyBank)’ sets the current song key bank (songKeyBank=newSongKeyBank). ‘SetScaleBank(newScaleBanuk)’ service sets the scale bank for the current chord (scaleBank[currentChordKeyNumd]=newScaleBank). ‘AssignSongKey(newSongKey)’ service sets the current song key (songKey[songKeyBank]=newSongKey).</div>
<div class="description-paragraph">The service ‘AssignChord(newChordType, keyNum)’ assigns a new chord (chordTypeBank<b>1</b>[keyNum]=newChordType). The service ‘AssignScale(newScaleType, newScaleRoot, keyNum)’ assigns a new scale (scaleBank<b>1</b>[keyNum][scaleBank[currentChordKeyNum]]=newScaleType and newScaleRoot).</div>
<div class="description-paragraph">The service SetCurrentChord(keyNum, chordFundamental)</div>
<div class="description-paragraph">1. sets currentChordFundamental=chordFundamental;</div>
<div class="description-paragraph">2. sets currentChordKeyNum=keyNum; and</div>
<div class="description-paragraph">3. sets the current chord to chordBank<b>1</b>[currentChordKeyNum] and fundamental currentChordFundamental</div>
<div class="description-paragraph">The service SetCurrentScale(keyNum) sets the current scale to the type and root stored at scaleBank<b>1</b>[currentChordKeyNum] [scaleBank[currentChordKeyNum]].</div>
<div class="description-paragraph">The service ‘Save(destinationFileName)’ saves the configuration (all attributes) to a disk file. The service ‘Recall(sourceFileName)’ reads all attributes from a disk file.</div>
<div class="description-paragraph">The chord progression key objects <b>3</b>-<b>6</b> (described later) use the SetCurrentChord( ) and SetCurrentScale( ) services to set the current chord and scale as the keys are pressed. The control key objects use the SetSongKeyBank:( ) and SetScaleBank( ) services to switch key and scale banks respectively as a user plays. The user interface <b>3</b>-<b>2</b> uses the other services to change (assign), save and recall the configuration. The present invention also contemplates assigning a song key to each key by extending the size of songKey[2] to sixty (songKey[60]) and modifying the SetCurrentChord( ) service to set the song key every time it is called. This allows chord progression keys on one octave to play in one song key and the chord progression keys in another octave to play in another song key. The song keys which correspond to the various octaves or sets of inputs can be selected or set by a user either one at a time, or simultaneously in groups.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 10</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Configuration Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. songKeyBank</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. scaleBank[60]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. currentChordKeyNum</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. currentChordFundamental</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. songKey[2]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. chordTypeBank1[60]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. chordTypeBank2[60]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. scaleBank1[60][2]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">9. scaleBank2[60][2]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetSongKeyBank(newSongKeyBank);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. SetscaleBank(newScaleBank);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. AssignSongKey(newSongKey);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. AssignChord(newChordType, keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. AssignScale(newScaleType, newScaleRoot, keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. SetCurrentChord(keyNum, chordFundamental);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. SetCurrentScale(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. Save(destinationFileName);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">9. Recall(sourceFileName);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 8 and 9 and Table 11</div>
<div class="description-paragraph">Each Output Channel object <b>3</b>-<b>11</b> (FIG. 3) keeps track of which notes are on or off for an output channel and resolves turning notes on or off when more than one key may be setting the same note(s) on or off. Table 11 shows the Output Channel objects attributes and services. The attributes include (1) the channel number and (2) a count of the number of times each note has been sent on. At start up, all notes are assumed to be off. Service (1) sets the output channel number. This is usually done just once as part of the initialization. In the description that follows, n refers to the note number to be sent on or off.</div>
<div class="description-paragraph">FIG. 9<i>a </i>shows a flow diagram for service 2, which sends a note on message to the music output object <b>3</b>-<b>12</b>. The note to be sent (turned on) is first checked if it is already on in step <b>9</b>-<b>1</b>, indicated by noteOnCnt[n]&gt;0. If on, then the note will first be sent (turned) off in step <b>9</b>-<b>2</b> followed immediately by sending it on in step <b>9</b>-<b>3</b>. The last action increments the count of the number of times the note has been sent on in step <b>9</b>-<b>4</b>.</div>
<div class="description-paragraph">FIG. 9<i>b </i>shows a flow diagram for service 3 which sends a note on message only if that note is off. This service is provided for the situation where keys want to send a note on if it is off but do not want to re-send, the note if already on. This service first checks if the note is on in step <b>9</b> <i>b</i>-<b>1</b> and if it is. returns 0 in step <b>9</b> <i>b</i>-<b>2</b> indicating the note was not sent. If the note is not on, then the Send note on service is called in step <b>9</b> <i>b</i>-<b>3</b> and a 1 is returned by step <b>9</b> <i>b</i>-<b>4</b>, indicating that the note was sent on and that the calling object must therefore eventually call the Send Note Off service.</div>
<div class="description-paragraph">FIG. 8 shows the flow diagram for the sendNoteOff service. This service first checks if the noteOnCnt[n] is equal to one in step <b>8</b>-<b>1</b>. If it is, then the only remaining object to send the note on is the one sending it off, then a note off message is sent by step <b>8</b>-<b>2</b> to the music output object <b>3</b>-<b>12</b>. Next, if the noteOnCnt[n] is greater than 0, it is decremented.</div>
<div class="description-paragraph">All objects which call the SendNoteOn service are required (by contract so to speak) to eventually call the SendNoteOff service. Thus, if two or more objects call the SendNoteOn service for the same note before any of them call the SendNoteOff service for that note, then the note will be sent on (sounded) or re-sent on (re-sounded) every time the SendNoteOn service is called, but will not be sent off until the SendNoteOff service is called by the last remaining object that called the SendNoteOn service.</div>
<div class="description-paragraph">The remaining service in Table 11 is SendProgramChange. The present invention sends notes on/off and program changes, etc., using the MIDI interface. The nature of the message content preferably conforms to the MIDI specification, although other interfaces may just as easily be employed. The Output Channel object <b>3</b>-<b>11</b> isolates the rest of the software from the ‘message content’ of turning notes on or off, or other control messages such as program change. The Output Channel object <b>3</b>-<b>11</b> takes care of converting the high level functionality of playing (sending) notes, etc. to the lower level bytes required to achieve the desired result.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 11</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Output Channel Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. channelNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. noteOnCnt[128]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetChannelNumber(channelNumber);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. SendNoteOn(noteNumber, velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. SendNoteOnIfOff(noteNumber, velocity); noteSentFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. SendNoteOff(noteNumber);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SendProgramChange(PgmChangeNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 10<i>a</i>, <b>10</b> <i>b </i>and <b>11</b> and Table 12</div>
<div class="description-paragraph">There are four kinds of PianoKey objects <b>3</b>-<b>6</b>: (1) ChordProgressionKey, (2) WhiteMelodyKey, (3) BlackMelodyKey, and (4) ControlKey. These objects are responsible for responding to and handling the playing of musical (piano) key inputs. These types specialize in handling the main types of key inputs which include the chord progression keys, the white melody keys, and control keys (certain black chord progression keys). There are two sets of 128 PianoKey objects for each input channel. One set, referred to as chordKeys is for those keys designated (by user preference) as chord progression keys and the other set, referred to as melodyKeys are for those keys not designated as chord keys. The melodyKeys with relative key numbers (FIG. 2) of 0, 2, 4, 5, 7, 9 and 11 will always be the WhiteMelodyKey type while melodyKeys with relative key numbers of 1, 3, 6, 8 and 10 will always be the BlackMelodyKey type.</div>
<div class="description-paragraph">The first three types of keys usually result in one or more notes being played and sent out to one or more output channels. The control keys are special keys that usually result in configuration or mode changes as will be described later. The PianoKey objects receive piano key inputs from the music administrator object <b>3</b>-<b>3</b> and configuration input from the user interface object <b>3</b>-<b>2</b>. They collaborate with the song key object <b>3</b>-<b>8</b>, the current chord object <b>3</b>-<b>7</b>, the current scale object <b>3</b>-<b>9</b>, the chord inversion objects <b>3</b>-<b>10</b> and the configuration object <b>3</b>-<b>5</b>, in preparing their response, which is sent to one or more of the many instances of the CnlOutput objects <b>3</b>-<b>11</b>.</div>
<div class="description-paragraph">The output of the ControlKey objects may be sent to many other objects, setting their configuration or mode.</div>
<div class="description-paragraph">The ChordProgressionKey type of PianoKey <b>3</b>-<b>6</b> is responsible for handling the piano key inputs that are designated as chord progression keys (the instantiation is the designation of key type, making designation easy and flexible).</div>
<div class="description-paragraph">Table 12 shows the ChordProgressionKeys attributes and services. The attribute mode, a class attribute that is common to all instances of the ChordProgressionKey objects, stores the present mode of operation. With minor modification, a separate attribute mode may be used to store the present mode of operation of each individual key input, allowing all of the individual notes of a chord to be played independently and simultaneously when establishing a chord progression. The mode may be normal (0), Fundamental only (1), Alternate only (2) or silent chord (3), or expanded further. The class attribute correctionMode controls how the service CorrectKey behaves and may be set to either Normal=0 or SoloChord=1, SoloScale=2, or SoloCombined=3. The class attribute octaveShiftSetting is set to the number of octaves to shift the output. Positive values shift up, negative shift down. The absKeyNum is used for outputting patch triggers to patchOut instance of output object. The relativeKeyNum is used to determine the chord to play. The cnlNumber attribute stores the destination channel for the next key off response. The keyOnFlag indicates if the object has responded to a key on since the last key off, The velocity attribute holds the velocity with which the key was pressed.</div>
<div class="description-paragraph">The chordNote[4] attributes holds the (up to) four notes of the chord last output. The attribute octaveShiftApplied is set to octaveShiftSetting when notes are turned on for use when correcting notes (this allows the octaveShiftSetting to change while a note is on).</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 12</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">PianoKey::ChordProgressionKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Class Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. correctionMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. octaveShiftSetting</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Instance Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. absoluteKeyNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. relativeKeyNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. cnlNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. keyOnFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. velocity</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. chordNote[4]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. octaveShiftApplied</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. RespondToKeyOn(sourceChannel, velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RespondToKeyOff(sourceChannel);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. RespondToProgramChange(sourceChannel);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. CorrectKey();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. SetCorrectionMode(newCorrectionMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. SetOctaveShift(numberOctaves);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 10<i>a </i>and <b>10</b> <i>b </i>depict a flow diagram for the service ‘RespondToKeyOn( )’, which is called in response to a chord progression key being pressed. If the KeyOnFlg is 1 in step <b>10</b>-<b>1</b>, indicating that the key is already pressed, then the service ‘RespondToKeyOff( )’ is called by step <b>10</b>-<b>2</b>. Then, some of the attributes are initialized in step <b>10</b>-<b>3</b>.</div>
<div class="description-paragraph">Then, the chord fundamental for the relative key number is fetched from the song key object in step <b>10</b>-<b>4</b>. The main configuration memory <b>3</b>-<b>5</b> is then requested to set the current chord object <b>3</b>-<b>7</b> based on the presently assigned chord for the absKeyNum attribute in step <b>10</b>-<b>5</b>. The notes of the current chord are then fetched in step <b>10</b>-<b>6</b> from the chord inversion object A <b>3</b>-<b>10</b> (which gets the notes from the current chord object <b>3</b>-<b>7</b>. If mode attribute=1 (<b>10</b>-<b>7</b>) then all notes of the chord except the fundamental are discarded (set to 0) in step <b>10</b>-<b>8</b>. If the mode attribute=2 in step <b>10</b>-<b>9</b>, then all notes of the chord except the alternate are discarded by step <b>10</b>-<b>10</b>. If the mode attribute=3 in step <b>10</b>-<b>11</b>, then all notes are discarded in step <b>10</b>-<b>12</b>. The Octave shift setting (octaveShiftSetting) is stored in octaveShiftApplied and then added to each note to turn on in step <b>10</b>-<b>13</b>. All notes that are non zero are then output to channel cnlNumber in step <b>10</b>-<b>14</b>. The main configuration object <b>3</b>-<b>5</b> is then requested to set the current scale object <b>3</b>-<b>9</b> per current assignment for absoluteKeyNumber attribute <b>10</b>-<b>15</b>. A patch trigger=to the absKeyNum is sent to patchOut channel in step <b>10</b>-<b>16</b>. In addition, the current status is also sent out on patchOut channel (see table 17 for description of current status). When these patch triggers/current status are recorded and played back into the music software, it will result in the RespondToProgramChange( ) service being called for each patch trigger received. By sending out the current key, chord and scale for each key pressed, it will assure that the music software mill be properly configured when another voice is added to the previously recorded material. The absKeyNum attribute is output to originalOut channel (<b>10</b>-<b>17</b>).</div>
<div class="description-paragraph">FIG. 11 shows a flow diagram for the service ‘RespondToKeyOff( )’. This service is called in response to a chord progression key being released. If the key has already been released in step <b>11</b>-<b>1</b>, indicated by keyOnFlg=0, then the service does nothing. Otherwise, it sends note off messages to channel cnlNumber for each non-zero note, if any, in step <b>11</b>-<b>2</b>. It then sends a note off message to originalOut channel for AbsKeyNum in step <b>11</b>-<b>3</b>. Finally it sets the keyOnFlg to 0 in step <b>11</b>-<b>4</b>.</div>
<div class="description-paragraph">The service ‘RespondToProgramChange( )’ is called in response to a program change (patch trigger) being received. The service responds in exactly the same way as the ‘RespondToKeyOn( )’ service except that rio notes are output to any object. It initializes the current chord object and the current scale object. The ‘SetMode( )’ service sets the mode attribute. The 'setCorrectionMode( )’ service sets the correctionMode attribute.</div>
<div class="description-paragraph">The service CorrectKey( ) is called in response to a change in the song key, current chord or scale while the key is on (keyOnFlg=1). This enables the key to correct the notes it has sent out for the new chord or scale. There are two different correction modes (see description for correctionMode attribute above). In the normal correction mode (correctionMode=0), this service behaves exactly as RespondToKeyOn( ) with one exception. If a new note to be turned on is already on, it will remain on. It therefore does not execute the same identical initialization sequence (FIG. 10<i>a</i>) in this mode. It first determines the notes to play (as per RespondToKeyOn( ) service) and then turns off only those notes that are not already on and then turns on any new notes. The solo correction mode (correctionMode=1) takes this a step further. It turns off only those notes that are not in the new current chord (correctionMode=1), scale (correctionMode=2) or combined chord and scale (correctionMode=3). If a note that is already on exists anywhere in the current chord, scale or combined chord and scale it will remain on. The current chord objects service isNoteInChord( ) and the current scale objects services isNoteInScale and isNoteInCombinedScale( ) are used to determine if each note already on should be left on or turned off The output channel for the original key is determined as for the white melody key as described below).</div>
<div class="description-paragraph">FIGS. 12<i>a </i>through <b>12</b> <i>k </i>and Table 13</div>
<div class="description-paragraph">The WhiteMelodyKey object is responsible for handling all white melody key events. This involves, depending on mode, getting notes from the current scale object and/or chord inversion object and sending these notes out.</div>
<div class="description-paragraph">The class attributes for this object include mode, which may be set to one of Normal=0, RightHandChords=1, Scale3rds=2, RHCand3rds=3, RemainScale=4 or RemainNonScale=5. The class attributes numBlkNotes hold the number of block notes to play if mode is set to 4 or 5. The attribute correctionMode controls how the service CorrectKey behaves and may be set to either Normal=0 or SoloChord=1, SoloScale=2, or SoloCombined=3. The class attribute octaveShiftSetting is set to the number of octaves to shift the output. Positive values shift up, negative shift down. Instance variables include absoluteKeyNumber and colorKeyNumber and octave (see FIG. <b>2</b>). The attribute cnlNumber holds the output channel number the notes were sent out to. keyOnFlag indicates whether the Key is pressed or not. Velocity holds the velocity of the received ‘Note On’ and note[4] holds the notes that were sounded (if any). The attribute octaveShiftApplied is set per octaveShiftSetting and octave attributes when notes are turned on for use when correcting notes.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 13</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">PianoKey::WhiteMelodyKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Class Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. numBlkNotes</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. CorrectionMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. octaveShiftSetting</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Instance Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. absoluteKeyNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. colorKeyNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. octave</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. cnlNumber</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. keyOnFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. velocity</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. note[4]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. octaveShiftApplied</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. ResondToKeyOn(sourceChannel, velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RespondToKeyoff(sourceChannel);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. CorrectKey();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SetCorrectionMode(newCorrectionMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. SetNumBlkNotes(newNumBlkNotes);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. SetOctaveShift(numberOctaves);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 12<i>a </i>through <b>12</b> <i>j </i>provide a flow diagram of the service ‘RespondToKeyOn( )’. This service is called in response to a white melody key being pressed. It is responsible for generating the note(s) to be sounded. It is entered with the velocity of the key press and the channel the key was received on.</div>
<div class="description-paragraph">The RespondToKeyOn( ) service starts by initializing itself in step <b>12</b> <i>a</i>-<b>1</b>. This initialization will be described in more detail below. It then branches to a specific sequence that is dependent on the mode, as shown in flow diagram <b>12</b> <i>a</i>-<b>2</b>. These specific sequences actually generate the notes and will be described in more detail below. It finishes by outputting the generated notes in step <b>12</b> <i>a</i>-<b>3</b>.</div>
<div class="description-paragraph">The initialization sequence, shown in FIG. 12<i>b</i>, first checks if the key is already pressed. If it is (keyOnFlg=1), the service ‘RespondToKeyOff( )’ service will be called in step <b>12</b> <i>b</i>-<b>1</b>. Then, keyOnFlg is set to 1, indicating the key is pressed, the velocity and cnlNumber attributes are set and the notes are cleared by being set to 0 in step <b>12</b> <i>b</i>-<b>2</b>.</div>
<div class="description-paragraph">FIG. 12<i>c </i>depicts a flow diagram of the normal (mode=0) sequence. This plays a single note (note[0]) that is fetched from the current scale object based on the particular white key pressed (colorKeyNum).</div>
<div class="description-paragraph">FIG. 12<i>d </i>gives a flow diagram of the right hand chord (mode=1) sequence. This sequence first fetches the single normal note as in normal mode in step <b>12</b> <i>d</i>-<b>1</b>. It then checks if this note (note[0]) is contained in the current chord in step <b>12</b> <i>d</i>-<b>2</b>. If it is not, then the sequence is done. If it is, then the right hand chord is fetched from chord inversion B object with the scale note (note[)]) as the highest note in step <b>12</b> <i>d</i>-<b>3</b>.</div>
<div class="description-paragraph">FIG. 12<i>e </i>gives a flow diagram of the scale thirds (mode=2) sequence. This sequence sets note[0] to the normal scale note as in normal mode (<b>12</b> <i>e</i>-<b>1</b>). It then sets note[1] to be the scale note one third below note[0] by calling the service ‘GetScaleThird(colorKeyNum)’ of the current scale object.</div>
<div class="description-paragraph">FIG. 12<i>f </i>gives a flow diagram of the right hand chords plus scale thirds (mode=3) sequence. This sequence plays a right hand chord exactly as for mode=1 if the normal scale note is in the current chord (<b>12</b> <i>f</i>-<b>1</b>, <b>12</b> <i>f</i>-<b>2</b>, and <b>12</b> <i>f</i>-<b>4</b> are identical to <b>12</b> <i>d</i>-<b>1</b>, <b>12</b> <i>d</i>-<b>2</b>, and <b>12</b> <i>d</i>-<b>3</b> respectively). It differs in that if the scale note is not in the current chord, a scale third is played as mode 2 in step <b>12</b> <i>f</i>-<b>3</b>.</div>
<div class="description-paragraph">FIG. 12<i>g </i>depicts a flow diagram of the remaining scale note (mode=4) sequence. This sequence plays scale notes that are remaining after current chord notes are removed. It sets note[0] to the remaining scale note by calling the service ‘GetRemainScaleNote(colorKeyNumber)’ of the current scale object instep <b>12</b> <i>g</i>-<b>1</b>. It then adds chord (block) notes based on the numBlkNotes attributes in step <b>12</b> <i>g</i>-<b>2</b>. FIG. 12<i>j </i>shows a flow diagram for getting block notes.</div>
<div class="description-paragraph">FIG. 12<i>h </i>gives a flow diagram of the remaining non-scale notes (mode=5) sequence. This sequence plays notes that are remaining after scale and chord notes are removed. It sets note[0] to the remaining non scale note by calling the service ‘GetRemainNonScaleNote(colorKeyNumber)’ of the current scale object in step <b>12</b> <i>h</i>-<b>1</b>. It then adds chord (block) notes based on the numBlkNotes attributes in step <b>12</b> <i>h</i>-<b>2</b>.</div>
<div class="description-paragraph">FIG. 12<i>j </i>shows a flow diagram for getting block notes.</div>
<div class="description-paragraph">FIG. 12<i>i </i>shows a flow diagram of the output sequence. This sequence includes adjusting each note for the octave of the key pressed and the shiftOctaveSetting attribute in step <b>12</b> <i>i</i>-<b>1</b>. The net shift is stored in shiftOctaveApplied. Next, each non-zero note is output to the cnlNumber instance of the CnlOutput object in step <b>12</b> <i>i</i>-<b>2</b>. The current status is also sent out to patchOut channel in step <b>12</b> <i>i</i>-<b>3</b> (see Table 17). Last, the original note (key) is output to the originalOut channel in step <b>12</b> <i>i</i>-<b>4</b>.</div>
<div class="description-paragraph">FIG. 12<i>k </i>provides a flow diagram for the service ‘RespondToKeyOff( )’. This service is called in response to a key being released. If the key has already been released (keyOnFlg=0) then this service does nothing. If the key has been pressed (keyOnFlg=1) then a note off is sent to channel cnlNumber for each non-zero note in step <b>12</b> <i>k</i>-<b>1</b>. A note off message is sent for absoluteKeyNumber to originalOut output channel in step <b>12</b> <i>k</i>-<b>2</b>. Then the keyOnFlg is cleared and the notes are cleared in step <b>12</b> <i>k</i>-<b>3</b>.</div>
<div class="description-paragraph">The service CorrectKey( ) is called in response to a change in the current chord or scale while the key is on (keyOnFlg=1). This enables the key to correct the notes it has sent out for the new chord or scale. There are four different correction modes (see description for correctionMode attribute above). In the normal correction mode (correctionMode=0), this service behaves exactly as RespondToKeyOn( ) with one exception. If a new note to be turned on is already on, it will remain on. It therefore does not execute the same identical initialization sequence (FIG. 12<i>b</i>) in this mode. It first determines the notes to play (as per RespondToKeyOn( ) service) and then turns off only those notes that are not already on and then turns on any new notes. The solo correction modes (correctionMode=1, 2, or 3) takes this a step further. It turns off only those notes that are not in the new current chord (correctionMode=1), scale (correctionMode=2) or combined chord and scale (correctionMode=3). If a note that is already on exists anywhere in the current chord, scale or combined chord and scale it will remain on. The current chord objects service is NoteInChord( ) and the current scale objects services isNoteInScale and is NoteInCombinedScale( ) are used to determine if each note already on should be left on or turned off.</div>
<div class="description-paragraph">When in solo mode (correctionMode=1, 2, or 3), the original key (absKeyNum) that will be output to a unique channel, as shown in step <b>12</b> <i>i</i>-<b>4</b> of FIG. 12<i>i</i>. The output channel is determined by adding the correction mode multiplied by 9 to the channel determined in <b>12</b> <i>i</i>-<b>4</b>. For example, if correctionMode is 2 then 18 is added to the channel number determined in step <b>12</b> <i>i</i>-<b>4</b>. This allows the software to determine the correction mode when the original performance is played back.</div>
<div class="description-paragraph">Step <b>12</b> <i>b</i>-<b>2</b> of FIG. 12<i>b </i>decodes the correctionMode and channel number. The original key channels are local to the software and are not MIDI channels, as MIDI is limited to 16 channels.</div>
<div class="description-paragraph">The services SetMode( ), SetCorrectionMode( ) and SetNumBlkNotes( ) set the mode, correctionMode and numBlkNotes attributes respectively using simple assignment (example: mode=newMode).</div>
<div class="description-paragraph">FIG. <b>13</b> and Table 14</div>
<div class="description-paragraph">The BlackMelodyKey object is responsible for handling all black melody key events. This involves, depending on mode, getting notes from the current scale object and/or chord inversion object and sending the notes out.</div>
<div class="description-paragraph">The class attributes for this object include mode, which may be set to one of Normal=0, RightHandChords=1 or Scale3rds=2. The attribute correctionMode controls how the service CorrectKey behaves and may be set to either Normal=0 or SoloChord=1, SoloScale=2, or SoloCombined=3. The class attribute octaveShiftSetting is set to the number of octaves to shift the output. Positive values shift up, negative shift down. Instance variables include absoluteKeyNum and colorKeyNum and octave (see FIG. <b>2</b>). The attribute destChannel holds the destination channel for the key on event. keyOnFlag indicates whether the Key in pressed or not. Velocity holds the velocity the key was pressed with and note[4] holds the notes that were sounded (if any).</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 14</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">PianoKey: :BlackMelodyKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Class Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. correctionMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. octaveShiftSetting</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Instance Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. absoluteKeyNum</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. colorKeyNum</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. octave</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. destChannel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. keyOnFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. velocity</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. note[4]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">8. octaveShiftApplied</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. ResondToKeyOn(sourceChannel, velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RespondToKeyOff(sourceChannel);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. CorrectKey();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SetCorrectionMode(newCorrectionMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. SetOctaveShift(numberOctaves);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 13<i>a </i>through <b>13</b> <i>f </i>shows a flow diagram for the RespondToKeyOn( ) service. This service is called in response to the black melody key being pressed. It is responsible for generating the note(s) to be sounded. It is entered with the velocity of the key press and the channel the key was received on. It starts by initializing itself in step <b>13</b> <i>a</i>-<b>1</b>, as described below. Next, it branches to a specific sequence that is dependent on the mode in step <b>13</b> <i>a</i>-<b>2</b>. These specific sequences generate the notes. It finishes by outputting the generated notes in step <b>13</b> <i>a</i>-<b>3</b>.</div>
<div class="description-paragraph">The initialization sequence, shown in FIG. 13<i>b</i>, first checks if the key is already pressed. If it is (keyOnFlg=1), the service ‘RespondToKeyOff( )’ service will be called in step <b>13</b> <i>b</i>-<b>1</b>. Then, keyOnFlg is set to 1, indicating the key is pressed, the velocity and destCnl attributes are set and the notes are cleared by being set to 0 in step <b>13</b> <i>b</i>-<b>2</b>.</div>
<div class="description-paragraph">FIG. 13<i>c </i>shows a flow diagram of the normal (mode=0) sequence. The note(s) played depends on which black key it is (colorKeyNum). Black (colorKeyNum) keys 0, 1, 2, and 3 get the fundamental, alternate, C<b>1</b> and C<b>2</b> note of inversionC, respectively as simply diagrammed in the sequence <b>13</b> <i>c</i>-<b>1</b> of FIG. <b>13</b>C. Black (colorKeyNum) key 4 gets the entire chord by calling the GetInversion( ) service of inversionC (<b>13</b> <i>c</i>-<b>2</b>).</div>
<div class="description-paragraph">FIG. 13<i>d </i>shows a flow diagram of the right hand chords (mode=1) sequence. If the colorKeyNum attribute is 4 (meaning this is the 5th black key in the octave), then the current chord in the current inversion of inversionC is fetched and played in step <b>13</b> <i>d</i>-<b>1</b>. Black keys 0 through 3 will get right hand chords 1 through 4 respectively.</div>
<div class="description-paragraph">FIG. 13<i>e </i>shows a flow diagram of the scale thirds (mode=2) sequence. <b>13</b> <i>e</i>-<b>1</b> checks if this is the 5th black key (colorKeyNum=4). If it is, the <b>13</b> <i>e</i>-<b>2</b> will get the entire chord from inversionC object. If it is not the 5th black key, then the normal sequence shown in FIG. 13<i>c </i>is executed (<b>13</b> <i>e</i>-<b>3</b>). Then the note one scale third below note[0] is fetched from the current scale object (<b>13</b> <i>e</i>-<b>4</b>).</div>
<div class="description-paragraph">FIG. 13<i>f </i>shows a flow diagram of the output sequence. This sequence includes adjusting each note for the octave of the key pressed and the octaveShiftSetting attribute in step <b>13</b> <i>f</i>-<b>1</b>. The net shift is stored in octaveShiftApplied. Next, each non-zero note is output to the compOut instance of the CnlOutput object in step <b>13</b> <i>f</i>-<b>2</b>. The current status is also sent out to channel 2 in step <b>13</b> <i>f</i>-<b>3</b> ('see Table 17). Finally, the original note (key) is output to the proper channel in step <b>13</b> <i>f</i>-<b>4</b>.</div>
<div class="description-paragraph">The service RespondToKeyOff( ) sends note offs for each note that is on. It is identical the flow diagram shown in FIG. 12<i>k. </i> </div>
<div class="description-paragraph">The service CorrectKeyOn( ) is called in response to a change in the current chord or scale while the key is on (keyOnFlg=<b>1</b>). This enables the key to correct the notes it has sent out for the new chord or scale. There are four different correction modes (see description for correctionMode attribute above).</div>
<div class="description-paragraph">In the normal correction mode (correctionMode=0), this service behaves exactly as RespondToKeyOn( ) with one exception. If a new note to be turned on is already on, it will remain on. It therefore does not execute the same identical initialization sequence (FIG. 13<i>b</i>) in this mode. It first determines the notes to play (as per RespondToKeyOn( ) service) and then turns off only those notes that are not already on and then turns on any new notes. The solo correction modes (correctionMode=1, 2, or 3) takes this a step further. It turns off only those notes that are not in the new current chord (correctionMode=1), scale (correctiontylode=2) or combined chord and scale correctionMode=3). If a note that is already on exists any wherein the current chord, scale or combined chord and scale it will remain on. The current chord objects service isNoteInChordo and the current scale objects services isNoteInScale and isNotelnCombinedScale( ) are used to determine if each note already on should be left on or turned off. The output channel for the original key is determined as for the while melody key as described above. It should be noted that all note correction methods described by the present invention are illustrative only, and can easily be expanded to allow note correction based on any single note, such as chord fundamental or alternate, or any note group. A specific mode may also be called for any of a plurality of input controllers.</div>
<div class="description-paragraph">The services SetMode( ) and SetCorrectionMode( ) set the mode and correctionMode attributes respectively using simple assignment (example: mode=newMode).</div>
<div class="description-paragraph">Table 15</div>
<div class="description-paragraph">Since the black chord progression keys play non-scale chords, they are seldom used in music production. These keys become more useful as a control (function) key or toggle switches that allow a user to easily and quickly make mode and configuration changes on the fly. Note that any key can be used as a control key, but the black chord progression keys (non-scale chords) are the obvious choice. The keys chosen to function as control keys are simply instantiated as the desired key type (as are all the other key types). The present invention uses 4 control keys. They are piano keys with absKeyNum of 49, 51, 54 and 56. They have three services, RespondToKeynOn, RespondToProgramChange and RespondToKeyOff( ). Presently, the RespondToKeyOff( ) service does nothing (having the service provides a consistent interface for all piano key objects, relieving the music administrator object <b>3</b>-<b>3</b> from having to treat these keys differently from other keys. The RespondToKeyOn( ) service behaves as follows. Key 49 calls config.setSongKeyBank(0), key 51 calls config.SongKeyBank(1), key 54 calls config.SetScaleBank(0), and key 56 calls config.SetScaleBank(1). Note that these same functions can be done via a user interface. A program change equal to the absKeyNum attribute is also output as for the chord progression keys (see <b>10</b>-<b>16</b>). The service RespondToProgramChange( ) service is identical to the RespondToKeyOn( ) service. It is provided to allow received program changes (patch triggers) to have the same controlling effect as pressing the control keys.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 15</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">PianoKey::ControlKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. absKeyNum</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. RespondToKeyOn(sourceChannel, velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RespondToKeyoff(sourceChannel)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. RespondToProgramChange(sourceChannel);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIGS. 14<i>a</i>, <b>14</b> <i>b</i>, <b>14</b> <i>c</i>, <b>14</b> <i>d </i>and <b>14</b> <i>e </i>and Table 16</div>
<div class="description-paragraph">There is one instance of the music administrator object called musicAdm <b>3</b>-<b>3</b>. This is the main driver software for the present invention. It is responsible for getting music input from the music input object <b>3</b>-<b>4</b> and calling the appropriate service for the appropriate piano key object <b>3</b>-<b>6</b>. The piano key services called will almost always be RespondToKeyOn( ) or RespondToKeyOff( ). Some music input may be routed directly to the music output object <b>3</b>-<b>12</b>. Table 16 shows the music administrators attributes and services. Although the description that follows assumes there are 16 input channels, the description is applicable for any number of input channels. All attributes except melodyKeyFlg[16][128] are user setable per user preference. The attribute mode applies to all input channels and may be either off (0) or on (1). The array melodyKeyFlg[16][128] is an array of flags that indicate which melody keys are on (flag=1) and which are off (flag=0). The array holds 128 keys for each of 16 input channels. The cnlMode[16] attribute holds the mode for each of 16 input channels. This mode may be one of normal, bypass or off. If cnlMode[y]=bypass, then input from channel y will bypass any processing and be heard like a regular keyboard. Those of ordinary skill will recognize that an embodiment of the present invention may allow designated keys to function as bypassed keys, while other keys are used for chord note and/or scale note performance. If cnlMode[x]=off, then input from channel x will be discarded or filtered out. The attribute firstMldyKey[16] identifies the first melody key for each input channel. FirstMldyKey[y]=60 indicates that for channel y, keys 0-59 are to be interpreted as chord progression keys and keys 60-127 are to be interpreted as melody keys. FirstMldyKey[x]=0 indicates that channel x is to contain only melody keys and firstMldyKey[z]=128 indicates that channel z is to contain only chord progression keys. The attribute chordProcCnl[16] and mldyProcCnl[16] identify the process channel for an input channel's chord progression keys and melody keys respectively. This gives a user the ability to map input to different channels, and/or to combine input from 2 or more channels and to split the chord and melody keys to 2 different channels if desired. By default, the process channels are the sa me as the receive channel.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 16</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Music Administrator Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. melodyKeyFlg[16][128]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. cnlMode[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. firstMldyKey[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. chordProcCnl[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. mldyProcCnl[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. Update();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. SetCnlMode(cnlNum, newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. SetFirstMldyKey(cnlNum, keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SetprocCnl(cnlNum, chordCnl, mldyCnl);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. CorrectKeys();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">The service SetMode(x) sets the mode attribute to x The service SetCnlMode(x, y) sets attribute cnlMode[x] to y. SetFirstMldyKey(x, y) sets firstMldyKey[x] to y and the service SetProcCnl(x, y, z) sets attribute chordrocCnl[x] to y and attribute mldyProcCnl[x] to z. The above services are called by the user interface object <b>3</b>-<b>2</b>.</div>
<div class="description-paragraph">The Update( ) service is called by main (or, in some operating systems, by the real time kernel or other process scheduler). This service is the music software's main execution thread. FIGS. 14<i>a </i>through <b>14</b> <i>d </i>show a flow diagram of this service. It first checks if there is any music input received in step <b>14</b> <i>a</i>-<b>1</b> and does nothing if not. If there is input ready, step <b>14</b> <i>a</i>-<b>2</b> gets the music input from the music input object <b>3</b>-<b>4</b>. This music input includes the key number (KeyNum in FIG. 14<i>a </i>through <b>14</b> <i>d</i>), the velocity of the key press or release, the channel number (cnl in FIG. 14) and whether the key is on (pressed) or off (released).</div>
<div class="description-paragraph">If mode attribute is off (mode=0) then the music input is simply echoed directly to the output in step <b>14</b> <i>a</i>-<b>4</b> with the destination channel being specified by the attribute mldyProcCnl[rcvCnl]. There is no processing of the music if mode is off. If mode is on (mode=1), then the receiving channel is checked to see if it is in bypass mode in step <b>14</b> <i>a</i>-<b>5</b>. If it is, then the output is output in step <b>14</b> <i>a</i>-<b>4</b> without any processing. If not in bypass mode, then step <b>14</b> <i>a</i>-<b>6</b> checks if the channel is off. If it is off then execution returns to the beginning. If it is on execution proceeds with the flow diagram shown in FIG. 14<i>b. </i> </div>
<div class="description-paragraph">Step <b>14</b> <i>b</i>-<b>2</b> checks if it is a key on or off message. If it is, then step <b>14</b> <i>b</i>-<b>3</b> checks if it is a chord progression key (keys&lt;firstMldyKey[cnl]) or a melody key (&gt;=firstMldyKey[cnl]). Processing of chord progression keys proceeds with U<b>3</b> (FIG. 14<i>c</i>) and processing of melody keys proceeds with U<b>4</b> (FIG. 14<i>d</i>). If it is not a key on/off message then step <b>14</b> <i>b</i>-<b>4</b> checks if it is a program change (or patch trigger). If it is not then it is a pitch bend or other MIDI message and is sent unprocessed to the output object by step <b>14</b> <i>b</i>-<b>7</b>, after which it returns to U<b>1</b> to process the next music input. If the input is a patch trigger then step <b>14</b> <i>b</i>-<b>5</b> checks if the patch trigger is for a chord progession key indicated by the program number being &lt;firstMldyKey[cnl]. If it is not, then the patch trigger is sent to the current status object in step <b>14</b> <i>b</i>-<b>8</b> by calling the RcvStatus(patchTrigger) service (see Table 17) and then calling the CorrectKey( ) service (<b>14</b> <i>b</i>-<b>9</b>), followed by returning to U<b>1</b>.</div>
<div class="description-paragraph">If the patch trigger is for a chord progression key, then step <b>14</b> <i>b</i>-<b>6</b> calls the RespondToProgramChange( ) service of the chordKey of the same number as the patch trigger after changing the channel number to that specified in the attribute chordProcCnl[rcvCnl] where rcvCnl is the channel the program change was received on. Execution then returns to U<b>1</b> to process the next music input.</div>
<div class="description-paragraph">Referring to FIG. 14<i>c</i>, step <b>14</b> <i>c</i>-<b>6</b> changes the channel (cnl in FIG. 14) to that specified by the attribute chordProcCnl[cnl]. Next, step <b>14</b> <i>c</i>-<b>1</b> checks if the music input is a key on message. If it is not, step <b>14</b> <i>c</i>-<b>2</b> calls the RespondToKeyOff( ) service of the key. If it is, step <b>14</b> <i>c</i>-<b>3</b> calls the RespondToKeynOn service. After the KeyOn service is called, steps <b>14</b> <i>c</i>-<b>4</b> and <b>14</b> <i>c</i>-<b>5</b> call the CorrectKey( ) service of any melody key that is in the on state, indicated by melodyKeyFlg[cnl][Key number]=1. Processing then proceeds to the next music input.</div>
<div class="description-paragraph">Referring to FIG. 14<i>d</i>, step <b>14</b> <i>d</i>-<b>6</b> changes the channel (cnl in FIG. 14) to that specified by the attribute mldyProcCnl[cnl]. Next, step <b>14</b> <i>d</i>-<b>1</b> checks if the melody key input is a Key On message. If it is, then step <b>14</b> <i>d</i>-<b>2</b> calls the RespondToKeyOn( ) service of the specified melody key. This is followed by step <b>14</b> <i>d</i>-<b>4</b> setting the melodyKeyFlg[cnl][key] to 1 indicating that the key is in the on state. If the music input s a key off message, then step <b>14</b> <i>d</i>-<b>3</b> calls the RespondToKeyOff( ) service and step <b>14</b> <i>d</i>-<b>5</b> clears the melodyKeyflg[cnl][key] to 0. Execution then proceeds to U<b>1</b> to process the next input.</div>
<div class="description-paragraph">In the description thus far, if a user presses more than one key in the chord progression section, all keys will sound chords, but only the last key pressed will assign (or trigger) the current chord and current scale. It should be apparent that the music administrator object could be modified slightly so that only the lowest key pressed or the last key pressed will sound chords.</div>
<div class="description-paragraph">The CorrectKeys( ) service is called by the user interface in response to the song key being changed or changes in chord or scale assignments. This service is responsible for calling the CorrectKey( ) services of the chord progression key(s) that are on followed by calling the CorrectKey( ) services of the black and white melody keys that are on.</div>
<div class="description-paragraph">Table 17</div>
<div class="description-paragraph">Table 17 shows the current status objects attributes and services. This object, not shown in FIG. 3, is responsible for sending and receiving the current status which includes the song key, the current chord (fundamental and type), the current scale (root and type). Current status may also include the current chord inversion, a relative chord position identifier (i.e. see Table 2, last two rows), as well as various other identifiers described herein (not listed in Table 17). The current status message sent and received comprises 6 consecutive patch changes in the form <b>61</b>, <b>1</b> <i>aa</i>, <b>1</b> <i>bb</i>, <b>1</b> <i>cc</i>, <b>1</b> <i>dd </i>and <b>1</b> <i>ee</i>, where <b>61</b> is the patch change that identifies the beginning of the current status message (patch changes 0-59 are reserved for the chord progression keys).</div>
<div class="description-paragraph">aa is the current song key added to 100 to produce <b>1</b> <i>aa</i>. The value of aa is found in the song key attribute row of Table 2 (when minor song keys are added, the value will range from 0 through 23). bb is the current chord fundamental added to 100. The value of bb is also found in the song key attribute row of Table 2, where the number represents the note in the row above it. cc is the current chord type added to 100. The value of cc is found in the Index column of Table 4. dd is the root note of the current scale added to 100. The value of dd is found the same as bb. ee is the current scale type added to 100. The possible values of ee are found in the Index column of Table 6a.</div>
<div class="description-paragraph">The attributes are used only by the service RcvStatus( ) which receives the current status message one patch change at a time. The attribute state identifies the state or value of the received status byte (patch change). When state is 0, RcvStatus( ) does nothing unless statusByte is <b>61</b> in which case is set state to 1. The state attribute is set to 1 any time a <b>61</b> is received. When state is 1, 100 is subtracted from statusByte and checked if a valid song key. If it is then it is stored in rcvdSongKey and state is set to 2. If not a valid song key, state is set to 0. Similarly, rcvdChordFund (state=2), rcvdChordType (state=3), rcvdScaleRoot (state=4) and rcvdScaleType (state=5) are sequentially set to the status byte after 100 is subtracted and value tested for validity. The state is always set to 0 upon reception of invalid value. After rcvdScaleType is set, the current song key, chord and scale are set according to the received values and state is set to 0 in preparation for the next current status message.</div>
<div class="description-paragraph">The service SendCurrentStatus( ) prepares the current status message by sending patch change <b>61</b> to channel <b>2</b>, fetching the song key, current chord and current scale values, adding 100 to each value and outputting each to channel <b>2</b>.</div>
<div class="description-paragraph">It should also be noted that the current status messages may be used to generate a “musical metronome”. Traditional metronomes click on each beat to provide rhythmic guidance during a given performance. A “musical metronome” however, will allow a user to get a feel for chord changes and/or possibly scale changes in a given performance. When the first current status message is received during playback, the current chord fundamental is determined, and one or more note ons are provided which are representative of the chord fundamental. When a new and different chord fundamental is determined using a subsequently received current status message, the presently sounded chord fundamental note(s) are turned off, and the new and different chord fundamental note(s) are turned on and so on. The final chord fundamental note off(s) are sent at the end of the performance or when a user terminates the performance. This will allow a plurality of chord changes in the given performance to be indicated to a user by sounding at least fundamental chord notes. Those of ordinary skill will recognize that selected current scale notes may also be determined and sounded if desired, such as for indicating scale changes for example. Additional selected chord notes may also be sounded. In a given performance where a chord progression and/or various scale combinations in the given performance are known, the musical metronome data may be easily generated with minor modification such as before the commencement of the given performance, for example.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 17</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Current Status Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. state</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. rcvdSongKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. rcvdChordFund</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. rcvdChordType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. rcvdScaleRoot</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. rcvdScaleType</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SendCurrentStatus();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RcvStatus(statusByte);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">An alternative to the current status message described is to simplify it by identifying only which chord, scale, and song key bank (of the configuration object) is selected, rather than identifying the specific chord, scale, and song key. In this case, <b>61</b> could be scale bank <b>1</b>, <b>62</b> scale bank <b>2</b>, <b>63</b> chord group bank <b>1</b>, <b>64</b> chord group bank <b>2</b>, <b>65</b> song key bank <b>1</b>, <b>66</b> song key bank <b>2</b>, etc. The RcvStatus( ) service would, after reception of each patch trigger, call the appropriate service of the configuration object, such as SetScaleBank(<b>1</b> or <b>2</b>). However, if the configuration has changed since the received current status message was sent, the resulting chord, scale, and song key may be not what a user expected. It should be noted that the current status messages as well as patch triggers described herein may be output from input controller performances in both the chord section and melody section, then stored. This is useful when a user is recording a performance, but has not yet established a chord progression using the chord progression keys. This will allow the music software to prepare itself for performance of the correct current chord notes and current scale notes on playback.</div>
<div class="description-paragraph">Table 18</div>
<div class="description-paragraph">There is one music input object musicIn <b>3</b>-<b>4</b>. Table 18 shows its attributes and services. This is the interface to the music input hardware. The low level software interface is usually provided by the hardware manufacturer as a ‘device driver’. This object is responsible for providing a consistent interface to the hardware “device drivers” of many different vendors. It has five main attributes. keyRcvdFlag is set to 1 when a key pressed or released event (or other input) has been received. The array rcvdKeyBuffer[ ] is an input buffer that stores many received events in the order they were received. This array along with the attributes bufferHead and bufferTail enable this object to implement a standard first in first out (FIFO) buffer. The attribute ChannelMap[64] is a table of channel translations. ChannelMap[n]=y will cause data received on channel n to be treated as if received on channel y. This allows data from two or more different sources to combined on a single channel if desired.</div>
<div class="description-paragraph">The services include isKeyInputRcvd( ) which returns true (1) if an event has been received and is waiting to be read and processed. GetMusicInput( ) returns the next event received in the order it was received. The InterruptHandler( ) service is called in response to a hardware interrupt triggered by the received event. The MapChannelTo(inputCnl, outputCnl) service will set ChannelMap[inputCnl] to outputCnl. The use and implementation of the music input object is straight forward common. Normally, all input is received from a single source or cable. For most MIDI systems, this limits the input to 16 channels. The music input object <b>3</b>-<b>4</b> can accommodate inputs from more than one source (hardware device/cable). For the second, third and fourth source inputs (if present), the music input object adds 16, 32 and 48 respectfully to the actual MIDI channel number. This extends the input capability to 64 channels.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 18</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Music Input Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. keyRcvFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. rcvdKeyBuffer[n]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. channelMap[64]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. bufferHead</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. bufferTail</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. isKeyInputRcvd(); keyRcvdFlag</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. GetMusicInput(); rcvdKeyBuffer[bufferTail]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. InterruptHandler()</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. MapChannelTo(inputCnl, outputCnl);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">Table 19</div>
<div class="description-paragraph">There is one music output object musicOut <b>3</b>-<b>12</b>. Table 19 shows its attributes and services. This is the interface to the music output hardware (which is usually the same as the input hardware). The low level software interface is usually provided by the hardware manufacturer as a ‘device driver’. This object is responsible for providing a consistent interface to the hardware ‘device drivers’ of many different vendors.</div>
<div class="description-paragraph">The musicOut object has three main attributes. The array outputKeyBuffer[ ] is an output buffer that stores many notes and other music messages to be output This array along with the attributes bufferHead and bufferTail enable this object to implement a standard first in first out (FIFO) buffer or output queue.</div>
<div class="description-paragraph">The service OutputMusic( ) queues music output. The InterruptHandler( ) service is called in response to a hardware interrupt triggered by the output hardware being ready for more output. It outputs music in the order is was stored in the output queue. The use and implementation of the music output object is straight forward and common. As with the music input object <b>3</b>-<b>4</b>, the music output object <b>3</b>-<b>12</b> can accommodate outputting to more than one physical destination (hardware device/cable). Output specified for channels <b>1</b>-<b>16</b>, <b>17</b>-<b>32</b>, <b>33</b>-<b>48</b> and <b>49</b>-<b>64</b> are directed to the first, second, third and fourth destination devices respectfully.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 19</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Music Output Objects Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. outputKeyBuffer[n]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. bufferHead</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. bufferTail</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. OutputMusic(outputByte);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2 InterruptHandler();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">User Interface <b>3</b>-<b>2</b> </div>
<div class="description-paragraph">There is one User Interface object <b>3</b>-<b>2</b>. The user interface is responsible for getting user input from computer keyboard and other inputs such as foot switches, buttons, etc., and making the necessary calls to the other objects to configure the software as a user wishes. The user interface also monitors the current condition and updates the display(s) accordingly. The display(s) can be a computer monitor, alphanumeric displays, LEDs, etc.</div>
<div class="description-paragraph">In the present invention, the music administrator object <b>3</b>-<b>3</b> has priority for CPU time. The user interface <b>3</b>-<b>2</b> is allowed to run (have CPU time) only when there is no music input to process. This is probably not observable by the user on today's fast processors (CPUs). The user interface does not participate directly in music processing, and therefore no table of attributes or services is provided (except the Update( ) service called by the main object <b>3</b>-<b>1</b>). The user interface on an embedded instrument will look quite different from a PC version. A PC using a window type operating system interface will be different from a non-window type operating system.</div>
<div class="description-paragraph">User Interface Scenarios</div>
<div class="description-paragraph">The user tells the user interface to turn the system off. The user interface calls musicAdm.SetMode(0) <b>3</b>-<b>3</b> which causes subsequent music input to be directed, unprocessed, to the music output object <b>3</b>-<b>12</b>.</div>
<div class="description-paragraph">The user sets the song key to D MAJOR. The user interface <b>3</b>-<b>2</b> calls songKey.SetSongKey(D MAJOR) (<b>3</b>-<b>8</b>). All subsequent music processing will be in D MAJOR.</div>
<div class="description-paragraph">A user assigns a minor chord to key 48. The user interface <b>3</b>-<b>2</b> calls config.AssignChord(minor, 48) <b>3</b>-<b>5</b>. The next time pianoKey[48] responds to a key on, the current chord type will be set to minor.</div>
<div class="description-paragraph">As a user is performing, the current chord and scale are changed per new keys being played. The user interface monitors this activity by calling the various services of crntChord, crntScale etc. and updates the display(s) accordingly.</div>
<div class="description-paragraph">FIGS. 15A Through 15K and Tables 20 Through 26</div>
<div class="description-paragraph">FIG. 15A shows a general overview of a chord performance method and a melody performance method of the present invention. The performance embodiments shown, allow previously recorded or stored musical data to be used for effecting a given performance from various input controller pluralities, even if the given performance represents a composition originally composed by the author(s) from a different number of input controllers. The method uses indicators or “indications” to allow a user to discern which input controllers to play in a given performance. The use of indicators for visually assisted musical performance is well known in the art, and generally involves a controller which contains the processing unit, which may comprise a conventional microprocessor. The controller retrieves indicator information in a predetermined order from a source. The processing unit determines a location on the musical instrument corresponding to the indicator information. The determined location is indicated to the user where the user should engage the instrument in order to initiate the intended musical performance, as described in Shaffer et al., U.S. Pat. No. 5,266,735. It should be noted that a guitar with a MIDI controller, known in the art, may be used to effect a performance as described herein. The current status messages described herein, may also be used to drive an indicator system corresponding to a guitar, although this method will do nothing to actually reduce the demanding physical skills required to perform the music. Indicators of the present invention can be LEDs, lamps, alphanumeric displays, etc. Indicators may be positioned on or near the input controllers used for performance. They may also be positioned in some other manner, so long as a user can discern which indicator corresponds to which performance input controller. Indicators may also be displayed on a computer monitor or other display, such as by using depictions of performance input controllers and their respective indications, as one example. The indication system described herein, may be incorporated into an embodiment of the present invention, or may comprise a stand-alone unit which is provided to complete an embodiment of the present invention. Those of ordinary skill in the art will recognize that the indicators, as described herein, may be provided in a variety of ways. For purposes of clarification, a given musical performance or “given performance” is defined herein to include any song, musical segment, composition, specific part or parts, etc. being performed by a user. Various harmony modes, such as those described herein, may be used in a given performance, if desired. Various indications including those described herein, may also be used. It should be noted that the words “recordec<b>1</b>” and “stored” are used interchangeably herein to describe the present invention.</div>
<div class="description-paragraph">FIG. 15A shows a general overview of one embodiment of the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> and Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> of the present invention. Both methods have been incorporated and shown together in order to simplify the description. An embodiment of the present invention may however, include the Chord Performance Method only <b>15</b> <i>a</i>-<b>16</b>, or the Melody Performance Method only <b>15</b> <i>a</i>-<b>18</b>, if desired. The following performance method description is for one performance channel. Processing may be duplicated, as described later, to allow simultaneous multi-user performance on multiple channels. It should tie noted that the present invention is described herein using a basic channel mapping scenario. This was done to simplify the description. Many channel mapping scenarios may be used, and will become apparent to those of ordinary skill in the art. Although the Chord Performance Method and Melody Performance Method are actually part of the music software <b>15</b> <i>a</i>-<b>12</b>, for purposes of illustration they are shown separate. The Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> of the present invention will be described first. The Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> involves two main software objects, the Melody Performance Method I<b>5</b> <i>a</i>-<b>18</b> and MelodyPerformerKey <b>15</b> <i>a</i>-<b>7</b>. What the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> does is intercept live key inputs <b>15</b> <i>a</i>-<b>1</b> and previously recorded original melody performance key inputs <b>15</b> <i>a</i>-<b>2</b>, and translates these into the original performance which is then presented to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as the original performance. Thus the previously recorded or stored original melody performance <b>15</b> <i>a</i>-<b>2</b> is played back under the control of the live key inputs <b>15</b> <i>a</i>-<b>1</b>. The live key inputs <b>15</b> <i>a</i>-<b>1</b> correspond to the key inputs <b>1</b>-<b>13</b> of FIG. <b>1</b>A. The previously recorded original melody performance input <b>15</b> <i>a</i>-<b>2</b> is from the sequencer <b>1</b>-<b>22</b> in FIG. <b>1</b>A. Input data may be provided using a variety of sources, including interchangeable storage devices, etc. This may be useful for providing a user with pre-stored data, such as that which may represent a collection of popular songs, for example. FIG. 15A, <b>15</b> <i>a</i>-<b>2</b> is referred to as an ‘original performance’ because it is a sequence of actual keys pressed and presented to the music software and not the processed output from the music software, as has been described herein. When the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> uses original melody performance input <b>15</b> <i>a</i>-<b>2</b> to be presented to the music software for processing, the original melody performance will be re-processed by the music software <b>15</b> <i>a</i>-<b>12</b>. The music software <b>15</b> <i>a</i>-<b>12</b> is the same as <b>1</b>-<b>10</b> in FIG. <b>1</b>A and the optional displays <b>15</b> <i>a</i>-<b>13</b> correspond to <b>1</b>-<b>18</b> of FIG. <b>1</b>A.</div>
<div class="description-paragraph">Table 20</div>
<div class="description-paragraph">The MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> will be discussed before the Melody Performance Method object <b>15</b> <i>a</i>-<b>18</b>. Table 20 shows the six attributes of the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> and listing of services. Attribute isEngaged is set to TRUE when the object is engaged and is set to FALSE when the object is disengaged. The defaultKey attribute holds the default key (MIDI note) value for the object. The originalDefaultKey attribute holds the default key value when first set. The originalDefaultKey attribute may be used to reset a default key back to its original value when various optional steps described herein are used. The armedKey[64] attribute is an array of 64 keys that each MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> may be armed with. The attribute velocity holds the velocity parameter received with the last Engage(velocity) service. Attribute isArmedDriverKey is set to TRUE when the object is armed with a key and is set to FALSE when the object is disarmed of all keys. Each instance of MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> is initialized with isEngaged=FALSE, defaultKey=−1, originalDefaultKey=−1, velocity=0, each armedKey[ ] set to −1, and isArmedDriverKey=FALSE. The value −1 indicates the attribute is null or empty. The service SetDfltKey(keyNum) will set the defautltKey attribute and originalDefaultKey attribute to keyNum where keyNum is a MIDI note number in the range 0 to 127. The services IsDriverKeyAnned( ) and IsArmedDriverKeyPressed( ) are used with the optional performance feature shown by FIG. 15K, described later. The following description assumes that a default key will be used. By having a default key, a user will always hear something when a key is pressed, even if it is not part of the previously recorded original performance <b>15</b> <i>a</i>-<b>2</b>. However, the flow diagrams may easily be modified in the event a default key is not to be used. Eliminating the default key may provide cleaner sounding performance by users with very limited physical skill.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 20</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">MelodyPerformerKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. isEngaged</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. defaultKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. originalDefaultKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. velocity</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. armedKey[64]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. isArmedDriverKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. Engage(velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. Disengage();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. Arm(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. DisArm(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SetDefaultKey(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. IsDriverKeyArmed();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. IsArmedDriverKeyPressed();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIG. 15B shows a flow diagram for the service Engage(velocity). This service is called for the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> when a live key <b>15</b> <i>a</i>-<b>1</b> (MIDI note number) is pressed that corresponds to the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>, as will be described later. Step <b>15</b> <i>b</i>-<b>2</b> will set attribute isEngaged to TRUE and velocity to v. Step <b>15</b> <i>b</i>-<b>4</b> determines if one or more keys are in the armedKey[ ] attribute. If one or more keys are in the armedKey[ ] attribute, then step <b>15</b> <i>b</i>-<b>6</b> sends a MIDI note on message with velocity v on sourceChannel for each key (MIDI note number) in the armedKey[ ] attribute, and processing finishes. These note on messages are sent to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input. It should be noted that the sourceChannel attribute is common to the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b>, and will be described in more detail later. If there are no keys in the armedKey[ ] attribute in step <b>15</b> <i>b</i>-<b>4</b>, then step <b>15</b> <i>b</i>-<b>8</b> sends a note on message with velocity v on sourceChannel for the defaultkey attribute, and processing finishes. This note on message is also sent to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input.</div>
<div class="description-paragraph">FIG. 15C shows a flow diagram for the service Disengage( ). This service is called for the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> when a live key <b>15</b> <i>a</i>-<b>1</b> (MIDI note number) is released that corresponds to the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>, as will be described later. Step <b>15</b> <i>c</i>-<b>2</b> will set isEngaged to FALSE. Step <b>15</b> <i>c</i>-<b>4</b> determines if one or more keys are in the armedKey[ ] attribute. If one or more keys are in the armedKey[ ] attribute, then step <b>15</b> <i>c</i>-<b>6</b> sends a note off message on sourceChannel for each key in armedkey[ ] array, and processing finishes. Each note off message is sent to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input. If there are no keys in the armedKey[ ] attribute, then step <b>15</b> <i>c</i>-<b>8</b> sends a note off message on sourceChannel for the defaultKey attribute, and processing finishes. This note off message is also sent to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input. Although not required, optional step <b>15</b> <i>c</i>-<b>10</b> (shown by dotted lines) may then reset the defaultKey attribute using the originaIDefaultKey value (if different), and processing finishes. The designer has the option of using this additional step <b>15</b> <i>c</i>-<b>10</b> when optional step <b>15</b> <i>e</i>-<b>10</b> of FIG. 15E is used (shown by dotted lines). Although not required, these optional steps <b>15</b> <i>c</i>-<b>10</b> and <b>15</b> <i>e</i>-<b>10</b> may be used in one embodiment of the present invention for the purpose of providing smoother performance playback.</div>
<div class="description-paragraph">FIG. 15D shows a flow diagram for the service Arm(keyNum). This service is called for the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b> when an original melody performance note on event <b>15</b> <i>a</i>-<b>2</b> (keyNum) is received that corresponds to the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>. Mapping to the object is handled by the melody key map <b>15</b> <i>a</i>-<b>9</b>, as will be described later. Step <b>15</b> <i>d</i>-<b>1</b> will first place keyNum in the armedkey[ ] array (if not already). Step <b>15</b> <i>d</i>-<b>2</b> will set isArmedDriverKey to TRUE (if not already). It should be noted that the Arm(keyNum) and DisArm(keyNum) services of FIGS. 15D and 15E, respectively, each set the isArmedriverKey attribute. However, this attribute (and the steps shown for setting the attribute) are not required unless the additional performance feature shown by FIG. 15K is used. The performance feature of FIG. 15K may be used in an embodiment of the present invention to provide tempo control, as will be described later. Step <b>15</b> <i>d</i>-<b>4</b> determines if the isEngaged attribute is set to TRUE for the object. If it is set to TRUE, then step <b>15</b> <i>d</i>-<b>6</b> determines if this is the first key in the armedKey[ ] array. If it is, then step <b>15</b> <i>d</i>-<b>12</b> provides (or turns on) an indicator corresponding to the live key <b>15</b> <i>a</i>-<b>1</b> of the object. It should be noted that this indicator may be provided on a specific channel or network address in an embodiment of the present invention. For example, an instrument providing live key inputs <b>15</b> <i>a</i>-<b>1</b> may be set to send and receive on channel x or network address x. If so, then live key inputs <b>15</b> <i>a</i>-<b>1</b> are received from channel x or network address x, and indicators are provided to the instrument on channel x or network address x. This will allow indications to be provided independently for each instrument in a multi-user performance, including over networks. Step <b>15</b> <i>d</i>-<b>14</b> then sends a note off message on sourceChannel for the default key to the music software <b>15</b> <i>a</i>-<b>12</b>. Step <b>15</b> <i>d</i>-<b>16</b> then sends a note on message for keyNum (with velocity) on sourceChannel to the music software <b>15</b> <i>a</i>-<b>12</b>, and processing finishes. If in step <b>15</b> <i>d</i>-<b>6</b> it is not the first key in the armedKey[ ] array, then step <b>15</b> <i>d</i>-<b>18</b> sends a note on message for keyNum (with velocity) on sourceChannel to the music software <b>15</b> <i>a</i>-<b>12</b>, and processing finishes. If in step <b>15</b> <i>d</i>-<b>4</b> isEngaged is not TRUE, but instead is FALSE, then step <b>15</b> <i>d</i>-<b>20</b> determines if this is the first key in the armedKey[ ] array. If it is, then step <b>15</b> <i>d</i>-<b>22</b> provides (or turns on) an indicator corresponding to the appropriate live key <b>15</b> <i>a</i>-<b>1</b> thus indicating to a user that this live key is armed with an original performance event that needs to be played, and processing finishes. If it is not the first key in the armedkey[ ] array, then processing finishes.</div>
<div class="description-paragraph">FIG. 15E shows a flow diagram for the service DisArm(keyNum). This service is called for the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>, when an original melody performance note off event <b>15</b> <i>a</i>-<b>2</b> (keyNum) is received that corresponds to the MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>. Mapping to the object is also handled by the melody key map <b>15</b> <i>a</i>-<b>9</b>, as will be described later. Step <b>15</b> <i>e</i>-<b>2</b> will remove keyNum from armedKey[ ] array (if in the array). Step <b>15</b> <i>e</i>-<b>4</b> determines if the isEngaged attribute is set to TRUE for the object. If it is set to TRUE, then step <b>15</b> <i>e</i>-<b>6</b> determines if this is the only key in the armedKey[ ] array. If it is not, then step <b>15</b> <i>e</i>-<b>8</b> sends a note off message for keyNum on sourceChannel to the music software <b>15</b> <i>a</i>-<b>12</b>, and processing finishes. If it is the only key in the armedKey[ ] array, then step <b>15</b> <i>e</i>-<b>12</b> sends a note off message on sourceChannel for keyNum to the music software <b>15</b> <i>a</i>-<b>12</b>. Step <b>15</b> <i>e</i>-<b>14</b> then sends a note on message with velocity on sourceChannel for the defaultKey attribute. This note on message is also sent to the music software <b>15</b> <i>a</i>-<b>12</b> for processing. Step <b>15</b> <i>e</i>-<b>16</b> removes (or turns off) the indicator corresponding to the physical live key <b>15</b> <i>a</i>-<b>1</b>, thus indicating to a user that this live key is not armed with an original performance event that needs to be played. Step <b>15</b> <i>e</i>-<b>17</b> then sets isArmedDriverKey to FALSLE, and processing finishes. Step <b>15</b> <i>e</i>-<b>10</b> (shown by dotted lines) is the optional step mentioned previously when describing FIG. <b>15</b>C. Although not required, this optional step <b>15</b> <i>e</i>-<b>10</b> may be used to update the defaultKey attribute with keyNum (if different). This will allow a note to continue to play even though it has been removed from armedKey[ ] array, and the corresponding indicator for the live key has been removed (or turned off). When optional step <b>15</b> <i>e</i>-<b>10</b> is used, steps <b>15</b> <i>e</i>-<b>12</b> and <b>15</b> <i>e</i>-<b>14</b> are not used. Steps <b>15</b> <i>e</i>-<b>16</b> and <b>15</b> <i>e</i>-<b>17</b>, however, are still used as described previously, and then processing finishes. If in step <b>15</b> <i>e</i>-<b>4</b> isEngaged is not TRUE, but instead is FALSE, then step <b>15</b> <i>e</i>-<b>18</b> determines if this is the only key in the armedKey[ ] array. If it is, then step <b>15</b> <i>e</i>-<b>20</b> removes (or turns off) the indicator corresponding to the physical live key <b>15</b> <i>a</i>-<b>1</b> as described previously. Step <b>15</b> <i>e</i>-<b>22</b> sets isArmedDriverKey to FALSE, and processing finishes. If it is not the only key in the armedKey[ ] array in step <b>15</b> <i>e</i>-<b>18</b>, then processing finishes. The net effect of all of the previously described, is that in response to a live key <b>15</b> <i>a</i>-<b>1</b> being received (and Engaging a MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>) a previously recorded key <b>15</b> <i>a</i>-<b>2</b> (having armed the MelodyPerformerKey object) will be played (or presented to the music software object <b>15</b> <i>a</i>-<b>12</b> as an original performance), and the live keys that are armed will be indicated to a user.</div>
<div class="description-paragraph">Table 21 lists the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> attributes and services. The attribute melodyPerformerOctave[ ] identifies the 1<sup>st </sup>key of the octave where a user wishes to perform a previously recorded performance. It may also hold the last key if desired. It should be noted that, although the term melody performer “octave” is used to describe the present invention, a variety of different key ranges may be used for performance. MelodyPerformerKey[12] is an array of 12 instances of the MelodyPerformerKey objects <b>15</b> <i>a</i>-<b>7</b> as described previously, one instance for each key in one octave. The melody key map <b>15</b> <i>a</i>-<b>9</b> maps or identifies which MelodyPerformerKey[ ] instance should be armed with a given original melody performance key <b>15</b> <i>a</i>-<b>2</b>. The present invention maps all C keys (relative key <b>0</b>, see FIG. 2) to the 1<sup>st </sup>MelodyPerformerKey instance, all C sharps to the 2<sup>nd </sup>instance etc., although a variety of mapping scenarios may be used. One example of another mapping scenario is to encode a MelodyPerformerKey object identifier into each original note on/off event <b>15</b> <i>a</i>-<b>2</b>. These identifiers may then be read by the mapping service to provide the desired routing to a MelodyPerformerKey object <b>15</b> <i>a</i>-<b>7</b>. This will allow the melody key map <b>15</b> <i>a</i>-<b>9</b> to be optimized for the particular original melody performance <b>15</b> <i>a</i>-<b>2</b> to be effected. Various other routing techniques, including various other on-the-fly routing techniques, may be used in an embodiment of the present invention and will become apparent to those of ordinary skill in the art. The illustrative mapping scenario described herein, is done by dividing an original melody performance key by 12 and letting the remainder (modulus) identify the instance of MelodyPerformerKey[ ] <b>15</b> <i>a</i>-<b>7</b> that should be armed with that original melody performance key. This enables the original melody performance <b>15</b> <i>a</i>-<b>2</b> to be performed from a reduced number of keys. The service SetMelodyPerformerOctave(firstNoteNum) establishes which octave will play the original melody performance by setting melodyPerformerOctave[ ] attribute to firstNoteNum, and then by setting the default key and original default key of each MelodyPerformerKey[ ] instance <b>15</b> <i>a</i>-<b>7</b> to be the actual keys of the octave. This is done by calling the SetDefaultKey(n) service of each MelodyPerformerKey[ ] instance 5<i>a</i>-<b>7</b>. The absolute key numbers of the melody performer octave are stored in an attribute called melodyPerfOctaveArray[12]. In this example, the array would hold the 12 absolute key numbers of the melody performer octave, one for each instance of the 12 MelodyPerformerKey objects <b>15</b> <i>a</i>-<b>7</b>. The service RcvOriginalMelodyPerformance(keyEvent) receives the previously recorded original melody performance <b>15</b> <i>a</i>-<b>2</b> currently designated for the channel. All non note on/off messages (pitch bend, etc.) may be allowed to pass directly to the music software <b>15</b> <i>a</i>-<b>12</b> on sourceChannel, depending on designer preference. It should be noted that all current status messages are passed directly to the music software <b>15</b> <i>a</i>-<b>12</b> during a performance (see Table 17 for description of current status). Original melody performance <b>15</b> <i>a</i>-<b>2</b> note on message for note number x will result in calling the Arm(x) service of MelodyPerformerKey[y] where y is obtained from the melody key map attribute <b>15</b> <i>a</i>-<b>9</b> (in the present invention, y=x % 12 where % is the modulus or “remainder from division” operator). For example, note number 24 calls Arm(24) of MelodyPerformerKey[0], while note number 30 calls Arm(30) of MelodyPerformerKey[6]. Similarly, note off message for note number x will result in calling the DisArm(x) service of MelodyPerformerKey[y] where y is determined the same as for note on messages. When a MelodyPerformerKey 15<i>a</i>-<b>7</b> is armed with a previously recorded note on event, then playing the appropriate live key <b>15</b> <i>a</i>-<b>1</b> will result in that previously recorded note on event being replayed. The attribute sourceChannel holds the default channel for sending all melody section messages to the music software <b>15</b> <i>a</i>-<b>12</b>. The sourceChannel attribute for the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> and the sourceChannel attribute for the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b>, are set to be the same in the particular embodiment of the present invention described herein. Attribute isDriverOctave, described later, is set to TRUE when the melody performer octave is designated as a driver octave and is set to FALSE when it is not. These attributes are initialized with sourceChannel=cnl, and isDriverOctave=FALSE.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 21</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Melody Performance Method Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. melodyPerformerOctave[]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. MelodyPerformerKey[12]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. Melody Key Maps</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. melodyPerformerOctaveArray[12]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. sourceChannel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. isDriverOctave</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetMelodyPerformerOctave(firstNoteNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RcvOriginalMelodyPerformance(keyEvent);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">Tables 22 and 23</div>
<div class="description-paragraph">Table 22 shows the six attributes of the ChordPerformerKey object <b>15</b> <i>a</i>-<b>8</b> and listing of services. Table 23 lists the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> attributes and services. The Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> is carried out using essentially the same processing technique as the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b>. The services shown by FIGS. 15B through 15E are duplicated except with minor differences. The illustrative chord key map <b>15</b> <i>a</i>-<b>6</b> is also carried out the same as the melody key map <b>15</b> <i>a</i>-<b>9</b>, thus allowing all chords originally performed as 1-4-5, etc. to be played back respectively from a 1-4-5 . . . input controller. Therefore only the processing differences for the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> shall be described below. All of the ChordPerformerKey objects <b>15</b> <i>a</i>-<b>8</b> are armed in each instance with a designated BlackMelodyKey colorKeyNum=4 (i.e. absoluteKeyNums 46, 58, etc., see FIG. <b>2</b>). These absoluteKeyNums will always output the current chord. The original chord performance input <b>15</b> <i>a</i>-<b>5</b> is used to determine which ChordPerformerKey <b>15</b> <i>a</i>-<b>8</b> to arm with the designated BlackMelodyKey. For example, using the previously described mapping formula, note number 24 calls Arm(58) of ChordPerformerKey[0], while note number 30 calls Arm(58) of ChordPerformerKey[6]. Note off message for note number x will result in calling the DisArm(58) service of ChordPerformerKey[y]. Key number 58 is the designated BlackMelodyKey in this example. Although not required, optional steps <b>15</b> <i>c</i>-<b>10</b> and <b>15</b> <i>e</i>-<b>10</b> of FIGS. 15C and 15E (shown by dotted lines) may also be used in the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b>. They are carried out using the same steps as described previously by the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b>.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 22</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">ChordPerformerKey Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. isEngaged</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. defaultKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. originalDefaultKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. velocity</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. armedKey[64]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. isArmedDriverKey</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. Engage(velocity);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. Disengage();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. Arm(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. DisArm(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. SetDefaultKey(keyNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. IsDriverKeyArmed();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">7. IsArmedDriverKeyPressed();</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 23</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Performance Method Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. chordPerformerOctave[]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. ChordPerformerKey[12]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. Chord Key Maps</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. chordPerformerOctaveArray[12]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">5. sourceChannel</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">6. isDriveOctave</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. SetChordPerformerOctave(firstNoteNum);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. RcvOriginalChordPerformance(keyEvent);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIG. 15F shows a flow diagram for the service RcvLiveKey(keyEvent) listed in Table 24. This service is common to both the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> and Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> for the channel, and is called when the performance feature is on for the channel (i.e. mode&gt;0). All live key inputs received for a channel where mode=0, are processed in the usual manner by the music software <b>15</b> <i>a</i>-<b>12</b>, as described herein. The service of FIG. 15F responds to live key inputs <b>15</b> <i>a</i>-<b>1</b> for the channel and provides key gating <b>15</b> <i>a</i>-<b>3</b>, <b>15</b> <i>a</i>-<b>4</b>, and <b>15</b> <i>a</i>-<b>10</b>. The live key inputs for the channel <b>15</b> <i>a</i>-<b>1</b> are received from an input buffer that stores many received events in the order they were received (see Table 18 for description of input buffering). The keyEvent contains the status, note number, channel and velocity information. Step <b>15</b> <i>f</i>-<b>6</b> determines if a key on or key off is input. If a key on or key off is not input (but instead pitch bend, etc.), then step <b>15</b> <i>f</i>-<b>9</b> passes the input directly to the music software <b>15</b> <i>a</i>-<b>12</b> on sourceChannel (either chord method sourceChannel or melody method sourceChannel, which are the same), and processing finishes. If a key on or key off is input in step <b>15</b> <i>f</i>-<b>6</b>, then step <b>15</b> <i>f</i>-<b>12</b> determines if the key (MIDI note number) is less than the firstMldyKeyPerf[ ] setting for the channel <b>15</b> <i>a</i>-<b>3</b> (see Table 26 for description of firstMldyKeyPerf[ ]). If it is less, then step <b>15</b> <i>f</i>-<b>14</b> (key gate <b>15</b> <i>a</i>-<b>10</b>) determines if the note number is in the chordPerfOctaveArray[ ]. If it is in the chordPerfOctaveArray[ ], then it is processed by the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> in step <b>15</b> <i>f</i>-<b>16</b>. Note on messages that are in the chordPerfOctaveArray[ ], result in calling the Engage(v) service of ChordPerformerKey[r] <b>15</b> <i>a</i>-<b>8</b> where v is the velocity and r is the relative key number of the received note on. Similarly note off messages that are in the chordPerfOctaveArray[ ], result in calling the Disengage( ) service of ChordPerformerKey[r] <b>15</b> <i>a</i>-<b>8</b> where r is the relative key number of the received note off. It should be noted that in some embodiments of the present invention, r may be the position in the chordPerfOctaveArray[ ] of the received note number. This may be the case when the chordPerfOctaveArray[ ] holds absolute key numbers which are not in consecutive order, using one example. Normally in a case such as this, a defaultKey and an originalDefaultKey will be set to be the same as their corresponding absolute key number in the chordPerfOctaveArray[ ]. If the note number is not in the chordPerfOctaveArray[ ], then step <b>15</b> <i>f</i>-<b>18</b> passes the note on/off message directly to the music software <b>15</b> <i>a</i>-<b>12</b> on the chord method sourceChannel, and processing finishes. If in step <b>15</b> <i>f</i>-<b>12</b> it is determined that the key (MIDI note number) is greater than or equal to the firstMldyKeyPerf[ ] setting <b>15</b> <i>a</i>-<b>3</b> for the channel, then step <b>15</b> <i>f</i>-<b>20</b> (key gate <b>15</b> <i>a</i>-<b>4</b>) determines if the note number is in the melodyPerfOctaveArray[ ]. If it is in the melodyPerfOctaveArray[ ], then it is processed by the Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> in step <b>15</b> <i>f</i>-<b>22</b>. Note on messages that are in the melodyPerfOctaveArray[ ], result in calling the Engage(v) service of MelodyPerformerKey[r] <b>15</b> <i>a</i>-<b>7</b> where v is the velocity and r is the relative key number of the received note on. Similarly note off messages that are in the melodyPerfOctaveArray[ ], result in calling the Disengage( ) service of MelodyPerformerKey[r] <b>15</b> <i>a</i>-<b>7</b> where r is the relative key number of the received note off. Again, in some embodiments of the present invention r may be the position in the melodyPerfOctaveArray[ ] of the received note number, as described previously. If the note number is not in the melodyPerfOctaveArray[ ], then step <b>15</b> <i>f</i>-<b>24</b> passes the note on/off message directly to the music software <b>15</b> <i>a</i>-<b>12</b> on the melody method sourceChannel, and processing finishes.</div>
<div class="description-paragraph">FIG. <b>15</b>G and Tables 24 and 25</div>
<div class="description-paragraph">The performance mode settings are common to both the Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> and Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> for the channel. FIG. 15G shows a flow diagram for the service SetMode(newMode) listed in Table 24. This service is called when the mode is set for the channel. Table 25 shows possible mode setting combinations according to one embodiment of the present invention. The mode settings may be simplified or expanded as desired in an embodiment of the present invention. Step <b>15</b> <i>g</i>-<b>2</b> performs the initialization by setting attributes to their initialization values (and setting mode=0 for cnl), removing or turning off any indicators, turning off notes, resetting flags, etc. in the usual manner. No original performance data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> should be designated for the channel in step <b>15</b> <i>g</i>-<b>2</b>. Step <b>15</b> <i>g</i>-<b>4</b> then determines if newMode is equal to 0. If it is, then step <b>15</b> <i>g</i>-<b>8</b> resets the firstMldKey[ ] setting for the channel, if needed, using the originalFirstMldyKey[ ] setting for the channel, and processing finishes (see Table 26 for description of originalFirstMldyKey[ ]). Optional step <b>15</b> <i>g</i>-<b>6</b> (shown by dotted lines) may be used when multiple performance channels are used, as will be described later. If in step <b>15</b> <i>g</i>-<b>4</b>, newMode is not equal to 0, but instead is greater than zero, then step <b>15</b> <i>g</i>-<b>10</b> sets the firstMldyKey[ ] setting for the channel to 0, if not already. Step <b>15</b> <i>g</i>-<b>12</b> then sets all modes for the channel according to the flow diagrams shown in FIGS. 15H, <b>15</b>I, and <b>15</b>J and a selected mode setting combination shown in Table 25. Step <b>15</b> <i>g</i>-<b>16</b> then determines the current mapping scenario(s) for the channel. In one presently preferred embodiment of the present invention, a plurality of stored mapping scenarios are made available to a user. A mapping scenario will include a PerformerKey[x] array of x instances of the PerformerKey objects. It will also include a performerOctaveArray[x] which includes x absolute key numbers of the performer octave. It may also include a performerOctave[ ] attribute which includes the lowest absolute key number and highest absolute key number of the performer octave. It will also include one or more mapping services for mapping the stored original performance to the x instances of the PerformerKey objects. Normally when performanceMode=1 (chord performance only), a user may choose to effect a chord performance using any number of input controllers (up to the entire keyboard range) as one example. When performanceMode=2 (melody performance only), a user may effect a melody performance using any number of input controllers (up to the entire keyboard range) as one example. If performanceMode=3 (chord performance and melody performance), then the mapping scenarios available for the chord performance and melody performance are determined by the firstMldyKeyPert[ ] setting z <b>15</b> <i>a</i>-<b>3</b> for the channel. A designer may know the key ranges and the firstMldyKeyPerf[ ] setting for the sending instrument. Therefore, all mapping scenarios may be predetermined and stored as desired. If not, optional step <b>15</b> <i>g</i>-<b>14</b> (shown by dotted lines) may be used. A user may be prompted to press the lowest key on the instrument, which is stored in the attribute lowestKey x, then the highest key on the instrument which is stored in the attribute highestKey y. The firstMldyKeyPerf[ ] setting z <b>15</b> <i>a</i>-<b>3</b> for the channel may then be determined or be made user-selectable. Then, Y−X+1=[totalKeysAvailable], Z−X=[chordKeysAvailable], Y−Z+1=[melodyKeysAvailable], chordSectionRange=X through Z−1, and melodySectionRange=Z through Y. These values may be used to allow appropriate mapping scenarios to be made available for the particular sending instrument, thus allowing a performance to be optimized for the instrument. For example, the chordKeysAvailable may be 24. Chord performance bank <b>24</b>A may then be used for providing chord mapping scenarios as one example. Chord performance bank <b>24</b>A may hold a plurality of chord mapping scenarios which allow a user to effect the chord performance using up to 24 keys. It should be rioted that the absolute key numbers in chordPerfOctaveArray[ ], chordPerfOctave[ ] attribute, and default keys for the ChordPerformerKey objects, are normally adjusted so as to be note numbers in the chordSectionRange (X through Z−1). Similarly, melodyKeysAvailable may be 37. Melody performance bank <b>37</b>A may then be used for providing melody mapping scenarios as one example. Melody performance bank <b>37</b>A may hold a plurality of melody mapping scenarios which allow a user to effect the melody performance using up to 37 keys. It should be noted that the absolute key numbers in melodyPerfOctaveArray[ ], melodyPerfOctave[ ] attribute, and default keys for the MelodyPerformerKey objects, are normally adjusted so as to be note numbers in the melodySectionRange (Z through Y). Each performance bank (i.e. <b>24</b>A, <b>24</b>B, <b>24</b>C, etc.) may include different sets of services (FIGS. 15B through 15E and mapping service(s)) in an embodiment of the present invention. A performance bank may be designated based on the stored original performance data to be performed, as one example, or designated based on one or more particular mode settings for the channel. The optional automatic optimization process <b>15</b> <i>g</i>-<b>20</b> and <b>15</b> <i>g</i>-<b>22</b> (shown by dotted lines) may also be used to designate a particular performance bank, if desired.</div>
<div class="description-paragraph">Optional steps <b>15</b> <i>g</i>-<b>18</b>, <b>15</b> <i>g</i>-<b>20</b>, and <b>15</b> <i>g</i>-<b>22</b> (shown by dotted lines) of FIG. 15G may be used for performance optimization. A performance may be optimized for the channel or for all channels in steps <b>15</b> <i>g</i>-<b>20</b> and <b>15</b> <i>g</i>-<b>22</b>. All performance settings for all channels may be stored as a new setup in step <b>15</b> <i>g</i>-<b>22</b>. The service shown in FIG. 15G is then called for each channel, and possibly new settings are made and new mapping scenarios are determined for selected channels, based on the stored setup information. A user may save the stored setup such as to disk, etc. for later recall. One example of an automatic optimization process, is to encode PerformerKey object identifiers into one or more original performance parts (i.e. <b>15</b> <i>a</i>-<b>2</b>). The identifiers are read by the mapping service for routing original performance input to the PerformerKey objects during a performance. Matching identifiers are encoded into each note on/corresponding note off event in the original performance part (i.e. <b>15</b> <i>a</i>-<b>2</b>). The value of the identifier to be encoded into each specific note on/corresponding note off pair, may be based on the interval x between a note on event and the next note on event in the sequence, using one example. Note on events with intervals of x or less between them in a particular segment of stored notes, may be given a selected PerformerKey object identifier. This encoding may be used to allow a difficult to play or “quick” passage to be routed to a specific PerformerKey during the performance for ease-of-play. A note on event in the original performance part (i.e. <b>15</b> <i>a</i>-<b>2</b>), where the interval between the note on event and the previous note on event is greater than x, and the interval between the note on event and the next note on event is greater than x, may be encoded (along with its corresponding note off event) with a designated identifier which allows routing to a PerformerKey to be handled by the mapping service (i.e. based on a formula, etc.), as described herein. The previously described method allows one or more notes in a difficult to play passage to be automatically sounded during a performance. This effect may also be accomplished using various on-the-fly techniques. As one example of an on-the-fly technique, the RcvOriginalMelodyPerformance(keyEvent) service of Table 21 may be modified to allow automatic note sounding to be provided on-the-fly in a performance. In steps not shown, a timer is reset (if needed) and started when a first original performance note on event is received in the performance (i.e. <b>15</b> <i>a</i>-<b>2</b>). Each time a subsequent original performance note on event is received during the performance (i.e. <b>15</b> <i>a</i>-<b>2</b>), the current time of the timer is stored in an attribute called autoNoteTimer, then the timer is reset and started again. For original performance note on events received where autoNoteTimer is less than x, a note on message is automatically sent for keyNum on sourceChannel to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input, and keyNum is stored in an attribute called autoNotesArray[ ]. The processing of FIG. 15A<b>15</b> <i>a</i>-<b>9</b> and <b>15</b> <i>a</i>-<b>7</b>, and FIG. 15D is not carried out for keyNum. For original performance note on events received where autoNoteTimer is greater than or equal to x, processing is carried out normally as described herein (see FIG. 15A<b>15</b> <i>a</i>-<b>9</b> and 15<i>a</i>-<b>7</b>, and FIG. <b>15</b>D). Each time an original performance note off event is received in the performance (i.e. <b>15</b> <i>a</i>-<b>2</b>), the autoNotesArray[ ] is first checked to see if keyNum is in the array. If it is in the array, then a note off message is automatically sent for keyNum on sourceChannel to the music software <b>15</b> <i>a</i>-<b>12</b> for processing as an original performance input, and keyNum is removed from the autoNotesArray[ ]. The processing of FIG. 15A<b>15</b> <i>a</i>-<b>9</b> and <b>15</b> <i>a</i>-<b>7</b>, and FIG. 15E is not carried out for keyNum. If keyNum is not in the autoNotesArray[ ], then processing is carried out normally as described herein (see FIG. 15A<b>15</b> <i>a</i>-<b>9</b> and <b>15</b> <i>a</i>-<b>7</b>, and FIG. <b>15</b>E). The timer method, as well as the attributes of the previously described on-the-fly method, may optionally be used only for routing selected original performance input (i.e. <b>15</b> <i>a</i>-<b>2</b>) to a specific PerformerKey during a performance, thus allowing processing to function normally as described herein, while allowing difficult to play passages to be performed from a specific indicated key. Each of the previously described automatic note sounding methods will allow musical data containing note-identifying information, to be automatically provided for sounding one or more notes in a given performance, wherein the musical data is automatically provided based on the rate at which the one or more notes are to be sounded in the given performance. This holds true even in embodiments where PerformerKey are armed with actual stored processed performance note events, as described herein in the modifications section, using one example. It should be noted that a previously described on-the-fly method, may be combined with an embodiment of the optional tempo control feature of FIG. 15K, described later, to provide a user with further creative control in a given performance. When these two are combined, a user may actually be allowed to vary the amount of the automatically provided musical data in the given performance, based on the rate at which the user performs one or more keys. Many variations and/or combinations of the previously described automatic note sounding methods may be used in an embodiment of the present invention, and will become apparent to those of ordinary skill in the art.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 24</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Performance and Melody Performance Attributes and Services</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. mode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. performanceMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">3. tempoControlMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">4. optionalMode</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Services;</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. RcvLiveKey(keyEvent);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. SetMode(newMode);</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 25</td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Chord Performance and Melody Performance Mode Setting Combinations</td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="4" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Mode</td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Index</td>
<td class="description-td" morerows="0" valign="top">Performance Mode</td>
<td class="description-td" morerows="0" valign="top">Tempo Control Mode</td>
<td class="description-td" morerows="0" valign="top">Optional Mode</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="4" morerows="0" nameend="4" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 0</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 1</td>
<td class="description-td" morerows="0" valign="top">1 (chord perf. only)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 2</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 3</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">1 (chord driven)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 4</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 5</td>
<td class="description-td" morerows="0" valign="top">2 (melody perf. only)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 6</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 7</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">2 (melody driven)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 8</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> 9</td>
<td class="description-td" morerows="0" valign="top">3 (chord/melody perf.)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">10</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">11</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">12</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">3 (BYPASS</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">chord proc.)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">13</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">0</td>
<td class="description-td" morerows="0" valign="top">4 (BYPASS</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">mel. proc.)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">14</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">1 (chord driven)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">15</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">16</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">17</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">1</td>
<td class="description-td" morerows="0" valign="top">4 (BYPASS</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">mel. proc.)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">18</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">2 (melody driven)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">19</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">20</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">21</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">2</td>
<td class="description-td" morerows="0" valign="top">3 (BYPASS</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">chord proc.)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">22</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">3 (chord/melody driven)</td>
<td class="description-td" morerows="0" valign="top">0 (off)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">23</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">1 (indicators</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/chord)</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">24</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">3</td>
<td class="description-td" morerows="0" valign="top">2 (indic.</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">only/melody)</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="4" morerows="0" nameend="4" namest="1" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">FIG. 15H shows a flow diagram for setting the performanceMode for the channel. FIG. 15A will be referred to while describing the flow diagram. If in step <b>15</b> <i>h</i>-<b>8</b> performanceMode=0 (off for cnl), then processing finishes. If performanceMode=1 in step <b>15</b> <i>h</i>-<b>10</b>, then step <b>15</b> <i>h</i>-<b>12</b> sets firstMldyKeyPerf[ ] to 128 for cnl if not already. Step <b>15</b> <i>h</i>-<b>14</b> then designates stored chord performance data <b>15</b> <i>a</i>-<b>5</b> to be used for performance, and processing finishes. It should be noted that this designated stored performance data <b>15</b> <i>a</i>-<b>5</b> may be predetermined or user-selectable. If performanceMode=2 in step <b>15</b> <i>h</i>-<b>16</b>, then step <b>15</b> <i>h</i>-<b>17</b> sets firstMldyKeyPerf[ ] to 0 for cnl if not already. Step <b>15</b> <i>h</i>-<b>18</b> then designates stored melody performance data <b>15</b> <i>a</i>-<b>2</b> to be used for performance as described previously, and processing finishes. If performanceMode=3 in step <b>15</b> <i>h</i>-<b>20</b>, then step <b>15</b> <i>h</i>-<b>21</b> sets firstMldyKeyPerf[ ] to Z for cnl if not already (Z may be predetermined or user-selectable). Step <b>15</b> <i>h</i>-<b>22</b> then designates stored melody performance data <b>15</b> <i>a</i>-<b>2</b> and stored chord performance data <b>15</b> <i>a</i>-<b>5</b> to be used for performance as described previously, and processing finishes. Step <b>15</b> <i>h</i>-<b>24</b> shows a possible expansion of performance modes. One example of possible expansion, is to slightly modify the system to allow more than one Melody Performance Method <b>15</b> <i>a</i>-<b>18</b> for the channel, and more than one Chord Performance Method <b>15</b> <i>a</i>-<b>16</b> for the channel, etc. Another example of possible expansion is to provide a simplified “indicators only” mode which may be used to indicate a performance as originally played. The original performance data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> would then be used only for providing indicators on the instrument. All other processing by the performance methods <b>15</b> <i>a</i>-<b>16</b> and <b>15</b> <i>a</i>-<b>18</b> would be bypassed, and live key inputs <b>15</b> <i>a</i>-<b>1</b> would be passed directly to the music software <b>15</b> <i>a</i>-<b>12</b>.</div>
<div class="description-paragraph">FIG. 15I shows a flow diagram for setting the tempoControlMode for the channel. Tempo control is an optional feature described later by FIG. <b>15</b>K. If in step <b>15</b> <i>i</i>-<b>2</b> tempoControlMode=0 (off for cnl), then processing finishes. If tempoControlMode=1 in step <b>15</b> <i>i</i>-<b>6</b>, then step <b>15</b> <i>i</i>-<b>8</b> sets isDriverOctave to TRUE for he chord performer octave and processing finishes. If tempoControlMode=2 in step <b>15</b> <i>i</i>-<b>10</b>, then step <b>15</b> <i>i</i>-<b>12</b> sets isDriverOctave to TRUE for the melody performer octave and processing finishes. If tempoControlMode=3 in step <b>15</b> <i>i</i>-<b>14</b>, then step <b>15</b> <i>i</i>-<b>16</b> sets isDriverOctave to TRUE for both the melody performer octave and the chord performer octave, and processing finishes. Step <b>15</b> <i>i</i>-<b>18</b> shows a possible expansion of tempo control modes.</div>
<div class="description-paragraph">FIG. 15J shows an overview in the form of a flow diagram for setting various optional modes which may be used in an embodiment of the present invention, although not required. FIG. 15A will be referred to while describing the overview. If in step 15<i>j</i>-<b>2</b> optMode=0 (off for cnl), then processing finishes. If optMode=1 in step <b>15</b> <i>j</i>-<b>4</b>, then note on/off messages are not generated and sent when arming and disarming ChordPerformerKey objects as illustrated by <b>15</b> <i>j</i>-<b>6</b>. To accomplish this, the services Arm and DisArm (FIGS. 15D and 15E) are modified not to send any note on/off messages. Non note on/off messages (pitch bend, etc.) in the original chord performance <b>15</b> <i>a</i>-<b>5</b> are not sent to the music software <b>15</b> <i>a</i>-<b>12</b>. Live chord key events in the chord performer octave are used only to set the isEngaged attribute, and then are passed directly to the music software <b>15</b> <i>a</i>-<b>12</b> on chord method sourceChannel, as illustrated by <b>15</b> <i>j</i>-<b>8</b>. Note on/off messages are not generated and sent by the Engage and Disengage services (FIGS. <b>15</b>B and <b>15</b>C/requires minor modification to these services). All live chord key events not in the chord performer octave are passed directly to the music software <b>15</b> <i>a</i>-<b>12</b> on chord method sourceChannel. If optionalMode=2 in step 15<i>j</i>-<b>12</b>, then note on/off messages are not generated and sent when arming and disarming MelodyPerformerKey objects as illustrated by <b>15</b> <i>j</i>-<b>14</b>. To accomplish this, the services Arm and DisArm (FIGS. 15D and 15E) are modified not to send any note on/off messages. Non note on/off messages (pitch bend, etc.) in the original melody performance <b>15</b> <i>a</i>-<b>2</b> are not sent to the music software <b>15</b> <i>a</i>-<b>12</b>. Live melody key events in the melody performer octave are used only to set the isEngaged attribute, and then are passed directly to the music software <b>15</b> <i>a</i>-<b>12</b> on melody method sourceChannel, as illustrated by <b>15</b> <i>j</i>-<b>16</b>. Note on/off messages are not generated and sent by the Engage and Disengage services (FIGS. <b>15</b>B and <b>15</b>C/requires minor modification to these services). All live melody key events not in the melody performer octave are passed directly to the music software <b>15</b> <i>a</i>-<b>12</b> on melody method sourceChannel. If optionalMode=3 in step <b>15</b> <i>j</i>-<b>20</b>, then all Chord Performance Method processing <b>15</b> <i>a</i>-<b>16</b> (including indicators) is bypassed as illustrated by <b>15</b> <i>j</i>-<b>22</b>. All live chord key events are passed directly to the music software on chord method sourceChannel as illustrated by <b>15</b> <i>j</i>-<b>24</b>. If optionalMode=4 in step <b>15</b> <i>j</i>-<b>26</b>, then all Melody Performance Method processing <b>15</b> <i>a</i>-<b>18</b> (including indicators) is bypassed as illustrated by <b>15</b> <i>j</i>-<b>28</b>. All live melody key events are passed directly to the music software on melody method sourceChannel as illustrated by <b>15</b> <i>j</i>-<b>30</b>. Step <b>15</b> <i>j</i>-<b>32</b> shows a possible expansion of optional modes.</div>
<div class="description-paragraph">Table 26 shows the performance method attributes common to all performance channels. This table will be described while referring to FIG. <b>15</b>A. The attribute originalFirstMldyKey[16] holds the current firstMldyKey[16] setting for each channel while the performance feature is off for all channels (i.e. mode=0 for all channels, See Table 16 for description of firstMldyKey[16] attribute). The firstMldyKey[16] setting for each channel will be set to 0, if not already, when the performance feature is turned on for a channel (i.e. mode&gt;0 for a channel). The originalFirstMldyKey[16] setting for each channel is not changed when mode is set greater than 0 for a channel. The originalFirstMldyKey[16] settings may then be used to reset the firstMldyKey[16] settings back to their original state when the performance feature is turned off for all channels (i.e. mode=0 for all channels). The attribute firstMelodyKeyPerformance[16] <b>15</b> <i>a</i>-<b>3</b> identifies the first melody key for each performance channel. All live key events <b>15</b> <i>a</i>-<b>1</b> for the performance channel which are less than the firstMldyKeyPerf[ ] setting for the channel, are interpreted as a chord section performance. All live key events <b>15</b> <i>a</i>-<b>1</b> for the performance channel which are greater than or equal to the firstMldyKeyPerf[ ] setting for the channel, are interpreted as a melody section performance.</div>
<div class="description-paragraph">
<tables>
<patent-tables colsep="0" frame="none" rowsep="0">
<table align="left" class="description-table" cols="1" colsep="0" rowsep="0" width="100%">
<thead valign="bottom">
<tr class="description-tr">
<td class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top">TABLE 26</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top">Performance Method Attributes (common to all performance channels)</td>
</tr>
<tr class="description-tr">
<td align="center" class="description-td" colspan="1" morerows="0" nameend="1" namest="1" rowsep="1" valign="top"> </td>
</tr>
</thead>
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
</tr>
</tbody></table>
<table align="left" class="description-table" cols="2" colsep="0" rowsep="0" width="100%">
<tbody><tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">Attributes:</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">1. originalFirstMldyKey[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td class="description-td" morerows="0" valign="top">2. firstMelodyKeyPerformance[16]</td>
</tr>
<tr class="description-tr">
<td class="description-td" morerows="0" valign="top"> </td>
<td align="center" class="description-td" colspan="2" morerows="0" nameend="1" namest="OFFSET" rowsep="1" valign="top"> </td>
</tr>
</tbody></table>
</patent-tables>
</tables>
</div>
<div class="description-paragraph">The previously described performance methods of the present invention may be used on multiple performance channels. Tables 20 through 25 as well as the performance processing shown by FIGS. 15A through 15J may simply be duplicated for each performance channel. The service of FIG. 15G may be modified as follows, if desired, when multiple performance channels are used. Optional step <b>15</b> <i>g</i>-<b>6</b> of FIG. 15G (shown by dotted lines), will determine if mode=0 for all channels. If mode=0 for all channels, then step <b>15</b> <i>g</i>-<b>8</b> will reset the firstMldyKey[ ] settings back to their original state, if needed, using the originalFirstMldyKey[16] settings (see Table 26), and processing finishes. Step <b>15</b> <i>g</i>-<b>10</b> will set the firstMldyKey[ ] setting for each channel to 0, if not already, then processing continues to step <b>15</b> <i>g</i>-<b>12</b> as before. An embodiment of the present invention may be optimized for single user performance, or for simultaneous multi-user performance. Each user may select one or more given performance parts, thus allowing multiple users to cumulatively effect a given performance, possibly along with stored playback tracks. At least one user in the group may perform in bypassed mode as described herein, thus allowing traditional keyboard play, drum or “percussion” play (possibly along to indications), etc. An embodiment of the present invention may allow one or more users to perform an original user composition using dynamically provided indicators. An original user composition is defined herein to include a composition representative at least in part of an original work, wherein at least a portion of the original work was originally played and recorded by one or more users using a fixed-location type musical method known in the art. Multiple instances of indication are dynamically provided for each of a plurality of input controllers, for performance of at least a portion of note-identifying information representative of the original work which was originally played and recorded by one or more users using a fixed-location type musical method known in the art. Various other playback tracks, parts, segments etc. may also be included in and one or more possibly indicated in, the performance of the original user composition.</div>
<div class="description-paragraph">FIG. 15K shows a flow diagram for one embodiment of an additional performance feature of the present invention. The method shown allows a user to creatively control the tempo of a performance based on the rate at which a user performs one or more indicated keys. The advanced method described herein provides complete creative tempo control over a performance, even while using the improvisational and mapping capabilities as described herein. This feature is common to all performance channels. However, it may also be used in simplified systems including one instrument systems, etc. What this method does is control the rate at which the indicators are displayed for the live keys <b>15</b> <i>a</i>-<b>1</b>. In the embodiment shown, this is accomplished by controlling the rate at which the stored original performance <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> is received by the performance methods <b>15</b> <i>a</i>-<b>16</b> and <b>15</b> <i>a</i>-<b>18</b> (all channels). Markers are included in the stored original performance <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> at various predetermined intervals in the sequence. The markers may then be used to effectively “step through” the performance at the predetermined intervals. An end-of-performance marker may be included at the end of the longest stored performance to be effected. It should be noted that in a presently preferred embodiment, all marker data is normally stored in a separate storage area than that of the original performance data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b>. When tempoControlMode=1 (chord driven mode), a chord section performance is used to control the tempo. When tempoControlMode=2 (melody driven mode), a melody section performance is used to control the tempo. When tempoControlMode=3 (chord driven and melody driven mode), both a chord section performance and a melody section performance are used to control the tempo. Processing commences after the mode has been set (see FIG. <b>15</b>G), and tempoControlMode is equal to either 1, 2, or 3 (see Table 25 for mode setting combinations). Processing may commence automatically or in response to user-selectable input (i.e. play button on the user interface being selected, etc.). Step <b>15</b> <i>k</i>-<b>2</b> begins by retrieving the stored musical data <b>15</b> <i>a</i>-<b>2</b>, <b>15</b> <i>a</i>-<b>5</b>, and marker data at a predetermined rate. The stored musical data may include notes, intentional musical pauses, rests, etc. Step <b>15</b> <i>k</i>-<b>4</b> arms one or more PerformerKeys in the usual manner until a marker is received. It should be noted that markers are normally stored at intervals in the performance, so as to always allow at least one PerformerKey (where isDriverOctave=TRUE) to be armed before stopping retrieval of the musical data. Step <b>15</b> <i>k</i>-<b>6</b> stops the retrieval of the musical data when the marker is received. Step <b>15</b> <i>k</i>-<b>10</b> determines if an isArmedDriverKey is pressed in an isDriverOctave. This is done by calling the IsArmedDriverKeyPressed( ) service for each instance of PerformerKey[ ] (all channels) where isDriverOctave=TRUE and isArmedDriverKey=TRUE. This service will return True (1) where isDriverOctave=TRUE, isArmedDriverKey=TRUE, and isEngaged=TRUE for the PerformerKey object. It will return False (0) where isDriverOctave=TRUE, isArmedDriverKey=TRUE, and isEngaged=FALSE for the PerformerKey object. Step <b>15</b> <i>k</i>-<b>10</b> effectively performs a continuous scan by calling the IsArmedDriverKeyPressed( ) service repeatedly as necessary until a first value of True (1) is returned for a first PerformerKey. This will indicate that a user has pressed an indicated live key <b>15</b> <i>a</i>-<b>1</b> (isArmedDriverKey=TRUE) which is currently designated as a driver key (isDriverOctave=TRUE). When a value of True (1) is returned, execution then proceeds to step <b>15</b> <i>k</i>-<b>12</b>. Step <b>15</b> <i>k</i>-<b>12</b> retrieves the next segment of stored musical data <b>15</b> <i>a</i>-<b>2</b>, <b>15</b> <i>a</i>-<b>5</b>, and marker data at a predetermined rate. Step <b>15</b> <i>k</i>-<b>18</b> arms one or more PerformerKeys in the usual manner until a next marker is received. Step <b>15</b> <i>k</i>-<b>20</b> stops the retrieval of the musical data when the previously mentioned next marker is received. Step <b>15</b> <i>k</i>-<b>10</b> determines if an isArmedDriverKey is pressed in a driver octave as before, and then processing continues as previously described until there is no more musical data left to retrieve. If end-of-performance markers are used, step <b>15</b> <i>k</i>-<b>14</b> will terminate the performance when an end-of-performance marker is received. Optional step <b>15</b> <i>k</i>-<b>16</b> may be used to change the program at the end of a given performance. This is useful when mapping scenarios are to be changed automatically for the performance, using one example. This may allow the performance to be made progressively harder, improvisational parts to be added and indicated, harmonies to be added, etc. It should be noted that the processing of <b>15</b> <i>k</i>-<b>10</b> may be implemented in a variety of ways. As one example, a counter (initialized with a value of zero) may be used that is common to all performance channels. The counter is incremented where a PerformerKey object (on any channel) is engaged, armed, and isDriverOctave=TRUE, and decremented where a PerformerKey object (on any channel) is changed from this state. Step <b>15</b> <i>k</i>-<b>10</b> may then continuously scan for a counter value which is greater than zero, before continuing retrieval of the musical data <b>15</b> <i>k</i>-<b>12</b> (This requires minor modification to the services shown in FIGS. <b>15</b>B through <b>15</b>E). Those of ordinary skill will recognize that with minor modification, an embodiment of the present invention may allow a user to auto-locate to predetermined points in a performance, which is known in the art. A temporary bypass of the performance feature may also be provided in the performance. A temporary bypass of the performance feature may be used to allow a user to improvise as desired (possibly even initiating chord and scale changes, as described herein), before continuing to advance the performance using the indicated keys. A user may also be allowed to terminate the performance at any time, which is known in the art.</div>
<div class="description-paragraph">Optional steps <b>15</b> <i>k</i>-<b>8</b> and <b>15</b> <i>k</i>-<b>22</b> (shown by dotted lines) may also be used in an embodiment of the present invention. These steps are used to verify that at least one previously described driver key is currently indicated (armed). These optional steps may be useful in an embodiment of the tempo control method which is used to start and stop a common sequencer, for example. However, they are normally not required, especially if the tick count described below is relatively low. In an embodiment of this type, markers are not required. Instead, start and continue commands are sent in steps <b>15</b> <i>k</i>-<b>2</b> and <b>15</b> <i>k</i>-<b>12</b>, respectively. Stop commands are sent in steps <b>15</b> <i>k</i>-<b>6</b> and <b>15</b> <i>k</i>-<b>20</b>. These start and stop commands are internal to the software and do not result in notes being turned off or controllers being reset. When arming data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> is received in step <b>15</b> <i>k</i>-<b>4</b> for a first PerformerKey (where isDriverOctave=TRUE), a tick count, or a timer (not shown) commences. After a predetermined number of ticks, or time has expired, a stop command is then sent in step <b>15</b> <i>k</i>-<b>6</b> to effectively stop retrieval of the musical data. This tick count, or timer method is also carried out in step <b>15</b> <i>k</i>-<b>18</b>. A tick count or timer is especially useful for allowing stored original performance data occurring over a short time frame to arm the appropriate PerformerKey before retrieval of the musical data is stopped. Optional steps <b>15</b> <i>k</i>-<b>8</b> and <b>15</b> <i>k</i>-<b>22</b> are used to call the IsDriverKeyArmedo service for each instance of PerformerKey[ ] (all channels) where isDriverOctave=TRUE. This service will return True (1) where isDriverOctave=TRUE and isArmedDriverKey TRUE for the PerformerKey object. It will return False (0) where isDriverOctave=TRUE and isArmedDriverKey=FALSE for the PerformerKey object. If a value of False (0) is returned for each PerformerKey object, then the next segment of stored musical data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> is retrieved at a predetermined rate. One or more PerformerKeys are armed in the usual manner as described previously and then stopped as before. The IsDriverKeyArmed( ) service is then called again for each instance of PerformerKey[ ] as described previously. Processing continues in this manner until a value of True (1) is returned for a PerformerKey object. Execution then proceeds to step <b>15</b> <i>k</i>-<b>10</b> and processing is carried out in the usual manner. It should be noted that data may also simply be retrieved until the next arming note is received <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> (where isDriverOctave=TRUE) instead of retrieving data as previously described. Many modifications and variations of the start/stop method of the present invention may be used, and will become apparent to those of ordinary skill in the art.</div>
<div class="description-paragraph">A tempo offset table (not shown) may also be stored in memory for use with the previously described tempo control methods of the present invention. This tempo offset table may be used to further improve the tempo control method of the present invention. Using the tempo offset table, a user will be allowed to maintain complete creative control over the tempo of a performance. The tempo offset table includes a plurality of current timer values (i.e. 0.10 seconds, 0.20 seconds, 0.30 seconds, etc.) each with a corresponding tempo offset value (i.e. positive or negative value), for use with the attributes described below. An attribute called originalTempoSetting holds the original tempo of the performance when first begun. An attribute called currentTempoSetting holds the current tempo of the performance. An attribute called currentTimerValue holds the time at which an armed driver key is pressed in a driver octave as determined in step <b>15</b> <i>k</i>-<b>10</b>. These attributes are initialized with currentTimerValue=0, originalTempoSetting=x, and currentTempoSetting=x, where x may be predetermined or selected by a user. A timer (not shown) is reset (if needed) and started just prior to step <b>15</b> <i>k</i>-<b>10</b> being carried out. When in step <b>15</b> <i>k</i>-<b>10</b> it is determined that an armed driver key is pressed in a driver octave as described previously, the current time of the timer is stored in the attribute currentTimerValue. The currentTimerValue is then used to look up its corresponding tempo offset in the tempo offset table, described previously. It should be noted that “retrieval rates” or “actual tempo values” may also be stored in this table, instead of using tempo offsets. A different table may also be used for each particular song tempo if desired, or for a user with slower/faster reflexes, etc. Step <b>15</b> <i>k</i>-<b>12</b> then uses this corresponding tempo offset value of the previously mentioned currentTimerValue to determine the current tempo setting of the performance. This is done by adding the tempo offset value to the currentTempoSetting value. This determined tempo is then stored in the currentTempoSetting attribute, replacing the previous value. The currentTempoSetting is then used in step <b>15</b> <i>k</i>-<b>12</b> to control the rate at which original performance data <b>15</b> <i>a</i>-<b>2</b> and <b>15</b> <i>a</i>-<b>5</b> is retrieved or “played back”. This will allow a user to creatively increase or decrease the tempo of a given performance based on the rate at which a user performs one or more indicated keys in a driver octave. Normally, lower currentTimerValues will increase the tempo (i.e. using positive tempo offsets), higher currentTimerValues will decrease the tempo (i.e. using negative tempo offsets), and currentTimerValues in between the lower and higher currentTimerValues will have no effect on the tempo (i.e. using a +0 tempo offset). This will allow indicators to be displayed in accordance with an intended song tempo, while still allowing a user to creatively vary the rate at which indicators are displayed during a performance. Selected currentTimerValues may also use the originalTempoSetting or currentTempoSetting for setting the new currentTempoSetting, if desired. This may be useful when the currentTimerValue is very high, for example, indicating that a user has paused before initiating or resuming a performance. Also, a +0 tempo offset may be used if the currentTimerValue is very low, for example. This may be used to allow certain automatically sounded passages to be done so at a consistent tempo rate. Many modifications and variations to the previously described may be made, and will become apparent to those of ordinary skill in the art.</div>
<div class="description-paragraph">In one embodiment of the performance methods described herein, a CD or other storage device may be used for effecting a performance. Some or all of the performance information described herein, may be stored on an information track of the CD or storage device. A sound recording may also be included on the CD or storage device. This will allow a user to effect a given performance, such as the melody line of a song, along with and in sync to the sound recording. To accomplish this, a sync signal may be recorded on a track of the CD. The software then reads the sync signal during CD playback, and locks to it. The software must be locked using the sync signal provided by the CD. This will allow data representative of chord changes and/or scale changes stored in the sequencer, to be in sync with those of the sound recording track on the CD during lockup and playback. This may require the creation of a sequencer tempo map, known in the art. The performance information stored on the CD may be time-indexed and stored in such a way as to be in sync (during lockup and playback), with the performance information stored in the sequencer. It may also be stored according to preference. Optionally, the starting point of the sounding recording on the CD may easily be determined, and then cause the sequencer to commence playback automatically. No sync track is required, and all music processing will then take place completely within the software as described herein. Again, the data representative of chord changes and scale changes, as well as other data stored in the sequencer, will probably require a tempo map in order to stay in sync and musically-correct with the chord changes in the sound recording of the CD.</div>
<div class="description-paragraph">FIGS. 16A, <b>16</b>B and <b>16</b>C</div>
<div class="description-paragraph">FIG. 16A depicts a general overview of one embodiment of the present invention using multiple instruments. Shown are multiple instruments of the present invention synced or daisy-chained together, thus allowing simultaneous recording and/or playback. Each input device may include its own built-in sequencer, music processing software, sound source, sound system, and speakers. Two or more sequencers may be synced or locked together <b>16</b>-<b>23</b> during recording and/or playback. Methods of synchronization and music data recording are well known in the art, and are fully described in numerous MIDI-related textbooks. The configuration shown in FIG. 16A provides the advantage of allowing each user to record performance tracks and/or trigger tracks using the sequencer of their own instrument. The sequencers will stay locked <b>16</b>-<b>23</b> during both recording and/or playback. This will allow users to record additional performance tracks using the sequencer of their own instrument, while staying in sync with the other instruments. The controlled instruments <b>16</b>-<b>24</b> may be controlled by data representative of chord changes, scale changes, current song key, setup configuration, etc. being output from the controlling instrument(s) <b>16</b>-<b>25</b>. This information may optionally be recorded by one or more controlled or bypassed instruments <b>16</b>-<b>26</b>. This will allow a user to finish a work-in-progress later, possibly on their own, without requiring the recorded trigger track of the controlling instrument <b>16</b>-<b>25</b>. Any one of the instruments shown in FIG. 16A may be designated as a controlling instrument <b>16</b>-<b>25</b>, a controlled instrument <b>16</b>-<b>24</b>, or a bypassed instrument <b>16</b>-<b>26</b> as described herein. It should be noted that multiple instruments of the present invention may be connected using any convenient means known in the art, and the music software described herein may exist on any or all of the connected instruments, in any or all portions or combinations of portions.</div>
<div class="description-paragraph">In FIG. 16A, if an instrument set for controlled operation <b>16</b>-<b>24</b> or bypassed operation <b>16</b>-<b>26</b> contains a recorded trigger track, the track may be ignored during performance if needed. The instrument may then be controlled by a controlling instrument <b>16</b>-<b>25</b> such as the one shown. An instrument set to controller mode <b>16</b>-<b>25</b> which already contains a recorded trigger track, may automatically become a controlled instrument <b>16</b>-<b>24</b> to its own trigger track. This will allow more input controllers on the instrument to be used for melody section performance. Processed and/or original performance data, as described herein, may also be output from any instrument of the present invention. This will allow selected performance data to be recorded into the sequencer of another instrument <b>16</b>-<b>23</b> if desired. It may also be output to a sound source <b>16</b>-<b>27</b>. Selected performance data from one instrument may be merged with selected performance data from another instrument or instruments <b>16</b>-<b>23</b>. This merged performance data <b>16</b>-<b>23</b> may then be output from a selected instrument or instruments <b>16</b>-<b>27</b>. The merged performance data <b>16</b>-<b>23</b> may also be recorded into the sequencer of another instrument, if desired. The instruments shown in FIG. 16A may provide audio output by using an internal sound source. Audio output from two or more instruments of the present invention may also be mixed, such as with a digital mixer. It may then be output <b>16</b>-<b>27</b> from a selected instrument or instruments using a D/A converter or digital output.</div>
<div class="description-paragraph">FIG. 16B depicts a general overview of another embodiment of the present invention using multiple instruments. Shown are multiple instruments of the present invention being used together with an external processor <b>16</b>-<b>28</b>, thus allowing simultaneous recording and/or playback. Optional syncing, as described previously, may also be used to lock one or more of the instruments to the external processor <b>16</b>-<b>29</b> during recording and/or playback.</div>
<div class="description-paragraph">FIG. 16C is an illustrative depiction of one embodiment of the present invention, for allowing multiple performers to interactively create music over a network. Selected musical data described herein by the present invention may be used in a network to allow multiple untrained users to compose and perform music remotely over the network.</div>
<div class="description-paragraph">It should be noted that during musical play, selected notes of the present invention may be automatically corrected in response to a chord or scale change. Automatically corrected notes which sound inappropriate may be “weeded out” of a stored processed performance, if desired. Normally, processed note on/corresponding note off messages residing in a predetermined range before and after the corresponding stored current status message, are weeded out or removed. Original performance data may be quantized, known in the art, possibly together with its corresponding processed performance data. It is also useful to scan any stored current status messages before playback of a sequencer commences, or preferably when the sequencer is stopped. This scan is used to determine the first current status message which corresponds to the current sequencer playback location. This determined current status message is then read by the music software to prepare the software for performance of the correct current chord notes and current scale notes. Duplicate current status messages may also be weeded out of a storage area, if desired.</div>
<div class="description-paragraph">Many modifications and variations may be made in the embodiments described herein and depicted in the accompanying drawings without departing from the concept and spirit of the present invention. Accordingly, it is clearly understood that the embodiments described and illustrated herein are illustrative only and are not intended as a limitation upon the scope of the present invention.</div>
<div class="description-paragraph">For example, using the techniques described herein, the present invention may easily be modified to send and receive a variety of performance identifiers. Some of these may include current note group setup identifiers, shifting identifiers which indicate a current shifting position, relative chord position identifiers (i.e. 1-4-5), identifiers which indicate a performance as a melody section performance or a chord section performance, and identifiers which indicate a performance as being that of a bypassed performance. Some or all of these identifiers may be encoded into each original performance and/or processed performance note event, or may be derived if preferred. An embodiment of the present invention may use these identifiers for system reconfiguration, routing, etc., which is especially useful during re-performance.</div>
<div class="description-paragraph">The performance methods of the present invention allow a user to effect a given performance using a variable number of input controllers. However, at least four to twelve is currently preferred in one embodiment of the present invention. This will allow a user to feel an interaction with the instrument. The indicators described herein may optionally be generated based on stored processed performance output. Stored original performance output may be generated based on stored processed performance output and stored current status messages, mode settings, etc. Processed performance note on/off messages may also be routed and assigned on-the-fly to the appropriate indicated input controller, for producing processed output. An armedKey[ ] array may be armed with processed performance note on/off messages each of which may possibly be on a different channel, with each event being sounded when the indicated key is played. If desired, original performance identifiers may be encoded into each processed performance note on/off event during composition, then the original performance identifiers may be used for mapping the processed performance events to the appropriate performer keys during re-performance, and also for providing the indicators. Stored original performance data would not be required in an embodiment of this type. The processed performance events in armedKey[ ] array may simply be provided directly to a sound source, when the corresponding indicated key is played. With minor modification, the stored current status messages described herein may also be used to make on-the-fly chord assignments for the indicated live chord keys. A variety of combinations may be used, and will become apparent to those of ordinary skill in the art. The previously said methods will however, lack the flexibility of the embodiments described herein. Those of ordinary skill will recognize that with minor modification chord setups, drum maps, performance mapping scenarios, modes, etc. may be changed dynamically throughout a given performance. Further, improvisational data as well as different harmony scenarios may each be used for enhancement of a given performance. The given performance as described herein will still be readily identifiable and apparent to a user regardless of the various improvisational scenarios and/or harmony scenarios used to effect the given performance. An improvisation identifier may be encoded into stored note data. This identifier may be encoded into note on/off messages sent as a result of pressing an “unarmed” live key for example. Improvisation identifiers may be used to provide indicators of a different color, type, etc. This will allow an improvised part to be distinguishable by a user during re-performance. A “driver key” identifier may also be encoded into stored original note data. This identifier will indicate that a particular note will be used to set the isArmedDriverKey attribute during the arming/disarming process. This will allow flexibility in determining which indicated keys are to be driver keys, and which indicated keys are not to be driver keys. Driver key identifiers may also be used to provide indicators of a different color, type, etc. This will allow a user to distinguish driver keys from other indicated keys. It should be noted that with minor modification, a sustained indicator of a different color, type, etc. may be provided to indicate a difficult to play passage in a performance.</div>
<div class="description-paragraph">The present invention may also use a different range than the 54-65 range described herein as the basis for data generation, chord voicings, scale voicings, etc. The preferred embodiment allows chords in the chord progression section to be shifted up or down by octaves using user-selectable switching, input controller performances, etc. The previously said switching and performances may also be used to allow more chord types to be available to a user. Chords in the chord section may also be provided in different octaves simultaneously if desired. This is done by simply following the procedures set forth herein for the chords in the melody section. Those of ordinary skill in the art will recognize that the data representative of chord and scale changes as described herein may be provided in a variety of ways. As one example, current chord and/or current scale notes may be generated based on a note group such as a non-scale note group. Also, data representative of chord and scale changes may be provided in varying combinations from a recording device, live inputs by a user, using a variety of identifiers, etc. Those of ordinary skill will recognize that a variety of combinations may be used. Each individual component note of a chord may be performed from a separate input controller in the chord progression. This will allow a user to play individual component notes of the chord while establishing a chord progression. Scale notes, non-scale notes, chords, etc. may then be generated in response to performances in the melody section, as described herein. Selected individual input controllers may output the current status messages and/or triggers as described herein.</div>
<div class="description-paragraph">Any chord type or scale may be used in an embodiment including modified, altered, or partial scales. Any scale may also be assigned to any chord by a user if preferred. Multiple scales may be made available simultaneously. A variety of different chord inversions, voicings, etc. may be used in an embodiment of the present invention. Additional notes may be output for each chord to create fuller sound, known in the art. Although chord notes in the preferred embodiment are output with a shared common velocity, it is possible to independently allocate velocity data for each note to give chords a “humanized” feel. In addition to this velocity data allocation, other data such as different delay times, polyphonic key pressure, etc. may also be output. A specific relative position indicator may be used to indicate an entire group of input controllers in the chord section if desired. Non-scale chords may also be indicated as a group, possibly without using specific relative position indicators. Any adequate means may be used, so long as a user is able to determine that a given input controller is designated for non-scale chord performance. The same applies to chords which represent Major chords and chords which represent relative minor chords. Each of these may also be indicated appropriately as a group. For example, an indicator representative of Major chords may be provided for a group of input controllers designated for playing Major chords. An indicator representative of relative minor chords may be provided for a group of input controllers designated for playing relative minor chords. An indicator may be provided for a given input controller using any adequate means, so long as Major chords and relative minor chords are distinguishable by a user. Key labels in the present invention use sharps (♯) in order to simplify the description. These labels may easily be expanded using the Universal Table of Keys and the appropriate formulas, known in the art (i.e. 1-3-5 etc.). It should be noted that selected processed output (live and/or stored playback tracks) may be shifted by semitones to explore various song keys, although any appropriate labels will need to be transposed accordingly. With minor modification output may also be shifted by chord steps, scale steps, and non-scale steps, depending on the particular note group to be shifted. Shifting may be applied to the original performance input which is then sent to the music software for processing, or applied to the processed performance output. An event representative of it least a chord change or scale change is defined herein to include dynamically making one or more chord notes, and/or one or more scale notes, available for playing from one or more fixed locations on the instrument. In some instances, chord notes may be included in the scale notes by default.</div>
<div class="description-paragraph">Duplicate chord notes and scales notes were used in the embodiment of the present invention described herein. This was done to allow a user to maintain a sense of octave. These duplicate notes may be eliminated and new notes added, if preferred. Scales and chords may include more notes than those described herein, and notes may be arranged in any desired order. More than one scale may be made available simultaneously for performance. Scale notes may be arranged based on other groups of notes next to them. This is useful when scale notes and remaining non-scale notes are both made available to a user. Each scale and non-scale note is located in a position so as to be in closest proximity to one another. This will sometimes leave blank positions between notes which may then be filled with duplicates of the previous lower note or next highest note, etc. A note group may be located anywhere on the instrument, and note groups may be provided in a variety of combinations. The present invention may be used with a variety of input controller types, including those which may allow a chord progression performance to be sounded at a different time than actual note generation takes place. Separate channels may also be assigned to a variety of different zones and/or note groups on the instrument, known in the art. This will allow a user to hear different sounds for each zone and/or note group. This may also apply to trigger output, original performance, and harmony note output as well.</div>
<div class="description-paragraph">The principles, preferred embodiment, and mode of operation of the present invention have been described in the foregoing specification. This invention is not to be construed as limited to the particular forms disclosed, since these are regarded as illustrative rather than restrictive. Moreover, variations and changes may be made by those skilled in the art without departing from the spirit of the invention.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">18</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM28605230">
<claim-statement>I claim: </claim-statement>
<div class="claim"> <div class="claim" id="US-6201178-B1-CLM-00001" num="1">
<div class="claim-text">1. A method of generating notes on an electronic instrument, the instrument having a plurality of input controllers, the method comprising the steps of:</div>
<div class="claim-text">providing note-on data for turning on a note in response to a selection of an input controller, wherein the note is generated based on generated and stored data and in response to the selection of the input controller, and wherein the note is representative of data that is different than any of the generated and stored data; </div>
<div class="claim-text">generating and storing additional data subsequent to providing the note-on data for turning on the note; </div>
<div class="claim-text">providing note-off data for turning off the note in response to a deselection of the input controller subsequent to generating and storing the additional data; and </div>
<div class="claim-text">providing note-on data for turning on an additional note in response to an additional selection of the input controller, wherein the additional note is different than the note and is generated based on the generated and stored additional data and in response to the additional selection of the input controller, and wherein the additional note is representative of data that is different than any of the generated and stored additional data. </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00002" num="2">
<div class="claim-text">2. The method of claim <b>1</b>, wherein the note and the additional note are each representative of a chord note, wherein a chord corresponding to the note and a chord corresponding to the additional note each represent either a different chord or a different chord voicing.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00003" num="3">
<div class="claim-text">3. The method of claim <b>1</b>, wherein the note and the additional note are each representative of a scale note, wherein a scale corresponding to the note and a scale corresponding to the additional note each represent either a different scale or a different scale voicing.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00004" num="4">
<div class="claim-text">4. The method of claim <b>1</b>, wherein the note and the additional note are each representative of a combined scale note being defined in accordance with chord notes and scale notes.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00005" num="5">
<div class="claim-text">5. The method of claim <b>1</b>, wherein the note and the additional note are each representative of a remaining scale note being defined in accordance with chord notes and scale notes.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00006" num="6">
<div class="claim-text">6. The method of claim <b>1</b>, wherein the note and the additional note are each representative of a non-scale note being defined in accordance with either scale notes, or chord notes and scale notes.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00007" num="7">
<div class="claim-text">7. The method of claim <b>1</b>, wherein all note-on data provided on the instrument for turning on notes turns on notes which are each representative of a note that conforms to the MIDI standard.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00008" num="8">
<div class="claim-text">8. The method of claim <b>1</b>, further comprising the step of selecting a song key corresponding to the input controller, wherein selected output provided using the input controller as well as selected labels and selected stored playback track output in a given performance, are adjusted to be in accordance with the song key selection.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00009" num="9">
<div class="claim-text">9. The method of claim <b>1</b>, wherein at least the generated and stored additional data is generated and stored in response to either user-selectable input or retrieval of stored data.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00010" num="10">
<div class="claim-text">10. The method of claim <b>9</b>, wherein the stored data that is retrieved denotes at least either a song key, a chord fundamental, and a chord type, or a song key, a chord fundamental, a chord type, a scale root, and a scale type.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00011" num="11">
<div class="claim-text">11. The method of claim <b>9</b>, wherein the generated and stored additional data is generated in response to a user selection of at least one input controller.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00012" num="12">
<div class="claim-text">12. The method of claim <b>11</b>, wherein the user selection of the at least one input controller generates a plurality of notes corresponding to a chord, wherein the chord is in accordance with the additional note which itself corresponds to either a scale or a chord.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00013" num="13">
<div class="claim-text">13. The method of claim <b>12</b>, wherein all note-on data provided on the instrument for turning on notes turns on notes which are each representative of a note that conforms to the MIDI standard.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00014" num="14">
<div class="claim-text">14. The method of claim <b>1</b>, wherein the generated and stored data and the generated and stored additional data are each representative of data which includes note data.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="US-6201178-B1-CLM-00015" num="15">
<div class="claim-text">15. The method of claim <b>14</b>, wherein the note data included in the representative data is representative of notes that each conform to the MIDI standard.</div>
</div>
</div> <div class="claim"> <div class="claim" id="US-6201178-B1-CLM-00016" num="16">
<div class="claim-text">16. A method of generating notes on an electronic instrument, the instrument having a plurality of input controllers, the method comprising:</div>
<div class="claim-text">providing note-on data for turning on a note representative of a remaining scale note which is defined in accordance with chord notes and scale notes, wherein the note-on data for turning on the note is provided in response to a selection of an input controller, and wherein the note is generated using stored data and in response to the selection of the input controller; </div>
<div class="claim-text">storing additional data subsequent to providing the note-on data for turning on the note; </div>
<div class="claim-text">providing note-off data for turning off the note in response to a deselection of the input controller subsequent to storing the additional data; and </div>
<div class="claim-text">providing note-on data for turning on an additional note representative of a remaining scale note which is defined in accordance with chord notes and scale notes, wherein the note-on data for turning on the additional note is provided in response to an additional selection of the input controller, and wherein the additional note is different than the note and is generated using the stored additional data and in response to the additional selection of the input controller. </div>
</div>
</div> <div class="claim"> <div class="claim" id="US-6201178-B1-CLM-00017" num="17">
<div class="claim-text">17. A method of generating notes on an electronic instrument, the instrument having a plurality of input controllers, the method comprising:</div>
<div class="claim-text">providing note-on data for turning on a note representative of a non-scale note which is defined in accordance with either scale notes, or chord notes and scale notes, wherein the note-on data for turning on the note is provided in response to a selection of an input controller, and wherein the note is generated using stored data and in response to the selection of the input controller; </div>
<div class="claim-text">storing additional data subsequent to providing the note-on data for turning on the note; </div>
<div class="claim-text">providing note-off data for turning off the, note in response to a deselection of the input controller subsequent to storing the additional data; and </div>
<div class="claim-text">providing note-on data for turning on an additional note representative of a non-scale note which is defined in accordance with either scale notes, or chord notes and scale notes, wherein the note-on data for turning on the additional note is provided in response to an additional selection of the input controller, and wherein the additional note is different than the note and is generated using the stored additional data and in response to the additional selection of the input controller. </div>
</div>
</div> <div class="claim"> <div class="claim" id="US-6201178-B1-CLM-00018" num="18">
<div class="claim-text">18. A method of providing note group setups on an electronic instrument, the instrument having a plurality of input controllers, the method comprising:</div>
<div class="claim-text">storing a plurality of settings for each of a plurality of input controllers as a bank, wherein each of the plurality of settings represents settings denoting at least a chord type, a scale root, and a scale type, and wherein the settings are used for generating and storing data for generating notes based on the data; </div>
<div class="claim-text">loading the bank either in response to a user selection of one or more input controllers, according to manual input from a user interface, or in response to user-selectable input means corresponding to the instrument; and </div>
<div class="claim-text">initiating a plurality of events in a given performance each of which is representative of at least a chord change or scale change, wherein each of the plurality of events is initiated in response to either a user selection of one or more input controllers or retrieval of stored data.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    