
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US20140040689A1 - Tap and linking module for scan access of multiple cores with ieee 1149.1 test access ports 
      - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA129557403">
<div class="abstract" id="p-0001" num="0000">An architecture for testing a plurality of circuits on an integrated circuit is described. The architecture includes a TAP Linking Module located between test pins on the integrated circuit and 1149.1 Test Access Ports (TAP) of the plurality of circuits to be tested. The TAP Linking Module operates in response to 1149.1 scan operations from a tester connected to the test pins to selectively switch between 1149.1 TAPs to enable test access between the tester and plurality of circuits. The TAP Linking Module's 1149.1 TAP switching operation is based upon augmenting 1149.1 instruction patterns to affix an additional bit or bits of information which is used by the TAP Linking Module for performing the TAP switching operation.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><ul class="description" lang="EN" load-source="patent-office" mxw-id="PDES64312083">
<heading id="h-0001">CROSS REFERENCE TO PRIOR APPLICATIONS</heading>
<li> <para-num num="[0001]"> </para-num> <div class="description-line" id="p-0002" num="0001">This application is a divisional of application Ser. No. 13/737,474, filed Jan. 9, 2013, currently pending;</div>
</li> <li> <para-num num="[0002]"> </para-num> <div class="description-line" id="p-0003" num="0002">Which was a divisional of application Ser. No. 13/559,251, filed Jul. 26, 2012, now U.S. Pat. No. 8,386,865, issued Feb. 26, 2013;</div>
</li> <li> <para-num num="[0003]"> </para-num> <div class="description-line" id="p-0004" num="0003">Which was a divisional of application Ser. No. 13/043,763, filed Mar. 9, 2011, now U.S. Pat. No. 8,255,750, issued Aug. 28, 2012;</div>
</li> <li> <para-num num="[0004]"> </para-num> <div class="description-line" id="p-0005" num="0004">Which was a divisional of application Ser. No. 12/539,373, filed Aug. 11, 2009, now U.S. Pat. No. 7,925,942, issued Apr. 12, 2011;</div>
</li> <li> <para-num num="[0005]"> </para-num> <div class="description-line" id="p-0006" num="0005">Which was a divisional of application Ser. No. 11/691,600, filed Mar. 27, 2007, now U.S. Pat. No. 7,590,910, issued Sep. 15, 2009;</div>
</li> <li> <para-num num="[0006]"> </para-num> <div class="description-line" id="p-0007" num="0006">Which was a divisional of application Ser. No. 10/772,982, filed Feb. 4, 2004,now U.S. Pat. No. 7,213,171, issued May 1, 2007;</div>
</li> <li> <para-num num="[0007]"> </para-num> <div class="description-line" id="p-0008" num="0007">Which was a divisional of application Ser. No. 09/981,514, filed Oct. 16, 2001, now U.S. Pat. No. 6,711,707, issued Mar. 23, 2004;</div>
</li> <li> <para-num num="[0008]"> </para-num> <div class="description-line" id="p-0009" num="0008">Which was a divisional of application Ser. No. 09/277,504, filed Mar. 26, 1999, now U.S. Pat. No. 6,324,662, issued Nov. 27, 2001;</div>
</li> <li> <para-num num="[0009]"> </para-num> <div class="description-line" id="p-0010" num="0009">Which claimed priority from Provisional Application No. 60/090,913, filed Jun. 26, 1998, and Provisional Application No. 60/079,552, filed Mar. 27, 1998.</div>
</li> <li> <para-num num="[0010]"> </para-num> <div class="description-line" id="p-0011" num="0010">This application is related to provisional application Ser. No. 60/024,884, filed Aug. 30, 1996 and application Ser. No. 08/918,872, filed Aug. 26, 1997, now U.S. Pat. No. 6,073,254, issued Jun. 6, 2000, the contents of each of which are incorporated herein by reference.</div>
</li> <heading id="h-0002">BACKGROUND OF THE INVENTION</heading>
<li> <para-num num="[0011]"> </para-num> <div class="description-line" id="p-0012" num="0011">1. Field of the Invention</div>
</li> <li> <para-num num="[0012]"> </para-num> <div class="description-line" id="p-0013" num="0012">This invention relates to an improved method and system for testing multiple intellectual property cores contained within an integrated circuit, each core including a standard IEEE-1149.1 compliant test access port (TAP). A core is a predefined subcircuit function, which can be incorporated into the design of an integrated circuit. Some example core functions include but are not limited to: digital signal processors, microcontrollers, microprocessors, and memories. The present invention achieves the above mentioned testing without having to change or modify the standard TAPs of each core. Using the present invention, the TAPs of each core are made selectable such that they can be connected to the integrated circuit pins to enable direct communication between the integrated circuit pins and selected core TAPs.</div>
</li> <li> <para-num num="[0013]"> </para-num> <div class="description-line" id="p-0014" num="0013">2. Brief Description of the Prior Art</div>
</li> <li> <para-num num="[0014]"> </para-num> <div class="description-line" id="p-0015" num="0014">The IEEE-1149.1 standard, known as JTAG, is a standardized test system developed for testing chips on a board. A trend in the semiconductor industry is for popular chip functions to evolve into intellectual property core circuit functions to allow them to be provided for reuse in the design of larger, more complex integrated circuits. As semiconductor chips evolve into intellectual property cores, the JTAG test system may remain as an integral part of the core. Thus cores will contain the JTAG test system, which facilitates the testing of the cores in chips similar to the way JTAG facilitates the testing of chips on boards.</div>
</li> <li> <para-num num="[0015]"> </para-num> <div class="description-line" id="p-0016" num="0015">The present invention assumes plural cores of an integrated circuit each contain a standard IEEE 1149.1 TAP interface comprising a test data input (TDI), test data output (TDO), test mode select (TMS), test clock (TCK), and a test reset (TRST). According to the present invention, as will be described in detail below, a TAP Linking Module is located between the 1149.1 interfaces of the core TAPs and a corresponding 1149.1 test pin interface of the integrated circuit. The TAP Linking Module provides selectivity between the integrated circuit's 1149.1 test pin interface and one or more of the core TAP 1149.1 test interfaces. Core testing takes place by connecting a tester of standard type to the integrated circuit test pins, communicating information via the test pins to the TAP Linking Module to select one or more of the core TAPs to be connected the test pins, and thereafter applying test patterns to the one or more cores via the connection formed by the TAP Linking Module.</div>
</li> <li> <para-num num="[0016]"> </para-num> <div class="description-line" id="p-0017" num="0016">It is important to note that some cores use the TAP not only for testing but also for emulation, debug, code development, and system level fault diagnosis. Therefore the present invention not only provides for selective core testing, but also for selective core emulation, debug, code development, and fault diagnosis operations.</div>
</li> <li> <para-num num="[0017]"> </para-num> <div class="description-line" id="p-0018" num="0017">A prior art paper entitled “An IEEE 1149.1 Test Access Architecture For ICs With Embedded Cores” by Whetsel was published in the 1997 International Test Conference proceedings, pages 69-78, and is incorporated herein by reference. This paper provides detail on the problems associated with accessing TAPs of cores embedded in integrated circuits. Further, the paper provides a solution to this problem by describing how the design of standard TAPs of cores may be modified to enable them to operate in cooperation with a TAP Linking Module, such that one or more of the modified core TAPs may be selectively accessed for test and emulation via the TAP Linking Module.</div>
</li> <li> <para-num num="[0018]"> </para-num> <div class="description-line" id="p-0019" num="0018">Whetsel U.S. Pat. Nos. 5,056,093 and 5,054,024 describe a system for switching between TAPs by use of a Device Select Module (DSM). This approach locates the DSM between the tester and plurality of TAPs to allow the 1149.1 instruction and data scans to pass through the DSM and the currently selected TAPs. 1149.1 instruction and data scans are used to enable the DSM to switch between the TAPs. In this approach the DSM is scanned during every 1149.1 instruction and data scan operation to the selected TAPs. The TAP linking module of the present invention is scanned during every 1149.1 instruction scan operation to the selected TAPs, but not during 1149.1 data scan operations to the selected TAPs. 1149.1 data scan operations to the TAP linking module occurs only when no TAPs are selected for scanning Thus 1149.1 data scans to the TAP linking module occur separate from 1149.1 data scan to the TAPs. The difference therefore between the DSM and TAP linking module is that the DSM is scanned along with the selected TAPs during 1149.1 data scans, while 1149.1 data scans to the TAP linking module occur separate from 1149.1 data scans to the TAPs.</div>
</li> <li> <para-num num="[0019]"> </para-num> <div class="description-line" id="p-0020" num="0019">The TAP linking module of the present invention provides the benefits described for the TAP linking module in the Whetsel paper, but without having to modify the design of the standard TAP. The importance of not having to modify the standard TAP can be seen in pre-existing (legacy) core designs which are not modifiable. For example, non-modifiable legacy cores with TAPs may be provided by intellectual property core vendors. Since the cores are not modifiable, their TAPs cannot be modified for use with the TAP Lining Module described in the Whetsel paper. The present invention provides a method of achieving the same advantages stated in the Whetsel paper but without having to modify the TAP design.</div>
</li> <li> <para-num num="[0020]"> </para-num> <div class="description-line" id="p-0021" num="0020">As described in the Whetsel paper, existing core TAP access techniques either; (1) provide extra test interface pins (TDI, TDO, TMS, TCK, TRST) on the integrated circuit for each TAP, or (2) string all TAPs together serially via their TDI and TDO signals and in parallel via their TMS, TCK, and TRST signals and connect the TAP string to one set of test interface pins on the integrated circuit. When extra test pins are used, each TAP has its own test interface. However, this approach requires the integrated circuit to have more test pins and the tester to have more scan interface resources. When core TAPs are connected in a string, the speed at which the string of TAPs may be serially operated (i.e. scanned) is dependant upon each TAP's maximum TCK frequency rate. For example, a string of three TAPs may exist where the first TAP can operate at a 40 Mhz maximum TCK rate, the second TAP can operate at a 10 Mhz maximum TCK rate, and the third TAP can operate at a 50 Mhz maximum TCK rate. When scanning the string of TAPs, the TCK frequency rate of the string cannot exceed the maximum TCK rate of the second TAP. Therefore scan operations through the TAP string is limited to 10 Mhz, even though the first and third TAPs can operate at 40 and 50 Mhz, respectively. Also, stringing TAPs together does not allow one TAP to be placed in an 1149.1 RunBist self-test mode while the other TAPs are being scanned.</div>
</li> <li> <para-num num="[0021]"> </para-num> <div class="description-line" id="p-0022" num="0021">The present invention, as described in detail below, provides a TAP Linking Module design which uses instruction augmentation to achieve a TAP selection system supporting selectable access of non-modifiable TAPs contained within legacy cores.</div>
</li> <heading id="h-0003">SUMMARY OF THE INVENTION</heading>
<li> <para-num num="[0022]"> </para-num> <div class="description-line" id="p-0023" num="0022">In accordance with the present invention, selection and testing of multiple TAP'ed cores within a large integrated circuit can be performed without adding test interface pins beyond those specified by the IEEE 1149.1 standard, and without modifying the TAP design of the cores. This is accomplished by a novel design of the Tap Linking Module, referred to hereafter as TLM, which eliminates the need to redesign core TAPs.</div>
</li> <li> <para-num num="[0023]"> </para-num> <div class="description-line" id="p-0024" num="0023">Briefly, the present invention enables an IEEE 1149.1 test pin interface on an integrated circuit to access any number of standard TAPs within an integrated circuit by providing a TLM that is operable to switch the TAPs to the test pins in response to 1149.1 scan operations. No design modifications are required on TAPs used with the present invention.</div>
</li> <li> <para-num num="[0024]"> </para-num> <div class="description-line" id="p-0025" num="0024">It is an object of the present invention to provide the following features.
</div> </li> <ul> <li id="ul0001-0001" num="0025">(1) Provide a TLM architecture for integrated circuits which operates to enable and disable 1149.1 scan access to TAPs without having to modify the design of TAPs. Hence, the invention can be used on legacy cores having non-modifiable TAPs.</li> <li id="ul0001-0002" num="0026">(2) Maintain independent development of scan test patterns specific to each embedded core such that the scan test patterns may be directly applied to the core independent of other cores within the integrated circuit. Hence, maintenance and application of core scan test patterns is simplified.</li> <li id="ul0001-0003" num="0027">(3) Allow for maximizing the scan test frequency (i.e. TCK frequencies) to each core independent of other cores whose scan test frequency may be less than the scan test frequency of the core being tested. Hence, core test times are reduced.</li> <li id="ul0001-0004" num="0028">(4) Ability to re-use, without modification, the test patterns of a core in different integrated circuit designs utilizing the core. Hence, the ease of scan test pattern re-use between integrated circuits utilizing the same core is realized.</li> <li id="ul0001-0005" num="0029">(5) Allow for core test integration to become the simple concatenation of the different re-usable scan test patterns of the different cores serially connected to the TLM. Hence, the goal of simplifying multiple core test integration is achieved.</li> </ul>
<li> <para-num num="[0030]"> </para-num> <div class="description-line" id="p-0026" num="0030">In accordance with the present invention, there is provided a TLM architecture that attains the above described criteria and can accommodate access to multiple TAPs without having to modify the TAP designs. The invention is also compatible with the future looking definition of modifying TAPs as described in the Whetsel paper. The modified TAPs in the Whetsel paper require two extra signals in addition to the five test signals (TDI, TDO, TMS, TCK, TRST) defined in IEEE-1149.1, namely an enable and select signal. The Whetsel paper also requires one or more specific instructions to be added to the TAPs for enabling the switching between multiple TAPs.</div>
</li> <li> <para-num num="[0031]"> </para-num> <div class="description-line" id="p-0027" num="0031">The standard TAP as defined in IEEE 1149.1 has two scan operation modes; (1) a data scan operation mode whereby test data is serially communicated through the TAP via the TDI and TDO TAP signals, and (2) an instruction scan operation mode whereby instruction data is serially communicated through the TAP via the TDI and TDO TAP signals.</div>
</li> <li> <para-num num="[0032]"> </para-num> <div class="description-line" id="p-0028" num="0032">The present invention exploits the instruction scan operation mode of the TAP to enable the TLM to be loaded with instruction bits which are used to determine which core TAP will be connected to or disconnected from the integrated circuit test pins. During instruction scan operations, instruction data is scanned through both the connected TAP and an augmentation instruction shift register (AISR) within the TLM. The TLM's AISR extend the instruction register length of the connected TAP by the number of the bits within the AISR. Thus during instruction scans, the present invention provides an over-shifting technique which allows instruction data to be loaded in both the instruction register of the connected TAP and the AISR of the TLM. The alignment of the TAP instruction register and the TLM AISR is by design choice. For example, the movement of the instruction data may first proceed through the TAP's instruction register then through the AISR, or the movement of the instruction data may first proceed through the AISR then through the TAP's instruction register.</div>
</li> <li> <para-num num="[0033]"> </para-num> <div class="description-line" id="p-0029" num="0033">It is important to note that the TLM's AISR bits are only present in the scan path during TAP instruction scan operations, and not during TAP data scan operations. Thus, modifications of existing test description languages (TDL) that contain both TAP instruction and data scan frames need only modify the instruction scan frames of the TDL to use the present invention. Also, the instruction scan frame modifications only require extending the length of the TDL instruction frames to include the bit positions of the AISR. In each TDL instruction scan frame, the augmentation bits will be set to either; (1) establish a new TAP connection, or (2) maintain the existing TAP connection. Since the TDL data scan frames are not required to be modified by the present invention, core scan test pattern reuse is easily achieved by the present invention.</div>
</li> <li> <para-num num="[0034]"> </para-num> <div class="description-line" id="p-0030" num="0034">The concept of augmenting TAP instruction scan lengths to communicate data to a TLM is not limited for use within integrated circuits. For example, a TLM can be used at the board level to make various connection arrangements to TAPs of integrated circuits mounted boards. In this case, the TLM may exists as a separate integrated circuit on the board, or as a subcircuit of an integrated circuit on the board.</div>
</li> <li> <para-num num="[0035]"> </para-num> <div class="description-line" id="p-0031" num="0035">Briefly, the above process is accomplished by; (1) adding one or more bits to every TAP instruction scan pattern, (2) communicating the added bit or bits to the AISR of the TLM during instructions scan operations, (3) decoding the added bit or bits at the end of the instruction scan operations, and (4) depending upon the decoding, either maintaining the current TAP connection or forming a new TAP connection.</div>
</li> <description-of-drawings>
<heading id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<li> <para-num num="[0036]"> </para-num> <div class="description-line" id="p-0032" num="0036"> <figref idrefs="DRAWINGS">FIG. 1</figref> shows a simple schematic diagram of a tester connected to a TLM circuit which itself is connected to provide access to four core TAPs.</div>
</li> <li> <para-num num="[0037]"> </para-num> <div class="description-line" id="p-0033" num="0037"> <figref idrefs="DRAWINGS">FIG. 2</figref> shows a schematic diagram of the interface connection between the TLM and TAPs <b>1</b>-<b>4</b>.</div>
</li> <li> <para-num num="[0038]"> </para-num> <div class="description-line" id="p-0034" num="0038"> <figref idrefs="DRAWINGS">FIG. 3</figref> <i>a </i>shows a TLM design where individual augmentation instruction registers exist for each TAP.</div>
</li> <li> <para-num num="[0039]"> </para-num> <div class="description-line" id="p-0035" num="0039"> <figref idrefs="DRAWINGS">FIG. 3B</figref> shows a TLM design where one augmentation instruction register shared by all TAPs.</div>
</li> <li> <para-num num="[0040]"> </para-num> <div class="description-line" id="p-0036" num="0040"> <figref idrefs="DRAWINGS">FIG. 4</figref> shows a detailed TLM architecture according to the present invention.</div>
</li> </description-of-drawings>
<heading id="h-0005">DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
<li> <para-num num="[0041]"> </para-num> <div class="description-line" id="p-0037" num="0041">Referring to <figref idrefs="DRAWINGS">FIG. 1</figref>, there is shown a typical prior art testing system. The testing system includes an integrated circuit <b>1</b> having a plurality of cores <b>3</b> therein, each core having a TAP <b>5</b>. Each TAP <b>5</b> is coupled to TLM <b>9</b> via an associated bus <b>7</b>. The TLM is coupled external of the integrated circuit to a tester <b>11</b>. The TLM <b>9</b> acts in the manner of a switch to select one of the TAPs <b>5</b> via one of the associated busses <b>7</b> to be connected to the tester. The tester <b>11</b> is coupled to the TLM <b>9</b> in accordance with the standard 1149.1 test interface to provide required test inputs to and outputs from a selected TAP <b>5</b> via an associated bus <b>7</b>. While not shown, the tester also provides power and ground to power up the integrated circuit during testing. The TAPs <b>5</b> of each core <b>3</b> serve as the core's test interface to the TLM <b>9</b>. When the TLM <b>9</b> forms a connection between the tester <b>11</b> and one of the core <b>3</b> TAPs <b>5</b>, the connected TAP <b>5</b> is controlled by the tester <b>11</b> to serially communicate instruction and test data and to execute test operations.</div>
</li> <li> <para-num num="[0042]"> </para-num> <div class="description-line" id="p-0038" num="0042">Referring to <figref idrefs="DRAWINGS">FIG. 2</figref>, there is shown schematically and in more detail how multiple TAPs <b>1</b>-<b>4</b> can be connected to a TLM. TAP <b>0</b> resides within the TLM. The TLM comprises first and second interfaces. The first interface is connected to the 1149.1 TDI, TCK, TMS, TRST, TDO signals on the integrated circuits test pins. The second interface is connected to the 1149.1 TDI<b>1</b>-<b>4</b>, TMST-<b>4</b>, TDO<b>1</b>-<b>4</b>, TCK<b>1</b>-<b>4</b> signals to each TAP <b>1</b>-<b>4</b>. During test, the TDI, TDO, TMS, and TCK test pins will be connected to one of the TAPs <b>1</b>-<b>4</b>, via the TLM, to enable the tester <b>11</b> of <figref idrefs="DRAWINGS">FIG. 1</figref> to communicate with the TAP.</div>
</li> <li> <para-num num="[0043]"> </para-num> <div class="description-line" id="p-0039" num="0043">In this example, TAP<b>1</b> is the TAP connected to the test pins following power up of the integrated circuit or following activation of the TRST signal. TAP<b>1</b> serves as the integrated circuit's TAP and regulates the JTAG boundary scan test operations of the integrated circuit. TAP switching occurs by a tester, connected to the integrated circuit's test pins, performing an augmented 1149.1 instruction scan operation through TAP<b>1</b> and the TLM. Following the augmented 1149.1 instruction scan operation, the TLM only is selected for scanning by an 1149.1 data scan operation to load a new TAP connection configuration. Following the 1149.1 data scan operation to the TLM, the new TAP connection occurs and the tester accesses the new TAP, say TAP<b>2</b>, via the test pins.</div>
</li> <li> <para-num num="[0044]"> </para-num> <div class="description-line" id="p-0040" num="0044">Referring now to <figref idrefs="DRAWINGS">FIGS. 3</figref> <i>a </i>and <b>3</b> <i>b</i>, the basic TLM concept of the present invention is seen depending upon augmenting all instruction scan operations by one or more bits using an augmentation instruction register within the TLM. In <figref idrefs="DRAWINGS">FIGS. 3</figref> <i>a </i>and <b>3</b> <i>b</i>, TAP<b>0</b> represents the TAP within the TLM, TAP<b>1</b> represent the integrated circuit TAP, and TAPs <b>2</b>-<b>4</b> represent TAPs in cores. This simplified view of how TAPs are associated with the TLM's augmentation instruction register illustrates; (1) how 1149.1 data scan operations shift data through the selected TAP's data register to be passed to the integrated circuits TDO pin via the TLM, and (2) how 1149.1 instruction scan operations shift data through the selected TAP's instruction register and TLM's augmentation instruction register prior to passing on the integrated circuits TDO pin.</div>
</li> <li> <para-num num="[0045]"> </para-num> <div class="description-line" id="p-0041" num="0045">The difference between the embodiments of <figref idrefs="DRAWINGS">FIGS. 3</figref> <i>a </i>and <b>3</b> <i>b </i>is that each TAP in <figref idrefs="DRAWINGS">FIG. 3</figref> <i>a </i>has its own TLM augmentation instruction register, whereas, in <figref idrefs="DRAWINGS">FIG. 3</figref> <i>b</i>, a single TLM augmentation instruction register is shared by all TAPs. From inspection of <figref idrefs="DRAWINGS">FIGS. 3</figref> <i>a </i>and <b>3</b> <i>b</i>, the concept of augmenting only instructions scan operations with an additional bit or bits is clearly seen. It is important to note that the arrangement of the TAPs and TLM in <figref idrefs="DRAWINGS">FIGS. 3</figref> <i>a </i>and <b>3</b> <i>b </i>could be reversed to where 1149.1 data and instruction scan operations transmit through the TLM before transmitting though the TAPs without departing from the instruction augmentation concept set forth in the present invention.</div>
</li> <li> <para-num num="[0046]"> </para-num> <div class="description-line" id="p-0042" num="0046">Referring to <figref idrefs="DRAWINGS">FIG. 4</figref>, there is shown the TLM structure which is composed of a TAP state machine <b>402</b>, a TLM decode <b>404</b>, a link shift register <b>406</b>, a link update register <b>408</b>, an augmentation instruction shift register (AISR) <b>410</b>, TLM instruction or data scan multiplexer <b>412</b>, TLM instruction or data scan multiplexer <b>414</b>, TDO<b>1</b>-<b>5</b> multiplexer <b>416</b>, and an optional TAP TDI link configuration circuit <b>418</b>. TCK <b>422</b>, TMS <b>424</b>, TDI <b>426</b>, TDO <b>428</b>, and TRST <b>438</b> signals are connected to test pins of the integrated circuit.</div>
</li> <li> <para-num num="[0047]"> </para-num> <div class="description-line" id="p-0043" num="0047">TAP state machine <b>402</b> is connected to the output of gate <b>430</b> for a receiving reset input. Gate <b>430</b> has inputs for receiving a power up reset signal <b>437</b> from a power up reset circuit within the integrated circuit and a TRST signal <b>438</b> from a test pin of the integrated circuit. TAP state machine <b>402</b> also receives the TCK <b>422</b> and TMS <b>424</b> signals. TAP state machine <b>402</b> outputs TAP state signals <b>436</b> to the TLM decode <b>404</b>, a reset signal <b>440</b> to TLM decode <b>404</b>, link shift register <b>406</b>, and link update register <b>408</b>, and a TMS gating signal <b>442</b> to gates <b>420</b>.</div>
</li> <li> <para-num num="[0048]"> </para-num> <div class="description-line" id="p-0044" num="0048">TLM decode <b>404</b> receives the TAP state signals <b>436</b>, control signal <b>433</b> from the AISR <b>410</b>, enable signals <b>434</b> from link update register <b>408</b>, and the reset signal <b>440</b>. TLM decode <b>404</b> outputs an IR-SEL signal <b>448</b> to multiplexers <b>412</b> and <b>414</b>, a capture control signal <b>444</b> to AISR <b>410</b>, TDO-SEL signal <b>446</b> to multiplexer <b>416</b>, update signal <b>450</b> to link update register <b>408</b>, and shift enable signals <b>452</b> to link shift register <b>406</b>.</div>
</li> <li> <para-num num="[0049]"> </para-num> <div class="description-line" id="p-0045" num="0049">AISR <b>410</b> receives serial data output <b>456</b> from multiplexer <b>416</b>, capture, shift, update, and reset bus signals <b>444</b> from TLM decode <b>404</b>, and a parallel, fixed 1 and 0 signal input <b>454</b>. The AISR <b>410</b> outputs a serial data signal <b>458</b> to multiplexer <b>414</b> and an enable signal <b>433</b> to the TLM decode <b>404</b>. The AISR <b>410</b> responds to bus <b>444</b> to perform capture, shift, and update operations during all 1149.1 scan operations.</div>
</li> <li> <para-num num="[0050]"> </para-num> <div class="description-line" id="p-0046" num="0050">Link shift register <b>406</b> inputs TDI <b>426</b>, reset signal <b>440</b>, and shift enable signals <b>452</b>. Link shift register <b>406</b> outputs data signal <b>460</b> to multiplexer <b>412</b>. Update register <b>408</b> is coupled to receive data from link shift register <b>406</b> and inputs reset signal <b>440</b>, and update signal <b>450</b>. Update register <b>408</b> outputs enable signals <b>434</b> to TLM decode <b>404</b> and optional configuration signals <b>462</b> to optional link configuration circuit <b>418</b>.</div>
</li> <li> <para-num num="[0051]"> </para-num> <div class="description-line" id="p-0047" num="0051">Multiplexer <b>412</b> receives data signal <b>460</b> from link shift register <b>406</b> and TDI signal <b>426</b>. Multiplexer <b>412</b> outputs data <b>432</b> to multiplexer <b>416</b>. Multiplexer <b>414</b> receives data signal <b>456</b> from multiplexer <b>416</b> and data signal <b>458</b> from AISR <b>410</b>. Multiplexer <b>414</b> outputs data to TDO <b>428</b>. Multiplexer <b>416</b> receives the TAPs TDO<b>1</b>-<b>4</b> outputs <b>430</b> and data output <b>432</b> from multiplexer <b>412</b>. Multiplexer <b>416</b> outputs data <b>456</b> to multiplexer <b>414</b>.</div>
</li> <li> <para-num num="[0052]"> </para-num> <div class="description-line" id="p-0048" num="0052">Optional link configuration circuit <b>418</b> inputs TDI <b>426</b>, configuration control signals <b>462</b>, and TAP TDO signals <b>430</b>. Link configuration circuit <b>418</b> outputs TAP TDI <b>1</b>-<b>4</b> signals <b>464</b>. The circuit <b>418</b> serves to programmably connect, in response to control signals <b>462</b>, TDI <b>426</b> to one of the TDI<b>1</b>-<b>4</b> TAP inputs. To simplify the following description, it will be assumed that TDI <b>426</b> will be connected to all TDI<b>1</b>-<b>4</b> TAP inputs. The Whetsel paper and application Ser. No. 08/918,872 describe use of TDI linking circuits like that of circuit <b>418</b>.</div>
</li> <li> <para-num num="[0053]"> </para-num> <div class="description-line" id="p-0049" num="0053">The operational description of the <figref idrefs="DRAWINGS">FIG. 2</figref> and <figref idrefs="DRAWINGS">FIG. 4</figref> TLM circuits is best understood by initializing the TLM using a reset input from gate <b>430</b>. In response to the reset input, the TAP state machine <b>402</b> is reset. When reset, TAP state machine <b>402</b> outputs a reset signal <b>440</b> to reset the TLM decode <b>404</b>, link shift register <b>406</b>, link update register <b>408</b>, and all TAPs <b>1</b>-<b>4</b> connected to the TLM as shown in <figref idrefs="DRAWINGS">FIG. 2</figref>. The reset signal <b>440</b> also resets the AISR <b>410</b> via bus <b>444</b> to a code that is input to TLM decode <b>404</b> via signal <b>433</b>. Following reset, link update register <b>408</b> outputs enable signals <b>434</b> to TLM decode <b>404</b> and enable TAP<b>1</b> of <figref idrefs="DRAWINGS">FIG. 2</figref> to be the only TAP, external of the TLM, enabled and connected to the test pins of the integrated circuit, via the TLM. The TLM's TAP state machine <b>402</b> (TAPO of <figref idrefs="DRAWINGS">FIG. 2</figref>) is also enabled and connected to the test pins so that it can track the state of the test pins to know what 1149.1 operation is being performed.</div>
</li> <li> <para-num num="[0054]"> </para-num> <div class="description-line" id="p-0050" num="0054">During an 1149.1 data scan operation, TAP <b>1</b> receives control from TMS<b>1</b> and TCK<b>1</b> from the TLM to input data from TDI <b>426</b> and shift the data through a data register (TAP<b>1</b>'s Bypass register) to TAP<b>1</b>'s TDO<b>1</b> output <b>430</b>. The TDO<b>1</b> output <b>430</b> passes through TLM multiplexers <b>416</b> and <b>414</b> to be output on TDO <b>428</b>. During this 1149.1 data scan operation, no data is input to the link shift register <b>406</b> from TDI <b>426</b> since the TLM decode <b>404</b> is disabled by the AISR <b>410</b> reset code input <b>433</b> from responding to TAP state machine <b>402</b> control bus <b>436</b> to output shift enable signals <b>452</b> to the link shift register <b>406</b>.</div>
</li> <li> <para-num num="[0055]"> </para-num> <div class="description-line" id="p-0051" num="0055">During an 1149.1 instruction scan operation, TAP <b>1</b> receives control from TMS<b>1</b> and TCK<b>1</b> from the TLM to input data from TDI <b>426</b> and shift the data through its instruction register to TAP<b>1</b>'s TDO<b>1</b> output <b>430</b>. The TDO<b>1</b> output <b>430</b> passes through multiplexers <b>416</b> to be input to AISR <b>410</b>, is shifted through AISR <b>410</b> to be output on TDO <b>428</b>, via multiplexer <b>414</b>. During this 1149.1 instruction scan operation the need to add bits to the 1149.1 instruction scan frame is seen from the fact that the AISR <b>410</b> lies in series with the TAP<b>1</b> instruction register. With a two bit shift register AISR <b>410</b>, as shown in this example, two bits will be added or augmented to the length of the instruction scan frame to allow shifting a two bit code into the AISR <b>410</b> during instruction scan operations.</div>
</li> <li> <para-num num="[0056]"> </para-num> <div class="description-line" id="p-0052" num="0056">Prior art 1149.1 instruction or data scan operations comprise the steps of capturing data into an instruction or data register, shifting data through an instruction or data register, and updating data from an instruction or data registers. During the above mentioned instruction scan operation, the AISR <b>410</b> captures a two bit <b>10</b> input <b>454</b> code, then performs the shift and update steps. This two bit <b>10</b> input code enables the AISR to output a leading 1 then 0 bit during the shift step to be compatible with what conventional 1149.1 instructions register must output to comply with the 1149.1 standard. Thus the two bit <b>10</b> input code is provided for compatibility with 1149.1. If 1149.1 did not have this initial 1 then 0 bit shift out requirement, the ASIR <b>410</b> could be implemented as a single bit shift register.</div>
</li> <li> <para-num num="[0057]"> </para-num> <div class="description-line" id="p-0053" num="0057">The two bits shifted into the AISR <b>410</b> during the above mentioned 1149.1 instruction scan operation must provide at least two codes, a TAP scan code and a TLM scan code. The TAP scan code operates to enable scan operations through the currently selected TAP from TDI <b>426</b> to TDO <b>428</b>, and disable scan operations through the TLM's link update register from TDI <b>426</b> to TDO <b>428</b>. The TLM scan code operates to enable scan operations through the TLM's link shift register from TDI <b>426</b> to TDO <b>428</b> and disable scan operations through the currently selected TAP from TDI <b>426</b> to TDO <b>428</b>. During reset, the AISR <b>410</b> is reset to the TAP scan code and the link update register <b>408</b> is reset to connect TAP<b>1</b> to the test pins. The reset condition of AISR <b>410</b> and link update register <b>408</b> are input to TLM decode <b>404</b> via busses <b>433</b> and <b>434</b>, respectively, for decoding.</div>
</li> <li> <para-num num="[0058]"> </para-num> <div class="description-line" id="p-0054" num="0058">If, following the above mentioned 1149.1 instruction scan operation, the AISR <b>410</b> was loaded with a TAP scan code, no change would occur in the TLM or in the current selection of TAP<b>1</b> being the TAP connected to the integrated circuits test pins. If a TAP scan code was loaded, the above described 1149.1 data and instruction scan access operations of TAP<b>1</b> could be repeated. However, if the AISR <b>410</b> was loaded with a TLM scan code during the above mentioned 1149.1 instruction scan operation, the following TLM changes would occur. First, scan access to the currently selected TAP<b>1</b> would be disabled by the TCK<b>1</b>-<b>4</b> and TMST-<b>4</b> outputs of gates <b>470</b> and <b>420</b>, respectively, being gated low by TCKEN <b>468</b> and TMSEN<b>1</b>-<b>4</b> signals <b>466</b> from the TLM decode <b>404</b>. Second, scan access to the link shift register <b>406</b> and link update register <b>408</b> would be enabled by the shift enable signals <b>452</b> and update signal <b>450</b> from TLM decode <b>404</b>. These changes in the TLM would occur in response to the instruction register update step which occurs at the end of the above mentioned 1149.1 instruction scan operation.</div>
</li> <li> <para-num num="[0059]"> </para-num> <div class="description-line" id="p-0055" num="0059">Assuming a TLM scan code were loaded into the AISR <b>410</b>, a subsequent 1149.1 data register scan operation would cause the TAP state machine <b>402</b> to output control <b>436</b> to cause control <b>452</b> to enable data on TDI <b>426</b> to be shifted through link shift register <b>406</b> to TDO <b>428</b>, via multiplexers <b>412</b>, <b>416</b>, and <b>414</b>. Following this data shift operation, update control on bus <b>436</b> from TAP state machine <b>402</b> will cause control <b>450</b> from TLM decode <b>404</b> to update data shifted into the link shift register <b>406</b> into the link update register <b>408</b>. Following the update operation, the enable outputs <b>434</b> from the link update register are input to the TLM decode <b>404</b> to bring about a new desired TAP connection arrangement to the integrated circuits test pins. Also, in response to the update operation the AISR is reset via bus <b>444</b> to contain the TAP scan code to enable the new TAP connection arrangement to be immediately available for 1149.1 instruction and data scan operations, via the test pins.</div>
</li> <li> <para-num num="[0060]"> </para-num> <div class="description-line" id="p-0056" num="0060">If, while the AISR <b>410</b> contained the above mentioned TLM scan code, an 1149.1 instruction scan operation were performed instead of an 1149.1 data register scan operation, data on TDI <b>426</b> would pass through multiplexers <b>412</b> and <b>416</b> to be shifted through the AISR <b>410</b> and output to TDO <b>428</b>, via multiplexer <b>414</b>. In this case the current TLM configuration would be maintained, since the link shift and update registers do not receive data register scan control on the shift enable <b>452</b> and update <b>450</b> control signals to shift and update data from TDI <b>426</b> and TDO <b>428</b>. Since the AISR <b>410</b> is included in the TDI <b>426</b> and TDO <b>428</b> path through the TLM during instruction scans, it can be loaded with either a TLM or TAP scan code. If a TAP scan code is loaded into the AISR <b>410</b>, the current TAP configuration is again available for 1149.1 scan access, via the integrated circuits test pins. During instruction scan operations with the AISR containing a TLM scan code, the TAPs <b>1</b>-<b>4</b> are disabled and do not respond to the instruction scan operation, as mentioned above for data register scan operations with the AISR <b>410</b> containing the TLM scan code. If desired an instruction register may be implemented in the TLM in place of directly wiring TDI <b>426</b> to input <b>1</b> of multiplexer <b>412</b>. If implemented, the instruction register's input is connected to the node where TDI <b>426</b> inputs to the linking shift register <b>406</b> and the instruction register's output is connected to input <b>1</b> of multiplexer <b>412</b>, i.e. the instruction register will be in parallel with the linking shift register <b>406</b>. Providing an instruction register in the TLM enables it to have instruction capabilities that may provide useful expanded TLM capabilities.</div>
</li> <li> <para-num num="[0061]"> </para-num> <div class="description-line" id="p-0057" num="0061">It is important to note that other AISR codes may be defined for use by the TLM of the present invention. For example, a TLM scan code-A may be defined to modify the behavior of the TLM to where 1149.1 instruction scan operations, occurring while the AISR contains the TLM scan code-A, shifts instruction data through the currently selected TAP instead of through the TLM as described above. In response to a TLM scan code-A, the TLM decode <b>404</b> would be configured to respond to 1149.1 instruction scan control outputs on bus <b>436</b> of TAP state machine <b>402</b> to enable the appropriate TCK<b>1</b>-<b>4</b> and TMS<b>1</b>-<b>4</b> signals to perform the instruction scan operation on the currently selected TAP. During the instruction scan operation, the link shift and update registers <b>406</b> and <b>408</b> are disabled by the TLM decode <b>404</b>. This mode of accessing the currently selected TAP during 1149.1 instruction scan operations occurring when the TLM is selected for 1149.1 data scan operations is consistent with the way the TLM of the Whetsel paper and patent application Ser. No. 08/918,872 behaves. Thus behavioral consistency is achieved between the two TLM types using a TLM scan code-A.</div>
</li> <li> <para-num num="[0062]"> </para-num> <div class="description-line" id="p-0058" num="0062">When the TLM is updated with a new TAP connection configuration, following the above mentioned data register scan operation, the newly selected TAP, say TAP<b>2</b>, is available for 1149.1 scan access via the test pins. The previously selected TAP<b>1</b> is disabled from 1149.1 scan access. Control input <b>446</b> to multiplexer <b>416</b> from TLM decode <b>404</b> will be set by the enable bus <b>434</b> output from link update register <b>408</b> to connect the TDO output of the newly selected TAP, for example TDO<b>2</b> will be selected for TAP<b>2</b>, TDO<b>3</b> for TAP<b>3</b>, and TDO<b>4</b> for TAP<b>4</b>.</div>
</li> <li> <para-num num="[0063]"> </para-num> <div class="description-line" id="p-0059" num="0063">The above process of augmenting instruction scans to a currently selected TAP to include a TLM scan code to be loaded into the AISR <b>410</b> can be repeated whenever a new TAP connection to the test pins is required to meet a test or emulation access need. It is important to note that only 1149.1 instruction scan frames need to be augmented to include the AISR code, and not 1149.1 data scan frames. Therefore, the present invention does not require modification of test data scan frames (TDL), which facilitates reuse of the test data scan frames.</div>
</li> <li> <para-num num="[0064]"> </para-num> <div class="description-line" id="p-0060" num="0064">The basic function of the TLM of the present invention to control and access embedded TAPs within integrated circuits is very similar to the TLM described in the Whetsel paper and patent application Ser. No. 08/918,872. The novelty introduced by the TLM of the present invention lies in its use of an AISR <b>410</b> and the augmentation of instruction scan frames to include the AISR <b>410</b> codes. The TLM of the Whetsel paper and patent application Ser. No. 08/918,872 used additional TAP communication signals, referred to as select and enable signals, to achieve control and access of embedded TAPs. The TLM of <figref idrefs="DRAWINGS">FIG. 4</figref> does not require use of these additional TAP signals. Thus the TLM of <figref idrefs="DRAWINGS">FIG. 4</figref> may be used with standard, non-modified 1149.1 TAPs.</div>
</li> <li> <para-num num="[0065]"> </para-num> <div class="description-line" id="p-0061" num="0065">The TLM of the present invention provides a process for changing TAP connections comprising the steps of; (1) performing an 1149.1 instruction scan operation augmented with a code for accessing the TLM, (2) performing an 1149.1 data scan operation to load the TLM with a new TAP connection configuration, and (3) performing 1149.1 instruction and data scan operations on the new TAP connection.</div>
</li> <li> <para-num num="[0066]"> </para-num> <div class="description-line" id="p-0062" num="0066">Though the invention has been described with reference to a specific preferred embodiment thereof, many variations and modifications will immediately become apparent to those skilled in the art. It is therefore the intention that the appended claims be interpreted as broadly as possible in view of the prior art to include all such variations and modifications.</div>
</li> </ul>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">5</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM57348070">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text"> <b>1</b>. An integrated circuit comprising:
<div class="claim-text">A. a TD<b>1</b> input lead, a TCK input lead, a TMS input lead, and a TDO output lead;</div> <div class="claim-text">B. a TD<b>11</b> output lead, a TCK<b>1</b> output lead, a TMS<b>1</b> output lead, and a TDO<b>1</b> input lead;</div> <div class="claim-text">C. TAP linking module circuitry including:
<div class="claim-text">i. a register coupled between the TDO input lead and the TDO output lead and having an Enable1 output; and</div>
<div class="claim-text">ii. gating circuitry having inputs coupled to the TCK input lead and the TMS input lead, enable1 inputs coupled to the Enable1 output, and outputs coupled to the TCK<b>1</b> output lead and the TMS<b>1</b> output lead.</div>
</div> </div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text"> <b>2</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which the TAP linking module circuitry includes decode circuitry having inputs connected to the Enable1 output of the register and enable outputs connected to the enable inputs of the gating circuitry.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text"> <b>3</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which the TAP linking module circuitry includes a TAP state machine having inputs connected to the TCK input lead and to the TMS input lead, and having state outputs coupled to the register.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text"> <b>4</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which the TAP linking module circuitry includes multiplexer circuitry having an input coupled to the TDO<b>1</b> input lead and an output coupled to the TDO output lead.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text"> <b>5</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref> in which the register includes an Enable2 output, and the gating circuitry includes enable2 inputs coupled to the Enable2 output, and outputs coupled to a TCK<b>2</b> output lead and a TMS<b>2</b> output lead.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    