
    <html>
        <body>
            <search-app>
                <article class="result" itemscope="" itemtype="http://schema.org/ScholarlyArticle">
    <h1 itemprop="pageTitle">US10049716B2 - Refresh request queuing circuitry 
        - Google Patents</h1><section itemprop="abstract" itemscope="">
<h2>Abstract</h2>
<div html="" itemprop="content"><abstract lang="EN" load-source="patent-office" mxw-id="PA235312633">
<div class="abstract" id="p-0001" num="0000">An apparatus and system associated with memory are disclosed herein. In various embodiments, an apparatus may include first circuitry to determine a number of queued pending refresh requests for a memory bank based on a comparison of a count from a refresh-request counter to a count from a refresh-address counter; and second circuitry to set a refresh flag in response to a determination that the number of queued pending refresh requests exceeds a predetermined number. Other embodiments may be disclosed and/or claimed.</div>
</abstract>
</div>
</section><section itemprop="description" itemscope="">
<h2>Description</h2>
<div html="" itemprop="content"><div class="description" lang="EN" load-source="patent-office" mxw-id="PDES139706856">
<heading id="h-0001">CROSS-REFERENCE TO RELATED APPLICATION</heading>
<div class="description-paragraph" id="p-0002" num="0001">This application is a continuation of application Ser. No. 13/857,627, filed Apr. 5, 2013, entitled REFRESH REQUEST QUEUING CIRCUITRY, which will issue on Aug. 25, 2015 as U.S. Pat. No. 9,117,541, and which is a continuation of application Ser. No. 13/436,381, filed Mar. 30, 2012, entitled CONCURRENT MEMORY BANK ACCESS AND REFRESH REQUEST QUEUING , now U.S. Pat. No. 8,417,883, which is a division of prior application Ser. No. 12/635,543, filed Dec. 10, 2009, entitled CONCURRENT MEMORY BANK ACCESS AND REFRESH RETIREMENT, now U.S. Pat. No. 8,151,044, which is a continuation of prior application Ser. No. 11/085,770, filed Mar. 21, 2005, entitled INTEGRATED CIRCUIT RANDOM ACCESS MEMORY CAPABLE OF AUTOMATIC INTERNAL REFRESH OF MEMORY ARRAY, now U.S. Pat. 7,640,391, which itself is a Continuation Application of U.S. Ser. No. 09/999,563, filed on Nov. 15, 2001, entitled INTEGRATED CIRCUIT RANDOM ACCESS MEMORY CAPABLE OF AUTOMATIC INTERNAL REFRESH OF MEMORY ARRAY, now U.S. Pat. No. 6,871,261, which is a continuation-in-part of U.S. patent application “MERGING WRITE CYCLES BY COMPARING AT LEAST A PORTION OF THE RESPECTIVE WRITE CYCLE ADDRESSES,” U.S. Ser. No. 09/503,048 filed Feb. 12, 2000, now U.S. Pat. No. 6,356,485, having Robert J. Proebsting listed as inventor, which application claims the benefit of U.S. provisional patent application “HIGH PERFORMANCE DYNAMIC RANDOM-ACCESS MEMORY ARRAY ARCHITECTURE AND ASSOCIATED SUPPORTING CIRCUITRY,” U.S. Ser. No. 60/120,032, filed Feb. 13, 1999, having Robert J. Proebsting listed as inventor. The above applications are hereby incorporated by reference in their entireties for all purposes.</div>
<heading id="h-0002">BACKGROUND OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0003" num="0002">Field of the Invention</div>
<div class="description-paragraph" id="p-0004" num="0003">The present invention relates to semiconductor memories, and particularly to architecture and organization of a dynamic random-access memory array having automatic internal refreshing of the memory array.</div>
<div class="description-paragraph" id="p-0005" num="0004">Description of Related Art</div>
<div class="description-paragraph" id="p-0006" num="0005">Semiconductor random-access memory devices or sub-systems using arrays of dynamic memory cells (e.g., 1-transistor/1-capacitor (1T/1C) cells) have consistently provided greater density and lower cost per bit than those using static memory cells (e.g., 6-transistor (6T) cells, or 4-transistor/2-resistor (4T/2R) cells). However, such dynamic random-access memory arrays have historically had lower operational frequencies and longer read access times when compared to static random-access memory arrays. Consequently, system designers have typically chosen dynamic memory arrays (e.g., commercially available dynamic random access memories, or DRAMs) when high density and low cost are required, such as for CPU main memory applications. Conversely, designers have typically chosen static memory arrays when the highest possible performance is required, such as for cache memory and high speed buffer applications. Examples of static memory array devices or sub-systems include commercially available static random access memories (SRAMs) and CPU-resident on-board cache memory sub-systems.</div>
<div class="description-paragraph" id="p-0007" num="0006">The reasons often cited for the lower performance of dynamic memory arrays include the destructive sensing of all memory cells common to the addressed word line (encountered in virtually all dynamic memory arrays) and the consequential need to restore data back into each sensed memory cell during the active cycle, the need to equilibrate bit lines and various other differential nodes and to precharge various circuit nodes between active cycles, and the requirement for periodic refreshing of all dynamic memory cells.</div>
<div class="description-paragraph" id="p-0008" num="0007">The need for ever-increasing memory performance at reasonable cost continues unabated. It is being driven by numerous advances toward higher frequency and higher speed applications. For example, the increasing bandwidth demands of computer networking and the internet, the increasing speeds of commercially available processors, and the proliferation of high-frequency wireless communication systems are all driving the need for higher performance memory sub-systems.</div>
<div class="description-paragraph" id="p-0009" num="0008">In addition to the increased speed requirements of memory systems, there is also an increasing need for low cost memory made possible by small memory cells. The smallest known read/write memory cell is the one transistor/one capacitor dynamic memory cell. Therefore, there is an unfilled need for memory devices that combine the cost advantages of the dynamic memory cell with the performance normally found in memories incorporating larger more expensive SRAM cells. In particular, a refreshing technique and method is needed that meets the goals for memory devices.</div>
<heading id="h-0003">SUMMARY OF THE INVENTION</heading>
<div class="description-paragraph" id="p-0010" num="0009">In accordance with the present invention, a random access memory integrated circuit automatically refreshes banks in a dynamic memory array without requiring an on-board cache memory, thereby using less space on the integrated circuit as compared to the space that would be required if a cache memory were to be included. The disclosed random access memory integrated circuit is responsive to an externally supplied clock input and includes a dynamic memory array configured in one or more banks, wherein the array requires periodic refreshing to maintain data. The random access memory integrated circuit further includes one or more refresh control circuits generating refresh requests inside the random access memory integrated circuit. The dynamic memory array is configured to receive read and write access requests that have priority over pending refresh requests. Any pending refresh requests are retired on a clock cycle not requiring an access of the dynamic memory array. Further, the refresh completes in one clock cycle. The read access requests initiate an access to the dynamic memory array without first determining whether data is available from outside the dynamic memory array, (i.e., from an internal cache memory) thereby avoiding a delay associated with such determination.</div>
<div class="description-paragraph" id="p-0011" num="0010">In one embodiment, each of the one or more banks has a one to one correspondence with one of the one or more refresh control circuits, each refresh control circuit controlling refresh of the bank coupled thereto. In embodiments containing two or more banks, during a clock cycle in which one bank of the dynamic memory array executes a read or a write operation, at least another bank of the dynamic memory array executes a read or a write operation, at least another bank may simultaneously execute a refresh operation. Also, according to an embodiment, during a clock cycle in which one bank executes a read or a write operation, two other banks may simultaneously execute refresh operations.</div>
<div class="description-paragraph" id="p-0012" num="0011">According to a further embodiment containing two or more banks, a separate address bus is coupled to each bank, each of the banks receiving an independent address, wherein at least one bit of the read or write access address is used to select the bank for read or write access. The bit is selected from among low order address bits on the random access memory integrated circuit. In one embodiment, the bit is selected such that the bit changes state frequently. Further, the choice of bits of the address allows the banks to share read and write accessing such that no one bank should require excessive accessing thereby denying that bank the opportunity to meet refresh requirements. Excessive accessing includes accessing the same bank more than 255 read or write cycles of each 256 clock cycles, averaged over many thousands of clock cycles.</div>
<div class="description-paragraph" id="p-0013" num="0012">According to one embodiment, the refresh control circuit includes at least one counter, one refresh request being generated each time the counter counts a predetermined number of external clock cycles, the refresh requests being generated independent of an elapsed time counter.</div>
<div class="description-paragraph" id="p-0014" num="0013">According to another embodiment, the random access memory integrated circuit outputs a refresh flag to indicate that internal refresh requirements are not being met. The flag is output after a predetermined number of refresh requests to any bank is queued.</div>
<div class="description-paragraph" id="p-0015" num="0014">Referring to each refresh control circuit, in one embodiment, each refresh control circuit includes a wrap around refresh request counter that increments once for each refresh request and a wrap around refresh address counter. Each wrap around refresh address counter provides the row address to be refreshed and increments in response to a refresh of the bank associated thereto. An inequality between the count in the wrap around refresh request counter and the count in the wrap around refresh address counter indicates a pending refresh requirement for that bank.</div>
<div class="description-paragraph" id="p-0016" num="0015">Still referring to the refresh control circuit, in another embodiment, each wrap around refresh request counter input within its respective refresh control circuit is coupled to receive a unique output from the decoder; the decoder input is coupled to receive an output from a wrap around clock cycle counter. Every predetermined number of clock cycles, the wrap around clock cycle counter in combination with the decoder cause the decoder to sequentially toggle one of a plurality of outputs. Each decoder output is configured to toggle once at a particular count of the wrap around clock cycle counter, each output to be received by a respective one of the refresh control circuits. The particular counts are the predetermined number of clock cycles apart. The predetermined number of clock cycles is more than a maximum number of queued refresh requests queued in any one refresh control circuit for any bank. The maximum number of queued refresh requests in combination with the larger predetermined number of clock cycles prevent any worst case sequence of external read or write cycles from causing more than two banks to refresh on the same clock cycle.</div>
<div class="description-paragraph" id="p-0017" num="0016">In one embodiment, the random access memory integrated circuit outputs a refresh flag to indicate that internal refresh requirements are not being met. The flag is output after a predetermined number of refresh requests are queued. For example, the predetermined number of queued refresh requests may be at least two. In one embodiment, the predetermined number may be almost as large as the predetermined number of clock cycles separating the toggling of individual decoder outputs.</div>
<div class="description-paragraph" id="p-0018" num="0017">In one embodiment, each refresh control circuit includes a wrap around refresh request counter configured to increment periodically, for example, according to a number of clock cycles. The refresh control circuit further includes a wrap around refresh address counter configured to provide an address to be refreshed. The wrap around refresh address counter increments once every time a refresh operation is carried out. Further, the refresh control circuit includes a comparator coupled to compare counts associated with addresses received from the wrap around refresh request counter and the wrap around refresh address counter. The comparator establishes a pending refresh upon detecting an inequality in the counts. The refresh control circuit further includes a circuit that, on any given cycle, determines a need or lack of need for each bank to do a memory access. If no memory access is required, and the comparator indicates one or more pending refreshes, then that bank associated with the refresh control circuit will execute one refresh cycle. Further, a row address multiplexer coupled to the bank chooses a refresh address as the row address for which the bank will execute a refresh. Thereafter, the wrap around refresh address counter increments. In one embodiment, the wrap around refresh request counter is permitted to count a plurality of counts ahead of the wrap around refresh address counter, thereby allowing queuing of a plurality of refresh requests. The wrap around refresh request counter may be one of a plurality of wrap around refresh request counters within the random access memory integrated circuit, one for each bank of memory, the plurality of wrap around refresh request counters incrementing at different times to stagger refresh operations of the plurality of banks whereby the noise generated is reduced from that which would occur if more banks refreshed simultaneously. The count of each wrap around refresh address counter provides an address to its respective bank, the address identifying a row of memory in that bank to be refreshed.</div>
<div class="description-paragraph" id="p-0019" num="0018">In one embodiment, each wrap around refresh request counter within each refresh control circuit receives an input from a decoder, the decoder output toggling once in response to a specific count of a wrap around clock cycle counter. The specific count of the wrap around clock cycle counter allows the wrap around refresh request counter of that bank of the dynamic memory array to increment upon reaching the specific count. Each wrap around refresh request counter within each refresh control circuit receives a respective one of a plurality of the decoder outputs and increments its count when its respective decoder output toggles. Each refresh control circuit may include a wrap around refresh address counter incrementing in response to a refresh of the bank associated thereto, an inequality between the count in the wrap around refresh request counter and the count in the wrap around refresh address counter associated with a same bank indicating a pending refresh requirement for that bank. The wrap around refresh address counter divides by a number equal to the number of refresh cycles (such as 256) required to refresh all rows in a bank.</div>
<div class="description-paragraph" id="p-0020" num="0019">Another embodiment of the present invention is directed to a method of refreshing a dynamic memory array contained in a dynamic memory circuit, the dynamic memory array including one or more banks subject to a plurality of read and write accesses, the banks configured to hold data without requiring data duplication outside the banks other than data requested and read from the dynamic memory array in one of the read accesses which data is not yet output from the dynamic memory circuit. The method includes determining within the circuit containing the dynamic memory circuit when one of the banks within the dynamic memory circuit requires a read or write access, and, if so, initiating an access to the dynamic memory without a delay associated with determining whether the data is available from a location outside the dynamic memory, or whether there are any pending refresh requests, the read or write access having priority over any pending refresh requests. Further, the method includes determining within the circuit containing the dynamic memory circuit when one of the banks within the dynamic memory array requires a refresh and executing that refresh if no read or write access is needed.</div>
<div class="description-paragraph" id="p-0021" num="0020">The method further includes retiring within one clock cycle one pending refresh request to one or more of the one or more banks having pending refresh requests if that bank(s) does not require an access on that clock cycle.</div>
<div class="description-paragraph" id="p-0022" num="0021">One or more address bits choose the bank to be read or written. The method includes choosing a low order address bit, (e.g., a least significant bit, a penultimate least significant bit, or bits that toggle frequently) to select the bank to be read or written. The method also includes queuing refresh requests in a refresh control circuit coupled to each bank. At least another embodiment includes a refresh control circuit that generates refresh requests independent from an elapsed time determination, each refresh request generated as a function of number of clock cycles received.</div>
<div class="description-paragraph" id="p-0023" num="0022">At least one embodiment of the method includes simultaneously performing access operations and refresh operations on different banks during the same clock cycle. Each refresh control circuit includes a counter configured to increment to reflect a refresh request, the incrementing occurring such that the counter coupled to only one of these banks increments on any given clock cycle. Further, an embodiment limits the number of banks simultaneously performing access operations and refresh operations to not more than three banks to prevent corruption of data by power supply noise.</div>
<div class="description-paragraph" id="p-0024" num="0023">The present invention may be better understood, and its numerous objects, features, and advantages made even more apparent to those skilled in the art by referencing the detailed description and accompanying drawings of the embodiments described below.</div>
<description-of-drawings>
<heading id="h-0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<div class="description-paragraph" id="p-0025" num="0024"> <figref idrefs="DRAWINGS">FIG. 1</figref> is a block diagram of a memory device incorporating a dynamic memory array that provides an exemplary embodiment for describing the features and advantages of the present invention.</div>
<div class="description-paragraph" id="p-0026" num="0025"> <figref idrefs="DRAWINGS">FIG. 2</figref> is a flow diagram describing a refresh method according to an embodiment of the present invention.</div>
</description-of-drawings>
<heading id="h-0005">DETAILED DESCRIPTION OF THE INVENTION</heading>
<div class="description-paragraph" id="h-0006" num="0000">Overview</div>
<div class="description-paragraph" id="p-0027" num="0026">An embodiment of the present invention is directed to a memory device including internal refresh control circuitry for automatically performing refresh of the memory array without user intervention and almost always without access interruption. A separate refresh control circuit is provided for each memory bank, each control being configured to execute a refresh operation, for its respective memory bank, during the first available cycle following a refresh request which request occurs once every, for example, 256 external clock cycles.</div>
<div class="description-paragraph" id="p-0028" num="0027">Unlike most earlier devices, an embodiment is directed to “hidden” refresh cycles that can fully complete in just one clock cycle, allowing a read or write access cycle to begin in the same memory bank on the very next clock cycle, if required, in accordance with a next command and address received. Thus, even if the memory bank is free for only one cycle, a hidden refresh operation can be fully performed and the memory bank ready on the very next cycle to accept an external read or write cycle with full confidence. This makes hidden refresh cycles possible totally under internal control, with no user interaction, because there is no risk that an external cycle will be received that cannot be immediately carried out because the memory bank is still busy performing an internal refresh cycle. For the same reason, there is no need for a “busy” signal to alert the user when an internal refresh cycle is in progress.</div>
<div class="description-paragraph" id="p-0029" num="0028">Referring to <figref idrefs="DRAWINGS">FIG. 1</figref>, there are shown respective counters such as wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) within each refresh control circuit <b>150</b>(<b>0</b>:<b>3</b>), the inputs to the respective wrap around refresh request counters being offset so that every 64 external (clock) cycles one of the four memory banks (<b>0</b>:<b>3</b>) adds “1” to its number of queued or pending refresh requests. Whenever the number in the queue exceeds zero, that memory bank attempts a refresh on every cycle. Therefore, on the first available cycle after the queue is incremented, the request is retired (i.e., the refresh cycle is performed) and the count in the queue is decremented. No further refresh requests are pending in the queue when it decrements to its normal state of zero. The number of queued refresh requests for a bank is actually the number of counts that the wrap around refresh request counter <b>120</b>(<b>0</b>:<b>3</b>) is ahead of a wrap around refresh address counter <b>128</b>(<b>0</b>:<b>3</b>). For every 256 external clock cycles, as long as a memory bank is free for just one cycle, a hidden refresh can be performed without having the queued number of refresh requests increase, except momentarily. In the memory device embodiment described, two particular address bits (e.g., the A<b>2</b> and A<b>1</b> bit) choose which memory bank is addressed (in one particular implementation, the least significant bit (LSB), address bit A<b>0</b>, chooses between the upper or lower 36-bit word of a 72-bit data field accessed from a single memory bank).</div>
<div class="description-paragraph" id="p-0030" num="0029">In an exemplary embodiment, a user arranges the significance of the external address bits to use the same significance as the memory device; then, for any reasonable addressing sequence which accesses small or large blocks of memory, or even those which randomly address various addresses, the lower significance address bits are almost assuredly changing or toggling frequently. Consequently, as the memory device responds to the particular sequence of addresses, all four memory banks (<b>0</b>:<b>3</b>) are likely addressed with some reasonable frequency (thus ensuring that all (other) memory banks are free reasonably often, such as, on average, 192 out of 256 cycles if all cycles are read or write cycles, and even more if some cycles are idle or burst cycles). The likelihood of a single memory bank being busy for 256 straight cycles is very low. Moreover, the likelihood of a single memory bank being busy for additional multiples of 256 straight cycles is extremely low.</div>
<div class="description-paragraph" id="p-0031" num="0030">A refresh request does not need to be retired before the next refresh request arrives. Up to 63 refresh requests may be placed into the refresh queue. A refresh flag is provided in the extremely unlikely event that the internal refresh for a particular memory bank gets very far behind its desired rate (i.e., if too many refresh requests are queued). If the refresh queue is nearly full, the refresh flag is asserted. For example, if a particular memory bank that previously had no queued refresh requests has not performed a refresh cycle in 62×256 external clock cycles (because all those cycles required a read or write access to that bank), the refresh flag is asserted. However, even if a memory bank gets seriously “behind” and has queued up many refresh requests, if the memory bank thereafter is free for more than one cycle out of every 256 external clock cycles, refresh requests will be retired from the queue faster than new ones will be added, and the device will eventually “catch up.” It is for this reason, along with the depth of the refresh queue, that the refresh flag is seldom, if ever, expected to be asserted (provided the user, for example, assigns the significance of the address bits as described).</div>
<div class="description-paragraph" id="p-0032" num="0031">In one embodiment, the refresh counters and control circuits are arranged to ensure that no more than three memory banks can perform an internal array operation at the same time (one performing a read or write cycle, and two each performing a hidden refresh cycle) to reduce the worst case current transients (i.e., power supply noise) that would occur if all four memory banks shown in <figref idrefs="DRAWINGS">FIG. 1</figref> (or more than four memory banks in other embodiments) were simultaneously active.</div>
<div class="description-paragraph" id="p-0033" num="0032">The choice of counting clock cycles to determine when to refresh, rather than elapsed time, has several advantages. First, it is easy to do. The clock exists and is always running (as required by the phase-locked delay line described in patent application Ser. No. 09/503,048, referenced above and incorporated herein for all purposes). Second, the refresh interval required for proper operation is more or less proportional to the operating cycle time. As the operating frequency increases (i.e., cycle time decreases), more minority carriers are injected into the substrate, increasing the leakage of the memory cells, thus decreasing the data retention time of the memory cells. Consequently, faster cycling (i.e., shorter cycle times) requires more frequent refreshing. Furthermore, another significant source of cell leakage is the sub-threshold conduction of the access transistors on unselected rows of memory cells. This sub-threshold conduction is significant only when the bit line (or complement bit line), to which the unselected memory cell is attached, is biased at VSS, which only occurs for a fixed time of about 2 ns per cycle. This component of memory cell leakage is directly proportional to frequency. Again, higher frequency operation requires more frequent refreshing.</div>
<div class="description-paragraph" id="h-0007" num="0000">Structure</div>
<div class="description-paragraph" id="p-0034" num="0033">Turning now to <figref idrefs="DRAWINGS">FIG. 1</figref> more particular embodiments of the above-described refresh system are described. <figref idrefs="DRAWINGS">FIG. 1</figref> shows a block diagram of a random access memory integrated circuit illustrating circuitry appropriate for the refresh operations described. Random access memory integrated circuit <b>100</b> includes input address block <b>102</b>, read/not write input block <b>103</b>, access request input block <b>104</b>, clock input block <b>105</b>, write address queue <b>110</b>, read/write address multiplexer <b>112</b>, input address bus <b>106</b>, master control block <b>114</b>, divide-by 256 wrap around clock cycle counter <b>116</b>, clock cycle count decoder <b>118</b>, refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>), and dynamic memory banks <b>140</b>(<b>0</b>:<b>3</b>). In one or more embodiments, the input address block <b>102</b>, read/not write input block <b>103</b>, access request input block <b>104</b>, and clock input block <b>105</b> receive signals from bonding pads.</div>
<div class="description-paragraph" id="p-0035" num="0034">Master control block <b>114</b> receives a clock signal from clock input block <b>105</b> and a variety of other control signals including a read/not write control from read/not write input block <b>103</b>, an access request input from access request input block <b>104</b>, and an input address via address bus <b>107</b>. The master control block <b>114</b> prioritizes the read or write access requests over pending memory refresh requests. Read access requests are initiated without first determining whether data is available from outside the dynamic memory array, e.g., from an internal cache memory, thus avoiding a delay associated with such determination. Address bus <b>106</b> couples the input address block <b>102</b> to write address queue <b>110</b> (whose function is described in U.S. patent application Ser. No. 09/503,048, incorporated herein for all purposes) and read/write address multiplexer <b>112</b>. Address bus <b>107</b> couples the read or write address output from address multiplexer <b>112</b> to refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>). Control bus <b>109</b> couples the master control <b>114</b> to the bank read/write/refresh controllers <b>120</b>(<b>0</b>:<b>3</b>).</div>
<div class="description-paragraph" id="p-0036" num="0035">Random access memory integrated circuit <b>100</b> further illustrates a plurality of dynamic memory banks <b>140</b>(<b>0</b>:<b>3</b>). Each of the dynamic memory banks <b>140</b>(<b>0</b>:<b>3</b>) includes a bank row decoder <b>130</b>(<b>0</b>:<b>3</b>), and a corresponding bank dynamic memory array <b>132</b>(<b>0</b>:<b>3</b>), respectively. Bank row address busses <b>145</b>(<b>0</b>:<b>3</b>) couple each of the dynamic memory banks (<b>140</b>(<b>0</b>:<b>3</b>) to a dedicated row address from a dedicated address multiplexer <b>126</b>(<b>0</b>:<b>3</b>). Refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>) periodically refresh dynamic memory arrays <b>140</b>(<b>0</b>:<b>3</b>) respectively, to maintain data.</div>
<div class="description-paragraph" id="p-0037" num="0036">The dynamic memory array, including each bank dynamic memory array <b>132</b>(<b>0</b>:<b>3</b>) within each dynamic memory bank <b>140</b>(<b>0</b>:<b>3</b>), receive read and write access requests. According to an embodiment, the read or write access requests have priority over pending refresh request. Further, one pending refresh request for a bank retires on a clock cycle not requiring an access of that dynamic memory bank. Refresh cycles, like access cycles, complete in a single clock cycle. The read access requests initiate an access to the dynamic memory array without first determining whether data is available from outside the dynamic memory array, thus avoiding a delay associated with such a determination. Because each memory bank <b>140</b>(<b>0</b>:<b>3</b>) has a dedicated refresh control circuit <b>150</b>(<b>0</b>:<b>3</b>), one dynamic memory bank may execute a memory bank access while other banks may simultaneously execute refresh operations.</div>
<div class="description-paragraph" id="p-0038" num="0037">Referring to <figref idrefs="DRAWINGS">FIG. 2</figref>, flow diagram <b>200</b> illustrates a method for refreshing a dynamic memory array when one (or more) of the banks in the dynamic memory array requires a refresh. During operation of a dynamic random access memory integrated circuit, such as that shown in <figref idrefs="DRAWINGS">FIG. 1</figref>, block <b>210</b> determines when a bank, such as dynamic memory banks <b>140</b>(<b>0</b>:<b>3</b>) within a dynamic memory array requires a refresh. Block <b>220</b> prioritizes read and write access requests over any pending refresh request. In particular, the read and write access requests initiating an access to the dynamic memory array occur without a delay associated with determining whether data is available from a location outside the dynamic memory array or whether refresh requests are pending. Block <b>230</b> shows that the random access memory integrated circuit selects the bank (if any) to be read or written according to predetermined bits of the access address. Block <b>240</b> shows that during any clock cycle in which a memory bank is not selected for a read or write operation, and in which that bank has one or more pending refresh requests, one refresh operation is executed.</div>
<div class="description-paragraph" id="p-0039" num="0038">Returning to <figref idrefs="DRAWINGS">FIG. 1</figref>, each dynamic memory bank of memory banks <b>140</b>(<b>0</b>:<b>3</b>) has an independent row address bus <b>145</b>(<b>0</b>:<b>3</b>). A memory bank requiring read or write access has the access address while other memory banks requiring refresh have their respective refresh addresses. The bank row address multiplexers <b>126</b>(<b>0</b>:<b>3</b>) use at least one bit of the read or write access address (and the access request) to select the bank for read or write access. The row address multiplexers <b>126</b>(<b>0</b>:<b>3</b>) receive the bit(s) of the address selecting dynamic memory banks <b>140</b>(<b>0</b>:<b>3</b>) for read or write access via address bus <b>107</b>. Preferably, one or more of the lower order address bits select the memory bank for read or write access in random access memory integrated circuit <b>100</b>. The address bit(s) that are used to select the memory bank <b>140</b>(<b>0</b>:<b>3</b>) for read or write access, in one embodiment, are designed to change frequently, so that excessive accessing does not prevent a memory bank from the meeting refresh requirements. Choosing a low-order address bit to select banks helps cause the memory banks <b>140</b>(<b>0</b>:<b>3</b>) to share read and write accessing to prevent one bank from receiving excessive accesses. Further, in random access memory integrated circuit <b>100</b>, excessive accessing of a single bank may include read or write accesses exceeding, on average, over 255 clock cycles of every 256 clock cycles averaged over many thousands of clock cycles. That is, on average, each bank is expected to be free to retire a refresh request on at least 75% (at most only one of the four banks is accessed in any cycle and at least three of four banks are free to be refreshed) of clock cycles but can keep up with its refresh requirements even if it is free only 0.4% (1 of 256) of clock cycles. As one of ordinary skill in the art appreciates, the percentages will change according to design requirements, such as the number of banks in the circuit. A refresh is required once every predetermined number of clock cycles. In one embodiment, the predetermined number of clock cycles is 256 cycles. The number of clock cycles is a function of the refresh requirements for the dynamic memory array. Wrap around clock cycle counter <b>116</b> generates a count that increments once for every clock cycle returning to count 0 after a predetermined number of clock cycles, for example, each 256 clock cycles. The number of clock cycles may be according to the number of rows in the dynamic memory array, and according to the refresh requirements of the dynamic memory array.</div>
<div class="description-paragraph" id="p-0040" num="0039">Decoder <b>118</b> receives the count generated by wrap around clock cycle counter <b>116</b>. Decoder <b>118</b> decodes counts 0, 64, 128 and 192 . Each of these four decoder outputs toggles once every 256 clock cycles, but to reduce peak power consumption and noise, they do not toggle on the same cycle. More particularly, in a preferred embodiment, the number of clock cycles separating the decoder counts from decoder <b>118</b> is more than the maximum number of queued refresh requests queued for any bank. By having the maximum number of queued refresh requests for any bank be less than the number of clock cycles between cycles incrementing the plurality of wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) of the various banks <b>140</b>(<b>0</b>:<b>3</b>), no matter how many banks are coupled to receive the toggled outputs from decoder <b>118</b>, no more than two banks will ever perform a refresh on a given cycle. That is, no sequence of external read or write cycles (that do not cause the refresh flag to remain asserted for more than a few cycles) can cause more than two banks to refresh on the same clock cycle.</div>
<div class="description-paragraph" id="p-0041" num="0040">In an embodiment, each of the refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>) is coupled to receive its respective output from decoder <b>118</b>. The refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>) inputs (decoder outputs) toggle a predetermined number of clock cycle counter counts apart, the predetermined number being greater than the maximum number of refresh requests permitted to be queued in any one refresh control circuit <b>150</b>(<b>0</b>:<b>3</b>). In one embodiment, up to 62 refresh requests may be queued in any one refresh control circuit <b>150</b>(<b>0</b>:<b>3</b>). Refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>) generate refresh requests. Each refresh control circuit <b>150</b>(<b>0</b>:<b>3</b>) includes a read/write/refresh controller <b>120</b>, a wrap around refresh request counter <b>122</b>, a row address comparator <b>124</b>, a row address multiplexer <b>126</b>, and a wrap around refresh address counter <b>128</b>. Wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) generate one refresh request (increment one count) upon receiving an input from decoder <b>118</b>, the input being received at a particular count of wrap around clock cycle counter <b>116</b>. The wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) in the bank refresh control circuits <b>150</b>(<b>0</b>:<b>3</b>) increment at different times (in different cycles) to stagger the refresh operations of the banks <b>140</b>(<b>0</b>:<b>3</b>). The staggering of refresh operations generates less noise than if all of the memory banks refreshed simultaneously. The wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) increment in response to the respective refresh signals generated by decoder <b>118</b>. If it should ever occur (extremely unlikely) that a predetermined number of unsatisfied refresh request are queued in any bank, that bank refresh control circuit <b>150</b>(<i>n</i>) will generate a flag signal (not shown in <figref idrefs="DRAWINGS">FIG. 1</figref>) to indicate that internal refresh requirements are not being met. This flag is an output of random access memory integrated circuit <b>100</b>. In one embodiment, the predetermined number of queued refresh requests is greater than two, allowing more than one refresh request to be queued before the flag is generated.</div>
<div class="description-paragraph" id="p-0042" num="0041">Decoder <b>118</b> periodically toggles one of its outputs (<b>0</b>, <b>64</b>, <b>128</b>, <b>192</b>) to periodically generate refresh requests for its respective dynamic memory bank <b>140</b>. Wrap around refresh request counters <b>122</b>(<b>0</b>:<b>3</b>) each increment once for each refresh request to its respective dynamic memory bank <b>140</b>(<b>0</b>:<b>3</b>). For example, referring to dynamic memory bank (<b>1</b>) assume that a clock cycle causes wrap around cycle counter <b>116</b> to advance to count <b>64</b>. Wrap around refresh request counter <b>122</b>(<b>1</b>) increments to a new count for dynamic memory bank <b>140</b>(<b>1</b>).</div>
<div class="description-paragraph" id="p-0043" num="0042">The new count in bank <b>1</b> wrap around refresh request counter <b>122</b>(<b>1</b>) for now differs from the address (count) in bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>). Bank <b>1</b> row address comparator <b>124</b>(<b>1</b>) detects lack of equality and outputs a “refresh pending” signal to bank <b>1</b> read/write/refresh controller <b>120</b>(<b>1</b>). This “refresh pending” cycle will last until the first cycle for which bank <b>1</b> is not busy doing, for example, a (higher priority) read or write access. More particularly, the refresh is immediately performed if bank <b>1</b> is not otherwise occupied with a read or write cycle (i.e., a normal read or write cycle or a burst read or write cycle to an internally generated address to continue a burst read or write). If the memory bank <b>140</b>(<b>1</b>) happens to be busy with such a read or write cycle and is therefore unable to perform the refresh when requested, the request is queued and performed the first cycle that the memory bank is available (i.e., not executing a read or write cycle).</div>
<div class="description-paragraph" id="p-0044" num="0043">During the first such available cycle, the pending refresh will be retired. Specifically, bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>) provides the row address to be refreshed to bank <b>1</b> row address multiplexer <b>126</b>(<b>1</b>), bank <b>1</b> row address multiplexer <b>126</b>(<b>1</b>) then selects that address to place on bank <b>1</b> address bus <b>145</b>(<b>1</b>), and bank <b>1</b> read/write/refresh controller <b>120</b>(<b>1</b>) executes the refresh operation. After executing the refresh operation, bank <b>1</b> read/write/refresh controller <b>120</b>(<b>1</b>) increments bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>) to the next count (row address) to be refreshed in that bank (here, bank <b>1</b>).</div>
<div class="description-paragraph" id="p-0045" num="0044">With bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>) incrementing, the count of bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>) and the counts of bank <b>1</b> wrap around refresh request counter <b>122</b>(<b>1</b>) now match. Thus, bank <b>1</b> row address comparator <b>124</b>(<b>1</b>) outputs no present pending refresh requests.</div>
<div class="description-paragraph" id="p-0046" num="0045">In the very unlikely event that there are no available cycles to do the refresh (as when all cycles require bank <b>1</b> accesses), wrap around refresh request counter <b>122</b>(<b>1</b>) may get many counts ahead of bank <b>1</b> wrap around refresh address counter <b>128</b>(<b>1</b>). Then, the refresh requests may be retired in sequential cycles or otherwise as the lack of read/write activity to Bank <b>1</b> permits. If Bank <b>1</b> (or any bank) is so busy servicing access requests that fewer than one cycle per 256 (for example) clock cycles is available to retire refresh requests, and this condition continues until the count of wrap around refresh request counter <b>122</b>(<b>1</b>) is ahead of the count of wrap around refresh address counter <b>128</b>(<b>1</b>) by a large predetermined number of counts, then, a “refresh needed” flag (not shown) is raised by the row address comparator for that bank and by the random access integrated circuit <b>100</b> indicating that the circuit is not able to service its internal refresh requirements and that some cycles must soon be made available by the system that do not require read or write access (to Bank <b>1</b> in this case).</div>
<div class="description-paragraph" id="p-0047" num="0046">In general, a wrap around refresh address counter <b>128</b>(<i>n</i>) (the n represents any one of the functional blocks shown in the four memory bank circuits <b>0</b>:<b>3</b>, as each memory bank may perform refresh functions at different times) increments in response to a refresh of dynamic memory bank <b>140</b>(<i>n</i>). Row address comparator <b>124</b>(<i>n</i>) compares the count in the wrap around refresh request counter <b>122</b>(<i>n</i>) with the count in the wrap around refresh address counter <b>128</b>(<i>n</i>). When these counts are unequal, row address comparator <b>124</b>(<i>n</i>) generates a signal indicating a pending refresh requirement for dynamic memory bank <b>140</b>(<i>n</i>). The signal generated by row address comparator <b>124</b>(<i>n</i>) is received by read/write/refresh controller <b>120</b>(<i>n</i>). In addition, row address comparator <b>124</b>(<i>n</i>) may assert a refresh flag when the count of wrap around refresh request counter <b>122</b>(<i>n</i>) exceeds the count of wrap around refresh address counter <b>128</b>(<i>n</i>) by a predetermined number. Wrap around refresh address counter <b>128</b>(<i>n</i>) provides row address multiplexer <b>126</b>(<i>n</i>) with a row address for refresh. The output of row address multiplexer <b>126</b>(<i>n</i>) is coupled to an independent row address bus <b>145</b>(<i>n</i>) dedicated to dynamic memory bank <b>140</b>(<i>n</i>). Independent row address busses <b>145</b>(<i>n</i>) allow at least one bank to perform a refresh operation of a refresh address and another bank to perform an access operation of an access address in the same clock cycle.</div>
<div class="description-paragraph" id="p-0048" num="0047">The many aspects, features, and advantages of the present invention are conveyed herein by describing several exemplary embodiments of a high-performance dynamic random access memory (DRAM) memory device. Simplified block diagrams are shown to more easily communicate key concepts, features, or implementation details. One skilled in the art will recognize the many teachings of this disclosure and be able to apply these teachings to additional embodiments and, indeed, to other kinds of devices, as well, without departing from the teachings of this disclosure. Consequently, the scope of the invention should not be inferred as being limited by the exemplary embodiments described herein, but rather should be viewed as teaching in the art far greater than just these exemplary embodiments. Accordingly, other embodiments, variations, and improvements not described herein are not necessarily excluded form the scope of the invention.</div>
</div>
</div>
</section><section itemprop="claims" itemscope="">
<h2>Claims (<span itemprop="count">12</span>)</h2>
<div html="" itemprop="content"><div class="claims" lang="EN" load-source="patent-office" mxw-id="PCLM133277742">
<claim-statement>What is claimed is:</claim-statement>
<div class="claim"> <div class="claim" id="CLM-00001" num="00001">
<div class="claim-text">1. A method, comprising:
<div class="claim-text">incrementing a first refresh request count in response to receiving a refresh request for a first memory bank, wherein the first refresh address count increments for each refresh operation;</div>
<div class="claim-text">comparing the first refresh request count to a first refresh address count and outputting a first pending refresh signal if the first refresh request count and the first refresh address count differ; and</div>
<div class="claim-text">issuing a refresh command to complete a refresh of the first memory bank during one clock cycle in response to the first pending refresh signal.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00002" num="00002">
<div class="claim-text">2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising issuing the refresh command on a clock cycle when the first memory bank is not busy with an access operation.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00003" num="00003">
<div class="claim-text">3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said incrementing a first refresh request count occurs periodically.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00004" num="00004">
<div class="claim-text">4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising:
<div class="claim-text">incrementing a second refresh request count in response to receiving a refresh request for a second memory bank; and</div>
<div class="claim-text">comparing the second refresh request count to a second refresh address count and outputting a second pending refresh signal if the second refresh request count and the second refresh address count differ.</div>
</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00005" num="00005">
<div class="claim-text">5. The method of <b>4</b>, further comprising issuing a refresh command to the second memory bank in response to the second pending refresh signal.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00006" num="00006">
<div class="claim-text">6. The method of <b>5</b>, further comprising issuing the second refresh command to the second memory bank on a clock cycle when the second memory bank is not busy with an access operation.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00007" num="00007">
<div class="claim-text">7. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said incrementing a second refresh request count occurs periodically.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00008" num="00008">
<div class="claim-text">8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first refresh request count is periodically incremented according to a predetermined number of clock cycles.</div>
</div>
</div> <div class="claim"> <div class="claim" id="CLM-00009" num="00009">
<div class="claim-text">9. An apparatus, comprising:
<div class="claim-text">a plurality of counters; and</div>
<div class="claim-text">circuitry configured to:
<div class="claim-text">change a count of a first counter from the plurality of counters for each refresh request for a memory bank, wherein the change of the count of the first counter comprises an increment of the count of the first counter;</div>
<div class="claim-text">change a count of a second counter from the plurality of counters for each refresh operation for the memory bank, wherein the change of the count of the second counter comprises an increment of the count of the second counter;</div>
<div class="claim-text">compare a current value of the first counter to a current value of the second counter and output a pending refresh signal for the memory bank if the values differ; and</div>
<div class="claim-text">issue a refresh command to perform a single clock cycle refresh of the memory bank in response to the pending refresh signal.</div>
</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00010" num="00010">
<div class="claim-text">10. The apparatus of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the circuitry is further configured to issue the refresh command on a clock cycle if the memory bank is not busy with an access operation.</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00011" num="00011">
<div class="claim-text">11. The apparatus of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the memory bank comprises a first memory bank, and wherein the circuitry is further configured to:
<div class="claim-text">change a count of a third counter from the plurality of counters for each refresh request for a second memory bank;</div>
<div class="claim-text">change a count of a fourth counter from the plurality of counters for each refresh operation for the second memory bank; and</div>
<div class="claim-text">compare a current value of the third counter to a current value of the fourth counter and output a pending refresh signal for the second memory bank if the values differ.</div>
</div>
</div>
</div> <div class="claim-dependent"> <div class="claim" id="CLM-00012" num="00012">
<div class="claim-text">12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry is further configured to issue a refresh command to perform a single clock cycle refresh of the second memory bank in response to the pending refresh signal for the second memory bank.</div>
</div>
</div> </div>
</div>
</section>
                </article>
            </search-app>
        </body>
    </html>
    